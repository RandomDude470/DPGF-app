{"ast":null,"code":"import { catchError, map, of } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class DpgfService {\n  constructor(http) {\n    this.http = http;\n    this.url = 'http://127.0.0.1:5050/dpgf/';\n    this.token = localStorage.getItem('TOKEN');\n  }\n  getListOfLotsByDpgfId(id) {\n    return this.http.post(this.url + 'getListOfLots', {\n      _id: id\n    }, {\n      headers: {\n        'content-type': 'application/json',\n        'authorization': this.token\n      }\n    }).pipe(map(res => {\n      let record = res;\n      return record;\n    }), catchError(err => {\n      console.log(err.status);\n      return of(err.status);\n    }));\n  }\n  getDpgf(id) {\n    return this.http.post(this.url + 'getDpgf', {\n      _id: id\n    }, {\n      headers: {\n        'content-type': 'application/json',\n        'authorization': this.token\n      }\n    }).pipe(map(obj => {\n      return obj;\n    }), catchError(err => {\n      if (err.status == 400) {\n        return of(400);\n      } else {\n        return of(500);\n      }\n    }));\n  }\n  SaveDPGF(dpgf) {\n    let token = typeof localStorage.getItem('TOKEN') == 'string' ? localStorage.getItem('TOKEN') : '';\n    return this.http.post(this.url + 'updateDpgf', JSON.stringify(dpgf), {\n      headers: {\n        'content-type': 'application/json',\n        'authorization': token\n      }\n    }).pipe(map(() => {\n      return 200;\n    }), catchError(err => {\n      return of(err.status);\n    }));\n  }\n  CreateDpgfFor(ProjectId) {\n    let token = typeof localStorage.getItem('TOKEN') == 'string' ? localStorage.getItem('TOKEN') : '';\n    return this.http.post(this.url + 'createDpgf', {\n      _id: ProjectId\n    }, {\n      headers: {\n        'content-type': 'application/json',\n        'authorization': token\n      }\n    });\n  }\n}\nDpgfService.ɵfac = function DpgfService_Factory(t) {\n  return new (t || DpgfService)(i0.ɵɵinject(i1.HttpClient));\n};\nDpgfService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: DpgfService,\n  factory: DpgfService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["catchError","map","of","DpgfService","constructor","http","url","token","localStorage","getItem","getListOfLotsByDpgfId","id","post","_id","headers","pipe","res","record","err","console","log","status","getDpgf","obj","SaveDPGF","dpgf","JSON","stringify","CreateDpgfFor","ProjectId","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Yassir\\Desktop\\web\\Angular-test\\aglo-clone\\src\\app\\Services\\dpgf.service.ts"],"sourcesContent":["import { HttpClient, HttpErrorResponse } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, catchError, map, of } from 'rxjs';\r\nimport { dpgf } from '../dpgf/main/main.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DpgfService {\r\n\r\n  url = 'http://127.0.0.1:5050/dpgf/'\r\n  token = localStorage.getItem('TOKEN')\r\n\r\n  constructor(private http : HttpClient) { }\r\n  \r\n\r\n  getListOfLotsByDpgfId (id : string | null) {\r\n    \r\n    \r\n    return this.http.post(this.url + 'getListOfLots',{_id : id},{headers : {'content-type' : 'application/json' , 'authorization' : this.token as string}})\r\n    .pipe(\r\n      map((res)=>{\r\n        let record  = res as  {lots : Array<Record<string,string>>}\r\n        return record\r\n      }),\r\n      catchError((err : HttpErrorResponse)=>{\r\n        console.log(err.status);\r\n        return of(err.status)\r\n        \r\n      })\r\n    )\r\n   }\r\n  getDpgf(id :string){\r\n    return this.http.post(this.url + 'getDpgf',{_id:id},{headers : {'content-type' : 'application/json' , 'authorization' : this.token as string}})\r\n    .pipe(\r\n      map((obj)=>{\r\n        return obj as Record<string,string | Array<Record<string , string | Array<Record<string , string | Array<Record<string , string>>>>>>>\r\n      }),\r\n      catchError((err : HttpErrorResponse)=>{\r\n        if (err.status == 400){\r\n          return of(400)\r\n        }else{\r\n          return of(500)\r\n        }\r\n      })\r\n    )\r\n   }\r\n  SaveDPGF(dpgf : dpgf)  : Observable<number>{\r\n    let token = (typeof(localStorage.getItem('TOKEN')) == 'string')? localStorage.getItem('TOKEN') : ''\r\n    return this.http.post(this.url+'updateDpgf', JSON.stringify(dpgf) , {headers : {'content-type' : 'application/json' , 'authorization' :  token as string}})\r\n    .pipe(\r\n      map(()=>{\r\n        return 200\r\n      }),\r\n      catchError ((err : HttpErrorResponse)=>{\r\n        return of(err.status)\r\n      })\r\n    )\r\n  }\r\n  CreateDpgfFor(ProjectId : string){\r\n    let token = (typeof(localStorage.getItem('TOKEN')) == 'string')? localStorage.getItem('TOKEN') : ''\r\n    return this.http.post(this.url+'createDpgf',{_id : ProjectId}, {headers : {'content-type' : 'application/json' , 'authorization' :  token as string}})\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}