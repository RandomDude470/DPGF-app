{"ast":null,"code":"/* @license C3.js v0.7.20 | (c) C3 Team and other contributors | http://c3js.org/ */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = global || self, global.c3 = factory());\n})(this, function () {\n  'use strict';\n\n  function ChartInternal(api) {\n    var $$ = this;\n    // Note: This part will be replaced by rollup-plugin-modify\n    // When bundling esm output. Beware of changing this line.\n    // TODO: Maybe we should check that the modification by rollup-plugin-modify\n    // is valid during unit tests.\n    $$.d3 = window.d3 ? window.d3 : typeof require !== 'undefined' ? require('d3') : undefined;\n    $$.api = api;\n    $$.config = $$.getDefaultConfig();\n    $$.data = {};\n    $$.cache = {};\n    $$.axes = {};\n  }\n\n  /**\r\n   * The Chart class\r\n   *\r\n   * The methods of this class is the public APIs of the chart object.\r\n   */\n  function Chart(config) {\n    this.internal = new ChartInternal(this);\n    this.internal.loadConfig(config);\n    this.internal.beforeInit(config);\n    this.internal.init();\n    this.internal.afterInit(config);\n    (function bindThis(fn, target, argThis) {\n      Object.keys(fn).forEach(function (key) {\n        target[key] = fn[key].bind(argThis);\n        if (Object.keys(fn[key]).length > 0) {\n          bindThis(fn[key], target[key], argThis);\n        }\n      });\n    })(Chart.prototype, this, this);\n  }\n  var asHalfPixel = function (n) {\n    return Math.ceil(n) + 0.5;\n  };\n  var ceil10 = function (v) {\n    return Math.ceil(v / 10) * 10;\n  };\n  var diffDomain = function (d) {\n    return d[1] - d[0];\n  };\n  var getOption = function (options, key, defaultValue) {\n    return isDefined(options[key]) ? options[key] : defaultValue;\n  };\n  var getPathBox = function (path) {\n    var box = getBBox(path),\n      items = [path.pathSegList.getItem(0), path.pathSegList.getItem(1)],\n      minX = items[0].x,\n      minY = Math.min(items[0].y, items[1].y);\n    return {\n      x: minX,\n      y: minY,\n      width: box.width,\n      height: box.height\n    };\n  };\n  var getBBox = function (element) {\n    try {\n      return element.getBBox();\n    } catch (ignore) {\n      // Firefox will throw an exception if getBBox() is called whereas the\n      // element is rendered with display:none\n      // See https://github.com/c3js/c3/issues/2692\n      // The previous code was using `getBoundingClientRect` which was returning\n      // everything at 0 in this case so let's reproduce this behavior here.\n      return {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    }\n  };\n  var hasValue = function (dict, value) {\n    var found = false;\n    Object.keys(dict).forEach(function (key) {\n      if (dict[key] === value) {\n        found = true;\n      }\n    });\n    return found;\n  };\n  var isArray = function (o) {\n    return Array.isArray(o);\n  };\n  var isDefined = function (v) {\n    return typeof v !== 'undefined';\n  };\n  var isEmpty = function (o) {\n    return typeof o === 'undefined' || o === null || isString(o) && o.length === 0 || typeof o === 'object' && Object.keys(o).length === 0;\n  };\n  var isFunction = function (o) {\n    return typeof o === 'function';\n  };\n  var isNumber = function (o) {\n    return typeof o === 'number';\n  };\n  var isString = function (o) {\n    return typeof o === 'string';\n  };\n  var isUndefined = function (v) {\n    return typeof v === 'undefined';\n  };\n  var isValue = function (v) {\n    return v || v === 0;\n  };\n  var notEmpty = function (o) {\n    return !isEmpty(o);\n  };\n  var sanitise = function (str) {\n    return typeof str === 'string' ? str.replace(/</g, '&lt;').replace(/>/g, '&gt;') : str;\n  };\n  var flattenArray = function (arr) {\n    return Array.isArray(arr) ? [].concat.apply([], arr) : [];\n  };\n  /**\r\n   * Returns whether the point is within the given box.\r\n   *\r\n   * @param {Array} point An [x,y] coordinate\r\n   * @param {Object} box An object with {x, y, width, height} keys\r\n   * @param {Number} sensitivity An offset to ease check on very small boxes\r\n   */\n  var isWithinBox = function (point, box, sensitivity) {\n    if (sensitivity === void 0) {\n      sensitivity = 0;\n    }\n    var xStart = box.x - sensitivity;\n    var xEnd = box.x + box.width + sensitivity;\n    var yStart = box.y + box.height + sensitivity;\n    var yEnd = box.y - sensitivity;\n    return xStart < point[0] && point[0] < xEnd && yEnd < point[1] && point[1] < yStart;\n  };\n  /**\r\n   * Returns Internet Explorer version number (or false if no Internet Explorer used).\r\n   *\r\n   * @param string agent Optional parameter to specify user agent\r\n   */\n  var getIEVersion = function (agent) {\n    // https://stackoverflow.com/questions/19999388/check-if-user-is-using-ie\n    if (typeof agent === 'undefined') {\n      agent = window.navigator.userAgent;\n    }\n    var pos = agent.indexOf('MSIE '); // up to IE10\n    if (pos > 0) {\n      return parseInt(agent.substring(pos + 5, agent.indexOf('.', pos)), 10);\n    }\n    pos = agent.indexOf('Trident/'); // IE11\n    if (pos > 0) {\n      pos = agent.indexOf('rv:');\n      return parseInt(agent.substring(pos + 3, agent.indexOf('.', pos)), 10);\n    }\n    return false;\n  };\n  /**\r\n   * Returns whether the used browser is Internet Explorer.\r\n   *\r\n   * @param version Optional parameter to specify IE version\r\n   */\n  var isIE = function (version) {\n    var ver = getIEVersion();\n    if (typeof version === 'undefined') {\n      return !!ver;\n    }\n    return version === ver;\n  };\n  function AxisInternal(component, params) {\n    var internal = this;\n    internal.component = component;\n    internal.params = params || {};\n    internal.d3 = component.d3;\n    internal.scale = internal.d3.scaleLinear();\n    internal.range;\n    internal.orient = 'bottom';\n    internal.innerTickSize = 6;\n    internal.outerTickSize = this.params.withOuterTick ? 6 : 0;\n    internal.tickPadding = 3;\n    internal.tickValues = null;\n    internal.tickFormat;\n    internal.tickArguments;\n    internal.tickOffset = 0;\n    internal.tickCulling = true;\n    internal.tickCentered;\n    internal.tickTextCharSize;\n    internal.tickTextRotate = internal.params.tickTextRotate;\n    internal.tickLength;\n    internal.axis = internal.generateAxis();\n  }\n  AxisInternal.prototype.axisX = function (selection, x, tickOffset) {\n    selection.attr('transform', function (d) {\n      return 'translate(' + Math.ceil(x(d) + tickOffset) + ', 0)';\n    });\n  };\n  AxisInternal.prototype.axisY = function (selection, y) {\n    selection.attr('transform', function (d) {\n      return 'translate(0,' + Math.ceil(y(d)) + ')';\n    });\n  };\n  AxisInternal.prototype.scaleExtent = function (domain) {\n    var start = domain[0],\n      stop = domain[domain.length - 1];\n    return start < stop ? [start, stop] : [stop, start];\n  };\n  AxisInternal.prototype.generateTicks = function (scale) {\n    var internal = this;\n    var i,\n      domain,\n      ticks = [];\n    if (scale.ticks) {\n      return scale.ticks.apply(scale, internal.tickArguments);\n    }\n    domain = scale.domain();\n    for (i = Math.ceil(domain[0]); i < domain[1]; i++) {\n      ticks.push(i);\n    }\n    if (ticks.length > 0 && ticks[0] > 0) {\n      ticks.unshift(ticks[0] - (ticks[1] - ticks[0]));\n    }\n    return ticks;\n  };\n  AxisInternal.prototype.copyScale = function () {\n    var internal = this;\n    var newScale = internal.scale.copy(),\n      domain;\n    if (internal.params.isCategory) {\n      domain = internal.scale.domain();\n      newScale.domain([domain[0], domain[1] - 1]);\n    }\n    return newScale;\n  };\n  AxisInternal.prototype.textFormatted = function (v) {\n    var internal = this,\n      formatted = internal.tickFormat ? internal.tickFormat(v) : v;\n    return typeof formatted !== 'undefined' ? formatted : '';\n  };\n  AxisInternal.prototype.updateRange = function () {\n    var internal = this;\n    internal.range = internal.scale.rangeExtent ? internal.scale.rangeExtent() : internal.scaleExtent(internal.scale.range());\n    return internal.range;\n  };\n  AxisInternal.prototype.updateTickTextCharSize = function (tick) {\n    var internal = this;\n    if (internal.tickTextCharSize) {\n      return internal.tickTextCharSize;\n    }\n    var size = {\n      h: 11.5,\n      w: 5.5\n    };\n    tick.select('text').text(function (d) {\n      return internal.textFormatted(d);\n    }).each(function (d) {\n      var box = getBBox(this),\n        text = internal.textFormatted(d),\n        h = box.height,\n        w = text ? box.width / text.length : undefined;\n      if (h && w) {\n        size.h = h;\n        size.w = w;\n      }\n    }).text('');\n    internal.tickTextCharSize = size;\n    return size;\n  };\n  AxisInternal.prototype.isVertical = function () {\n    return this.orient === 'left' || this.orient === 'right';\n  };\n  AxisInternal.prototype.tspanData = function (d, i, scale) {\n    var internal = this;\n    var splitted = internal.params.tickMultiline ? internal.splitTickText(d, scale) : [].concat(internal.textFormatted(d));\n    if (internal.params.tickMultiline && internal.params.tickMultilineMax > 0) {\n      splitted = internal.ellipsify(splitted, internal.params.tickMultilineMax);\n    }\n    return splitted.map(function (s) {\n      return {\n        index: i,\n        splitted: s,\n        length: splitted.length\n      };\n    });\n  };\n  AxisInternal.prototype.splitTickText = function (d, scale) {\n    var internal = this,\n      tickText = internal.textFormatted(d),\n      maxWidth = internal.params.tickWidth,\n      subtext,\n      spaceIndex,\n      textWidth,\n      splitted = [];\n    if (Object.prototype.toString.call(tickText) === '[object Array]') {\n      return tickText;\n    }\n    if (!maxWidth || maxWidth <= 0) {\n      maxWidth = internal.isVertical() ? 95 : internal.params.isCategory ? Math.ceil(scale(1) - scale(0)) - 12 : 110;\n    }\n    function split(splitted, text) {\n      spaceIndex = undefined;\n      for (var i = 1; i < text.length; i++) {\n        if (text.charAt(i) === ' ') {\n          spaceIndex = i;\n        }\n        subtext = text.substr(0, i + 1);\n        textWidth = internal.tickTextCharSize.w * subtext.length;\n        // if text width gets over tick width, split by space index or crrent index\n        if (maxWidth < textWidth) {\n          return split(splitted.concat(text.substr(0, spaceIndex ? spaceIndex : i)), text.slice(spaceIndex ? spaceIndex + 1 : i));\n        }\n      }\n      return splitted.concat(text);\n    }\n    return split(splitted, tickText + '');\n  };\n  AxisInternal.prototype.ellipsify = function (splitted, max) {\n    if (splitted.length <= max) {\n      return splitted;\n    }\n    var ellipsified = splitted.slice(0, max);\n    var remaining = 3;\n    for (var i = max - 1; i >= 0; i--) {\n      var available = ellipsified[i].length;\n      ellipsified[i] = ellipsified[i].substr(0, available - remaining).padEnd(available, '.');\n      remaining -= available;\n      if (remaining <= 0) {\n        break;\n      }\n    }\n    return ellipsified;\n  };\n  AxisInternal.prototype.updateTickLength = function () {\n    var internal = this;\n    internal.tickLength = Math.max(internal.innerTickSize, 0) + internal.tickPadding;\n  };\n  AxisInternal.prototype.lineY2 = function (d) {\n    var internal = this,\n      tickPosition = internal.scale(d) + (internal.tickCentered ? 0 : internal.tickOffset);\n    return internal.range[0] < tickPosition && tickPosition < internal.range[1] ? internal.innerTickSize : 0;\n  };\n  AxisInternal.prototype.textY = function () {\n    var internal = this,\n      rotate = internal.tickTextRotate;\n    return rotate ? 11.5 - 2.5 * (rotate / 15) * (rotate > 0 ? 1 : -1) : internal.tickLength;\n  };\n  AxisInternal.prototype.textTransform = function () {\n    var internal = this,\n      rotate = internal.tickTextRotate;\n    return rotate ? 'rotate(' + rotate + ')' : '';\n  };\n  AxisInternal.prototype.textTextAnchor = function () {\n    var internal = this,\n      rotate = internal.tickTextRotate;\n    return rotate ? rotate > 0 ? 'start' : 'end' : 'middle';\n  };\n  AxisInternal.prototype.tspanDx = function () {\n    var internal = this,\n      rotate = internal.tickTextRotate;\n    return rotate ? 8 * Math.sin(Math.PI * (rotate / 180)) : 0;\n  };\n  AxisInternal.prototype.tspanDy = function (d, i) {\n    var internal = this,\n      dy = internal.tickTextCharSize.h;\n    if (i === 0) {\n      if (internal.isVertical()) {\n        dy = -((d.length - 1) * (internal.tickTextCharSize.h / 2) - 3);\n      } else {\n        dy = '.71em';\n      }\n    }\n    return dy;\n  };\n  AxisInternal.prototype.generateAxis = function () {\n    var internal = this,\n      d3 = internal.d3,\n      params = internal.params;\n    function axis(g, transition) {\n      var self;\n      g.each(function () {\n        var g = axis.g = d3.select(this);\n        var scale0 = this.__chart__ || internal.scale,\n          scale1 = this.__chart__ = internal.copyScale();\n        var ticksValues = internal.tickValues ? internal.tickValues : internal.generateTicks(scale1),\n          ticks = g.selectAll('.tick').data(ticksValues, scale1),\n          tickEnter = ticks.enter().insert('g', '.domain').attr('class', 'tick').style('opacity', 1e-6),\n          // MEMO: No exit transition. The reason is this transition affects max tick width calculation because old tick will be included in the ticks.\n          tickExit = ticks.exit().remove(),\n          tickUpdate = ticks.merge(tickEnter),\n          tickTransform,\n          tickX,\n          tickY;\n        if (params.isCategory) {\n          internal.tickOffset = Math.ceil((scale1(1) - scale1(0)) / 2);\n          tickX = internal.tickCentered ? 0 : internal.tickOffset;\n          tickY = internal.tickCentered ? internal.tickOffset : 0;\n        } else {\n          internal.tickOffset = tickX = 0;\n        }\n        internal.updateRange();\n        internal.updateTickLength();\n        internal.updateTickTextCharSize(g.select('.tick'));\n        var lineUpdate = tickUpdate.select('line').merge(tickEnter.append('line')),\n          textUpdate = tickUpdate.select('text').merge(tickEnter.append('text'));\n        var tspans = tickUpdate.selectAll('text').selectAll('tspan').data(function (d, i) {\n            return internal.tspanData(d, i, scale1);\n          }),\n          tspanEnter = tspans.enter().append('tspan'),\n          tspanUpdate = tspanEnter.merge(tspans).text(function (d) {\n            return d.splitted;\n          });\n        tspans.exit().remove();\n        var path = g.selectAll('.domain').data([0]),\n          pathUpdate = path.enter().append('path').merge(path).attr('class', 'domain');\n        // TODO: each attr should be one function and change its behavior by internal.orient, probably\n        switch (internal.orient) {\n          case 'bottom':\n            {\n              tickTransform = internal.axisX;\n              lineUpdate.attr('x1', tickX).attr('x2', tickX).attr('y2', function (d, i) {\n                return internal.lineY2(d, i);\n              });\n              textUpdate.attr('x', 0).attr('y', function (d, i) {\n                return internal.textY(d, i);\n              }).attr('transform', function (d, i) {\n                return internal.textTransform(d, i);\n              }).style('text-anchor', function (d, i) {\n                return internal.textTextAnchor(d, i);\n              });\n              tspanUpdate.attr('x', 0).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              }).attr('dx', function (d, i) {\n                return internal.tspanDx(d, i);\n              });\n              pathUpdate.attr('d', 'M' + internal.range[0] + ',' + internal.outerTickSize + 'V0H' + internal.range[1] + 'V' + internal.outerTickSize);\n              break;\n            }\n          case 'top':\n            {\n              // TODO: rotated tick text\n              tickTransform = internal.axisX;\n              lineUpdate.attr('x1', tickX).attr('x2', tickX).attr('y2', function (d, i) {\n                return -1 * internal.lineY2(d, i);\n              });\n              textUpdate.attr('x', 0).attr('y', function (d, i) {\n                return -1 * internal.textY(d, i) - (params.isCategory ? 2 : internal.tickLength - 2);\n              }).attr('transform', function (d, i) {\n                return internal.textTransform(d, i);\n              }).style('text-anchor', function (d, i) {\n                return internal.textTextAnchor(d, i);\n              });\n              tspanUpdate.attr('x', 0).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              }).attr('dx', function (d, i) {\n                return internal.tspanDx(d, i);\n              });\n              pathUpdate.attr('d', 'M' + internal.range[0] + ',' + -internal.outerTickSize + 'V0H' + internal.range[1] + 'V' + -internal.outerTickSize);\n              break;\n            }\n          case 'left':\n            {\n              tickTransform = internal.axisY;\n              lineUpdate.attr('x2', -internal.innerTickSize).attr('y1', tickY).attr('y2', tickY);\n              textUpdate.attr('x', -internal.tickLength).attr('y', internal.tickOffset).style('text-anchor', 'end');\n              tspanUpdate.attr('x', -internal.tickLength).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              });\n              pathUpdate.attr('d', 'M' + -internal.outerTickSize + ',' + internal.range[0] + 'H0V' + internal.range[1] + 'H' + -internal.outerTickSize);\n              break;\n            }\n          case 'right':\n            {\n              tickTransform = internal.axisY;\n              lineUpdate.attr('x2', internal.innerTickSize).attr('y1', tickY).attr('y2', tickY);\n              textUpdate.attr('x', internal.tickLength).attr('y', internal.tickOffset).style('text-anchor', 'start');\n              tspanUpdate.attr('x', internal.tickLength).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              });\n              pathUpdate.attr('d', 'M' + internal.outerTickSize + ',' + internal.range[0] + 'H0V' + internal.range[1] + 'H' + internal.outerTickSize);\n              break;\n            }\n        }\n        if (scale1.rangeBand) {\n          var x = scale1,\n            dx = x.rangeBand() / 2;\n          scale0 = scale1 = function (d) {\n            return x(d) + dx;\n          };\n        } else if (scale0.rangeBand) {\n          scale0 = scale1;\n        } else {\n          tickExit.call(tickTransform, scale1, internal.tickOffset);\n        }\n        tickEnter.call(tickTransform, scale0, internal.tickOffset);\n        self = (transition ? tickUpdate.transition(transition) : tickUpdate).style('opacity', 1).call(tickTransform, scale1, internal.tickOffset);\n      });\n      return self;\n    }\n    axis.scale = function (x) {\n      if (!arguments.length) {\n        return internal.scale;\n      }\n      internal.scale = x;\n      return axis;\n    };\n    axis.orient = function (x) {\n      if (!arguments.length) {\n        return internal.orient;\n      }\n      internal.orient = x in {\n        top: 1,\n        right: 1,\n        bottom: 1,\n        left: 1\n      } ? x + '' : 'bottom';\n      return axis;\n    };\n    axis.tickFormat = function (format) {\n      if (!arguments.length) {\n        return internal.tickFormat;\n      }\n      internal.tickFormat = format;\n      return axis;\n    };\n    axis.tickCentered = function (isCentered) {\n      if (!arguments.length) {\n        return internal.tickCentered;\n      }\n      internal.tickCentered = isCentered;\n      return axis;\n    };\n    axis.tickOffset = function () {\n      return internal.tickOffset;\n    };\n    axis.tickInterval = function () {\n      var interval, length;\n      if (params.isCategory) {\n        interval = internal.tickOffset * 2;\n      } else {\n        length = axis.g.select('path.domain').node().getTotalLength() - internal.outerTickSize * 2;\n        interval = length / axis.g.selectAll('line').size();\n      }\n      return interval === Infinity ? 0 : interval;\n    };\n    axis.ticks = function () {\n      if (!arguments.length) {\n        return internal.tickArguments;\n      }\n      internal.tickArguments = arguments;\n      return axis;\n    };\n    axis.tickCulling = function (culling) {\n      if (!arguments.length) {\n        return internal.tickCulling;\n      }\n      internal.tickCulling = culling;\n      return axis;\n    };\n    axis.tickValues = function (x) {\n      if (typeof x === 'function') {\n        internal.tickValues = function () {\n          return x(internal.scale.domain());\n        };\n      } else {\n        if (!arguments.length) {\n          return internal.tickValues;\n        }\n        internal.tickValues = x;\n      }\n      return axis;\n    };\n    return axis;\n  };\n  var CLASS = {\n    target: 'c3-target',\n    chart: 'c3-chart',\n    chartLine: 'c3-chart-line',\n    chartLines: 'c3-chart-lines',\n    chartBar: 'c3-chart-bar',\n    chartBars: 'c3-chart-bars',\n    chartText: 'c3-chart-text',\n    chartTexts: 'c3-chart-texts',\n    chartArc: 'c3-chart-arc',\n    chartArcs: 'c3-chart-arcs',\n    chartArcsTitle: 'c3-chart-arcs-title',\n    chartArcsBackground: 'c3-chart-arcs-background',\n    chartArcsGaugeUnit: 'c3-chart-arcs-gauge-unit',\n    chartArcsGaugeMax: 'c3-chart-arcs-gauge-max',\n    chartArcsGaugeMin: 'c3-chart-arcs-gauge-min',\n    selectedCircle: 'c3-selected-circle',\n    selectedCircles: 'c3-selected-circles',\n    eventRect: 'c3-event-rect',\n    eventRects: 'c3-event-rects',\n    eventRectsSingle: 'c3-event-rects-single',\n    eventRectsMultiple: 'c3-event-rects-multiple',\n    zoomRect: 'c3-zoom-rect',\n    brush: 'c3-brush',\n    dragZoom: 'c3-drag-zoom',\n    focused: 'c3-focused',\n    defocused: 'c3-defocused',\n    region: 'c3-region',\n    regions: 'c3-regions',\n    title: 'c3-title',\n    tooltipContainer: 'c3-tooltip-container',\n    tooltip: 'c3-tooltip',\n    tooltipName: 'c3-tooltip-name',\n    shape: 'c3-shape',\n    shapes: 'c3-shapes',\n    line: 'c3-line',\n    lines: 'c3-lines',\n    bar: 'c3-bar',\n    bars: 'c3-bars',\n    circle: 'c3-circle',\n    circles: 'c3-circles',\n    arc: 'c3-arc',\n    arcLabelLine: 'c3-arc-label-line',\n    arcs: 'c3-arcs',\n    area: 'c3-area',\n    areas: 'c3-areas',\n    empty: 'c3-empty',\n    text: 'c3-text',\n    texts: 'c3-texts',\n    gaugeValue: 'c3-gauge-value',\n    grid: 'c3-grid',\n    gridLines: 'c3-grid-lines',\n    xgrid: 'c3-xgrid',\n    xgrids: 'c3-xgrids',\n    xgridLine: 'c3-xgrid-line',\n    xgridLines: 'c3-xgrid-lines',\n    xgridFocus: 'c3-xgrid-focus',\n    ygrid: 'c3-ygrid',\n    ygrids: 'c3-ygrids',\n    ygridLine: 'c3-ygrid-line',\n    ygridLines: 'c3-ygrid-lines',\n    colorScale: 'c3-colorscale',\n    stanfordElements: 'c3-stanford-elements',\n    stanfordLine: 'c3-stanford-line',\n    stanfordLines: 'c3-stanford-lines',\n    stanfordRegion: 'c3-stanford-region',\n    stanfordRegions: 'c3-stanford-regions',\n    stanfordText: 'c3-stanford-text',\n    stanfordTexts: 'c3-stanford-texts',\n    axis: 'c3-axis',\n    axisX: 'c3-axis-x',\n    axisXLabel: 'c3-axis-x-label',\n    axisY: 'c3-axis-y',\n    axisYLabel: 'c3-axis-y-label',\n    axisY2: 'c3-axis-y2',\n    axisY2Label: 'c3-axis-y2-label',\n    legendBackground: 'c3-legend-background',\n    legendItem: 'c3-legend-item',\n    legendItemEvent: 'c3-legend-item-event',\n    legendItemTile: 'c3-legend-item-tile',\n    legendItemHidden: 'c3-legend-item-hidden',\n    legendItemFocused: 'c3-legend-item-focused',\n    dragarea: 'c3-dragarea',\n    EXPANDED: '_expanded_',\n    SELECTED: '_selected_',\n    INCLUDED: '_included_'\n  };\n  var AxisClass = /** @class */function () {\n    function AxisClass(owner) {\n      this.owner = owner;\n      this.d3 = owner.d3;\n      this.internal = AxisInternal;\n    }\n    return AxisClass;\n  }();\n  var Axis = AxisClass;\n  Axis.prototype.init = function init() {\n    var $$ = this.owner,\n      config = $$.config,\n      main = $$.main;\n    $$.axes.x = main.append('g').attr('class', CLASS.axis + ' ' + CLASS.axisX).attr('clip-path', config.axis_x_inner ? '' : $$.clipPathForXAxis).attr('transform', $$.getTranslate('x')).style('visibility', config.axis_x_show ? 'visible' : 'hidden');\n    $$.axes.x.append('text').attr('class', CLASS.axisXLabel).attr('transform', config.axis_rotated ? 'rotate(-90)' : '').style('text-anchor', this.textAnchorForXAxisLabel.bind(this));\n    $$.axes.y = main.append('g').attr('class', CLASS.axis + ' ' + CLASS.axisY).attr('clip-path', config.axis_y_inner ? '' : $$.clipPathForYAxis).attr('transform', $$.getTranslate('y')).style('visibility', config.axis_y_show ? 'visible' : 'hidden');\n    $$.axes.y.append('text').attr('class', CLASS.axisYLabel).attr('transform', config.axis_rotated ? '' : 'rotate(-90)').style('text-anchor', this.textAnchorForYAxisLabel.bind(this));\n    $$.axes.y2 = main.append('g').attr('class', CLASS.axis + ' ' + CLASS.axisY2)\n    // clip-path?\n    .attr('transform', $$.getTranslate('y2')).style('visibility', config.axis_y2_show ? 'visible' : 'hidden');\n    $$.axes.y2.append('text').attr('class', CLASS.axisY2Label).attr('transform', config.axis_rotated ? '' : 'rotate(-90)').style('text-anchor', this.textAnchorForY2AxisLabel.bind(this));\n  };\n  Axis.prototype.getXAxis = function getXAxis(scale, orient, tickFormat, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\n    var $$ = this.owner,\n      config = $$.config,\n      axisParams = {\n        isCategory: $$.isCategorized(),\n        withOuterTick: withOuterTick,\n        tickMultiline: config.axis_x_tick_multiline,\n        tickMultilineMax: config.axis_x_tick_multiline ? Number(config.axis_x_tick_multilineMax) : 0,\n        tickWidth: config.axis_x_tick_width,\n        tickTextRotate: withoutRotateTickText ? 0 : config.axis_x_tick_rotate,\n        withoutTransition: withoutTransition\n      },\n      axis = new this.internal(this, axisParams).axis.scale(scale).orient(orient);\n    if ($$.isTimeSeries() && tickValues && typeof tickValues !== 'function') {\n      tickValues = tickValues.map(function (v) {\n        return $$.parseDate(v);\n      });\n    }\n    // Set tick\n    axis.tickFormat(tickFormat).tickValues(tickValues);\n    if ($$.isCategorized()) {\n      axis.tickCentered(config.axis_x_tick_centered);\n      if (isEmpty(config.axis_x_tick_culling)) {\n        config.axis_x_tick_culling = false;\n      }\n    }\n    return axis;\n  };\n  Axis.prototype.updateXAxisTickValues = function updateXAxisTickValues(targets, axis) {\n    var $$ = this.owner,\n      config = $$.config,\n      tickValues;\n    if (config.axis_x_tick_fit || config.axis_x_tick_count) {\n      tickValues = this.generateTickValues($$.mapTargetsToUniqueXs(targets), config.axis_x_tick_count, $$.isTimeSeries());\n    }\n    if (axis) {\n      axis.tickValues(tickValues);\n    } else {\n      $$.xAxis.tickValues(tickValues);\n      $$.subXAxis.tickValues(tickValues);\n    }\n    return tickValues;\n  };\n  Axis.prototype.getYAxis = function getYAxis(axisId, scale, orient, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\n    var $$ = this.owner;\n    var config = $$.config;\n    var tickFormat = config[\"axis_\" + axisId + \"_tick_format\"];\n    if (!tickFormat && $$.isAxisNormalized(axisId)) {\n      tickFormat = function (x) {\n        return x + \"%\";\n      };\n    }\n    var axis = new this.internal(this, {\n      withOuterTick: withOuterTick,\n      withoutTransition: withoutTransition,\n      tickTextRotate: withoutRotateTickText ? 0 : config.axis_y_tick_rotate\n    }).axis.scale(scale).orient(orient);\n    if (tickFormat) {\n      axis.tickFormat(tickFormat);\n    }\n    if ($$.isTimeSeriesY()) {\n      axis.ticks(config.axis_y_tick_time_type, config.axis_y_tick_time_interval);\n    } else {\n      axis.tickValues(tickValues);\n    }\n    return axis;\n  };\n  Axis.prototype.getId = function getId(id) {\n    var config = this.owner.config;\n    return id in config.data_axes ? config.data_axes[id] : 'y';\n  };\n  Axis.prototype.getXAxisTickFormat = function getXAxisTickFormat() {\n    // #2251 previously set any negative values to a whole number,\n    // however both should be truncated according to the users format specification\n    var $$ = this.owner,\n      config = $$.config;\n    var format = $$.isTimeSeries() ? $$.defaultAxisTimeFormat : $$.isCategorized() ? $$.categoryName : function (v) {\n      return v;\n    };\n    if (config.axis_x_tick_format) {\n      if (isFunction(config.axis_x_tick_format)) {\n        format = config.axis_x_tick_format;\n      } else if ($$.isTimeSeries()) {\n        format = function (date) {\n          return date ? $$.axisTimeFormat(config.axis_x_tick_format)(date) : '';\n        };\n      }\n    }\n    return isFunction(format) ? function (v) {\n      return format.call($$, v);\n    } : format;\n  };\n  Axis.prototype.getTickValues = function getTickValues(tickValues, axis) {\n    return tickValues ? tickValues : axis ? axis.tickValues() : undefined;\n  };\n  Axis.prototype.getXAxisTickValues = function getXAxisTickValues() {\n    return this.getTickValues(this.owner.config.axis_x_tick_values, this.owner.xAxis);\n  };\n  Axis.prototype.getYAxisTickValues = function getYAxisTickValues() {\n    return this.getTickValues(this.owner.config.axis_y_tick_values, this.owner.yAxis);\n  };\n  Axis.prototype.getY2AxisTickValues = function getY2AxisTickValues() {\n    return this.getTickValues(this.owner.config.axis_y2_tick_values, this.owner.y2Axis);\n  };\n  Axis.prototype.getLabelOptionByAxisId = function getLabelOptionByAxisId(axisId) {\n    var $$ = this.owner,\n      config = $$.config,\n      option;\n    if (axisId === 'y') {\n      option = config.axis_y_label;\n    } else if (axisId === 'y2') {\n      option = config.axis_y2_label;\n    } else if (axisId === 'x') {\n      option = config.axis_x_label;\n    }\n    return option;\n  };\n  Axis.prototype.getLabelText = function getLabelText(axisId) {\n    var option = this.getLabelOptionByAxisId(axisId);\n    return isString(option) ? option : option ? option.text : null;\n  };\n  Axis.prototype.setLabelText = function setLabelText(axisId, text) {\n    var $$ = this.owner,\n      config = $$.config,\n      option = this.getLabelOptionByAxisId(axisId);\n    if (isString(option)) {\n      if (axisId === 'y') {\n        config.axis_y_label = text;\n      } else if (axisId === 'y2') {\n        config.axis_y2_label = text;\n      } else if (axisId === 'x') {\n        config.axis_x_label = text;\n      }\n    } else if (option) {\n      option.text = text;\n    }\n  };\n  Axis.prototype.getLabelPosition = function getLabelPosition(axisId, defaultPosition) {\n    var option = this.getLabelOptionByAxisId(axisId),\n      position = option && typeof option === 'object' && option.position ? option.position : defaultPosition;\n    return {\n      isInner: position.indexOf('inner') >= 0,\n      isOuter: position.indexOf('outer') >= 0,\n      isLeft: position.indexOf('left') >= 0,\n      isCenter: position.indexOf('center') >= 0,\n      isRight: position.indexOf('right') >= 0,\n      isTop: position.indexOf('top') >= 0,\n      isMiddle: position.indexOf('middle') >= 0,\n      isBottom: position.indexOf('bottom') >= 0\n    };\n  };\n  Axis.prototype.getXAxisLabelPosition = function getXAxisLabelPosition() {\n    return this.getLabelPosition('x', this.owner.config.axis_rotated ? 'inner-top' : 'inner-right');\n  };\n  Axis.prototype.getYAxisLabelPosition = function getYAxisLabelPosition() {\n    return this.getLabelPosition('y', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\n  };\n  Axis.prototype.getY2AxisLabelPosition = function getY2AxisLabelPosition() {\n    return this.getLabelPosition('y2', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\n  };\n  Axis.prototype.getLabelPositionById = function getLabelPositionById(id) {\n    return id === 'y2' ? this.getY2AxisLabelPosition() : id === 'y' ? this.getYAxisLabelPosition() : this.getXAxisLabelPosition();\n  };\n  Axis.prototype.textForXAxisLabel = function textForXAxisLabel() {\n    return this.getLabelText('x');\n  };\n  Axis.prototype.textForYAxisLabel = function textForYAxisLabel() {\n    return this.getLabelText('y');\n  };\n  Axis.prototype.textForY2AxisLabel = function textForY2AxisLabel() {\n    return this.getLabelText('y2');\n  };\n  Axis.prototype.xForAxisLabel = function xForAxisLabel(forHorizontal, position) {\n    var $$ = this.owner;\n    if (forHorizontal) {\n      return position.isLeft ? 0 : position.isCenter ? $$.width / 2 : $$.width;\n    } else {\n      return position.isBottom ? -$$.height : position.isMiddle ? -$$.height / 2 : 0;\n    }\n  };\n  Axis.prototype.dxForAxisLabel = function dxForAxisLabel(forHorizontal, position) {\n    if (forHorizontal) {\n      return position.isLeft ? '0.5em' : position.isRight ? '-0.5em' : '0';\n    } else {\n      return position.isTop ? '-0.5em' : position.isBottom ? '0.5em' : '0';\n    }\n  };\n  Axis.prototype.textAnchorForAxisLabel = function textAnchorForAxisLabel(forHorizontal, position) {\n    if (forHorizontal) {\n      return position.isLeft ? 'start' : position.isCenter ? 'middle' : 'end';\n    } else {\n      return position.isBottom ? 'start' : position.isMiddle ? 'middle' : 'end';\n    }\n  };\n  Axis.prototype.xForXAxisLabel = function xForXAxisLabel() {\n    return this.xForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\n  };\n  Axis.prototype.xForYAxisLabel = function xForYAxisLabel() {\n    return this.xForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\n  };\n  Axis.prototype.xForY2AxisLabel = function xForY2AxisLabel() {\n    return this.xForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\n  };\n  Axis.prototype.dxForXAxisLabel = function dxForXAxisLabel() {\n    return this.dxForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\n  };\n  Axis.prototype.dxForYAxisLabel = function dxForYAxisLabel() {\n    return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\n  };\n  Axis.prototype.dxForY2AxisLabel = function dxForY2AxisLabel() {\n    return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\n  };\n  Axis.prototype.dyForXAxisLabel = function dyForXAxisLabel() {\n    var $$ = this.owner,\n      config = $$.config,\n      position = this.getXAxisLabelPosition();\n    if (config.axis_rotated) {\n      return position.isInner ? '1.2em' : -25 - ($$.config.axis_x_inner ? 0 : this.getMaxTickWidth('x'));\n    } else {\n      return position.isInner ? '-0.5em' : $$.getHorizontalAxisHeight('x') - 10;\n    }\n  };\n  Axis.prototype.dyForYAxisLabel = function dyForYAxisLabel() {\n    var $$ = this.owner,\n      position = this.getYAxisLabelPosition();\n    if ($$.config.axis_rotated) {\n      return position.isInner ? '-0.5em' : '3em';\n    } else {\n      return position.isInner ? '1.2em' : -10 - ($$.config.axis_y_inner ? 0 : this.getMaxTickWidth('y') + 10);\n    }\n  };\n  Axis.prototype.dyForY2AxisLabel = function dyForY2AxisLabel() {\n    var $$ = this.owner,\n      position = this.getY2AxisLabelPosition();\n    if ($$.config.axis_rotated) {\n      return position.isInner ? '1.2em' : '-2.2em';\n    } else {\n      return position.isInner ? '-0.5em' : 15 + ($$.config.axis_y2_inner ? 0 : this.getMaxTickWidth('y2') + 15);\n    }\n  };\n  Axis.prototype.textAnchorForXAxisLabel = function textAnchorForXAxisLabel() {\n    var $$ = this.owner;\n    return this.textAnchorForAxisLabel(!$$.config.axis_rotated, this.getXAxisLabelPosition());\n  };\n  Axis.prototype.textAnchorForYAxisLabel = function textAnchorForYAxisLabel() {\n    var $$ = this.owner;\n    return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getYAxisLabelPosition());\n  };\n  Axis.prototype.textAnchorForY2AxisLabel = function textAnchorForY2AxisLabel() {\n    var $$ = this.owner;\n    return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getY2AxisLabelPosition());\n  };\n  Axis.prototype.getMaxTickWidth = function getMaxTickWidth(id, withoutRecompute) {\n    var $$ = this.owner,\n      maxWidth = 0,\n      targetsToShow,\n      scale,\n      axis,\n      dummy,\n      svg;\n    if (withoutRecompute && $$.currentMaxTickWidths[id]) {\n      return $$.currentMaxTickWidths[id];\n    }\n    if ($$.svg) {\n      targetsToShow = $$.filterTargetsToShow($$.data.targets);\n      if (id === 'y') {\n        scale = $$.y.copy().domain($$.getYDomain(targetsToShow, 'y'));\n        axis = this.getYAxis(id, scale, $$.yOrient, $$.yAxisTickValues, false, true, true);\n      } else if (id === 'y2') {\n        scale = $$.y2.copy().domain($$.getYDomain(targetsToShow, 'y2'));\n        axis = this.getYAxis(id, scale, $$.y2Orient, $$.y2AxisTickValues, false, true, true);\n      } else {\n        scale = $$.x.copy().domain($$.getXDomain(targetsToShow));\n        axis = this.getXAxis(scale, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, false, true, true);\n        this.updateXAxisTickValues(targetsToShow, axis);\n      }\n      dummy = $$.d3.select('body').append('div').classed('c3', true);\n      svg = dummy.append('svg').style('visibility', 'hidden').style('position', 'fixed').style('top', 0).style('left', 0), svg.append('g').call(axis).each(function () {\n        $$.d3.select(this).selectAll('text').each(function () {\n          var box = getBBox(this);\n          if (maxWidth < box.width) {\n            maxWidth = box.width;\n          }\n        });\n        dummy.remove();\n      });\n    }\n    $$.currentMaxTickWidths[id] = maxWidth <= 0 ? $$.currentMaxTickWidths[id] : maxWidth;\n    return $$.currentMaxTickWidths[id];\n  };\n  Axis.prototype.updateLabels = function updateLabels(withTransition) {\n    var $$ = this.owner;\n    var axisXLabel = $$.main.select('.' + CLASS.axisX + ' .' + CLASS.axisXLabel),\n      axisYLabel = $$.main.select('.' + CLASS.axisY + ' .' + CLASS.axisYLabel),\n      axisY2Label = $$.main.select('.' + CLASS.axisY2 + ' .' + CLASS.axisY2Label);\n    (withTransition ? axisXLabel.transition() : axisXLabel).attr('x', this.xForXAxisLabel.bind(this)).attr('dx', this.dxForXAxisLabel.bind(this)).attr('dy', this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));\n    (withTransition ? axisYLabel.transition() : axisYLabel).attr('x', this.xForYAxisLabel.bind(this)).attr('dx', this.dxForYAxisLabel.bind(this)).attr('dy', this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));\n    (withTransition ? axisY2Label.transition() : axisY2Label).attr('x', this.xForY2AxisLabel.bind(this)).attr('dx', this.dxForY2AxisLabel.bind(this)).attr('dy', this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this));\n  };\n  Axis.prototype.getPadding = function getPadding(padding, key, defaultValue, domainLength) {\n    var p = typeof padding === 'number' ? padding : padding[key];\n    if (!isValue(p)) {\n      return defaultValue;\n    }\n    if (padding.unit === 'ratio') {\n      return padding[key] * domainLength;\n    }\n    // assume padding is pixels if unit is not specified\n    return this.convertPixelsToAxisPadding(p, domainLength);\n  };\n  Axis.prototype.convertPixelsToAxisPadding = function convertPixelsToAxisPadding(pixels, domainLength) {\n    var $$ = this.owner,\n      length = $$.config.axis_rotated ? $$.width : $$.height;\n    return domainLength * (pixels / length);\n  };\n  Axis.prototype.generateTickValues = function generateTickValues(values, tickCount, forTimeSeries) {\n    var tickValues = values,\n      targetCount,\n      start,\n      end,\n      count,\n      interval,\n      i,\n      tickValue;\n    if (tickCount) {\n      targetCount = isFunction(tickCount) ? tickCount() : tickCount;\n      // compute ticks according to tickCount\n      if (targetCount === 1) {\n        tickValues = [values[0]];\n      } else if (targetCount === 2) {\n        tickValues = [values[0], values[values.length - 1]];\n      } else if (targetCount > 2) {\n        count = targetCount - 2;\n        start = values[0];\n        end = values[values.length - 1];\n        interval = (end - start) / (count + 1);\n        // re-construct unique values\n        tickValues = [start];\n        for (i = 0; i < count; i++) {\n          tickValue = +start + interval * (i + 1);\n          tickValues.push(forTimeSeries ? new Date(tickValue) : tickValue);\n        }\n        tickValues.push(end);\n      }\n    }\n    if (!forTimeSeries) {\n      tickValues = tickValues.sort(function (a, b) {\n        return a - b;\n      });\n    }\n    return tickValues;\n  };\n  Axis.prototype.generateTransitions = function generateTransitions(duration) {\n    var $$ = this.owner,\n      axes = $$.axes;\n    return {\n      axisX: duration ? axes.x.transition().duration(duration) : axes.x,\n      axisY: duration ? axes.y.transition().duration(duration) : axes.y,\n      axisY2: duration ? axes.y2.transition().duration(duration) : axes.y2,\n      axisSubX: duration ? axes.subx.transition().duration(duration) : axes.subx\n    };\n  };\n  Axis.prototype.redraw = function redraw(duration, isHidden) {\n    var $$ = this.owner,\n      transition = duration ? $$.d3.transition().duration(duration) : null;\n    $$.axes.x.style('opacity', isHidden ? 0 : 1).call($$.xAxis, transition);\n    $$.axes.y.style('opacity', isHidden ? 0 : 1).call($$.yAxis, transition);\n    $$.axes.y2.style('opacity', isHidden ? 0 : 1).call($$.y2Axis, transition);\n    $$.axes.subx.style('opacity', isHidden ? 0 : 1).call($$.subXAxis, transition);\n  };\n  var c3 = {\n    version: '0.7.20',\n    chart: {\n      fn: Chart.prototype,\n      internal: {\n        fn: ChartInternal.prototype,\n        axis: {\n          fn: AxisClass.prototype,\n          internal: {\n            fn: AxisInternal.prototype\n          }\n        }\n      }\n    },\n    generate: function (config) {\n      return new Chart(config);\n    }\n  };\n  ChartInternal.prototype.beforeInit = function () {\n    // can do something\n  };\n  ChartInternal.prototype.afterInit = function () {\n    // can do something\n  };\n  ChartInternal.prototype.init = function () {\n    var $$ = this,\n      config = $$.config;\n    $$.initParams();\n    if (config.data_url) {\n      $$.convertUrlToData(config.data_url, config.data_mimeType, config.data_headers, config.data_keys, $$.initWithData);\n    } else if (config.data_json) {\n      $$.initWithData($$.convertJsonToData(config.data_json, config.data_keys));\n    } else if (config.data_rows) {\n      $$.initWithData($$.convertRowsToData(config.data_rows));\n    } else if (config.data_columns) {\n      $$.initWithData($$.convertColumnsToData(config.data_columns));\n    } else {\n      throw Error('url or json or rows or columns is required.');\n    }\n  };\n  ChartInternal.prototype.initParams = function () {\n    var $$ = this,\n      d3 = $$.d3,\n      config = $$.config;\n    // MEMO: clipId needs to be unique because it conflicts when multiple charts exist\n    $$.clipId = 'c3-' + new Date().valueOf() + '-clip';\n    $$.clipIdForXAxis = $$.clipId + '-xaxis';\n    $$.clipIdForYAxis = $$.clipId + '-yaxis';\n    $$.clipIdForGrid = $$.clipId + '-grid';\n    $$.clipIdForSubchart = $$.clipId + '-subchart';\n    $$.clipPath = $$.getClipPath($$.clipId);\n    $$.clipPathForXAxis = $$.getClipPath($$.clipIdForXAxis);\n    $$.clipPathForYAxis = $$.getClipPath($$.clipIdForYAxis);\n    $$.clipPathForGrid = $$.getClipPath($$.clipIdForGrid);\n    $$.clipPathForSubchart = $$.getClipPath($$.clipIdForSubchart);\n    $$.dragStart = null;\n    $$.dragging = false;\n    $$.flowing = false;\n    $$.cancelClick = false;\n    $$.mouseover = undefined;\n    $$.transiting = false;\n    $$.color = $$.generateColor();\n    $$.levelColor = $$.generateLevelColor();\n    $$.dataTimeParse = (config.data_xLocaltime ? d3.timeParse : d3.utcParse)($$.config.data_xFormat);\n    $$.axisTimeFormat = config.axis_x_localtime ? d3.timeFormat : d3.utcFormat;\n    $$.defaultAxisTimeFormat = function (date) {\n      if (date.getMilliseconds()) {\n        return d3.timeFormat('.%L')(date);\n      }\n      if (date.getSeconds()) {\n        return d3.timeFormat(':%S')(date);\n      }\n      if (date.getMinutes()) {\n        return d3.timeFormat('%I:%M')(date);\n      }\n      if (date.getHours()) {\n        return d3.timeFormat('%I %p')(date);\n      }\n      if (date.getDay() && date.getDate() !== 1) {\n        return d3.timeFormat('%-m/%-d')(date);\n      }\n      if (date.getDate() !== 1) {\n        return d3.timeFormat('%-m/%-d')(date);\n      }\n      if (date.getMonth()) {\n        return d3.timeFormat('%-m/%-d')(date);\n      }\n      return d3.timeFormat('%Y/%-m/%-d')(date);\n    };\n    $$.hiddenTargetIds = [];\n    $$.hiddenLegendIds = [];\n    $$.focusedTargetIds = [];\n    $$.defocusedTargetIds = [];\n    $$.xOrient = config.axis_rotated ? config.axis_x_inner ? 'right' : 'left' : config.axis_x_inner ? 'top' : 'bottom';\n    $$.yOrient = config.axis_rotated ? config.axis_y_inner ? 'top' : 'bottom' : config.axis_y_inner ? 'right' : 'left';\n    $$.y2Orient = config.axis_rotated ? config.axis_y2_inner ? 'bottom' : 'top' : config.axis_y2_inner ? 'left' : 'right';\n    $$.subXOrient = config.axis_rotated ? 'left' : 'bottom';\n    $$.isLegendRight = config.legend_position === 'right';\n    $$.isLegendInset = config.legend_position === 'inset';\n    $$.isLegendTop = config.legend_inset_anchor === 'top-left' || config.legend_inset_anchor === 'top-right';\n    $$.isLegendLeft = config.legend_inset_anchor === 'top-left' || config.legend_inset_anchor === 'bottom-left';\n    $$.legendStep = 0;\n    $$.legendItemWidth = 0;\n    $$.legendItemHeight = 0;\n    $$.currentMaxTickWidths = {\n      x: 0,\n      y: 0,\n      y2: 0\n    };\n    $$.rotated_padding_left = 30;\n    $$.rotated_padding_right = config.axis_rotated && !config.axis_x_show ? 0 : 30;\n    $$.rotated_padding_top = 5;\n    $$.withoutFadeIn = {};\n    $$.intervalForObserveInserted = undefined;\n    $$.axes.subx = d3.selectAll([]); // needs when excluding subchart.js\n  };\n\n  ChartInternal.prototype.initChartElements = function () {\n    if (this.initBar) {\n      this.initBar();\n    }\n    if (this.initLine) {\n      this.initLine();\n    }\n    if (this.initArc) {\n      this.initArc();\n    }\n    if (this.initGauge) {\n      this.initGauge();\n    }\n    if (this.initText) {\n      this.initText();\n    }\n  };\n  ChartInternal.prototype.initWithData = function (data) {\n    var $$ = this,\n      d3 = $$.d3,\n      config = $$.config;\n    var defs,\n      main,\n      binding = true;\n    $$.axis = new AxisClass($$);\n    if (!config.bindto) {\n      $$.selectChart = d3.selectAll([]);\n    } else if (typeof config.bindto.node === 'function') {\n      $$.selectChart = config.bindto;\n    } else {\n      $$.selectChart = d3.select(config.bindto);\n    }\n    if ($$.selectChart.empty()) {\n      $$.selectChart = d3.select(document.createElement('div')).style('opacity', 0);\n      $$.observeInserted($$.selectChart);\n      binding = false;\n    }\n    $$.selectChart.html('').classed('c3', true);\n    // Init data as targets\n    $$.data.xs = {};\n    $$.data.targets = $$.convertDataToTargets(data);\n    if (config.data_filter) {\n      $$.data.targets = $$.data.targets.filter(config.data_filter);\n    }\n    // Set targets to hide if needed\n    if (config.data_hide) {\n      $$.addHiddenTargetIds(config.data_hide === true ? $$.mapToIds($$.data.targets) : config.data_hide);\n    }\n    if (config.legend_hide) {\n      $$.addHiddenLegendIds(config.legend_hide === true ? $$.mapToIds($$.data.targets) : config.legend_hide);\n    }\n    if ($$.isStanfordGraphType()) {\n      $$.initStanfordData();\n    }\n    // Init sizes and scales\n    $$.updateSizes();\n    $$.updateScales();\n    // Set domains for each scale\n    $$.x.domain(d3.extent($$.getXDomain($$.data.targets)));\n    $$.y.domain($$.getYDomain($$.data.targets, 'y'));\n    $$.y2.domain($$.getYDomain($$.data.targets, 'y2'));\n    $$.subX.domain($$.x.domain());\n    $$.subY.domain($$.y.domain());\n    $$.subY2.domain($$.y2.domain());\n    // Save original x domain for zoom update\n    $$.orgXDomain = $$.x.domain();\n    /*-- Basic Elements --*/\n    // Define svgs\n    $$.svg = $$.selectChart.append('svg').style('overflow', 'hidden').on('mouseenter', function () {\n      return config.onmouseover.call($$);\n    }).on('mouseleave', function () {\n      return config.onmouseout.call($$);\n    });\n    if ($$.config.svg_classname) {\n      $$.svg.attr('class', $$.config.svg_classname);\n    }\n    // Define defs\n    defs = $$.svg.append('defs');\n    $$.clipChart = $$.appendClip(defs, $$.clipId);\n    $$.clipXAxis = $$.appendClip(defs, $$.clipIdForXAxis);\n    $$.clipYAxis = $$.appendClip(defs, $$.clipIdForYAxis);\n    $$.clipGrid = $$.appendClip(defs, $$.clipIdForGrid);\n    $$.clipSubchart = $$.appendClip(defs, $$.clipIdForSubchart);\n    $$.updateSvgSize();\n    // Define regions\n    main = $$.main = $$.svg.append('g').attr('transform', $$.getTranslate('main'));\n    if ($$.initPie) {\n      $$.initPie();\n    }\n    if ($$.initDragZoom) {\n      $$.initDragZoom();\n    }\n    if (config.subchart_show && $$.initSubchart) {\n      $$.initSubchart();\n    }\n    if ($$.initTooltip) {\n      $$.initTooltip();\n    }\n    if ($$.initLegend) {\n      $$.initLegend();\n    }\n    if ($$.initTitle) {\n      $$.initTitle();\n    }\n    if ($$.initZoom) {\n      $$.initZoom();\n    }\n    if ($$.isStanfordGraphType()) {\n      $$.drawColorScale();\n    }\n    // Update selection based on size and scale\n    // TODO: currently this must be called after initLegend because of update of sizes, but it should be done in initSubchart.\n    if (config.subchart_show && $$.initSubchartBrush) {\n      $$.initSubchartBrush();\n    }\n    /*-- Main Region --*/\n    // text when empty\n    main.append('text').attr('class', CLASS.text + ' ' + CLASS.empty).attr('text-anchor', 'middle') // horizontal centering of text at x position in all browsers.\n    .attr('dominant-baseline', 'middle'); // vertical centering of text at y position in all browsers, except IE.\n    // Regions\n    $$.initRegion();\n    // Grids\n    $$.initGrid();\n    // Define g for chart area\n    main.append('g').attr('clip-path', $$.clipPath).attr('class', CLASS.chart);\n    // Grid lines\n    if (config.grid_lines_front) {\n      $$.initGridLines();\n    }\n    $$.initStanfordElements();\n    // Cover whole with rects for events\n    $$.initEventRect();\n    // Define g for chart\n    $$.initChartElements();\n    // Add Axis\n    $$.axis.init();\n    // Set targets\n    $$.updateTargets($$.data.targets);\n    // Set default extent if defined\n    if (config.axis_x_selection) {\n      $$.brush.selectionAsValue($$.getDefaultSelection());\n    }\n    // Draw with targets\n    if (binding) {\n      $$.updateDimension();\n      $$.config.oninit.call($$);\n      $$.redraw({\n        withTransition: false,\n        withTransform: true,\n        withUpdateXDomain: true,\n        withUpdateOrgXDomain: true,\n        withTransitionForAxis: false\n      });\n    }\n    // Bind to resize event\n    $$.bindResize();\n    // Bind to window focus event\n    $$.bindWindowFocus();\n    // export element of the chart\n    $$.api.element = $$.selectChart.node();\n  };\n  ChartInternal.prototype.smoothLines = function (el, type) {\n    var $$ = this;\n    if (type === 'grid') {\n      el.each(function () {\n        var g = $$.d3.select(this),\n          x1 = g.attr('x1'),\n          x2 = g.attr('x2'),\n          y1 = g.attr('y1'),\n          y2 = g.attr('y2');\n        g.attr({\n          x1: Math.ceil(x1),\n          x2: Math.ceil(x2),\n          y1: Math.ceil(y1),\n          y2: Math.ceil(y2)\n        });\n      });\n    }\n  };\n  ChartInternal.prototype.updateSizes = function () {\n    var $$ = this,\n      config = $$.config;\n    var legendHeight = $$.legend ? $$.getLegendHeight() : 0,\n      legendWidth = $$.legend ? $$.getLegendWidth() : 0,\n      legendHeightForBottom = $$.isLegendRight || $$.isLegendInset ? 0 : legendHeight,\n      hasArc = $$.hasArcType(),\n      xAxisHeight = config.axis_rotated || hasArc ? 0 : $$.getHorizontalAxisHeight('x'),\n      subchartXAxisHeight = config.axis_rotated || hasArc ? 0 : $$.getHorizontalAxisHeight('x', true),\n      subchartHeight = config.subchart_show && !hasArc ? config.subchart_size_height + subchartXAxisHeight : 0;\n    $$.currentWidth = $$.getCurrentWidth();\n    $$.currentHeight = $$.getCurrentHeight();\n    // for main\n    $$.margin = config.axis_rotated ? {\n      top: $$.getHorizontalAxisHeight('y2') + $$.getCurrentPaddingTop(),\n      right: hasArc ? 0 : $$.getCurrentPaddingRight(),\n      bottom: $$.getHorizontalAxisHeight('y') + legendHeightForBottom + $$.getCurrentPaddingBottom(),\n      left: subchartHeight + (hasArc ? 0 : $$.getCurrentPaddingLeft())\n    } : {\n      top: 4 + $$.getCurrentPaddingTop(),\n      right: hasArc ? 0 : $$.getCurrentPaddingRight(),\n      bottom: xAxisHeight + subchartHeight + legendHeightForBottom + $$.getCurrentPaddingBottom(),\n      left: hasArc ? 0 : $$.getCurrentPaddingLeft()\n    };\n    // for subchart\n    $$.margin2 = config.axis_rotated ? {\n      top: $$.margin.top,\n      right: NaN,\n      bottom: 20 + legendHeightForBottom,\n      left: $$.rotated_padding_left\n    } : {\n      top: $$.currentHeight - subchartHeight - legendHeightForBottom,\n      right: NaN,\n      bottom: subchartXAxisHeight + legendHeightForBottom,\n      left: $$.margin.left\n    };\n    // for legend\n    $$.margin3 = {\n      top: 0,\n      right: NaN,\n      bottom: 0,\n      left: 0\n    };\n    if ($$.updateSizeForLegend) {\n      $$.updateSizeForLegend(legendHeight, legendWidth);\n    }\n    $$.width = $$.currentWidth - $$.margin.left - $$.margin.right;\n    $$.height = $$.currentHeight - $$.margin.top - $$.margin.bottom;\n    if ($$.width < 0) {\n      $$.width = 0;\n    }\n    if ($$.height < 0) {\n      $$.height = 0;\n    }\n    $$.width2 = config.axis_rotated ? $$.margin.left - $$.rotated_padding_left - $$.rotated_padding_right : $$.width;\n    $$.height2 = config.axis_rotated ? $$.height : $$.currentHeight - $$.margin2.top - $$.margin2.bottom;\n    if ($$.width2 < 0) {\n      $$.width2 = 0;\n    }\n    if ($$.height2 < 0) {\n      $$.height2 = 0;\n    }\n    // for arc\n    $$.arcWidth = $$.width - ($$.isLegendRight ? legendWidth + 10 : 0);\n    $$.arcHeight = $$.height - ($$.isLegendRight ? 0 : 10);\n    if ($$.hasType('gauge') && !config.gauge_fullCircle) {\n      $$.arcHeight += $$.height - $$.getGaugeLabelHeight();\n    }\n    if ($$.updateRadius) {\n      $$.updateRadius();\n    }\n    if ($$.isLegendRight && hasArc) {\n      $$.margin3.left = $$.arcWidth / 2 + $$.radiusExpanded * 1.1;\n    }\n  };\n  ChartInternal.prototype.updateTargets = function (targets) {\n    var $$ = this,\n      config = $$.config;\n    /*-- Main --*/\n    //-- Text --//\n    $$.updateTargetsForText(targets);\n    //-- Bar --//\n    $$.updateTargetsForBar(targets);\n    //-- Line --//\n    $$.updateTargetsForLine(targets);\n    //-- Arc --//\n    if ($$.hasArcType() && $$.updateTargetsForArc) {\n      $$.updateTargetsForArc(targets);\n    }\n    /*-- Sub --*/\n    if (config.subchart_show && $$.updateTargetsForSubchart) {\n      $$.updateTargetsForSubchart(targets);\n    }\n    // Fade-in each chart\n    $$.showTargets();\n  };\n  ChartInternal.prototype.showTargets = function () {\n    var $$ = this;\n    $$.svg.selectAll('.' + CLASS.target).filter(function (d) {\n      return $$.isTargetToShow(d.id);\n    }).transition().duration($$.config.transition_duration).style('opacity', 1);\n  };\n  ChartInternal.prototype.redraw = function (options, transitions) {\n    var $$ = this,\n      main = $$.main,\n      d3 = $$.d3,\n      config = $$.config;\n    var areaIndices = $$.getShapeIndices($$.isAreaType),\n      barIndices = $$.getShapeIndices($$.isBarType),\n      lineIndices = $$.getShapeIndices($$.isLineType);\n    var withY, withSubchart, withTransition, withTransitionForExit, withTransitionForAxis, withTransform, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain, withLegend, withEventRect, withDimension, withUpdateXAxis;\n    var hideAxis = $$.hasArcType();\n    var drawArea, drawBar, drawLine, xForText, yForText;\n    var duration, durationForExit, durationForAxis;\n    var transitionsToWait, waitForDraw, flow, transition;\n    var targetsToShow = $$.filterTargetsToShow($$.data.targets),\n      tickValues,\n      i,\n      intervalForCulling,\n      xDomainForZoom;\n    var xv = $$.xv.bind($$),\n      cx,\n      cy;\n    options = options || {};\n    withY = getOption(options, 'withY', true);\n    withSubchart = getOption(options, 'withSubchart', true);\n    withTransition = getOption(options, 'withTransition', true);\n    withTransform = getOption(options, 'withTransform', false);\n    withUpdateXDomain = getOption(options, 'withUpdateXDomain', false);\n    withUpdateOrgXDomain = getOption(options, 'withUpdateOrgXDomain', false);\n    withTrimXDomain = getOption(options, 'withTrimXDomain', true);\n    withUpdateXAxis = getOption(options, 'withUpdateXAxis', withUpdateXDomain);\n    withLegend = getOption(options, 'withLegend', false);\n    withEventRect = getOption(options, 'withEventRect', true);\n    withDimension = getOption(options, 'withDimension', true);\n    withTransitionForExit = getOption(options, 'withTransitionForExit', withTransition);\n    withTransitionForAxis = getOption(options, 'withTransitionForAxis', withTransition);\n    duration = withTransition ? config.transition_duration : 0;\n    durationForExit = withTransitionForExit ? duration : 0;\n    durationForAxis = withTransitionForAxis ? duration : 0;\n    transitions = transitions || $$.axis.generateTransitions(durationForAxis);\n    // update legend and transform each g\n    if (withLegend && config.legend_show) {\n      $$.updateLegend($$.mapToIds($$.data.targets), options, transitions);\n    } else if (withDimension) {\n      // need to update dimension (e.g. axis.y.tick.values) because y tick values should change\n      // no need to update axis in it because they will be updated in redraw()\n      $$.updateDimension(true);\n    }\n    // MEMO: needed for grids calculation\n    if ($$.isCategorized() && targetsToShow.length === 0) {\n      $$.x.domain([0, $$.axes.x.selectAll('.tick').size()]);\n    }\n    if (targetsToShow.length) {\n      $$.updateXDomain(targetsToShow, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain);\n      if (!config.axis_x_tick_values) {\n        tickValues = $$.axis.updateXAxisTickValues(targetsToShow);\n      }\n    } else {\n      $$.xAxis.tickValues([]);\n      $$.subXAxis.tickValues([]);\n    }\n    if (config.zoom_rescale && !options.flow) {\n      xDomainForZoom = $$.x.orgDomain();\n    }\n    $$.y.domain($$.getYDomain(targetsToShow, 'y', xDomainForZoom));\n    $$.y2.domain($$.getYDomain(targetsToShow, 'y2', xDomainForZoom));\n    if (!config.axis_y_tick_values && config.axis_y_tick_count) {\n      $$.yAxis.tickValues($$.axis.generateTickValues($$.y.domain(), config.axis_y_tick_count));\n    }\n    if (!config.axis_y2_tick_values && config.axis_y2_tick_count) {\n      $$.y2Axis.tickValues($$.axis.generateTickValues($$.y2.domain(), config.axis_y2_tick_count));\n    }\n    // axes\n    $$.axis.redraw(durationForAxis, hideAxis);\n    // Update axis label\n    $$.axis.updateLabels(withTransition);\n    // show/hide if manual culling needed\n    if ((withUpdateXDomain || withUpdateXAxis) && targetsToShow.length) {\n      if (config.axis_x_tick_culling && tickValues) {\n        for (i = 1; i < tickValues.length; i++) {\n          if (tickValues.length / i < config.axis_x_tick_culling_max) {\n            intervalForCulling = i;\n            break;\n          }\n        }\n        $$.svg.selectAll('.' + CLASS.axisX + ' .tick text').each(function (e) {\n          var index = tickValues.indexOf(e);\n          if (index >= 0) {\n            d3.select(this).style('display', index % intervalForCulling ? 'none' : 'block');\n          }\n        });\n      } else {\n        $$.svg.selectAll('.' + CLASS.axisX + ' .tick text').style('display', 'block');\n      }\n    }\n    // setup drawer - MEMO: these must be called after axis updated\n    drawArea = $$.generateDrawArea ? $$.generateDrawArea(areaIndices, false) : undefined;\n    drawBar = $$.generateDrawBar ? $$.generateDrawBar(barIndices) : undefined;\n    drawLine = $$.generateDrawLine ? $$.generateDrawLine(lineIndices, false) : undefined;\n    xForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, true);\n    yForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, false);\n    // update circleY based on updated parameters\n    $$.updateCircleY();\n    // generate circle x/y functions depending on updated params\n    cx = ($$.config.axis_rotated ? $$.circleY : $$.circleX).bind($$);\n    cy = ($$.config.axis_rotated ? $$.circleX : $$.circleY).bind($$);\n    // Update sub domain\n    if (withY) {\n      $$.subY.domain($$.getYDomain(targetsToShow, 'y'));\n      $$.subY2.domain($$.getYDomain(targetsToShow, 'y2'));\n    }\n    // xgrid focus\n    $$.updateXgridFocus();\n    // Data empty label positioning and text.\n    main.select('text.' + CLASS.text + '.' + CLASS.empty).attr('x', $$.width / 2).attr('y', $$.height / 2).text(config.data_empty_label_text).transition().style('opacity', targetsToShow.length ? 0 : 1);\n    // event rect\n    if (withEventRect) {\n      $$.redrawEventRect();\n    }\n    // grid\n    $$.updateGrid(duration);\n    $$.updateStanfordElements(duration);\n    // rect for regions\n    $$.updateRegion(duration);\n    // bars\n    $$.updateBar(durationForExit);\n    // lines, areas and circles\n    $$.updateLine(durationForExit);\n    $$.updateArea(durationForExit);\n    $$.updateCircle(cx, cy);\n    // text\n    if ($$.hasDataLabel()) {\n      $$.updateText(xForText, yForText, durationForExit);\n    }\n    // title\n    if ($$.redrawTitle) {\n      $$.redrawTitle();\n    }\n    // arc\n    if ($$.redrawArc) {\n      $$.redrawArc(duration, durationForExit, withTransform);\n    }\n    // subchart\n    if (config.subchart_show && $$.redrawSubchart) {\n      $$.redrawSubchart(withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices);\n    }\n    if ($$.isStanfordGraphType()) {\n      $$.drawColorScale();\n    }\n    // circles for select\n    main.selectAll('.' + CLASS.selectedCircles).filter($$.isBarType.bind($$)).selectAll('circle').remove();\n    if (options.flow) {\n      flow = $$.generateFlow({\n        targets: targetsToShow,\n        flow: options.flow,\n        duration: options.flow.duration,\n        drawBar: drawBar,\n        drawLine: drawLine,\n        drawArea: drawArea,\n        cx: cx,\n        cy: cy,\n        xv: xv,\n        xForText: xForText,\n        yForText: yForText\n      });\n    }\n    if (duration && $$.isTabVisible()) {\n      // Only use transition if tab visible. See #938.\n      // transition should be derived from one transition\n      transition = d3.transition().duration(duration);\n      transitionsToWait = [];\n      [$$.redrawBar(drawBar, true, transition), $$.redrawLine(drawLine, true, transition), $$.redrawArea(drawArea, true, transition), $$.redrawCircle(cx, cy, true, transition), $$.redrawText(xForText, yForText, options.flow, true, transition), $$.redrawRegion(true, transition), $$.redrawGrid(true, transition)].forEach(function (transitions) {\n        transitions.forEach(function (transition) {\n          transitionsToWait.push(transition);\n        });\n      });\n      // Wait for end of transitions to call flow and onrendered callback\n      waitForDraw = $$.generateWait();\n      transitionsToWait.forEach(function (t) {\n        waitForDraw.add(t);\n      });\n      waitForDraw(function () {\n        if (flow) {\n          flow();\n        }\n        if (config.onrendered) {\n          config.onrendered.call($$);\n        }\n      });\n    } else {\n      $$.redrawBar(drawBar);\n      $$.redrawLine(drawLine);\n      $$.redrawArea(drawArea);\n      $$.redrawCircle(cx, cy);\n      $$.redrawText(xForText, yForText, options.flow);\n      $$.redrawRegion();\n      $$.redrawGrid();\n      if (flow) {\n        flow();\n      }\n      if (config.onrendered) {\n        config.onrendered.call($$);\n      }\n    }\n    // update fadein condition\n    $$.mapToIds($$.data.targets).forEach(function (id) {\n      $$.withoutFadeIn[id] = true;\n    });\n  };\n  ChartInternal.prototype.updateAndRedraw = function (options) {\n    var $$ = this,\n      config = $$.config,\n      transitions;\n    options = options || {};\n    // same with redraw\n    options.withTransition = getOption(options, 'withTransition', true);\n    options.withTransform = getOption(options, 'withTransform', false);\n    options.withLegend = getOption(options, 'withLegend', false);\n    // NOT same with redraw\n    options.withUpdateXDomain = getOption(options, 'withUpdateXDomain', true);\n    options.withUpdateOrgXDomain = getOption(options, 'withUpdateOrgXDomain', true);\n    options.withTransitionForExit = false;\n    options.withTransitionForTransform = getOption(options, 'withTransitionForTransform', options.withTransition);\n    // MEMO: this needs to be called before updateLegend and it means this ALWAYS needs to be called)\n    $$.updateSizes();\n    // MEMO: called in updateLegend in redraw if withLegend\n    if (!(options.withLegend && config.legend_show)) {\n      transitions = $$.axis.generateTransitions(options.withTransitionForAxis ? config.transition_duration : 0);\n      // Update scales\n      $$.updateScales();\n      $$.updateSvgSize();\n      // Update g positions\n      $$.transformAll(options.withTransitionForTransform, transitions);\n    }\n    // Draw with new sizes & scales\n    $$.redraw(options, transitions);\n  };\n  ChartInternal.prototype.redrawWithoutRescale = function () {\n    this.redraw({\n      withY: false,\n      withSubchart: false,\n      withEventRect: false,\n      withTransitionForAxis: false\n    });\n  };\n  ChartInternal.prototype.isTimeSeries = function () {\n    return this.config.axis_x_type === 'timeseries';\n  };\n  ChartInternal.prototype.isCategorized = function () {\n    return this.config.axis_x_type.indexOf('categor') >= 0;\n  };\n  ChartInternal.prototype.isCustomX = function () {\n    var $$ = this,\n      config = $$.config;\n    return !$$.isTimeSeries() && (config.data_x || notEmpty(config.data_xs));\n  };\n  ChartInternal.prototype.isTimeSeriesY = function () {\n    return this.config.axis_y_type === 'timeseries';\n  };\n  ChartInternal.prototype.getTranslate = function (target) {\n    var $$ = this,\n      config = $$.config,\n      x,\n      y;\n    if (target === 'main') {\n      x = asHalfPixel($$.margin.left);\n      y = asHalfPixel($$.margin.top);\n    } else if (target === 'context') {\n      x = asHalfPixel($$.margin2.left);\n      y = asHalfPixel($$.margin2.top);\n    } else if (target === 'legend') {\n      x = $$.margin3.left;\n      y = $$.margin3.top;\n    } else if (target === 'x') {\n      x = 0;\n      y = config.axis_rotated ? 0 : $$.height;\n    } else if (target === 'y') {\n      x = 0;\n      y = config.axis_rotated ? $$.height : 0;\n    } else if (target === 'y2') {\n      x = config.axis_rotated ? 0 : $$.width;\n      y = config.axis_rotated ? 1 : 0;\n    } else if (target === 'subx') {\n      x = 0;\n      y = config.axis_rotated ? 0 : $$.height2;\n    } else if (target === 'arc') {\n      x = $$.arcWidth / 2;\n      y = $$.arcHeight / 2 - ($$.hasType('gauge') ? 6 : 0); // to prevent wrong display of min and max label\n    }\n\n    return 'translate(' + x + ',' + y + ')';\n  };\n  ChartInternal.prototype.initialOpacity = function (d) {\n    return d.value !== null && this.withoutFadeIn[d.id] ? 1 : 0;\n  };\n  ChartInternal.prototype.initialOpacityForCircle = function (d) {\n    return d.value !== null && this.withoutFadeIn[d.id] ? this.opacityForCircle(d) : 0;\n  };\n  ChartInternal.prototype.opacityForCircle = function (d) {\n    var isPointShouldBeShown = isFunction(this.config.point_show) ? this.config.point_show(d) : this.config.point_show;\n    var opacity = isPointShouldBeShown || this.isStanfordType(d) ? 1 : 0;\n    return isValue(d.value) ? this.isScatterType(d) ? 0.5 : opacity : 0;\n  };\n  ChartInternal.prototype.opacityForText = function () {\n    return this.hasDataLabel() ? 1 : 0;\n  };\n  ChartInternal.prototype.xx = function (d) {\n    return d ? this.x(d.x) : null;\n  };\n  ChartInternal.prototype.xvCustom = function (d, xyValue) {\n    var $$ = this,\n      value = xyValue ? d[xyValue] : d.value;\n    if ($$.isTimeSeries()) {\n      value = $$.parseDate(d.value);\n    } else if ($$.isCategorized() && typeof d.value === 'string') {\n      value = $$.config.axis_x_categories.indexOf(d.value);\n    }\n    return Math.ceil($$.x(value));\n  };\n  ChartInternal.prototype.yvCustom = function (d, xyValue) {\n    var $$ = this,\n      yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y,\n      value = xyValue ? d[xyValue] : d.value;\n    return Math.ceil(yScale(value));\n  };\n  ChartInternal.prototype.xv = function (d) {\n    var $$ = this,\n      value = d.value;\n    if ($$.isTimeSeries()) {\n      value = $$.parseDate(d.value);\n    } else if ($$.isCategorized() && typeof d.value === 'string') {\n      value = $$.config.axis_x_categories.indexOf(d.value);\n    }\n    return Math.ceil($$.x(value));\n  };\n  ChartInternal.prototype.yv = function (d) {\n    var $$ = this,\n      yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y;\n    return Math.ceil(yScale(d.value));\n  };\n  ChartInternal.prototype.subxx = function (d) {\n    return d ? this.subX(d.x) : null;\n  };\n  ChartInternal.prototype.transformMain = function (withTransition, transitions) {\n    var $$ = this,\n      xAxis,\n      yAxis,\n      y2Axis;\n    if (transitions && transitions.axisX) {\n      xAxis = transitions.axisX;\n    } else {\n      xAxis = $$.main.select('.' + CLASS.axisX);\n      if (withTransition) {\n        xAxis = xAxis.transition();\n      }\n    }\n    if (transitions && transitions.axisY) {\n      yAxis = transitions.axisY;\n    } else {\n      yAxis = $$.main.select('.' + CLASS.axisY);\n      if (withTransition) {\n        yAxis = yAxis.transition();\n      }\n    }\n    if (transitions && transitions.axisY2) {\n      y2Axis = transitions.axisY2;\n    } else {\n      y2Axis = $$.main.select('.' + CLASS.axisY2);\n      if (withTransition) {\n        y2Axis = y2Axis.transition();\n      }\n    }\n    (withTransition ? $$.main.transition() : $$.main).attr('transform', $$.getTranslate('main'));\n    xAxis.attr('transform', $$.getTranslate('x'));\n    yAxis.attr('transform', $$.getTranslate('y'));\n    y2Axis.attr('transform', $$.getTranslate('y2'));\n    $$.main.select('.' + CLASS.chartArcs).attr('transform', $$.getTranslate('arc'));\n  };\n  ChartInternal.prototype.transformAll = function (withTransition, transitions) {\n    var $$ = this;\n    $$.transformMain(withTransition, transitions);\n    if ($$.config.subchart_show) {\n      $$.transformContext(withTransition, transitions);\n    }\n    if ($$.legend) {\n      $$.transformLegend(withTransition);\n    }\n  };\n  ChartInternal.prototype.updateSvgSize = function () {\n    var $$ = this,\n      brush = $$.svg.select(\".\" + CLASS.brush + \" .overlay\");\n    $$.svg.attr('width', $$.currentWidth).attr('height', $$.currentHeight);\n    $$.svg.selectAll(['#' + $$.clipId, '#' + $$.clipIdForGrid]).select('rect').attr('width', $$.width).attr('height', $$.height);\n    $$.svg.select('#' + $$.clipIdForXAxis).select('rect').attr('x', $$.getXAxisClipX.bind($$)).attr('y', $$.getXAxisClipY.bind($$)).attr('width', $$.getXAxisClipWidth.bind($$)).attr('height', $$.getXAxisClipHeight.bind($$));\n    $$.svg.select('#' + $$.clipIdForYAxis).select('rect').attr('x', $$.getYAxisClipX.bind($$)).attr('y', $$.getYAxisClipY.bind($$)).attr('width', $$.getYAxisClipWidth.bind($$)).attr('height', $$.getYAxisClipHeight.bind($$));\n    $$.svg.select('#' + $$.clipIdForSubchart).select('rect').attr('width', $$.width).attr('height', brush.size() && brush.attr('height') || 0);\n    // MEMO: parent div's height will be bigger than svg when <!DOCTYPE html>\n    $$.selectChart.style('max-height', $$.currentHeight + 'px');\n  };\n  ChartInternal.prototype.updateDimension = function (withoutAxis) {\n    var $$ = this;\n    if (!withoutAxis) {\n      if ($$.config.axis_rotated) {\n        $$.axes.x.call($$.xAxis);\n        $$.axes.subx.call($$.subXAxis);\n      } else {\n        $$.axes.y.call($$.yAxis);\n        $$.axes.y2.call($$.y2Axis);\n      }\n    }\n    $$.updateSizes();\n    $$.updateScales();\n    $$.updateSvgSize();\n    $$.transformAll(false);\n  };\n  ChartInternal.prototype.observeInserted = function (selection) {\n    var $$ = this,\n      observer;\n    if (typeof MutationObserver === 'undefined') {\n      window.console.error('MutationObserver not defined.');\n      return;\n    }\n    observer = new MutationObserver(function (mutations) {\n      mutations.forEach(function (mutation) {\n        if (mutation.type === 'childList' && mutation.previousSibling) {\n          observer.disconnect();\n          // need to wait for completion of load because size calculation requires the actual sizes determined after that completion\n          $$.intervalForObserveInserted = window.setInterval(function () {\n            // parentNode will NOT be null when completed\n            if (selection.node().parentNode) {\n              window.clearInterval($$.intervalForObserveInserted);\n              $$.updateDimension();\n              if ($$.brush) {\n                $$.brush.update();\n              }\n              $$.config.oninit.call($$);\n              $$.redraw({\n                withTransform: true,\n                withUpdateXDomain: true,\n                withUpdateOrgXDomain: true,\n                withTransition: false,\n                withTransitionForTransform: false,\n                withLegend: true\n              });\n              selection.transition().style('opacity', 1);\n            }\n          }, 10);\n        }\n      });\n    });\n    observer.observe(selection.node(), {\n      attributes: true,\n      childList: true,\n      characterData: true\n    });\n  };\n  /**\r\n   * Binds handlers to the window resize event.\r\n   */\n  ChartInternal.prototype.bindResize = function () {\n    var $$ = this,\n      config = $$.config;\n    $$.resizeFunction = $$.generateResize(); // need to call .remove\n    $$.resizeFunction.add(function () {\n      config.onresize.call($$);\n    });\n    if (config.resize_auto) {\n      $$.resizeFunction.add(function () {\n        if ($$.resizeTimeout !== undefined) {\n          window.clearTimeout($$.resizeTimeout);\n        }\n        $$.resizeTimeout = window.setTimeout(function () {\n          delete $$.resizeTimeout;\n          $$.updateAndRedraw({\n            withUpdateXDomain: false,\n            withUpdateOrgXDomain: false,\n            withTransition: false,\n            withTransitionForTransform: false,\n            withLegend: true\n          });\n          if ($$.brush) {\n            $$.brush.update();\n          }\n        }, 100);\n      });\n    }\n    $$.resizeFunction.add(function () {\n      config.onresized.call($$);\n    });\n    $$.resizeIfElementDisplayed = function () {\n      // if element not displayed skip it\n      if ($$.api == null || !$$.api.element.offsetParent) {\n        return;\n      }\n      $$.resizeFunction();\n    };\n    window.addEventListener('resize', $$.resizeIfElementDisplayed, false);\n  };\n  /**\r\n   * Binds handlers to the window focus event.\r\n   */\n  ChartInternal.prototype.bindWindowFocus = function () {\n    var _this = this;\n    if (this.windowFocusHandler) {\n      // The handler is already set\n      return;\n    }\n    this.windowFocusHandler = function () {\n      _this.redraw();\n    };\n    window.addEventListener('focus', this.windowFocusHandler);\n  };\n  /**\r\n   * Unbinds from the window focus event.\r\n   */\n  ChartInternal.prototype.unbindWindowFocus = function () {\n    window.removeEventListener('focus', this.windowFocusHandler);\n    delete this.windowFocusHandler;\n  };\n  ChartInternal.prototype.generateResize = function () {\n    var resizeFunctions = [];\n    function callResizeFunctions() {\n      resizeFunctions.forEach(function (f) {\n        f();\n      });\n    }\n    callResizeFunctions.add = function (f) {\n      resizeFunctions.push(f);\n    };\n    callResizeFunctions.remove = function (f) {\n      for (var i = 0; i < resizeFunctions.length; i++) {\n        if (resizeFunctions[i] === f) {\n          resizeFunctions.splice(i, 1);\n          break;\n        }\n      }\n    };\n    return callResizeFunctions;\n  };\n  ChartInternal.prototype.endall = function (transition, callback) {\n    var n = 0;\n    transition.each(function () {\n      ++n;\n    }).on('end', function () {\n      if (! --n) {\n        callback.apply(this, arguments);\n      }\n    });\n  };\n  ChartInternal.prototype.generateWait = function () {\n    var $$ = this;\n    var transitionsToWait = [],\n      f = function (callback) {\n        var timer = setInterval(function () {\n          if (!$$.isTabVisible()) {\n            return;\n          }\n          var done = 0;\n          transitionsToWait.forEach(function (t) {\n            if (t.empty()) {\n              done += 1;\n              return;\n            }\n            try {\n              t.transition();\n            } catch (e) {\n              done += 1;\n            }\n          });\n          if (done === transitionsToWait.length) {\n            clearInterval(timer);\n            if (callback) {\n              callback();\n            }\n          }\n        }, 50);\n      };\n    f.add = function (transition) {\n      transitionsToWait.push(transition);\n    };\n    return f;\n  };\n  ChartInternal.prototype.parseDate = function (date) {\n    var $$ = this,\n      parsedDate;\n    if (date instanceof Date) {\n      parsedDate = date;\n    } else if (typeof date === 'string') {\n      parsedDate = $$.dataTimeParse(date);\n    } else if (typeof date === 'object') {\n      parsedDate = new Date(+date);\n    } else if (typeof date === 'number' && !isNaN(date)) {\n      parsedDate = new Date(+date);\n    }\n    if (!parsedDate || isNaN(+parsedDate)) {\n      window.console.error(\"Failed to parse x '\" + date + \"' to Date object\");\n    }\n    return parsedDate;\n  };\n  ChartInternal.prototype.isTabVisible = function () {\n    return !document.hidden;\n  };\n  ChartInternal.prototype.getPathBox = getPathBox;\n  ChartInternal.prototype.CLASS = CLASS;\n\n  /* jshint ignore:start */\n  (function () {\n    if (!('SVGPathSeg' in window)) {\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSeg\n      window.SVGPathSeg = function (type, typeAsLetter, owningPathSegList) {\n        this.pathSegType = type;\n        this.pathSegTypeAsLetter = typeAsLetter;\n        this._owningPathSegList = owningPathSegList;\n      };\n      window.SVGPathSeg.prototype.classname = 'SVGPathSeg';\n      window.SVGPathSeg.PATHSEG_UNKNOWN = 0;\n      window.SVGPathSeg.PATHSEG_CLOSEPATH = 1;\n      window.SVGPathSeg.PATHSEG_MOVETO_ABS = 2;\n      window.SVGPathSeg.PATHSEG_MOVETO_REL = 3;\n      window.SVGPathSeg.PATHSEG_LINETO_ABS = 4;\n      window.SVGPathSeg.PATHSEG_LINETO_REL = 5;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS = 6;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL = 7;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS = 8;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL = 9;\n      window.SVGPathSeg.PATHSEG_ARC_ABS = 10;\n      window.SVGPathSeg.PATHSEG_ARC_REL = 11;\n      window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS = 12;\n      window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL = 13;\n      window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS = 14;\n      window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL = 15;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS = 16;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL = 17;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS = 18;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL = 19;\n      // Notify owning PathSegList on any changes so they can be synchronized back to the path element.\n      window.SVGPathSeg.prototype._segmentChanged = function () {\n        if (this._owningPathSegList) this._owningPathSegList.segmentChanged(this);\n      };\n      window.SVGPathSegClosePath = function (owningPathSegList) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CLOSEPATH, 'z', owningPathSegList);\n      };\n      window.SVGPathSegClosePath.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegClosePath.prototype.toString = function () {\n        return '[object SVGPathSegClosePath]';\n      };\n      window.SVGPathSegClosePath.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter;\n      };\n      window.SVGPathSegClosePath.prototype.clone = function () {\n        return new window.SVGPathSegClosePath(undefined);\n      };\n      window.SVGPathSegMovetoAbs = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_ABS, 'M', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n      window.SVGPathSegMovetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegMovetoAbs.prototype.toString = function () {\n        return '[object SVGPathSegMovetoAbs]';\n      };\n      window.SVGPathSegMovetoAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n      window.SVGPathSegMovetoAbs.prototype.clone = function () {\n        return new window.SVGPathSegMovetoAbs(undefined, this._x, this._y);\n      };\n      Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegMovetoRel = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_REL, 'm', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n      window.SVGPathSegMovetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegMovetoRel.prototype.toString = function () {\n        return '[object SVGPathSegMovetoRel]';\n      };\n      window.SVGPathSegMovetoRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n      window.SVGPathSegMovetoRel.prototype.clone = function () {\n        return new window.SVGPathSegMovetoRel(undefined, this._x, this._y);\n      };\n      Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegLinetoAbs = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_ABS, 'L', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n      window.SVGPathSegLinetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegLinetoAbs.prototype.toString = function () {\n        return '[object SVGPathSegLinetoAbs]';\n      };\n      window.SVGPathSegLinetoAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n      window.SVGPathSegLinetoAbs.prototype.clone = function () {\n        return new window.SVGPathSegLinetoAbs(undefined, this._x, this._y);\n      };\n      Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegLinetoRel = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_REL, 'l', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n      window.SVGPathSegLinetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegLinetoRel.prototype.toString = function () {\n        return '[object SVGPathSegLinetoRel]';\n      };\n      window.SVGPathSegLinetoRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n      window.SVGPathSegLinetoRel.prototype.clone = function () {\n        return new window.SVGPathSegLinetoRel(undefined, this._x, this._y);\n      };\n      Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegCurvetoCubicAbs = function (owningPathSegList, x, y, x1, y1, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS, 'C', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n      window.SVGPathSegCurvetoCubicAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegCurvetoCubicAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicAbs]';\n      };\n      window.SVGPathSegCurvetoCubicAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n      window.SVGPathSegCurvetoCubicAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicAbs(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\n      };\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x1', {\n        get: function () {\n          return this._x1;\n        },\n        set: function (x1) {\n          this._x1 = x1;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y1', {\n        get: function () {\n          return this._y1;\n        },\n        set: function (y1) {\n          this._y1 = y1;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x2', {\n        get: function () {\n          return this._x2;\n        },\n        set: function (x2) {\n          this._x2 = x2;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y2', {\n        get: function () {\n          return this._y2;\n        },\n        set: function (y2) {\n          this._y2 = y2;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegCurvetoCubicRel = function (owningPathSegList, x, y, x1, y1, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL, 'c', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n      window.SVGPathSegCurvetoCubicRel.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegCurvetoCubicRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicRel]';\n      };\n      window.SVGPathSegCurvetoCubicRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n      window.SVGPathSegCurvetoCubicRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicRel(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\n      };\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x1', {\n        get: function () {\n          return this._x1;\n        },\n        set: function (x1) {\n          this._x1 = x1;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y1', {\n        get: function () {\n          return this._y1;\n        },\n        set: function (y1) {\n          this._y1 = y1;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x2', {\n        get: function () {\n          return this._x2;\n        },\n        set: function (x2) {\n          this._x2 = x2;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y2', {\n        get: function () {\n          return this._y2;\n        },\n        set: function (y2) {\n          this._y2 = y2;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegCurvetoQuadraticAbs = function (owningPathSegList, x, y, x1, y1) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS, 'Q', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n      };\n      window.SVGPathSegCurvetoQuadraticAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegCurvetoQuadraticAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticAbs]';\n      };\n      window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x + ' ' + this._y;\n      };\n      window.SVGPathSegCurvetoQuadraticAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticAbs(undefined, this._x, this._y, this._x1, this._y1);\n      };\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x1', {\n        get: function () {\n          return this._x1;\n        },\n        set: function (x1) {\n          this._x1 = x1;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y1', {\n        get: function () {\n          return this._y1;\n        },\n        set: function (y1) {\n          this._y1 = y1;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegCurvetoQuadraticRel = function (owningPathSegList, x, y, x1, y1) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL, 'q', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n      };\n      window.SVGPathSegCurvetoQuadraticRel.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegCurvetoQuadraticRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticRel]';\n      };\n      window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x + ' ' + this._y;\n      };\n      window.SVGPathSegCurvetoQuadraticRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticRel(undefined, this._x, this._y, this._x1, this._y1);\n      };\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x1', {\n        get: function () {\n          return this._x1;\n        },\n        set: function (x1) {\n          this._x1 = x1;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y1', {\n        get: function () {\n          return this._y1;\n        },\n        set: function (y1) {\n          this._y1 = y1;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegArcAbs = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_ABS, 'A', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._r1 = r1;\n        this._r2 = r2;\n        this._angle = angle;\n        this._largeArcFlag = largeArcFlag;\n        this._sweepFlag = sweepFlag;\n      };\n      window.SVGPathSegArcAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegArcAbs.prototype.toString = function () {\n        return '[object SVGPathSegArcAbs]';\n      };\n      window.SVGPathSegArcAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._r1 + ' ' + this._r2 + ' ' + this._angle + ' ' + (this._largeArcFlag ? '1' : '0') + ' ' + (this._sweepFlag ? '1' : '0') + ' ' + this._x + ' ' + this._y;\n      };\n      window.SVGPathSegArcAbs.prototype.clone = function () {\n        return new window.SVGPathSegArcAbs(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\n      };\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r1', {\n        get: function () {\n          return this._r1;\n        },\n        set: function (r1) {\n          this._r1 = r1;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r2', {\n        get: function () {\n          return this._r2;\n        },\n        set: function (r2) {\n          this._r2 = r2;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'angle', {\n        get: function () {\n          return this._angle;\n        },\n        set: function (angle) {\n          this._angle = angle;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'largeArcFlag', {\n        get: function () {\n          return this._largeArcFlag;\n        },\n        set: function (largeArcFlag) {\n          this._largeArcFlag = largeArcFlag;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'sweepFlag', {\n        get: function () {\n          return this._sweepFlag;\n        },\n        set: function (sweepFlag) {\n          this._sweepFlag = sweepFlag;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegArcRel = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_REL, 'a', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._r1 = r1;\n        this._r2 = r2;\n        this._angle = angle;\n        this._largeArcFlag = largeArcFlag;\n        this._sweepFlag = sweepFlag;\n      };\n      window.SVGPathSegArcRel.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegArcRel.prototype.toString = function () {\n        return '[object SVGPathSegArcRel]';\n      };\n      window.SVGPathSegArcRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._r1 + ' ' + this._r2 + ' ' + this._angle + ' ' + (this._largeArcFlag ? '1' : '0') + ' ' + (this._sweepFlag ? '1' : '0') + ' ' + this._x + ' ' + this._y;\n      };\n      window.SVGPathSegArcRel.prototype.clone = function () {\n        return new window.SVGPathSegArcRel(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\n      };\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r1', {\n        get: function () {\n          return this._r1;\n        },\n        set: function (r1) {\n          this._r1 = r1;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r2', {\n        get: function () {\n          return this._r2;\n        },\n        set: function (r2) {\n          this._r2 = r2;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'angle', {\n        get: function () {\n          return this._angle;\n        },\n        set: function (angle) {\n          this._angle = angle;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'largeArcFlag', {\n        get: function () {\n          return this._largeArcFlag;\n        },\n        set: function (largeArcFlag) {\n          this._largeArcFlag = largeArcFlag;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'sweepFlag', {\n        get: function () {\n          return this._sweepFlag;\n        },\n        set: function (sweepFlag) {\n          this._sweepFlag = sweepFlag;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegLinetoHorizontalAbs = function (owningPathSegList, x) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS, 'H', owningPathSegList);\n        this._x = x;\n      };\n      window.SVGPathSegLinetoHorizontalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegLinetoHorizontalAbs.prototype.toString = function () {\n        return '[object SVGPathSegLinetoHorizontalAbs]';\n      };\n      window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x;\n      };\n      window.SVGPathSegLinetoHorizontalAbs.prototype.clone = function () {\n        return new window.SVGPathSegLinetoHorizontalAbs(undefined, this._x);\n      };\n      Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegLinetoHorizontalRel = function (owningPathSegList, x) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL, 'h', owningPathSegList);\n        this._x = x;\n      };\n      window.SVGPathSegLinetoHorizontalRel.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegLinetoHorizontalRel.prototype.toString = function () {\n        return '[object SVGPathSegLinetoHorizontalRel]';\n      };\n      window.SVGPathSegLinetoHorizontalRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x;\n      };\n      window.SVGPathSegLinetoHorizontalRel.prototype.clone = function () {\n        return new window.SVGPathSegLinetoHorizontalRel(undefined, this._x);\n      };\n      Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegLinetoVerticalAbs = function (owningPathSegList, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS, 'V', owningPathSegList);\n        this._y = y;\n      };\n      window.SVGPathSegLinetoVerticalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegLinetoVerticalAbs.prototype.toString = function () {\n        return '[object SVGPathSegLinetoVerticalAbs]';\n      };\n      window.SVGPathSegLinetoVerticalAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._y;\n      };\n      window.SVGPathSegLinetoVerticalAbs.prototype.clone = function () {\n        return new window.SVGPathSegLinetoVerticalAbs(undefined, this._y);\n      };\n      Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegLinetoVerticalRel = function (owningPathSegList, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL, 'v', owningPathSegList);\n        this._y = y;\n      };\n      window.SVGPathSegLinetoVerticalRel.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegLinetoVerticalRel.prototype.toString = function () {\n        return '[object SVGPathSegLinetoVerticalRel]';\n      };\n      window.SVGPathSegLinetoVerticalRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._y;\n      };\n      window.SVGPathSegLinetoVerticalRel.prototype.clone = function () {\n        return new window.SVGPathSegLinetoVerticalRel(undefined, this._y);\n      };\n      Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegCurvetoCubicSmoothAbs = function (owningPathSegList, x, y, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS, 'S', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicSmoothAbs]';\n      };\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, this._x, this._y, this._x2, this._y2);\n      };\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x2', {\n        get: function () {\n          return this._x2;\n        },\n        set: function (x2) {\n          this._x2 = x2;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y2', {\n        get: function () {\n          return this._y2;\n        },\n        set: function (y2) {\n          this._y2 = y2;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegCurvetoCubicSmoothRel = function (owningPathSegList, x, y, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL, 's', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicSmoothRel]';\n      };\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, this._x, this._y, this._x2, this._y2);\n      };\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x2', {\n        get: function () {\n          return this._x2;\n        },\n        set: function (x2) {\n          this._x2 = x2;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y2', {\n        get: function () {\n          return this._y2;\n        },\n        set: function (y2) {\n          this._y2 = y2;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegCurvetoQuadraticSmoothAbs = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS, 'T', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticSmoothAbs]';\n      };\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, this._x, this._y);\n      };\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      window.SVGPathSegCurvetoQuadraticSmoothRel = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL, 't', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticSmoothRel]';\n      };\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, this._x, this._y);\n      };\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'x', {\n        get: function () {\n          return this._x;\n        },\n        set: function (x) {\n          this._x = x;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'y', {\n        get: function () {\n          return this._y;\n        },\n        set: function (y) {\n          this._y = y;\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      // Add createSVGPathSeg* functions to window.SVGPathElement.\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-Interfacewindow.SVGPathElement.\n      window.SVGPathElement.prototype.createSVGPathSegClosePath = function () {\n        return new window.SVGPathSegClosePath(undefined);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegMovetoAbs = function (x, y) {\n        return new window.SVGPathSegMovetoAbs(undefined, x, y);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegMovetoRel = function (x, y) {\n        return new window.SVGPathSegMovetoRel(undefined, x, y);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegLinetoAbs = function (x, y) {\n        return new window.SVGPathSegLinetoAbs(undefined, x, y);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegLinetoRel = function (x, y) {\n        return new window.SVGPathSegLinetoRel(undefined, x, y);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs = function (x, y, x1, y1, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicAbs(undefined, x, y, x1, y1, x2, y2);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel = function (x, y, x1, y1, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicRel(undefined, x, y, x1, y1, x2, y2);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs = function (x, y, x1, y1) {\n        return new window.SVGPathSegCurvetoQuadraticAbs(undefined, x, y, x1, y1);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel = function (x, y, x1, y1) {\n        return new window.SVGPathSegCurvetoQuadraticRel(undefined, x, y, x1, y1);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegArcAbs = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        return new window.SVGPathSegArcAbs(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegArcRel = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        return new window.SVGPathSegArcRel(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs = function (x) {\n        return new window.SVGPathSegLinetoHorizontalAbs(undefined, x);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel = function (x) {\n        return new window.SVGPathSegLinetoHorizontalRel(undefined, x);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs = function (y) {\n        return new window.SVGPathSegLinetoVerticalAbs(undefined, y);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel = function (y) {\n        return new window.SVGPathSegLinetoVerticalRel(undefined, y);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs = function (x, y, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, x, y, x2, y2);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel = function (x, y, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, x, y, x2, y2);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs = function (x, y) {\n        return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, x, y);\n      };\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel = function (x, y) {\n        return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, x, y);\n      };\n      if (!('getPathSegAtLength' in window.SVGPathElement.prototype)) {\n        // Add getPathSegAtLength to SVGPathElement.\n        // Spec: https://www.w3.org/TR/SVG11/single-page.html#paths-__svg__SVGPathElement__getPathSegAtLength\n        // This polyfill requires SVGPathElement.getTotalLength to implement the distance-along-a-path algorithm.\n        window.SVGPathElement.prototype.getPathSegAtLength = function (distance) {\n          if (distance === undefined || !isFinite(distance)) throw 'Invalid arguments.';\n          var measurementElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n          measurementElement.setAttribute('d', this.getAttribute('d'));\n          var lastPathSegment = measurementElement.pathSegList.numberOfItems - 1;\n          // If the path is empty, return 0.\n          if (lastPathSegment <= 0) return 0;\n          do {\n            measurementElement.pathSegList.removeItem(lastPathSegment);\n            if (distance > measurementElement.getTotalLength()) break;\n            lastPathSegment--;\n          } while (lastPathSegment > 0);\n          return lastPathSegment;\n        };\n      }\n    }\n    if (!('SVGPathSegList' in window)) {\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSegList\n      window.SVGPathSegList = function (pathElement) {\n        this._pathElement = pathElement;\n        this._list = this._parsePath(this._pathElement.getAttribute('d'));\n        // Use a MutationObserver to catch changes to the path's \"d\" attribute.\n        this._mutationObserverConfig = {\n          attributes: true,\n          attributeFilter: ['d']\n        };\n        this._pathElementMutationObserver = new MutationObserver(this._updateListFromPathMutations.bind(this));\n        this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\n      };\n      window.SVGPathSegList.prototype.classname = 'SVGPathSegList';\n      Object.defineProperty(window.SVGPathSegList.prototype, 'numberOfItems', {\n        get: function () {\n          this._checkPathSynchronizedToList();\n          return this._list.length;\n        },\n        enumerable: true\n      });\n      // Add the pathSegList accessors to window.SVGPathElement.\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGAnimatedPathData\n      Object.defineProperty(window.SVGPathElement.prototype, 'pathSegList', {\n        get: function () {\n          if (!this._pathSegList) this._pathSegList = new window.SVGPathSegList(this);\n          return this._pathSegList;\n        },\n        enumerable: true\n      });\n      // FIXME: The following are not implemented and simply return window.SVGPathElement.pathSegList.\n      Object.defineProperty(window.SVGPathElement.prototype, 'normalizedPathSegList', {\n        get: function () {\n          return this.pathSegList;\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathElement.prototype, 'animatedPathSegList', {\n        get: function () {\n          return this.pathSegList;\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathElement.prototype, 'animatedNormalizedPathSegList', {\n        get: function () {\n          return this.pathSegList;\n        },\n        enumerable: true\n      });\n      // Process any pending mutations to the path element and update the list as needed.\n      // This should be the first call of all public functions and is needed because\n      // MutationObservers are not synchronous so we can have pending asynchronous mutations.\n      window.SVGPathSegList.prototype._checkPathSynchronizedToList = function () {\n        this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords());\n      };\n      window.SVGPathSegList.prototype._updateListFromPathMutations = function (mutationRecords) {\n        if (!this._pathElement) return;\n        var hasPathMutations = false;\n        mutationRecords.forEach(function (record) {\n          if (record.attributeName == 'd') hasPathMutations = true;\n        });\n        if (hasPathMutations) this._list = this._parsePath(this._pathElement.getAttribute('d'));\n      };\n      // Serialize the list and update the path's 'd' attribute.\n      window.SVGPathSegList.prototype._writeListToPath = function () {\n        this._pathElementMutationObserver.disconnect();\n        this._pathElement.setAttribute('d', window.SVGPathSegList._pathSegArrayAsString(this._list));\n        this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\n      };\n      // When a path segment changes the list needs to be synchronized back to the path element.\n      window.SVGPathSegList.prototype.segmentChanged = function (pathSeg) {\n        this._writeListToPath();\n      };\n      window.SVGPathSegList.prototype.clear = function () {\n        this._checkPathSynchronizedToList();\n        this._list.forEach(function (pathSeg) {\n          pathSeg._owningPathSegList = null;\n        });\n        this._list = [];\n        this._writeListToPath();\n      };\n      window.SVGPathSegList.prototype.initialize = function (newItem) {\n        this._checkPathSynchronizedToList();\n        this._list = [newItem];\n        newItem._owningPathSegList = this;\n        this._writeListToPath();\n        return newItem;\n      };\n      window.SVGPathSegList.prototype._checkValidIndex = function (index) {\n        if (isNaN(index) || index < 0 || index >= this.numberOfItems) throw 'INDEX_SIZE_ERR';\n      };\n      window.SVGPathSegList.prototype.getItem = function (index) {\n        this._checkPathSynchronizedToList();\n        this._checkValidIndex(index);\n        return this._list[index];\n      };\n      window.SVGPathSegList.prototype.insertItemBefore = function (newItem, index) {\n        this._checkPathSynchronizedToList();\n        // Spec: If the index is greater than or equal to numberOfItems, then the new item is appended to the end of the list.\n        if (index > this.numberOfItems) index = this.numberOfItems;\n        if (newItem._owningPathSegList) {\n          // SVG2 spec says to make a copy.\n          newItem = newItem.clone();\n        }\n        this._list.splice(index, 0, newItem);\n        newItem._owningPathSegList = this;\n        this._writeListToPath();\n        return newItem;\n      };\n      window.SVGPathSegList.prototype.replaceItem = function (newItem, index) {\n        this._checkPathSynchronizedToList();\n        if (newItem._owningPathSegList) {\n          // SVG2 spec says to make a copy.\n          newItem = newItem.clone();\n        }\n        this._checkValidIndex(index);\n        this._list[index] = newItem;\n        newItem._owningPathSegList = this;\n        this._writeListToPath();\n        return newItem;\n      };\n      window.SVGPathSegList.prototype.removeItem = function (index) {\n        this._checkPathSynchronizedToList();\n        this._checkValidIndex(index);\n        var item = this._list[index];\n        this._list.splice(index, 1);\n        this._writeListToPath();\n        return item;\n      };\n      window.SVGPathSegList.prototype.appendItem = function (newItem) {\n        this._checkPathSynchronizedToList();\n        if (newItem._owningPathSegList) {\n          // SVG2 spec says to make a copy.\n          newItem = newItem.clone();\n        }\n        this._list.push(newItem);\n        newItem._owningPathSegList = this;\n        // TODO: Optimize this to just append to the existing attribute.\n        this._writeListToPath();\n        return newItem;\n      };\n      window.SVGPathSegList._pathSegArrayAsString = function (pathSegArray) {\n        var string = '';\n        var first = true;\n        pathSegArray.forEach(function (pathSeg) {\n          if (first) {\n            first = false;\n            string += pathSeg._asPathString();\n          } else {\n            string += ' ' + pathSeg._asPathString();\n          }\n        });\n        return string;\n      };\n      // This closely follows SVGPathParser::parsePath from Source/core/svg/SVGPathParser.cpp.\n      window.SVGPathSegList.prototype._parsePath = function (string) {\n        if (!string || string.length == 0) return [];\n        var owningPathSegList = this;\n        var Builder = function () {\n          this.pathSegList = [];\n        };\n        Builder.prototype.appendSegment = function (pathSeg) {\n          this.pathSegList.push(pathSeg);\n        };\n        var Source = function (string) {\n          this._string = string;\n          this._currentIndex = 0;\n          this._endIndex = this._string.length;\n          this._previousCommand = window.SVGPathSeg.PATHSEG_UNKNOWN;\n          this._skipOptionalSpaces();\n        };\n        Source.prototype._isCurrentSpace = function () {\n          var character = this._string[this._currentIndex];\n          return character <= ' ' && (character == ' ' || character == '\\n' || character == '\\t' || character == '\\r' || character == '\\f');\n        };\n        Source.prototype._skipOptionalSpaces = function () {\n          while (this._currentIndex < this._endIndex && this._isCurrentSpace()) this._currentIndex++;\n          return this._currentIndex < this._endIndex;\n        };\n        Source.prototype._skipOptionalSpacesOrDelimiter = function () {\n          if (this._currentIndex < this._endIndex && !this._isCurrentSpace() && this._string.charAt(this._currentIndex) != ',') return false;\n          if (this._skipOptionalSpaces()) {\n            if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == ',') {\n              this._currentIndex++;\n              this._skipOptionalSpaces();\n            }\n          }\n          return this._currentIndex < this._endIndex;\n        };\n        Source.prototype.hasMoreData = function () {\n          return this._currentIndex < this._endIndex;\n        };\n        Source.prototype.peekSegmentType = function () {\n          var lookahead = this._string[this._currentIndex];\n          return this._pathSegTypeFromChar(lookahead);\n        };\n        Source.prototype._pathSegTypeFromChar = function (lookahead) {\n          switch (lookahead) {\n            case 'Z':\n            case 'z':\n              return window.SVGPathSeg.PATHSEG_CLOSEPATH;\n            case 'M':\n              return window.SVGPathSeg.PATHSEG_MOVETO_ABS;\n            case 'm':\n              return window.SVGPathSeg.PATHSEG_MOVETO_REL;\n            case 'L':\n              return window.SVGPathSeg.PATHSEG_LINETO_ABS;\n            case 'l':\n              return window.SVGPathSeg.PATHSEG_LINETO_REL;\n            case 'C':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;\n            case 'c':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;\n            case 'Q':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;\n            case 'q':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;\n            case 'A':\n              return window.SVGPathSeg.PATHSEG_ARC_ABS;\n            case 'a':\n              return window.SVGPathSeg.PATHSEG_ARC_REL;\n            case 'H':\n              return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;\n            case 'h':\n              return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;\n            case 'V':\n              return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;\n            case 'v':\n              return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;\n            case 'S':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;\n            case 's':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;\n            case 'T':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;\n            case 't':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;\n            default:\n              return window.SVGPathSeg.PATHSEG_UNKNOWN;\n          }\n        };\n        Source.prototype._nextCommandHelper = function (lookahead, previousCommand) {\n          // Check for remaining coordinates in the current command.\n          if ((lookahead == '+' || lookahead == '-' || lookahead == '.' || lookahead >= '0' && lookahead <= '9') && previousCommand != window.SVGPathSeg.PATHSEG_CLOSEPATH) {\n            if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_ABS) return window.SVGPathSeg.PATHSEG_LINETO_ABS;\n            if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_REL) return window.SVGPathSeg.PATHSEG_LINETO_REL;\n            return previousCommand;\n          }\n          return window.SVGPathSeg.PATHSEG_UNKNOWN;\n        };\n        Source.prototype.initialCommandIsMoveTo = function () {\n          // If the path is empty it is still valid, so return true.\n          if (!this.hasMoreData()) return true;\n          var command = this.peekSegmentType();\n          // Path must start with moveTo.\n          return command == window.SVGPathSeg.PATHSEG_MOVETO_ABS || command == window.SVGPathSeg.PATHSEG_MOVETO_REL;\n        };\n        // Parse a number from an SVG path. This very closely follows genericParseNumber(...) from Source/core/svg/SVGParserUtilities.cpp.\n        // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-PathDataBNF\n        Source.prototype._parseNumber = function () {\n          var exponent = 0;\n          var integer = 0;\n          var frac = 1;\n          var decimal = 0;\n          var sign = 1;\n          var expsign = 1;\n          var startIndex = this._currentIndex;\n          this._skipOptionalSpaces();\n          // Read the sign.\n          if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == '+') this._currentIndex++;else if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == '-') {\n            this._currentIndex++;\n            sign = -1;\n          }\n          if (this._currentIndex == this._endIndex || (this._string.charAt(this._currentIndex) < '0' || this._string.charAt(this._currentIndex) > '9') && this._string.charAt(this._currentIndex) != '.')\n            // The first character of a number must be one of [0-9+-.].\n            return undefined;\n          // Read the integer part, build right-to-left.\n          var startIntPartIndex = this._currentIndex;\n          while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= '0' && this._string.charAt(this._currentIndex) <= '9') this._currentIndex++; // Advance to first non-digit.\n          if (this._currentIndex != startIntPartIndex) {\n            var scanIntPartIndex = this._currentIndex - 1;\n            var multiplier = 1;\n            while (scanIntPartIndex >= startIntPartIndex) {\n              integer += multiplier * (this._string.charAt(scanIntPartIndex--) - '0');\n              multiplier *= 10;\n            }\n          }\n          // Read the decimals.\n          if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == '.') {\n            this._currentIndex++;\n            // There must be a least one digit following the .\n            if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < '0' || this._string.charAt(this._currentIndex) > '9') return undefined;\n            while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= '0' && this._string.charAt(this._currentIndex) <= '9') {\n              frac *= 10;\n              decimal += (this._string.charAt(this._currentIndex) - '0') / frac;\n              this._currentIndex += 1;\n            }\n          }\n          // Read the exponent part.\n          if (this._currentIndex != startIndex && this._currentIndex + 1 < this._endIndex && (this._string.charAt(this._currentIndex) == 'e' || this._string.charAt(this._currentIndex) == 'E') && this._string.charAt(this._currentIndex + 1) != 'x' && this._string.charAt(this._currentIndex + 1) != 'm') {\n            this._currentIndex++;\n            // Read the sign of the exponent.\n            if (this._string.charAt(this._currentIndex) == '+') {\n              this._currentIndex++;\n            } else if (this._string.charAt(this._currentIndex) == '-') {\n              this._currentIndex++;\n              expsign = -1;\n            }\n            // There must be an exponent.\n            if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < '0' || this._string.charAt(this._currentIndex) > '9') return undefined;\n            while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= '0' && this._string.charAt(this._currentIndex) <= '9') {\n              exponent *= 10;\n              exponent += this._string.charAt(this._currentIndex) - '0';\n              this._currentIndex++;\n            }\n          }\n          var number = integer + decimal;\n          number *= sign;\n          if (exponent) number *= Math.pow(10, expsign * exponent);\n          if (startIndex == this._currentIndex) return undefined;\n          this._skipOptionalSpacesOrDelimiter();\n          return number;\n        };\n        Source.prototype._parseArcFlag = function () {\n          if (this._currentIndex >= this._endIndex) return undefined;\n          var flag = false;\n          var flagChar = this._string.charAt(this._currentIndex++);\n          if (flagChar == '0') flag = false;else if (flagChar == '1') flag = true;else return undefined;\n          this._skipOptionalSpacesOrDelimiter();\n          return flag;\n        };\n        Source.prototype.parseSegment = function () {\n          var lookahead = this._string[this._currentIndex];\n          var command = this._pathSegTypeFromChar(lookahead);\n          if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) {\n            // Possibly an implicit command. Not allowed if this is the first command.\n            if (this._previousCommand == window.SVGPathSeg.PATHSEG_UNKNOWN) return null;\n            command = this._nextCommandHelper(lookahead, this._previousCommand);\n            if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) return null;\n          } else {\n            this._currentIndex++;\n          }\n          this._previousCommand = command;\n          switch (command) {\n            case window.SVGPathSeg.PATHSEG_MOVETO_REL:\n              return new window.SVGPathSegMovetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n            case window.SVGPathSeg.PATHSEG_MOVETO_ABS:\n              return new window.SVGPathSegMovetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n            case window.SVGPathSeg.PATHSEG_LINETO_REL:\n              return new window.SVGPathSegLinetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n            case window.SVGPathSeg.PATHSEG_LINETO_ABS:\n              return new window.SVGPathSegLinetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n            case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:\n              return new window.SVGPathSegLinetoHorizontalRel(owningPathSegList, this._parseNumber());\n            case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:\n              return new window.SVGPathSegLinetoHorizontalAbs(owningPathSegList, this._parseNumber());\n            case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:\n              return new window.SVGPathSegLinetoVerticalRel(owningPathSegList, this._parseNumber());\n            case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:\n              return new window.SVGPathSegLinetoVerticalAbs(owningPathSegList, this._parseNumber());\n            case window.SVGPathSeg.PATHSEG_CLOSEPATH:\n              this._skipOptionalSpaces();\n              return new window.SVGPathSegClosePath(owningPathSegList);\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:\n              var points = {\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicSmoothRel(owningPathSegList, points.x, points.y, points.x2, points.y2);\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:\n              var points = {\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicSmoothAbs(owningPathSegList, points.x, points.y, points.x2, points.y2);\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoQuadraticRel(owningPathSegList, points.x, points.y, points.x1, points.y1);\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoQuadraticAbs(owningPathSegList, points.x, points.y, points.x1, points.y1);\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:\n              return new window.SVGPathSegCurvetoQuadraticSmoothRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:\n              return new window.SVGPathSegCurvetoQuadraticSmoothAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n            case window.SVGPathSeg.PATHSEG_ARC_REL:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                arcAngle: this._parseNumber(),\n                arcLarge: this._parseArcFlag(),\n                arcSweep: this._parseArcFlag(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegArcRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\n            case window.SVGPathSeg.PATHSEG_ARC_ABS:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                arcAngle: this._parseNumber(),\n                arcLarge: this._parseArcFlag(),\n                arcSweep: this._parseArcFlag(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegArcAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\n            default:\n              throw 'Unknown path seg type.';\n          }\n        };\n        var builder = new Builder();\n        var source = new Source(string);\n        if (!source.initialCommandIsMoveTo()) return [];\n        while (source.hasMoreData()) {\n          var pathSeg = source.parseSegment();\n          if (!pathSeg) return [];\n          builder.appendSegment(pathSeg);\n        }\n        return builder.pathSegList;\n      };\n    }\n  })();\n  // String.padEnd polyfill for IE11\n  //\n  // https://github.com/uxitten/polyfill/blob/master/string.polyfill.js\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd\n  if (!String.prototype.padEnd) {\n    String.prototype.padEnd = function padEnd(targetLength, padString) {\n      targetLength = targetLength >> 0; //floor if number or convert non-number to 0;\n      padString = String(typeof padString !== 'undefined' ? padString : ' ');\n      if (this.length > targetLength) {\n        return String(this);\n      } else {\n        targetLength = targetLength - this.length;\n        if (targetLength > padString.length) {\n          padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\n        }\n\n        return String(this) + padString.slice(0, targetLength);\n      }\n    };\n  }\n  // Object.assign polyfill for IE11\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\n  if (typeof Object.assign !== 'function') {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, 'assign', {\n      value: function assign(target, varArgs) {\n        if (target === null || target === undefined) {\n          throw new TypeError('Cannot convert undefined or null to object');\n        }\n        var to = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n          var nextSource = arguments[index];\n          if (nextSource !== null && nextSource !== undefined) {\n            for (var nextKey in nextSource) {\n              // Avoid bugs when hasOwnProperty is shadowed\n              if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                to[nextKey] = nextSource[nextKey];\n              }\n            }\n          }\n        }\n        return to;\n      },\n      writable: true,\n      configurable: true\n    });\n  }\n  /* jshint ignore:end */\n\n  Chart.prototype.axis = function () {};\n  Chart.prototype.axis.labels = function (labels) {\n    var $$ = this.internal;\n    if (arguments.length) {\n      Object.keys(labels).forEach(function (axisId) {\n        $$.axis.setLabelText(axisId, labels[axisId]);\n      });\n      $$.axis.updateLabels();\n    }\n    // TODO: return some values?\n  };\n\n  Chart.prototype.axis.max = function (max) {\n    var $$ = this.internal,\n      config = $$.config;\n    if (arguments.length) {\n      if (typeof max === 'object') {\n        if (isValue(max.x)) {\n          config.axis_x_max = max.x;\n        }\n        if (isValue(max.y)) {\n          config.axis_y_max = max.y;\n        }\n        if (isValue(max.y2)) {\n          config.axis_y2_max = max.y2;\n        }\n      } else {\n        config.axis_y_max = config.axis_y2_max = max;\n      }\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    } else {\n      return {\n        x: config.axis_x_max,\n        y: config.axis_y_max,\n        y2: config.axis_y2_max\n      };\n    }\n  };\n  Chart.prototype.axis.min = function (min) {\n    var $$ = this.internal,\n      config = $$.config;\n    if (arguments.length) {\n      if (typeof min === 'object') {\n        if (isValue(min.x)) {\n          config.axis_x_min = min.x;\n        }\n        if (isValue(min.y)) {\n          config.axis_y_min = min.y;\n        }\n        if (isValue(min.y2)) {\n          config.axis_y2_min = min.y2;\n        }\n      } else {\n        config.axis_y_min = config.axis_y2_min = min;\n      }\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    } else {\n      return {\n        x: config.axis_x_min,\n        y: config.axis_y_min,\n        y2: config.axis_y2_min\n      };\n    }\n  };\n  Chart.prototype.axis.range = function (range) {\n    if (arguments.length) {\n      if (isDefined(range.max)) {\n        this.axis.max(range.max);\n      }\n      if (isDefined(range.min)) {\n        this.axis.min(range.min);\n      }\n    } else {\n      return {\n        max: this.axis.max(),\n        min: this.axis.min()\n      };\n    }\n  };\n  Chart.prototype.axis.types = function (types) {\n    var $$ = this.internal;\n    if (types === undefined) {\n      return {\n        y: $$.config.axis_y_type,\n        y2: $$.config.axis_y2_type\n      };\n    } else {\n      if (isDefined(types.y)) {\n        $$.config.axis_y_type = types.y;\n      }\n      if (isDefined(types.y2)) {\n        $$.config.axis_y2_type = types.y2;\n      }\n      $$.updateScales();\n      $$.redraw();\n    }\n  };\n  Chart.prototype.category = function (i, category) {\n    var $$ = this.internal,\n      config = $$.config;\n    if (arguments.length > 1) {\n      config.axis_x_categories[i] = category;\n      $$.redraw();\n    }\n    return config.axis_x_categories[i];\n  };\n  Chart.prototype.categories = function (categories) {\n    var $$ = this.internal,\n      config = $$.config;\n    if (!arguments.length) {\n      return config.axis_x_categories;\n    }\n    config.axis_x_categories = categories;\n    $$.redraw();\n    return config.axis_x_categories;\n  };\n  Chart.prototype.resize = function (size) {\n    var $$ = this.internal,\n      config = $$.config;\n    config.size_width = size ? size.width : null;\n    config.size_height = size ? size.height : null;\n    this.flush();\n  };\n  Chart.prototype.flush = function () {\n    var $$ = this.internal;\n    $$.updateAndRedraw({\n      withLegend: true,\n      withTransition: false,\n      withTransitionForTransform: false\n    });\n  };\n  Chart.prototype.destroy = function () {\n    var $$ = this.internal;\n    window.clearInterval($$.intervalForObserveInserted);\n    if ($$.resizeTimeout !== undefined) {\n      window.clearTimeout($$.resizeTimeout);\n    }\n    window.removeEventListener('resize', $$.resizeIfElementDisplayed);\n    // Removes the inner resize functions\n    $$.resizeFunction.remove();\n    // Unbinds from the window focus event\n    $$.unbindWindowFocus();\n    $$.selectChart.classed('c3', false).html('');\n    // MEMO: this is needed because the reference of some elements will not be released, then memory leak will happen.\n    Object.keys($$).forEach(function (key) {\n      $$[key] = null;\n    });\n    return null;\n  };\n\n  // TODO: fix\n  Chart.prototype.color = function (id) {\n    var $$ = this.internal;\n    return $$.color(id); // more patterns\n  };\n\n  Chart.prototype.data = function (targetIds) {\n    var targets = this.internal.data.targets;\n    return typeof targetIds === 'undefined' ? targets : targets.filter(function (t) {\n      return [].concat(targetIds).indexOf(t.id) >= 0;\n    });\n  };\n  Chart.prototype.data.shown = function (targetIds) {\n    return this.internal.filterTargetsToShow(this.data(targetIds));\n  };\n  /**\r\n   * Get values of the data loaded in the chart.\r\n   *\r\n   * @param {String|Array} targetId This API returns the value of specified target.\r\n   * @param flat\r\n   * @return {Array} Data values\r\n   */\n  Chart.prototype.data.values = function (targetId, flat) {\n    if (flat === void 0) {\n      flat = true;\n    }\n    var values = null;\n    if (targetId) {\n      var targets = this.data(targetId);\n      if (targets && isArray(targets)) {\n        values = targets.reduce(function (ret, v) {\n          var dataValue = v.values.map(function (d) {\n            return d.value;\n          });\n          if (flat) {\n            ret = ret.concat(dataValue);\n          } else {\n            ret.push(dataValue);\n          }\n          return ret;\n        }, []);\n      }\n    }\n    return values;\n  };\n  Chart.prototype.data.names = function (names) {\n    this.internal.clearLegendItemTextBoxCache();\n    return this.internal.updateDataAttributes('names', names);\n  };\n  Chart.prototype.data.colors = function (colors) {\n    return this.internal.updateDataAttributes('colors', colors);\n  };\n  Chart.prototype.data.axes = function (axes) {\n    return this.internal.updateDataAttributes('axes', axes);\n  };\n  Chart.prototype.data.stackNormalized = function (normalized) {\n    if (normalized === undefined) {\n      return this.internal.isStackNormalized();\n    }\n    this.internal.config.data_stack_normalize = !!normalized;\n    this.internal.redraw();\n  };\n  Chart.prototype.donut = function () {};\n  Chart.prototype.donut.padAngle = function (padAngle) {\n    if (padAngle === undefined) {\n      return this.internal.config.donut_padAngle;\n    }\n    this.internal.config.donut_padAngle = padAngle;\n    this.flush();\n  };\n  Chart.prototype.flow = function (args) {\n    var $$ = this.internal,\n      targets,\n      data,\n      notfoundIds = [],\n      orgDataCount = $$.getMaxDataCount(),\n      dataCount,\n      domain,\n      baseTarget,\n      baseValue,\n      length = 0,\n      tail = 0,\n      diff,\n      to;\n    if (args.json) {\n      data = $$.convertJsonToData(args.json, args.keys);\n    } else if (args.rows) {\n      data = $$.convertRowsToData(args.rows);\n    } else if (args.columns) {\n      data = $$.convertColumnsToData(args.columns);\n    } else {\n      return;\n    }\n    targets = $$.convertDataToTargets(data, true);\n    // Update/Add data\n    $$.data.targets.forEach(function (t) {\n      var found = false,\n        i,\n        j;\n      for (i = 0; i < targets.length; i++) {\n        if (t.id === targets[i].id) {\n          found = true;\n          if (t.values[t.values.length - 1]) {\n            tail = t.values[t.values.length - 1].index + 1;\n          }\n          length = targets[i].values.length;\n          for (j = 0; j < length; j++) {\n            targets[i].values[j].index = tail + j;\n            if (!$$.isTimeSeries()) {\n              targets[i].values[j].x = tail + j;\n            }\n          }\n          t.values = t.values.concat(targets[i].values);\n          targets.splice(i, 1);\n          break;\n        }\n      }\n      if (!found) {\n        notfoundIds.push(t.id);\n      }\n    });\n    // Append null for not found targets\n    $$.data.targets.forEach(function (t) {\n      var i, j;\n      for (i = 0; i < notfoundIds.length; i++) {\n        if (t.id === notfoundIds[i]) {\n          tail = t.values[t.values.length - 1].index + 1;\n          for (j = 0; j < length; j++) {\n            t.values.push({\n              id: t.id,\n              index: tail + j,\n              x: $$.isTimeSeries() ? $$.getOtherTargetX(tail + j) : tail + j,\n              value: null\n            });\n          }\n        }\n      }\n    });\n    // Generate null values for new target\n    if ($$.data.targets.length) {\n      targets.forEach(function (t) {\n        var i,\n          missing = [];\n        for (i = $$.data.targets[0].values[0].index; i < tail; i++) {\n          missing.push({\n            id: t.id,\n            index: i,\n            x: $$.isTimeSeries() ? $$.getOtherTargetX(i) : i,\n            value: null\n          });\n        }\n        t.values.forEach(function (v) {\n          v.index += tail;\n          if (!$$.isTimeSeries()) {\n            v.x += tail;\n          }\n        });\n        t.values = missing.concat(t.values);\n      });\n    }\n    $$.data.targets = $$.data.targets.concat(targets); // add remained\n    // check data count because behavior needs to change when it's only one\n    dataCount = $$.getMaxDataCount();\n    baseTarget = $$.data.targets[0];\n    baseValue = baseTarget.values[0];\n    // Update length to flow if needed\n    if (isDefined(args.to)) {\n      length = 0;\n      to = $$.isTimeSeries() ? $$.parseDate(args.to) : args.to;\n      baseTarget.values.forEach(function (v) {\n        if (v.x < to) {\n          length++;\n        }\n      });\n    } else if (isDefined(args.length)) {\n      length = args.length;\n    }\n    // If only one data, update the domain to flow from left edge of the chart\n    if (!orgDataCount) {\n      if ($$.isTimeSeries()) {\n        if (baseTarget.values.length > 1) {\n          diff = baseTarget.values[baseTarget.values.length - 1].x - baseValue.x;\n        } else {\n          diff = baseValue.x - $$.getXDomain($$.data.targets)[0];\n        }\n      } else {\n        diff = 1;\n      }\n      domain = [baseValue.x - diff, baseValue.x];\n      $$.updateXDomain(null, true, true, false, domain);\n    } else if (orgDataCount === 1) {\n      if ($$.isTimeSeries()) {\n        diff = (baseTarget.values[baseTarget.values.length - 1].x - baseValue.x) / 2;\n        domain = [new Date(+baseValue.x - diff), new Date(+baseValue.x + diff)];\n        $$.updateXDomain(null, true, true, false, domain);\n      }\n    }\n    // Set targets\n    $$.updateTargets($$.data.targets);\n    // Redraw with new targets\n    $$.redraw({\n      flow: {\n        index: baseValue.index,\n        length: length,\n        duration: isValue(args.duration) ? args.duration : $$.config.transition_duration,\n        done: args.done,\n        orgDataCount: orgDataCount\n      },\n      withLegend: true,\n      withTransition: orgDataCount > 1,\n      withTrimXDomain: false,\n      withUpdateXAxis: true\n    });\n  };\n  ChartInternal.prototype.generateFlow = function (args) {\n    var $$ = this,\n      config = $$.config,\n      d3 = $$.d3;\n    return function () {\n      var targets = args.targets,\n        flow = args.flow,\n        drawBar = args.drawBar,\n        drawLine = args.drawLine,\n        drawArea = args.drawArea,\n        cx = args.cx,\n        cy = args.cy,\n        xv = args.xv,\n        xForText = args.xForText,\n        yForText = args.yForText,\n        duration = args.duration;\n      var translateX,\n        scaleX = 1,\n        transform,\n        flowIndex = flow.index,\n        flowLength = flow.length,\n        flowStart = $$.getValueOnIndex($$.data.targets[0].values, flowIndex),\n        flowEnd = $$.getValueOnIndex($$.data.targets[0].values, flowIndex + flowLength),\n        orgDomain = $$.x.domain(),\n        domain,\n        durationForFlow = flow.duration || duration,\n        done = flow.done || function () {},\n        wait = $$.generateWait();\n      var xgrid, xgridLines, mainRegion, mainText, mainBar, mainLine, mainArea, mainCircle;\n      // set flag\n      $$.flowing = true;\n      // remove head data after rendered\n      $$.data.targets.forEach(function (d) {\n        d.values.splice(0, flowLength);\n      });\n      // update x domain to generate axis elements for flow\n      domain = $$.updateXDomain(targets, true, true);\n      // update elements related to x scale\n      if ($$.updateXGrid) {\n        $$.updateXGrid(true);\n      }\n      xgrid = $$.xgrid || d3.selectAll([]); // xgrid needs to be obtained after updateXGrid\n      xgridLines = $$.xgridLines || d3.selectAll([]);\n      mainRegion = $$.mainRegion || d3.selectAll([]);\n      mainText = $$.mainText || d3.selectAll([]);\n      mainBar = $$.mainBar || d3.selectAll([]);\n      mainLine = $$.mainLine || d3.selectAll([]);\n      mainArea = $$.mainArea || d3.selectAll([]);\n      mainCircle = $$.mainCircle || d3.selectAll([]);\n      // generate transform to flow\n      if (!flow.orgDataCount) {\n        // if empty\n        if ($$.data.targets[0].values.length !== 1) {\n          translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n        } else {\n          if ($$.isTimeSeries()) {\n            flowStart = $$.getValueOnIndex($$.data.targets[0].values, 0);\n            flowEnd = $$.getValueOnIndex($$.data.targets[0].values, $$.data.targets[0].values.length - 1);\n            translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\n          } else {\n            translateX = diffDomain(domain) / 2;\n          }\n        }\n      } else if (flow.orgDataCount === 1 || (flowStart && flowStart.x) === (flowEnd && flowEnd.x)) {\n        translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n      } else {\n        if ($$.isTimeSeries()) {\n          translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n        } else {\n          translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\n        }\n      }\n      scaleX = diffDomain(orgDomain) / diffDomain(domain);\n      transform = 'translate(' + translateX + ',0) scale(' + scaleX + ',1)';\n      $$.hideXGridFocus();\n      var flowTransition = d3.transition().ease(d3.easeLinear).duration(durationForFlow);\n      wait.add($$.xAxis($$.axes.x, flowTransition));\n      wait.add(mainBar.transition(flowTransition).attr('transform', transform));\n      wait.add(mainLine.transition(flowTransition).attr('transform', transform));\n      wait.add(mainArea.transition(flowTransition).attr('transform', transform));\n      wait.add(mainCircle.transition(flowTransition).attr('transform', transform));\n      wait.add(mainText.transition(flowTransition).attr('transform', transform));\n      wait.add(mainRegion.filter($$.isRegionOnX).transition(flowTransition).attr('transform', transform));\n      wait.add(xgrid.transition(flowTransition).attr('transform', transform));\n      wait.add(xgridLines.transition(flowTransition).attr('transform', transform));\n      wait(function () {\n        var i,\n          shapes = [],\n          texts = [];\n        // remove flowed elements\n        if (flowLength) {\n          for (i = 0; i < flowLength; i++) {\n            shapes.push('.' + CLASS.shape + '-' + (flowIndex + i));\n            texts.push('.' + CLASS.text + '-' + (flowIndex + i));\n          }\n          $$.svg.selectAll('.' + CLASS.shapes).selectAll(shapes).remove();\n          $$.svg.selectAll('.' + CLASS.texts).selectAll(texts).remove();\n          $$.svg.select('.' + CLASS.xgrid).remove();\n        }\n        // draw again for removing flowed elements and reverting attr\n        xgrid.attr('transform', null).attr('x1', $$.xgridAttr.x1).attr('x2', $$.xgridAttr.x2).attr('y1', $$.xgridAttr.y1).attr('y2', $$.xgridAttr.y2).style('opacity', $$.xgridAttr.opacity);\n        xgridLines.attr('transform', null);\n        xgridLines.select('line').attr('x1', config.axis_rotated ? 0 : xv).attr('x2', config.axis_rotated ? $$.width : xv);\n        xgridLines.select('text').attr('x', config.axis_rotated ? $$.width : 0).attr('y', xv);\n        mainBar.attr('transform', null).attr('d', drawBar);\n        mainLine.attr('transform', null).attr('d', drawLine);\n        mainArea.attr('transform', null).attr('d', drawArea);\n        mainCircle.attr('transform', null).attr('cx', cx).attr('cy', cy);\n        mainText.attr('transform', null).attr('x', xForText).attr('y', yForText).style('fill-opacity', $$.opacityForText.bind($$));\n        mainRegion.attr('transform', null);\n        mainRegion.filter($$.isRegionOnX).attr('x', $$.regionX.bind($$)).attr('width', $$.regionWidth.bind($$));\n        // callback for end of flow\n        done();\n        $$.flowing = false;\n      });\n    };\n  };\n  Chart.prototype.focus = function (targetIds) {\n    var $$ = this.internal,\n      candidates;\n    targetIds = $$.mapToTargetIds(targetIds);\n    candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$))), this.revert();\n    this.defocus();\n    candidates.classed(CLASS.focused, true).classed(CLASS.defocused, false);\n    if ($$.hasArcType()) {\n      $$.expandArc(targetIds);\n    }\n    $$.toggleFocusLegend(targetIds, true);\n    $$.focusedTargetIds = targetIds;\n    $$.defocusedTargetIds = $$.defocusedTargetIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n  };\n  Chart.prototype.defocus = function (targetIds) {\n    var $$ = this.internal,\n      candidates;\n    targetIds = $$.mapToTargetIds(targetIds);\n    candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$))), candidates.classed(CLASS.focused, false).classed(CLASS.defocused, true);\n    if ($$.hasArcType()) {\n      $$.unexpandArc(targetIds);\n    }\n    $$.toggleFocusLegend(targetIds, false);\n    $$.focusedTargetIds = $$.focusedTargetIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n    $$.defocusedTargetIds = targetIds;\n  };\n  Chart.prototype.revert = function (targetIds) {\n    var $$ = this.internal,\n      candidates;\n    targetIds = $$.mapToTargetIds(targetIds);\n    candidates = $$.svg.selectAll($$.selectorTargets(targetIds)); // should be for all targets\n    candidates.classed(CLASS.focused, false).classed(CLASS.defocused, false);\n    if ($$.hasArcType()) {\n      $$.unexpandArc(targetIds);\n    }\n    if ($$.config.legend_show) {\n      $$.showLegend(targetIds.filter($$.isLegendToShow.bind($$)));\n      $$.legend.selectAll($$.selectorLegends(targetIds)).filter(function () {\n        return $$.d3.select(this).classed(CLASS.legendItemFocused);\n      }).classed(CLASS.legendItemFocused, false);\n    }\n    $$.focusedTargetIds = [];\n    $$.defocusedTargetIds = [];\n  };\n  Chart.prototype.xgrids = function (grids) {\n    var $$ = this.internal,\n      config = $$.config;\n    if (!grids) {\n      return config.grid_x_lines;\n    }\n    config.grid_x_lines = grids;\n    $$.redrawWithoutRescale();\n    return config.grid_x_lines;\n  };\n  Chart.prototype.xgrids.add = function (grids) {\n    var $$ = this.internal;\n    return this.xgrids($$.config.grid_x_lines.concat(grids ? grids : []));\n  };\n  Chart.prototype.xgrids.remove = function (params) {\n    // TODO: multiple\n    var $$ = this.internal;\n    $$.removeGridLines(params, true);\n  };\n  Chart.prototype.ygrids = function (grids) {\n    var $$ = this.internal,\n      config = $$.config;\n    if (!grids) {\n      return config.grid_y_lines;\n    }\n    config.grid_y_lines = grids;\n    $$.redrawWithoutRescale();\n    return config.grid_y_lines;\n  };\n  Chart.prototype.ygrids.add = function (grids) {\n    var $$ = this.internal;\n    return this.ygrids($$.config.grid_y_lines.concat(grids ? grids : []));\n  };\n  Chart.prototype.ygrids.remove = function (params) {\n    // TODO: multiple\n    var $$ = this.internal;\n    $$.removeGridLines(params, false);\n  };\n  Chart.prototype.groups = function (groups) {\n    var $$ = this.internal,\n      config = $$.config;\n    if (isUndefined(groups)) {\n      return config.data_groups;\n    }\n    config.data_groups = groups;\n    $$.redraw();\n    return config.data_groups;\n  };\n  Chart.prototype.legend = function () {};\n  Chart.prototype.legend.show = function (targetIds) {\n    var $$ = this.internal;\n    $$.showLegend($$.mapToTargetIds(targetIds));\n    $$.updateAndRedraw({\n      withLegend: true\n    });\n  };\n  Chart.prototype.legend.hide = function (targetIds) {\n    var $$ = this.internal;\n    $$.hideLegend($$.mapToTargetIds(targetIds));\n    $$.updateAndRedraw({\n      withLegend: false\n    });\n  };\n  Chart.prototype.load = function (args) {\n    var $$ = this.internal,\n      config = $$.config;\n    // update xs if specified\n    if (args.xs) {\n      $$.addXs(args.xs);\n    }\n    // update names if exists\n    if ('names' in args) {\n      Chart.prototype.data.names.bind(this)(args.names);\n    }\n    // update classes if exists\n    if ('classes' in args) {\n      Object.keys(args.classes).forEach(function (id) {\n        config.data_classes[id] = args.classes[id];\n      });\n    }\n    // update categories if exists\n    if ('categories' in args && $$.isCategorized()) {\n      config.axis_x_categories = args.categories;\n    }\n    // update axes if exists\n    if ('axes' in args) {\n      Object.keys(args.axes).forEach(function (id) {\n        config.data_axes[id] = args.axes[id];\n      });\n    }\n    // update colors if exists\n    if ('colors' in args) {\n      Object.keys(args.colors).forEach(function (id) {\n        config.data_colors[id] = args.colors[id];\n      });\n    }\n    // use cache if exists\n    if ('cacheIds' in args && $$.hasCaches(args.cacheIds)) {\n      $$.load($$.getCaches(args.cacheIds), args.done);\n      return;\n    }\n    // unload if needed\n    if (args.unload) {\n      // TODO: do not unload if target will load (included in url/rows/columns)\n      $$.unload($$.mapToTargetIds(args.unload === true ? null : args.unload), function () {\n        $$.loadFromArgs(args);\n      });\n    } else {\n      $$.loadFromArgs(args);\n    }\n  };\n  Chart.prototype.unload = function (args) {\n    var $$ = this.internal;\n    args = args || {};\n    if (args instanceof Array) {\n      args = {\n        ids: args\n      };\n    } else if (typeof args === 'string') {\n      args = {\n        ids: [args]\n      };\n    }\n    $$.unload($$.mapToTargetIds(args.ids), function () {\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true,\n        withLegend: true\n      });\n      if (args.done) {\n        args.done();\n      }\n    });\n  };\n  Chart.prototype.pie = function () {};\n  Chart.prototype.pie.padAngle = function (padAngle) {\n    if (padAngle === undefined) {\n      return this.internal.config.pie_padAngle;\n    }\n    this.internal.config.pie_padAngle = padAngle;\n    this.flush();\n  };\n  Chart.prototype.regions = function (regions) {\n    var $$ = this.internal,\n      config = $$.config;\n    if (!regions) {\n      return config.regions;\n    }\n    config.regions = regions;\n    $$.redrawWithoutRescale();\n    return config.regions;\n  };\n  Chart.prototype.regions.add = function (regions) {\n    var $$ = this.internal,\n      config = $$.config;\n    if (!regions) {\n      return config.regions;\n    }\n    config.regions = config.regions.concat(regions);\n    $$.redrawWithoutRescale();\n    return config.regions;\n  };\n  Chart.prototype.regions.remove = function (options) {\n    var $$ = this.internal,\n      config = $$.config,\n      duration,\n      classes,\n      regions;\n    options = options || {};\n    duration = getOption(options, 'duration', config.transition_duration);\n    classes = getOption(options, 'classes', [CLASS.region]);\n    regions = $$.main.select('.' + CLASS.regions).selectAll(classes.map(function (c) {\n      return '.' + c;\n    }));\n    (duration ? regions.transition().duration(duration) : regions).style('opacity', 0).remove();\n    config.regions = config.regions.filter(function (region) {\n      var found = false;\n      if (!region['class']) {\n        return true;\n      }\n      region['class'].split(' ').forEach(function (c) {\n        if (classes.indexOf(c) >= 0) {\n          found = true;\n        }\n      });\n      return !found;\n    });\n    return config.regions;\n  };\n  Chart.prototype.selected = function (targetId) {\n    var $$ = this.internal,\n      d3 = $$.d3;\n    return $$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(targetId)).selectAll('.' + CLASS.shape).filter(function () {\n      return d3.select(this).classed(CLASS.SELECTED);\n    }).nodes().map(function (d) {\n      var data = d.__data__;\n      return data.data ? data.data : data;\n    });\n  };\n  Chart.prototype.select = function (ids, indices, resetOther) {\n    var $$ = this.internal,\n      d3 = $$.d3,\n      config = $$.config;\n    if (!config.data_selection_enabled) {\n      return;\n    }\n    $$.main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n      var shape = d3.select(this),\n        id = d.data ? d.data.id : d.id,\n        toggle = $$.getToggle(this, d).bind($$),\n        isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0,\n        isTargetIndex = !indices || indices.indexOf(i) >= 0,\n        isSelected = shape.classed(CLASS.SELECTED);\n      // line/area selection not supported yet\n      if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\n        return;\n      }\n      if (isTargetId && isTargetIndex) {\n        if (config.data_selection_isselectable(d) && !isSelected) {\n          toggle(true, shape.classed(CLASS.SELECTED, true), d, i);\n        }\n      } else if (isDefined(resetOther) && resetOther) {\n        if (isSelected) {\n          toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n        }\n      }\n    });\n  };\n  Chart.prototype.unselect = function (ids, indices) {\n    var $$ = this.internal,\n      d3 = $$.d3,\n      config = $$.config;\n    if (!config.data_selection_enabled) {\n      return;\n    }\n    $$.main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n      var shape = d3.select(this),\n        id = d.data ? d.data.id : d.id,\n        toggle = $$.getToggle(this, d).bind($$),\n        isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0,\n        isTargetIndex = !indices || indices.indexOf(i) >= 0,\n        isSelected = shape.classed(CLASS.SELECTED);\n      // line/area selection not supported yet\n      if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\n        return;\n      }\n      if (isTargetId && isTargetIndex) {\n        if (config.data_selection_isselectable(d)) {\n          if (isSelected) {\n            toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n          }\n        }\n      }\n    });\n  };\n  Chart.prototype.show = function (targetIds, options) {\n    var $$ = this.internal,\n      targets;\n    targetIds = $$.mapToTargetIds(targetIds);\n    options = options || {};\n    $$.removeHiddenTargetIds(targetIds);\n    targets = $$.svg.selectAll($$.selectorTargets(targetIds));\n    targets.transition().style('display', isIE() ? 'block' : 'initial', 'important').style('opacity', 1, 'important').call($$.endall, function () {\n      targets.style('opacity', null).style('opacity', 1);\n    });\n    if (options.withLegend) {\n      $$.showLegend(targetIds);\n    }\n    $$.redraw({\n      withUpdateOrgXDomain: true,\n      withUpdateXDomain: true,\n      withLegend: true\n    });\n  };\n  Chart.prototype.hide = function (targetIds, options) {\n    var $$ = this.internal,\n      targets;\n    targetIds = $$.mapToTargetIds(targetIds);\n    options = options || {};\n    $$.addHiddenTargetIds(targetIds);\n    targets = $$.svg.selectAll($$.selectorTargets(targetIds));\n    targets.transition().style('opacity', 0, 'important').call($$.endall, function () {\n      targets.style('opacity', null).style('opacity', 0);\n      targets.style('display', 'none');\n    });\n    if (options.withLegend) {\n      $$.hideLegend(targetIds);\n    }\n    $$.redraw({\n      withUpdateOrgXDomain: true,\n      withUpdateXDomain: true,\n      withLegend: true\n    });\n  };\n  Chart.prototype.toggle = function (targetIds, options) {\n    var that = this,\n      $$ = this.internal;\n    $$.mapToTargetIds(targetIds).forEach(function (targetId) {\n      $$.isTargetToShow(targetId) ? that.hide(targetId, options) : that.show(targetId, options);\n    });\n  };\n  Chart.prototype.subchart = function () {};\n  Chart.prototype.subchart.isShown = function () {\n    var $$ = this.internal;\n    return $$.config.subchart_show;\n  };\n  Chart.prototype.subchart.show = function () {\n    var $$ = this.internal;\n    if ($$.config.subchart_show) {\n      return;\n    }\n    $$.config.subchart_show = true;\n    // insert DOM\n    $$.initSubchart();\n    // update dimensions with sub chart now visible\n    $$.updateDimension();\n    // insert brush (depends on sizes previously updated)\n    $$.initSubchartBrush();\n    // attach data\n    $$.updateTargetsForSubchart($$.getTargets());\n    // reset fade-in state\n    $$.mapToIds($$.data.targets).forEach(function (id) {\n      $$.withoutFadeIn[id] = false;\n    });\n    // redraw chart !\n    $$.updateAndRedraw();\n    // update visible targets !\n    $$.showTargets();\n  };\n  Chart.prototype.subchart.hide = function () {\n    var $$ = this.internal;\n    if (!$$.config.subchart_show) {\n      return;\n    }\n    $$.config.subchart_show = false;\n    // remove DOM\n    $$.removeSubchart();\n    // re-render chart\n    $$.redraw();\n  };\n  Chart.prototype.tooltip = function () {};\n  Chart.prototype.tooltip.show = function (args) {\n    var $$ = this.internal,\n      targets,\n      data,\n      mouse = {};\n    // determine mouse position on the chart\n    if (args.mouse) {\n      mouse = args.mouse;\n    } else {\n      // determine focus data\n      if (args.data) {\n        data = args.data;\n      } else if (typeof args.x !== 'undefined') {\n        if (args.id) {\n          targets = $$.data.targets.filter(function (t) {\n            return t.id === args.id;\n          });\n        } else {\n          targets = $$.data.targets;\n        }\n        data = $$.filterByX(targets, args.x).slice(0, 1)[0];\n      }\n      mouse = data ? $$.getMousePosition(data) : null;\n    }\n    // emulate mouse events to show\n    $$.dispatchEvent('mousemove', mouse);\n    $$.config.tooltip_onshow.call($$, data);\n  };\n  Chart.prototype.tooltip.hide = function () {\n    // TODO: get target data by checking the state of focus\n    this.internal.dispatchEvent('mouseout', 0);\n    this.internal.config.tooltip_onhide.call(this);\n  };\n  Chart.prototype.transform = function (type, targetIds) {\n    var $$ = this.internal,\n      options = ['pie', 'donut'].indexOf(type) >= 0 ? {\n        withTransform: true\n      } : null;\n    $$.transformTo(targetIds, type, options);\n  };\n  ChartInternal.prototype.transformTo = function (targetIds, type, optionsForRedraw) {\n    var $$ = this,\n      withTransitionForAxis = !$$.hasArcType(),\n      options = optionsForRedraw || {\n        withTransitionForAxis: withTransitionForAxis\n      };\n    options.withTransitionForTransform = false;\n    $$.transiting = false;\n    $$.setTargetType(targetIds, type);\n    $$.updateTargets($$.data.targets); // this is needed when transforming to arc\n    $$.updateAndRedraw(options);\n  };\n  Chart.prototype.x = function (x) {\n    var $$ = this.internal;\n    if (arguments.length) {\n      $$.updateTargetX($$.data.targets, x);\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    }\n    return $$.data.xs;\n  };\n  Chart.prototype.xs = function (xs) {\n    var $$ = this.internal;\n    if (arguments.length) {\n      $$.updateTargetXs($$.data.targets, xs);\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    }\n    return $$.data.xs;\n  };\n  Chart.prototype.zoom = function (domain) {\n    var $$ = this.internal;\n    if (domain) {\n      if ($$.isTimeSeries()) {\n        domain = domain.map(function (x) {\n          return $$.parseDate(x);\n        });\n      }\n      if ($$.config.subchart_show) {\n        $$.brush.selectionAsValue(domain, true);\n      } else {\n        $$.updateXDomain(null, true, false, false, domain);\n        $$.redraw({\n          withY: $$.config.zoom_rescale,\n          withSubchart: false\n        });\n      }\n      $$.config.zoom_onzoom.call(this, $$.x.orgDomain());\n      return domain;\n    } else {\n      return $$.x.domain();\n    }\n  };\n  Chart.prototype.zoom.enable = function (enabled) {\n    var $$ = this.internal;\n    $$.config.zoom_enabled = enabled;\n    $$.updateAndRedraw();\n  };\n  Chart.prototype.unzoom = function () {\n    var $$ = this.internal;\n    if ($$.config.subchart_show) {\n      $$.brush.clear();\n    } else {\n      $$.updateXDomain(null, true, false, false, $$.subX.domain());\n      $$.redraw({\n        withY: $$.config.zoom_rescale,\n        withSubchart: false\n      });\n    }\n  };\n  Chart.prototype.zoom.max = function (max) {\n    var $$ = this.internal,\n      config = $$.config,\n      d3 = $$.d3;\n    if (max === 0 || max) {\n      config.zoom_x_max = d3.max([$$.orgXDomain[1], max]);\n    } else {\n      return config.zoom_x_max;\n    }\n  };\n  Chart.prototype.zoom.min = function (min) {\n    var $$ = this.internal,\n      config = $$.config,\n      d3 = $$.d3;\n    if (min === 0 || min) {\n      config.zoom_x_min = d3.min([$$.orgXDomain[0], min]);\n    } else {\n      return config.zoom_x_min;\n    }\n  };\n  Chart.prototype.zoom.range = function (range) {\n    if (arguments.length) {\n      if (isDefined(range.max)) {\n        this.domain.max(range.max);\n      }\n      if (isDefined(range.min)) {\n        this.domain.min(range.min);\n      }\n    } else {\n      return {\n        max: this.domain.max(),\n        min: this.domain.min()\n      };\n    }\n  };\n  ChartInternal.prototype.initPie = function () {\n    var $$ = this,\n      d3 = $$.d3;\n    $$.pie = d3.pie().padAngle(this.getPadAngle.bind(this)).value(function (d) {\n      return d.values.reduce(function (a, b) {\n        return a + b.value;\n      }, 0);\n    });\n    var orderFct = $$.getOrderFunction();\n    // we need to reverse the returned order if asc or desc to have the slice in expected order.\n    if (orderFct && ($$.isOrderAsc() || $$.isOrderDesc())) {\n      var defaultSort_1 = orderFct;\n      orderFct = function (t1, t2) {\n        return defaultSort_1(t1, t2) * -1;\n      };\n    }\n    $$.pie.sort(orderFct || null);\n  };\n  ChartInternal.prototype.updateRadius = function () {\n    var $$ = this,\n      config = $$.config,\n      w = config.gauge_width || config.donut_width,\n      gaugeArcWidth = $$.filterTargetsToShow($$.data.targets).length * $$.config.gauge_arcs_minWidth;\n    $$.radiusExpanded = Math.min($$.arcWidth, $$.arcHeight) / 2 * ($$.hasType('gauge') ? 0.85 : 1);\n    $$.radius = $$.radiusExpanded * 0.95;\n    $$.innerRadiusRatio = w ? ($$.radius - w) / $$.radius : 0.6;\n    $$.innerRadius = $$.hasType('donut') || $$.hasType('gauge') ? $$.radius * $$.innerRadiusRatio : 0;\n    $$.gaugeArcWidth = w ? w : gaugeArcWidth <= $$.radius - $$.innerRadius ? $$.radius - $$.innerRadius : gaugeArcWidth <= $$.radius ? gaugeArcWidth : $$.radius;\n  };\n  ChartInternal.prototype.getPadAngle = function () {\n    if (this.hasType('pie')) {\n      return this.config.pie_padAngle || 0;\n    } else if (this.hasType('donut')) {\n      return this.config.donut_padAngle || 0;\n    } else {\n      return 0;\n    }\n  };\n  ChartInternal.prototype.updateArc = function () {\n    var $$ = this;\n    $$.svgArc = $$.getSvgArc();\n    $$.svgArcExpanded = $$.getSvgArcExpanded();\n    $$.svgArcExpandedSub = $$.getSvgArcExpanded(0.98);\n  };\n  ChartInternal.prototype.updateAngle = function (d) {\n    var $$ = this,\n      config = $$.config,\n      found = false,\n      index = 0,\n      gMin,\n      gMax,\n      gTic,\n      gValue;\n    if (!config) {\n      return null;\n    }\n    $$.pie($$.filterTargetsToShow($$.data.targets)).forEach(function (t) {\n      if (!found && t.data.id === d.data.id) {\n        found = true;\n        d = t;\n        d.index = index;\n      }\n      index++;\n    });\n    if (isNaN(d.startAngle)) {\n      d.startAngle = 0;\n    }\n    if (isNaN(d.endAngle)) {\n      d.endAngle = d.startAngle;\n    }\n    if ($$.isGaugeType(d.data)) {\n      gMin = config.gauge_min;\n      gMax = config.gauge_max;\n      gTic = Math.PI * (config.gauge_fullCircle ? 2 : 1) / (gMax - gMin);\n      gValue = d.value < gMin ? 0 : d.value < gMax ? d.value - gMin : gMax - gMin;\n      d.startAngle = config.gauge_startingAngle;\n      d.endAngle = d.startAngle + gTic * gValue;\n    }\n    return found ? d : null;\n  };\n  ChartInternal.prototype.getSvgArc = function () {\n    var $$ = this,\n      hasGaugeType = $$.hasType('gauge'),\n      singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length,\n      arc = $$.d3.arc().outerRadius(function (d) {\n        return hasGaugeType ? $$.radius - singleArcWidth * d.index : $$.radius;\n      }).innerRadius(function (d) {\n        return hasGaugeType ? $$.radius - singleArcWidth * (d.index + 1) : $$.innerRadius;\n      }),\n      newArc = function (d, withoutUpdate) {\n        var updated;\n        if (withoutUpdate) {\n          return arc(d);\n        } // for interpolate\n        updated = $$.updateAngle(d);\n        return updated ? arc(updated) : 'M 0 0';\n      };\n    newArc.centroid = arc.centroid;\n    return newArc;\n  };\n  ChartInternal.prototype.getSvgArcExpanded = function (rate) {\n    rate = rate || 1;\n    var $$ = this,\n      hasGaugeType = $$.hasType('gauge'),\n      singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length,\n      expandWidth = Math.min($$.radiusExpanded * rate - $$.radius, singleArcWidth * 0.8 - (1 - rate) * 100),\n      arc = $$.d3.arc().outerRadius(function (d) {\n        return hasGaugeType ? $$.radius - singleArcWidth * d.index + expandWidth : $$.radiusExpanded * rate;\n      }).innerRadius(function (d) {\n        return hasGaugeType ? $$.radius - singleArcWidth * (d.index + 1) : $$.innerRadius;\n      });\n    return function (d) {\n      var updated = $$.updateAngle(d);\n      return updated ? arc(updated) : 'M 0 0';\n    };\n  };\n  ChartInternal.prototype.getArc = function (d, withoutUpdate, force) {\n    return force || this.isArcType(d.data) ? this.svgArc(d, withoutUpdate) : 'M 0 0';\n  };\n  ChartInternal.prototype.transformForArcLabel = function (d) {\n    var $$ = this,\n      config = $$.config,\n      updated = $$.updateAngle(d),\n      c,\n      x,\n      y,\n      h,\n      ratio,\n      translate = '',\n      hasGauge = $$.hasType('gauge');\n    if (updated && !hasGauge) {\n      c = this.svgArc.centroid(updated);\n      x = isNaN(c[0]) ? 0 : c[0];\n      y = isNaN(c[1]) ? 0 : c[1];\n      h = Math.sqrt(x * x + y * y);\n      if ($$.hasType('donut') && config.donut_label_ratio) {\n        ratio = isFunction(config.donut_label_ratio) ? config.donut_label_ratio(d, $$.radius, h) : config.donut_label_ratio;\n      } else if ($$.hasType('pie') && config.pie_label_ratio) {\n        ratio = isFunction(config.pie_label_ratio) ? config.pie_label_ratio(d, $$.radius, h) : config.pie_label_ratio;\n      } else {\n        ratio = $$.radius && h ? (36 / $$.radius > 0.375 ? 1.175 - 36 / $$.radius : 0.8) * $$.radius / h : 0;\n      }\n      translate = 'translate(' + x * ratio + ',' + y * ratio + ')';\n    } else if (updated && hasGauge && $$.filterTargetsToShow($$.data.targets).length > 1) {\n      var y1 = Math.sin(updated.endAngle - Math.PI / 2);\n      x = Math.cos(updated.endAngle - Math.PI / 2) * ($$.radiusExpanded + 25);\n      y = y1 * ($$.radiusExpanded + 15 - Math.abs(y1 * 10)) + 3;\n      translate = 'translate(' + x + ',' + y + ')';\n    }\n    return translate;\n  };\n  /**\r\n   * @deprecated Use `getRatio('arc', d)` instead.\r\n   */\n  ChartInternal.prototype.getArcRatio = function (d) {\n    return this.getRatio('arc', d);\n  };\n  ChartInternal.prototype.convertToArcData = function (d) {\n    return this.addName({\n      id: d.data.id,\n      value: d.value,\n      ratio: this.getRatio('arc', d),\n      index: d.index\n    });\n  };\n  ChartInternal.prototype.textForArcLabel = function (d) {\n    var $$ = this,\n      updated,\n      value,\n      ratio,\n      id,\n      format;\n    if (!$$.shouldShowArcLabel()) {\n      return '';\n    }\n    updated = $$.updateAngle(d);\n    value = updated ? updated.value : null;\n    ratio = $$.getRatio('arc', updated);\n    id = d.data.id;\n    if (!$$.hasType('gauge') && !$$.meetsArcLabelThreshold(ratio)) {\n      return '';\n    }\n    format = $$.getArcLabelFormat();\n    return format ? format(value, ratio, id) : $$.defaultArcValueFormat(value, ratio);\n  };\n  ChartInternal.prototype.textForGaugeMinMax = function (value, isMax) {\n    var $$ = this,\n      format = $$.getGaugeLabelExtents();\n    return format ? format(value, isMax) : value;\n  };\n  ChartInternal.prototype.expandArc = function (targetIds) {\n    var $$ = this,\n      interval;\n    // MEMO: avoid to cancel transition\n    if ($$.transiting) {\n      interval = window.setInterval(function () {\n        if (!$$.transiting) {\n          window.clearInterval(interval);\n          if ($$.legend.selectAll('.c3-legend-item-focused').size() > 0) {\n            $$.expandArc(targetIds);\n          }\n        }\n      }, 10);\n      return;\n    }\n    targetIds = $$.mapToTargetIds(targetIds);\n    $$.svg.selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc)).each(function (d) {\n      if (!$$.shouldExpand(d.data.id)) {\n        return;\n      }\n      $$.d3.select(this).selectAll('path').transition().duration($$.expandDuration(d.data.id)).attr('d', $$.svgArcExpanded).transition().duration($$.expandDuration(d.data.id) * 2).attr('d', $$.svgArcExpandedSub).each(function (d) {\n        if ($$.isDonutType(d.data)) ;\n      });\n    });\n  };\n  ChartInternal.prototype.unexpandArc = function (targetIds) {\n    var $$ = this;\n    if ($$.transiting) {\n      return;\n    }\n    targetIds = $$.mapToTargetIds(targetIds);\n    $$.svg.selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc)).selectAll('path').transition().duration(function (d) {\n      return $$.expandDuration(d.data.id);\n    }).attr('d', $$.svgArc);\n    $$.svg.selectAll('.' + CLASS.arc);\n  };\n  ChartInternal.prototype.expandDuration = function (id) {\n    var $$ = this,\n      config = $$.config;\n    if ($$.isDonutType(id)) {\n      return config.donut_expand_duration;\n    } else if ($$.isGaugeType(id)) {\n      return config.gauge_expand_duration;\n    } else if ($$.isPieType(id)) {\n      return config.pie_expand_duration;\n    } else {\n      return 50;\n    }\n  };\n  ChartInternal.prototype.shouldExpand = function (id) {\n    var $$ = this,\n      config = $$.config;\n    return $$.isDonutType(id) && config.donut_expand || $$.isGaugeType(id) && config.gauge_expand || $$.isPieType(id) && config.pie_expand;\n  };\n  ChartInternal.prototype.shouldShowArcLabel = function () {\n    var $$ = this,\n      config = $$.config,\n      shouldShow = true;\n    if ($$.hasType('donut')) {\n      shouldShow = config.donut_label_show;\n    } else if ($$.hasType('pie')) {\n      shouldShow = config.pie_label_show;\n    }\n    // when gauge, always true\n    return shouldShow;\n  };\n  ChartInternal.prototype.meetsArcLabelThreshold = function (ratio) {\n    var $$ = this,\n      config = $$.config,\n      threshold = $$.hasType('donut') ? config.donut_label_threshold : config.pie_label_threshold;\n    return ratio >= threshold;\n  };\n  ChartInternal.prototype.getArcLabelFormat = function () {\n    var $$ = this,\n      config = $$.config,\n      format = config.pie_label_format;\n    if ($$.hasType('gauge')) {\n      format = config.gauge_label_format;\n    } else if ($$.hasType('donut')) {\n      format = config.donut_label_format;\n    }\n    return format;\n  };\n  ChartInternal.prototype.getGaugeLabelExtents = function () {\n    var $$ = this,\n      config = $$.config;\n    return config.gauge_label_extents;\n  };\n  ChartInternal.prototype.getArcTitle = function () {\n    var $$ = this;\n    return $$.hasType('donut') ? $$.config.donut_title : '';\n  };\n  ChartInternal.prototype.updateTargetsForArc = function (targets) {\n    var $$ = this,\n      main = $$.main,\n      mainPies,\n      mainPieEnter,\n      classChartArc = $$.classChartArc.bind($$),\n      classArcs = $$.classArcs.bind($$),\n      classFocus = $$.classFocus.bind($$);\n    mainPies = main.select('.' + CLASS.chartArcs).selectAll('.' + CLASS.chartArc).data($$.pie(targets)).attr('class', function (d) {\n      return classChartArc(d) + classFocus(d.data);\n    });\n    mainPieEnter = mainPies.enter().append('g').attr('class', classChartArc);\n    mainPieEnter.append('g').attr('class', classArcs);\n    mainPieEnter.append('text').attr('dy', $$.hasType('gauge') ? '-.1em' : '.35em').style('opacity', 0).style('text-anchor', 'middle').style('pointer-events', 'none');\n    // MEMO: can not keep same color..., but not bad to update color in redraw\n    //mainPieUpdate.exit().remove();\n  };\n\n  ChartInternal.prototype.initArc = function () {\n    var $$ = this;\n    $$.arcs = $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartArcs).attr('transform', $$.getTranslate('arc'));\n    $$.arcs.append('text').attr('class', CLASS.chartArcsTitle).style('text-anchor', 'middle').text($$.getArcTitle());\n  };\n  ChartInternal.prototype.redrawArc = function (duration, durationForExit, withTransform) {\n    var $$ = this,\n      d3 = $$.d3,\n      config = $$.config,\n      main = $$.main,\n      arcs,\n      mainArc,\n      arcLabelLines,\n      mainArcLabelLine,\n      hasGaugeType = $$.hasType('gauge');\n    arcs = main.selectAll('.' + CLASS.arcs).selectAll('.' + CLASS.arc).data($$.arcData.bind($$));\n    mainArc = arcs.enter().append('path').attr('class', $$.classArc.bind($$)).style('fill', function (d) {\n      return $$.color(d.data);\n    }).style('cursor', function (d) {\n      return config.interaction_enabled && config.data_selection_isselectable(d) ? 'pointer' : null;\n    }).each(function (d) {\n      if ($$.isGaugeType(d.data)) {\n        d.startAngle = d.endAngle = config.gauge_startingAngle;\n      }\n      this._current = d;\n    }).merge(arcs);\n    if (hasGaugeType) {\n      arcLabelLines = main.selectAll('.' + CLASS.arcs).selectAll('.' + CLASS.arcLabelLine).data($$.arcData.bind($$));\n      mainArcLabelLine = arcLabelLines.enter().append('rect').attr('class', function (d) {\n        return CLASS.arcLabelLine + ' ' + CLASS.target + ' ' + CLASS.target + '-' + d.data.id;\n      }).merge(arcLabelLines);\n      if ($$.filterTargetsToShow($$.data.targets).length === 1) {\n        mainArcLabelLine.style('display', 'none');\n      } else {\n        mainArcLabelLine.style('fill', function (d) {\n          return $$.levelColor ? $$.levelColor(d.data.values.reduce(function (total, item) {\n            return total + item.value;\n          }, 0)) : $$.color(d.data);\n        }).style('display', config.gauge_labelLine_show ? '' : 'none').each(function (d) {\n          var lineLength = 0,\n            lineThickness = 2,\n            x = 0,\n            y = 0,\n            transform = '';\n          if ($$.hiddenTargetIds.indexOf(d.data.id) < 0) {\n            var updated = $$.updateAngle(d),\n              innerLineLength = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length * (updated.index + 1),\n              lineAngle = updated.endAngle - Math.PI / 2,\n              arcInnerRadius = $$.radius - innerLineLength,\n              linePositioningAngle = lineAngle - (arcInnerRadius === 0 ? 0 : 1 / arcInnerRadius);\n            lineLength = $$.radiusExpanded - $$.radius + innerLineLength;\n            x = Math.cos(linePositioningAngle) * arcInnerRadius;\n            y = Math.sin(linePositioningAngle) * arcInnerRadius;\n            transform = 'rotate(' + lineAngle * 180 / Math.PI + ', ' + x + ', ' + y + ')';\n          }\n          d3.select(this).attr('x', x).attr('y', y).attr('width', lineLength).attr('height', lineThickness).attr('transform', transform).style('stroke-dasharray', '0, ' + (lineLength + lineThickness) + ', 0');\n        });\n      }\n    }\n    mainArc.attr('transform', function (d) {\n      return !$$.isGaugeType(d.data) && withTransform ? 'scale(0)' : '';\n    }).on('mouseover', config.interaction_enabled ? function (d) {\n      var updated, arcData;\n      if ($$.transiting) {\n        // skip while transiting\n        return;\n      }\n      updated = $$.updateAngle(d);\n      if (updated) {\n        arcData = $$.convertToArcData(updated);\n        // transitions\n        $$.expandArc(updated.data.id);\n        $$.api.focus(updated.data.id);\n        $$.toggleFocusLegend(updated.data.id, true);\n        $$.config.data_onmouseover(arcData, this);\n      }\n    } : null).on('mousemove', config.interaction_enabled ? function (d) {\n      var updated = $$.updateAngle(d),\n        arcData,\n        selectedData;\n      if (updated) {\n        arcData = $$.convertToArcData(updated), selectedData = [arcData];\n        $$.showTooltip(selectedData, this);\n      }\n    } : null).on('mouseout', config.interaction_enabled ? function (d) {\n      var updated, arcData;\n      if ($$.transiting) {\n        // skip while transiting\n        return;\n      }\n      updated = $$.updateAngle(d);\n      if (updated) {\n        arcData = $$.convertToArcData(updated);\n        // transitions\n        $$.unexpandArc(updated.data.id);\n        $$.api.revert();\n        $$.revertLegend();\n        $$.hideTooltip();\n        $$.config.data_onmouseout(arcData, this);\n      }\n    } : null).on('click', config.interaction_enabled ? function (d, i) {\n      var updated = $$.updateAngle(d),\n        arcData;\n      if (updated) {\n        arcData = $$.convertToArcData(updated);\n        if ($$.toggleShape) {\n          $$.toggleShape(this, arcData, i);\n        }\n        $$.config.data_onclick.call($$.api, arcData, this);\n      }\n    } : null).each(function () {\n      $$.transiting = true;\n    }).transition().duration(duration).attrTween('d', function (d) {\n      var updated = $$.updateAngle(d),\n        interpolate;\n      if (!updated) {\n        return function () {\n          return 'M 0 0';\n        };\n      }\n      //                if (this._current === d) {\n      //                    this._current = {\n      //                        startAngle: Math.PI*2,\n      //                        endAngle: Math.PI*2,\n      //                    };\n      //                }\n      if (isNaN(this._current.startAngle)) {\n        this._current.startAngle = 0;\n      }\n      if (isNaN(this._current.endAngle)) {\n        this._current.endAngle = this._current.startAngle;\n      }\n      interpolate = d3.interpolate(this._current, updated);\n      this._current = interpolate(0);\n      return function (t) {\n        // prevents crashing the charts once in transition and chart.destroy() has been called\n        if ($$.config === null) {\n          return 'M 0 0';\n        }\n        var interpolated = interpolate(t);\n        interpolated.data = d.data; // data.id will be updated by interporator\n        return $$.getArc(interpolated, true);\n      };\n    }).attr('transform', withTransform ? 'scale(1)' : '').style('fill', function (d) {\n      return $$.levelColor ? $$.levelColor(d.data.values.reduce(function (total, item) {\n        return total + item.value;\n      }, 0)) : $$.color(d.data.id);\n    }) // Where gauge reading color would receive customization.\n    .call($$.endall, function () {\n      $$.transiting = false;\n    });\n    arcs.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    main.selectAll('.' + CLASS.chartArc).select('text').style('opacity', 0).attr('class', function (d) {\n      return $$.isGaugeType(d.data) ? CLASS.gaugeValue : '';\n    }).text($$.textForArcLabel.bind($$)).attr('transform', $$.transformForArcLabel.bind($$)).style('font-size', function (d) {\n      return $$.isGaugeType(d.data) && $$.filterTargetsToShow($$.data.targets).length === 1 ? Math.round($$.radius / 5) + 'px' : '';\n    }).transition().duration(duration).style('opacity', function (d) {\n      return $$.isTargetToShow(d.data.id) && $$.isArcType(d.data) ? 1 : 0;\n    });\n    main.select('.' + CLASS.chartArcsTitle).style('opacity', $$.hasType('donut') || hasGaugeType ? 1 : 0);\n    if (hasGaugeType) {\n      var index_1 = 0;\n      var backgroundArc = $$.arcs.select('g.' + CLASS.chartArcsBackground).selectAll('path.' + CLASS.chartArcsBackground).data($$.data.targets);\n      backgroundArc.enter().append('path').attr('class', function (d, i) {\n        return CLASS.chartArcsBackground + ' ' + CLASS.chartArcsBackground + '-' + i;\n      }).merge(backgroundArc).attr('d', function (d1) {\n        if ($$.hiddenTargetIds.indexOf(d1.id) >= 0) {\n          return 'M 0 0';\n        }\n        var d = {\n          data: [{\n            value: config.gauge_max\n          }],\n          startAngle: config.gauge_startingAngle,\n          endAngle: -1 * config.gauge_startingAngle * (config.gauge_fullCircle ? Math.PI : 1),\n          index: index_1++\n        };\n        return $$.getArc(d, true, true);\n      });\n      backgroundArc.exit().remove();\n      $$.arcs.select('.' + CLASS.chartArcsGaugeUnit).attr('dy', '.75em').text(config.gauge_label_show ? config.gauge_units : '');\n      $$.arcs.select('.' + CLASS.chartArcsGaugeMin).attr('dx', -1 * ($$.innerRadius + ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2)) + 'px').attr('dy', '1.2em').text(config.gauge_label_show ? $$.textForGaugeMinMax(config.gauge_min, false) : '');\n      $$.arcs.select('.' + CLASS.chartArcsGaugeMax).attr('dx', $$.innerRadius + ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2) + 'px').attr('dy', '1.2em').text(config.gauge_label_show ? $$.textForGaugeMinMax(config.gauge_max, true) : '');\n    }\n  };\n  ChartInternal.prototype.initGauge = function () {\n    var arcs = this.arcs;\n    if (this.hasType('gauge')) {\n      arcs.append('g').attr('class', CLASS.chartArcsBackground);\n      arcs.append('text').attr('class', CLASS.chartArcsGaugeUnit).style('text-anchor', 'middle').style('pointer-events', 'none');\n      arcs.append('text').attr('class', CLASS.chartArcsGaugeMin).style('text-anchor', 'middle').style('pointer-events', 'none');\n      arcs.append('text').attr('class', CLASS.chartArcsGaugeMax).style('text-anchor', 'middle').style('pointer-events', 'none');\n    }\n  };\n  ChartInternal.prototype.getGaugeLabelHeight = function () {\n    return this.config.gauge_label_show ? 20 : 0;\n  };\n\n  /**\r\n   * Store value into cache\r\n   *\r\n   * @param key\r\n   * @param value\r\n   */\n  ChartInternal.prototype.addToCache = function (key, value) {\n    this.cache[\"$\" + key] = value;\n  };\n  /**\r\n   * Returns a cached value or undefined\r\n   *\r\n   * @param key\r\n   * @return {*}\r\n   */\n  ChartInternal.prototype.getFromCache = function (key) {\n    return this.cache[\"$\" + key];\n  };\n  /**\r\n   * Reset cached data\r\n   */\n  ChartInternal.prototype.resetCache = function () {\n    var _this = this;\n    Object.keys(this.cache).filter(function (key) {\n      return /^\\$/.test(key);\n    }).forEach(function (key) {\n      delete _this.cache[key];\n    });\n  };\n  // Old API that stores Targets\n  ChartInternal.prototype.hasCaches = function (ids) {\n    for (var i = 0; i < ids.length; i++) {\n      if (!(ids[i] in this.cache)) {\n        return false;\n      }\n    }\n    return true;\n  };\n  ChartInternal.prototype.addCache = function (id, target) {\n    this.cache[id] = this.cloneTarget(target);\n  };\n  ChartInternal.prototype.getCaches = function (ids) {\n    var targets = [],\n      i;\n    for (i = 0; i < ids.length; i++) {\n      if (ids[i] in this.cache) {\n        targets.push(this.cloneTarget(this.cache[ids[i]]));\n      }\n    }\n    return targets;\n  };\n  ChartInternal.prototype.categoryName = function (i) {\n    var config = this.config;\n    return i < config.axis_x_categories.length ? config.axis_x_categories[i] : i;\n  };\n  ChartInternal.prototype.generateTargetClass = function (targetId) {\n    return targetId || targetId === 0 ? ('-' + targetId).replace(/\\s/g, '-') : '';\n  };\n  ChartInternal.prototype.generateClass = function (prefix, targetId) {\n    return ' ' + prefix + ' ' + prefix + this.generateTargetClass(targetId);\n  };\n  ChartInternal.prototype.classText = function (d) {\n    return this.generateClass(CLASS.text, d.index);\n  };\n  ChartInternal.prototype.classTexts = function (d) {\n    return this.generateClass(CLASS.texts, d.id);\n  };\n  ChartInternal.prototype.classShape = function (d) {\n    return this.generateClass(CLASS.shape, d.index);\n  };\n  ChartInternal.prototype.classShapes = function (d) {\n    return this.generateClass(CLASS.shapes, d.id);\n  };\n  ChartInternal.prototype.classLine = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.line, d.id);\n  };\n  ChartInternal.prototype.classLines = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.lines, d.id);\n  };\n  ChartInternal.prototype.classCircle = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.circle, d.index);\n  };\n  ChartInternal.prototype.classCircles = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.circles, d.id);\n  };\n  ChartInternal.prototype.classBar = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.bar, d.index);\n  };\n  ChartInternal.prototype.classBars = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.bars, d.id);\n  };\n  ChartInternal.prototype.classArc = function (d) {\n    return this.classShape(d.data) + this.generateClass(CLASS.arc, d.data.id);\n  };\n  ChartInternal.prototype.classArcs = function (d) {\n    return this.classShapes(d.data) + this.generateClass(CLASS.arcs, d.data.id);\n  };\n  ChartInternal.prototype.classArea = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.area, d.id);\n  };\n  ChartInternal.prototype.classAreas = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.areas, d.id);\n  };\n  ChartInternal.prototype.classRegion = function (d, i) {\n    return this.generateClass(CLASS.region, i) + ' ' + ('class' in d ? d['class'] : '');\n  };\n  ChartInternal.prototype.classEvent = function (d) {\n    return this.generateClass(CLASS.eventRect, d.index);\n  };\n  ChartInternal.prototype.classTarget = function (id) {\n    var $$ = this;\n    var additionalClassSuffix = $$.config.data_classes[id],\n      additionalClass = '';\n    if (additionalClassSuffix) {\n      additionalClass = ' ' + CLASS.target + '-' + additionalClassSuffix;\n    }\n    return $$.generateClass(CLASS.target, id) + additionalClass;\n  };\n  ChartInternal.prototype.classFocus = function (d) {\n    return this.classFocused(d) + this.classDefocused(d);\n  };\n  ChartInternal.prototype.classFocused = function (d) {\n    return ' ' + (this.focusedTargetIds.indexOf(d.id) >= 0 ? CLASS.focused : '');\n  };\n  ChartInternal.prototype.classDefocused = function (d) {\n    return ' ' + (this.defocusedTargetIds.indexOf(d.id) >= 0 ? CLASS.defocused : '');\n  };\n  ChartInternal.prototype.classChartText = function (d) {\n    return CLASS.chartText + this.classTarget(d.id);\n  };\n  ChartInternal.prototype.classChartLine = function (d) {\n    return CLASS.chartLine + this.classTarget(d.id);\n  };\n  ChartInternal.prototype.classChartBar = function (d) {\n    return CLASS.chartBar + this.classTarget(d.id);\n  };\n  ChartInternal.prototype.classChartArc = function (d) {\n    return CLASS.chartArc + this.classTarget(d.data.id);\n  };\n  ChartInternal.prototype.getTargetSelectorSuffix = function (targetId) {\n    var targetClass = this.generateTargetClass(targetId);\n    if (window.CSS && window.CSS.escape) {\n      return window.CSS.escape(targetClass);\n    }\n    // fallback on imperfect method for old browsers (does not handles unicode)\n    return targetClass.replace(/([?!@#$%^&*()=+,.<>'\":;\\[\\]\\/|~`{}\\\\])/g, '\\\\$1');\n  };\n  ChartInternal.prototype.selectorTarget = function (id, prefix) {\n    return (prefix || '') + '.' + CLASS.target + this.getTargetSelectorSuffix(id);\n  };\n  ChartInternal.prototype.selectorTargets = function (ids, prefix) {\n    var $$ = this;\n    ids = ids || [];\n    return ids.length ? ids.map(function (id) {\n      return $$.selectorTarget(id, prefix);\n    }) : null;\n  };\n  ChartInternal.prototype.selectorLegend = function (id) {\n    return '.' + CLASS.legendItem + this.getTargetSelectorSuffix(id);\n  };\n  ChartInternal.prototype.selectorLegends = function (ids) {\n    var $$ = this;\n    return ids && ids.length ? ids.map(function (id) {\n      return $$.selectorLegend(id);\n    }) : null;\n  };\n  ChartInternal.prototype.getClipPath = function (id) {\n    return 'url(' + (isIE(9) ? '' : document.URL.split('#')[0]) + '#' + id + ')';\n  };\n  ChartInternal.prototype.appendClip = function (parent, id) {\n    return parent.append('clipPath').attr('id', id).append('rect');\n  };\n  ChartInternal.prototype.getAxisClipX = function (forHorizontal) {\n    // axis line width + padding for left\n    var left = Math.max(30, this.margin.left);\n    return forHorizontal ? -(1 + left) : -(left - 1);\n  };\n  ChartInternal.prototype.getAxisClipY = function (forHorizontal) {\n    return forHorizontal ? -20 : -this.margin.top;\n  };\n  ChartInternal.prototype.getXAxisClipX = function () {\n    var $$ = this;\n    return $$.getAxisClipX(!$$.config.axis_rotated);\n  };\n  ChartInternal.prototype.getXAxisClipY = function () {\n    var $$ = this;\n    return $$.getAxisClipY(!$$.config.axis_rotated);\n  };\n  ChartInternal.prototype.getYAxisClipX = function () {\n    var $$ = this;\n    return $$.config.axis_y_inner ? -1 : $$.getAxisClipX($$.config.axis_rotated);\n  };\n  ChartInternal.prototype.getYAxisClipY = function () {\n    var $$ = this;\n    return $$.getAxisClipY($$.config.axis_rotated);\n  };\n  ChartInternal.prototype.getAxisClipWidth = function (forHorizontal) {\n    var $$ = this,\n      left = Math.max(30, $$.margin.left),\n      right = Math.max(30, $$.margin.right);\n    // width + axis line width + padding for left/right\n    return forHorizontal ? $$.width + 2 + left + right : $$.margin.left + 20;\n  };\n  ChartInternal.prototype.getAxisClipHeight = function (forHorizontal) {\n    // less than 20 is not enough to show the axis label 'outer' without legend\n    return (forHorizontal ? this.margin.bottom : this.margin.top + this.height) + 20;\n  };\n  ChartInternal.prototype.getXAxisClipWidth = function () {\n    var $$ = this;\n    return $$.getAxisClipWidth(!$$.config.axis_rotated);\n  };\n  ChartInternal.prototype.getXAxisClipHeight = function () {\n    var $$ = this;\n    return $$.getAxisClipHeight(!$$.config.axis_rotated);\n  };\n  ChartInternal.prototype.getYAxisClipWidth = function () {\n    var $$ = this;\n    return $$.getAxisClipWidth($$.config.axis_rotated) + ($$.config.axis_y_inner ? 20 : 0);\n  };\n  ChartInternal.prototype.getYAxisClipHeight = function () {\n    var $$ = this;\n    return $$.getAxisClipHeight($$.config.axis_rotated);\n  };\n  ChartInternal.prototype.generateColor = function () {\n    var $$ = this,\n      config = $$.config,\n      d3 = $$.d3,\n      colors = config.data_colors,\n      pattern = notEmpty(config.color_pattern) ? config.color_pattern : d3.schemeCategory10,\n      callback = config.data_color,\n      ids = [];\n    return function (d) {\n      var id = d.id || d.data && d.data.id || d,\n        color;\n      // if callback function is provided\n      if (colors[id] instanceof Function) {\n        color = colors[id](d);\n      }\n      // if specified, choose that color\n      else if (colors[id]) {\n        color = colors[id];\n      }\n      // if not specified, choose from pattern\n      else {\n        if (ids.indexOf(id) < 0) {\n          ids.push(id);\n        }\n        color = pattern[ids.indexOf(id) % pattern.length];\n        colors[id] = color;\n      }\n      return callback instanceof Function ? callback(color, d) : color;\n    };\n  };\n  ChartInternal.prototype.generateLevelColor = function () {\n    var $$ = this,\n      config = $$.config,\n      colors = config.color_pattern,\n      threshold = config.color_threshold,\n      asValue = threshold.unit === 'value',\n      values = threshold.values && threshold.values.length ? threshold.values : [],\n      max = threshold.max || 100;\n    return notEmpty(threshold) && notEmpty(colors) ? function (value) {\n      var i,\n        v,\n        color = colors[colors.length - 1];\n      for (i = 0; i < values.length; i++) {\n        v = asValue ? value : value * 100 / max;\n        if (v < values[i]) {\n          color = colors[i];\n          break;\n        }\n      }\n      return color;\n    } : null;\n  };\n  ChartInternal.prototype.getDefaultConfig = function () {\n    var config = {\n      bindto: '#chart',\n      svg_classname: undefined,\n      size_width: undefined,\n      size_height: undefined,\n      padding_left: undefined,\n      padding_right: undefined,\n      padding_top: undefined,\n      padding_bottom: undefined,\n      resize_auto: true,\n      zoom_enabled: false,\n      zoom_initialRange: undefined,\n      zoom_type: 'scroll',\n      zoom_disableDefaultBehavior: false,\n      zoom_privileged: false,\n      zoom_rescale: false,\n      zoom_onzoom: function () {},\n      zoom_onzoomstart: function () {},\n      zoom_onzoomend: function () {},\n      zoom_x_min: undefined,\n      zoom_x_max: undefined,\n      interaction_brighten: true,\n      interaction_enabled: true,\n      onmouseover: function () {},\n      onmouseout: function () {},\n      onresize: function () {},\n      onresized: function () {},\n      oninit: function () {},\n      onrendered: function () {},\n      transition_duration: 350,\n      data_epochs: 'epochs',\n      data_x: undefined,\n      data_xs: {},\n      data_xFormat: '%Y-%m-%d',\n      data_xLocaltime: true,\n      data_xSort: true,\n      data_idConverter: function (id) {\n        return id;\n      },\n      data_names: {},\n      data_classes: {},\n      data_groups: [],\n      data_axes: {},\n      data_type: undefined,\n      data_types: {},\n      data_labels: {},\n      data_order: 'desc',\n      data_regions: {},\n      data_color: undefined,\n      data_colors: {},\n      data_hide: false,\n      data_filter: undefined,\n      data_selection_enabled: false,\n      data_selection_grouped: false,\n      data_selection_isselectable: function () {\n        return true;\n      },\n      data_selection_multiple: true,\n      data_selection_draggable: false,\n      data_stack_normalize: false,\n      data_onclick: function () {},\n      data_onmouseover: function () {},\n      data_onmouseout: function () {},\n      data_onselected: function () {},\n      data_onunselected: function () {},\n      data_url: undefined,\n      data_headers: undefined,\n      data_json: undefined,\n      data_rows: undefined,\n      data_columns: undefined,\n      data_mimeType: undefined,\n      data_keys: undefined,\n      // configuration for no plot-able data supplied.\n      data_empty_label_text: '',\n      // subchart\n      subchart_show: false,\n      subchart_size_height: 60,\n      subchart_axis_x_show: true,\n      subchart_onbrush: function () {},\n      // color\n      color_pattern: [],\n      color_threshold: {},\n      // legend\n      legend_show: true,\n      legend_hide: false,\n      legend_position: 'bottom',\n      legend_inset_anchor: 'top-left',\n      legend_inset_x: 10,\n      legend_inset_y: 0,\n      legend_inset_step: undefined,\n      legend_item_onclick: undefined,\n      legend_item_onmouseover: undefined,\n      legend_item_onmouseout: undefined,\n      legend_equally: false,\n      legend_padding: 0,\n      legend_item_tile_width: 10,\n      legend_item_tile_height: 10,\n      // axis\n      axis_rotated: false,\n      axis_x_show: true,\n      axis_x_type: 'indexed',\n      axis_x_localtime: true,\n      axis_x_categories: [],\n      axis_x_tick_centered: false,\n      axis_x_tick_format: undefined,\n      axis_x_tick_culling: {},\n      axis_x_tick_culling_max: 10,\n      axis_x_tick_count: undefined,\n      axis_x_tick_fit: true,\n      axis_x_tick_values: null,\n      axis_x_tick_rotate: 0,\n      axis_x_tick_outer: true,\n      axis_x_tick_multiline: true,\n      axis_x_tick_multilineMax: 0,\n      axis_x_tick_width: null,\n      axis_x_max: undefined,\n      axis_x_min: undefined,\n      axis_x_padding: {},\n      axis_x_height: undefined,\n      axis_x_selection: undefined,\n      axis_x_label: {},\n      axis_x_inner: undefined,\n      axis_y_show: true,\n      axis_y_type: 'linear',\n      axis_y_max: undefined,\n      axis_y_min: undefined,\n      axis_y_inverted: false,\n      axis_y_center: undefined,\n      axis_y_inner: undefined,\n      axis_y_label: {},\n      axis_y_tick_format: undefined,\n      axis_y_tick_outer: true,\n      axis_y_tick_values: null,\n      axis_y_tick_rotate: 0,\n      axis_y_tick_count: undefined,\n      axis_y_tick_time_type: undefined,\n      axis_y_tick_time_interval: undefined,\n      axis_y_padding: {},\n      axis_y_default: undefined,\n      axis_y2_show: false,\n      axis_y2_type: 'linear',\n      axis_y2_max: undefined,\n      axis_y2_min: undefined,\n      axis_y2_inverted: false,\n      axis_y2_center: undefined,\n      axis_y2_inner: undefined,\n      axis_y2_label: {},\n      axis_y2_tick_format: undefined,\n      axis_y2_tick_outer: true,\n      axis_y2_tick_values: null,\n      axis_y2_tick_count: undefined,\n      axis_y2_padding: {},\n      axis_y2_default: undefined,\n      // grid\n      grid_x_show: false,\n      grid_x_type: 'tick',\n      grid_x_lines: [],\n      grid_y_show: false,\n      // not used\n      // grid_y_type: 'tick',\n      grid_y_lines: [],\n      grid_y_ticks: 10,\n      grid_focus_show: true,\n      grid_lines_front: true,\n      // point - point of each data\n      point_show: true,\n      point_r: 2.5,\n      point_sensitivity: 10,\n      point_focus_expand_enabled: true,\n      point_focus_expand_r: undefined,\n      point_select_r: undefined,\n      // line\n      line_connectNull: false,\n      line_step_type: 'step',\n      // bar\n      bar_width: undefined,\n      bar_width_ratio: 0.6,\n      bar_width_max: undefined,\n      bar_zerobased: true,\n      bar_space: 0,\n      // area\n      area_zerobased: true,\n      area_above: false,\n      // pie\n      pie_label_show: true,\n      pie_label_format: undefined,\n      pie_label_threshold: 0.05,\n      pie_label_ratio: undefined,\n      pie_expand: {},\n      pie_expand_duration: 50,\n      pie_padAngle: 0,\n      // gauge\n      gauge_fullCircle: false,\n      gauge_label_show: true,\n      gauge_labelLine_show: true,\n      gauge_label_format: undefined,\n      gauge_min: 0,\n      gauge_max: 100,\n      gauge_startingAngle: -1 * Math.PI / 2,\n      gauge_label_extents: undefined,\n      gauge_units: undefined,\n      gauge_width: undefined,\n      gauge_arcs_minWidth: 5,\n      gauge_expand: {},\n      gauge_expand_duration: 50,\n      // donut\n      donut_label_show: true,\n      donut_label_format: undefined,\n      donut_label_threshold: 0.05,\n      donut_label_ratio: undefined,\n      donut_width: undefined,\n      donut_title: '',\n      donut_expand: {},\n      donut_expand_duration: 50,\n      donut_padAngle: 0,\n      // spline\n      spline_interpolation_type: 'cardinal',\n      // stanford\n      stanford_lines: [],\n      stanford_regions: [],\n      stanford_texts: [],\n      stanford_scaleMin: undefined,\n      stanford_scaleMax: undefined,\n      stanford_scaleWidth: undefined,\n      stanford_scaleFormat: undefined,\n      stanford_scaleValues: undefined,\n      stanford_colors: undefined,\n      stanford_padding: {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      },\n      // region - region to change style\n      regions: [],\n      // tooltip - show when mouseover on each data\n      tooltip_show: true,\n      tooltip_grouped: true,\n      tooltip_order: undefined,\n      tooltip_format_title: undefined,\n      tooltip_format_name: undefined,\n      tooltip_format_value: undefined,\n      tooltip_horizontal: undefined,\n      tooltip_position: undefined,\n      tooltip_contents: function (d, defaultTitleFormat, defaultValueFormat, color) {\n        return this.getTooltipContent ? this.getTooltipContent(d, defaultTitleFormat, defaultValueFormat, color) : '';\n      },\n      tooltip_init_show: false,\n      tooltip_init_x: 0,\n      tooltip_init_position: {\n        top: '0px',\n        left: '50px'\n      },\n      tooltip_onshow: function () {},\n      tooltip_onhide: function () {},\n      // title\n      title_text: undefined,\n      title_padding: {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      },\n      title_position: 'top-center'\n    };\n    Object.keys(this.additionalConfig).forEach(function (key) {\n      config[key] = this.additionalConfig[key];\n    }, this);\n    return config;\n  };\n  ChartInternal.prototype.additionalConfig = {};\n  ChartInternal.prototype.loadConfig = function (config) {\n    var this_config = this.config,\n      target,\n      keys,\n      read;\n    function find() {\n      var key = keys.shift();\n      //        console.log(\"key =>\", key, \", target =>\", target);\n      if (key && target && typeof target === 'object' && key in target) {\n        target = target[key];\n        return find();\n      } else if (!key) {\n        return target;\n      } else {\n        return undefined;\n      }\n    }\n    Object.keys(this_config).forEach(function (key) {\n      target = config;\n      keys = key.split('_');\n      read = find();\n      //        console.log(\"CONFIG : \", key, read);\n      if (isDefined(read)) {\n        this_config[key] = read;\n      }\n    });\n  };\n  ChartInternal.prototype.convertUrlToData = function (url, mimeType, headers, keys, done) {\n    var $$ = this,\n      type = mimeType ? mimeType : 'csv',\n      f,\n      converter;\n    if (type === 'json') {\n      f = $$.d3.json;\n      converter = $$.convertJsonToData;\n    } else if (type === 'tsv') {\n      f = $$.d3.tsv;\n      converter = $$.convertXsvToData;\n    } else {\n      f = $$.d3.csv;\n      converter = $$.convertXsvToData;\n    }\n    f(url, headers).then(function (data) {\n      done.call($$, converter.call($$, data, keys));\n    }).catch(function (error) {\n      throw error;\n    });\n  };\n  ChartInternal.prototype.convertXsvToData = function (xsv) {\n    var keys = xsv.columns,\n      rows = xsv;\n    if (rows.length === 0) {\n      return {\n        keys: keys,\n        rows: [keys.reduce(function (row, key) {\n          var _a;\n          return Object.assign(row, (_a = {}, _a[key] = null, _a));\n        }, {})]\n      };\n    } else {\n      // [].concat() is to convert result into a plain array otherwise\n      // test is not happy because rows have properties.\n      return {\n        keys: keys,\n        rows: [].concat(xsv)\n      };\n    }\n  };\n  ChartInternal.prototype.convertJsonToData = function (json, keys) {\n    var $$ = this,\n      new_rows = [],\n      targetKeys,\n      data;\n    if (keys) {\n      // when keys specified, json would be an array that includes objects\n      if (keys.x) {\n        targetKeys = keys.value.concat(keys.x);\n        $$.config.data_x = keys.x;\n      } else {\n        targetKeys = keys.value;\n      }\n      new_rows.push(targetKeys);\n      json.forEach(function (o) {\n        var new_row = [];\n        targetKeys.forEach(function (key) {\n          // convert undefined to null because undefined data will be removed in convertDataToTargets()\n          var v = $$.findValueInJson(o, key);\n          if (isUndefined(v)) {\n            v = null;\n          }\n          new_row.push(v);\n        });\n        new_rows.push(new_row);\n      });\n      data = $$.convertRowsToData(new_rows);\n    } else {\n      Object.keys(json).forEach(function (key) {\n        new_rows.push([key].concat(json[key]));\n      });\n      data = $$.convertColumnsToData(new_rows);\n    }\n    return data;\n  };\n  /**\r\n   * Finds value from the given nested object by the given path.\r\n   * If it's not found, then this returns undefined.\r\n   * @param {Object} object the object\r\n   * @param {string} path the path\r\n   */\n  ChartInternal.prototype.findValueInJson = function (object, path) {\n    if (path in object) {\n      // If object has a key that contains . or [], return the key's value\n      // instead of searching for an inner object.\n      // See https://github.com/c3js/c3/issues/1691 for details.\n      return object[path];\n    }\n    path = path.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties (replace [] with .)\n    path = path.replace(/^\\./, ''); // strip a leading dot\n    var pathArray = path.split('.');\n    for (var i = 0; i < pathArray.length; ++i) {\n      var k = pathArray[i];\n      if (k in object) {\n        object = object[k];\n      } else {\n        return;\n      }\n    }\n    return object;\n  };\n  /**\r\n   * Converts the rows to normalized data.\r\n   * @param {any[][]} rows The row data\r\n   * @return {Object}\r\n   */\n  ChartInternal.prototype.convertRowsToData = function (rows) {\n    var newRows = [];\n    var keys = rows[0];\n    for (var i = 1; i < rows.length; i++) {\n      var newRow = {};\n      for (var j = 0; j < rows[i].length; j++) {\n        if (isUndefined(rows[i][j])) {\n          throw new Error('Source data is missing a component at (' + i + ',' + j + ')!');\n        }\n        newRow[keys[j]] = rows[i][j];\n      }\n      newRows.push(newRow);\n    }\n    return {\n      keys: keys,\n      rows: newRows\n    };\n  };\n  /**\r\n   * Converts the columns to normalized data.\r\n   * @param {any[][]} columns The column data\r\n   * @return {Object}\r\n   */\n  ChartInternal.prototype.convertColumnsToData = function (columns) {\n    var newRows = [];\n    var keys = [];\n    for (var i = 0; i < columns.length; i++) {\n      var key = columns[i][0];\n      for (var j = 1; j < columns[i].length; j++) {\n        if (isUndefined(newRows[j - 1])) {\n          newRows[j - 1] = {};\n        }\n        if (isUndefined(columns[i][j])) {\n          throw new Error('Source data is missing a component at (' + i + ',' + j + ')!');\n        }\n        newRows[j - 1][key] = columns[i][j];\n      }\n      keys.push(key);\n    }\n    return {\n      keys: keys,\n      rows: newRows\n    };\n  };\n  /**\r\n   * Converts the data format into the target format.\r\n   * @param {!Object} data\r\n   * @param {!Array} data.keys Ordered list of target IDs.\r\n   * @param {!Array} data.rows Rows of data to convert.\r\n   * @param {boolean} appendXs True to append to $$.data.xs, False to replace.\r\n   * @return {!Array}\r\n   */\n  ChartInternal.prototype.convertDataToTargets = function (data, appendXs) {\n    var $$ = this,\n      config = $$.config,\n      targets,\n      ids,\n      xs,\n      keys,\n      epochs;\n    // handles format where keys are not orderly provided\n    if (isArray(data)) {\n      keys = Object.keys(data[0]);\n    } else {\n      keys = data.keys;\n      data = data.rows;\n    }\n    xs = keys.filter($$.isX, $$);\n    if (!$$.isStanfordGraphType()) {\n      ids = keys.filter($$.isNotX, $$);\n    } else {\n      epochs = keys.filter($$.isEpochs, $$);\n      ids = keys.filter($$.isNotXAndNotEpochs, $$);\n      if (xs.length !== 1 || epochs.length !== 1 || ids.length !== 1) {\n        throw new Error(\"You must define the 'x' key name and the 'epochs' for Stanford Diagrams\");\n      }\n    }\n    // save x for update data by load when custom x and c3.x API\n    ids.forEach(function (id) {\n      var xKey = $$.getXKey(id);\n      if ($$.isCustomX() || $$.isTimeSeries()) {\n        // if included in input data\n        if (xs.indexOf(xKey) >= 0) {\n          $$.data.xs[id] = (appendXs && $$.data.xs[id] ? $$.data.xs[id] : []).concat(data.map(function (d) {\n            return d[xKey];\n          }).filter(isValue).map(function (rawX, i) {\n            return $$.generateTargetX(rawX, id, i);\n          }));\n        }\n        // if not included in input data, find from preloaded data of other id's x\n        else if (config.data_x) {\n          $$.data.xs[id] = $$.getOtherTargetXs();\n        }\n        // if not included in input data, find from preloaded data\n        else if (notEmpty(config.data_xs)) {\n          $$.data.xs[id] = $$.getXValuesOfXKey(xKey, $$.data.targets);\n        }\n        // MEMO: if no x included, use same x of current will be used\n      } else {\n        $$.data.xs[id] = data.map(function (d, i) {\n          return i;\n        });\n      }\n    });\n    // check x is defined\n    ids.forEach(function (id) {\n      if (!$$.data.xs[id]) {\n        throw new Error('x is not defined for id = \"' + id + '\".');\n      }\n    });\n    // convert to target\n    targets = ids.map(function (id, index) {\n      var convertedId = config.data_idConverter(id);\n      return {\n        id: convertedId,\n        id_org: id,\n        values: data.map(function (d, i) {\n          var xKey = $$.getXKey(id),\n            rawX = d[xKey],\n            value = d[id] !== null && !isNaN(d[id]) ? +d[id] : null,\n            x,\n            returnData;\n          // use x as categories if custom x and categorized\n          if ($$.isCustomX() && $$.isCategorized() && !isUndefined(rawX)) {\n            if (index === 0 && i === 0) {\n              config.axis_x_categories = [];\n            }\n            x = config.axis_x_categories.indexOf(rawX);\n            if (x === -1) {\n              x = config.axis_x_categories.length;\n              config.axis_x_categories.push(rawX);\n            }\n          } else {\n            x = $$.generateTargetX(rawX, id, i);\n          }\n          // mark as x = undefined if value is undefined and filter to remove after mapped\n          if (isUndefined(d[id]) || $$.data.xs[id].length <= i) {\n            x = undefined;\n          }\n          returnData = {\n            x: x,\n            value: value,\n            id: convertedId\n          };\n          if ($$.isStanfordGraphType()) {\n            returnData.epochs = d[epochs];\n          }\n          return returnData;\n        }).filter(function (v) {\n          return isDefined(v.x);\n        })\n      };\n    });\n    // finish targets\n    targets.forEach(function (t) {\n      var i;\n      // sort values by its x\n      if (config.data_xSort) {\n        t.values = t.values.sort(function (v1, v2) {\n          var x1 = v1.x || v1.x === 0 ? v1.x : Infinity,\n            x2 = v2.x || v2.x === 0 ? v2.x : Infinity;\n          return x1 - x2;\n        });\n      }\n      // indexing each value\n      i = 0;\n      t.values.forEach(function (v) {\n        v.index = i++;\n      });\n      // this needs to be sorted because its index and value.index is identical\n      $$.data.xs[t.id].sort(function (v1, v2) {\n        return v1 - v2;\n      });\n    });\n    // cache information about values\n    $$.hasNegativeValue = $$.hasNegativeValueInTargets(targets);\n    $$.hasPositiveValue = $$.hasPositiveValueInTargets(targets);\n    // set target types\n    if (config.data_type) {\n      $$.setTargetType($$.mapToIds(targets).filter(function (id) {\n        return !(id in config.data_types);\n      }), config.data_type);\n    }\n    // cache as original id keyed\n    targets.forEach(function (d) {\n      $$.addCache(d.id_org, d);\n    });\n    return targets;\n  };\n  ChartInternal.prototype.isEpochs = function (key) {\n    var $$ = this,\n      config = $$.config;\n    return config.data_epochs && key === config.data_epochs;\n  };\n  ChartInternal.prototype.isX = function (key) {\n    var $$ = this,\n      config = $$.config;\n    return config.data_x && key === config.data_x || notEmpty(config.data_xs) && hasValue(config.data_xs, key);\n  };\n  ChartInternal.prototype.isNotX = function (key) {\n    return !this.isX(key);\n  };\n  ChartInternal.prototype.isNotXAndNotEpochs = function (key) {\n    return !this.isX(key) && !this.isEpochs(key);\n  };\n  /**\r\n   * Returns whether the normalized stack option is enabled or not.\r\n   *\r\n   * To be enabled it must also have data.groups defined.\r\n   *\r\n   * @return {boolean}\r\n   */\n  ChartInternal.prototype.isStackNormalized = function () {\n    return this.config.data_stack_normalize && this.config.data_groups.length > 0;\n  };\n  /**\r\n   * Returns whether the axis is normalized or not.\r\n   *\r\n   * An axis is normalized as long as one of its associated target\r\n   * is normalized.\r\n   *\r\n   * @param axisId Axis ID (y or y2)\r\n   * @return {Boolean}\r\n   */\n  ChartInternal.prototype.isAxisNormalized = function (axisId) {\n    var $$ = this;\n    if (!$$.isStackNormalized()) {\n      // shortcut\n      return false;\n    }\n    return $$.data.targets.filter(function (target) {\n      return $$.axis.getId(target.id) === axisId;\n    }).some(function (target) {\n      return $$.isTargetNormalized(target.id);\n    });\n  };\n  /**\r\n   * Returns whether the values for this target ID is normalized or not.\r\n   *\r\n   * To be normalized the option needs to be enabled and target needs\r\n   * to be defined in `data.groups`.\r\n   *\r\n   * @param targetId ID of the target\r\n   * @return {Boolean} True if the target is normalized, false otherwise.\r\n   */\n  ChartInternal.prototype.isTargetNormalized = function (targetId) {\n    var $$ = this;\n    return $$.isStackNormalized() && $$.config.data_groups.some(function (group) {\n      return group.includes(targetId);\n    });\n  };\n  ChartInternal.prototype.getXKey = function (id) {\n    var $$ = this,\n      config = $$.config;\n    return config.data_x ? config.data_x : notEmpty(config.data_xs) ? config.data_xs[id] : null;\n  };\n  /**\r\n   * Get sum of visible data per index for given axis.\r\n   *\r\n   * Expect axisId to be either 'y' or 'y2'.\r\n   *\r\n   * @private\r\n   * @param axisId Compute sum for data associated to given axis.\r\n   * @return {Array}\r\n   */\n  ChartInternal.prototype.getTotalPerIndex = function (axisId) {\n    var $$ = this;\n    if (!$$.isStackNormalized()) {\n      return null;\n    }\n    var cached = $$.getFromCache('getTotalPerIndex');\n    if (cached !== undefined) {\n      return cached[axisId];\n    }\n    var sum = {\n      y: [],\n      y2: []\n    };\n    $$.data.targets\n    // keep only target that are normalized\n    .filter(function (target) {\n      return $$.isTargetNormalized(target.id);\n    })\n    // keep only target that are visible\n    .filter(function (target) {\n      return $$.isTargetToShow(target.id);\n    })\n    // compute sum per axis\n    .forEach(function (target) {\n      var sumByAxis = sum[$$.axis.getId(target.id)];\n      target.values.forEach(function (v, i) {\n        if (!sumByAxis[i]) {\n          sumByAxis[i] = 0;\n        }\n        sumByAxis[i] += isNumber(v.value) ? v.value : 0;\n      });\n    });\n    $$.addToCache('getTotalPerIndex', sum);\n    return sum[axisId];\n  };\n  /**\r\n   * Get sum of visible data.\r\n   *\r\n   * Should be used for normalised data only since all values\r\n   * are expected to be positive.\r\n   *\r\n   * @private\r\n   * @return {Number}\r\n   */\n  ChartInternal.prototype.getTotalDataSum = function () {\n    var $$ = this;\n    var cached = $$.getFromCache('getTotalDataSum');\n    if (cached !== undefined) {\n      return cached;\n    }\n    var totalDataSum = flattenArray($$.data.targets.filter(function (target) {\n      return $$.isTargetToShow(target.id);\n    }).map(function (target) {\n      return target.values;\n    })).map(function (d) {\n      return d.value;\n    }).reduce(function (p, c) {\n      return p + c;\n    }, 0);\n    $$.addToCache('getTotalDataSum', totalDataSum);\n    return totalDataSum;\n  };\n  ChartInternal.prototype.getXValuesOfXKey = function (key, targets) {\n    var $$ = this,\n      xValues,\n      ids = targets && notEmpty(targets) ? $$.mapToIds(targets) : [];\n    ids.forEach(function (id) {\n      if ($$.getXKey(id) === key) {\n        xValues = $$.data.xs[id];\n      }\n    });\n    return xValues;\n  };\n  ChartInternal.prototype.getXValue = function (id, i) {\n    var $$ = this;\n    return id in $$.data.xs && $$.data.xs[id] && isValue($$.data.xs[id][i]) ? $$.data.xs[id][i] : i;\n  };\n  ChartInternal.prototype.getOtherTargetXs = function () {\n    var $$ = this,\n      idsForX = Object.keys($$.data.xs);\n    return idsForX.length ? $$.data.xs[idsForX[0]] : null;\n  };\n  ChartInternal.prototype.getOtherTargetX = function (index) {\n    var xs = this.getOtherTargetXs();\n    return xs && index < xs.length ? xs[index] : null;\n  };\n  ChartInternal.prototype.addXs = function (xs) {\n    var $$ = this;\n    Object.keys(xs).forEach(function (id) {\n      $$.config.data_xs[id] = xs[id];\n    });\n  };\n  ChartInternal.prototype.addName = function (data) {\n    var $$ = this,\n      name;\n    if (data) {\n      name = $$.config.data_names[data.id];\n      data.name = name !== undefined ? name : data.id;\n    }\n    return data;\n  };\n  ChartInternal.prototype.getValueOnIndex = function (values, index) {\n    var valueOnIndex = values.filter(function (v) {\n      return v.index === index;\n    });\n    return valueOnIndex.length ? valueOnIndex[0] : null;\n  };\n  ChartInternal.prototype.updateTargetX = function (targets, x) {\n    var $$ = this;\n    targets.forEach(function (t) {\n      t.values.forEach(function (v, i) {\n        v.x = $$.generateTargetX(x[i], t.id, i);\n      });\n      $$.data.xs[t.id] = x;\n    });\n  };\n  ChartInternal.prototype.updateTargetXs = function (targets, xs) {\n    var $$ = this;\n    targets.forEach(function (t) {\n      if (xs[t.id]) {\n        $$.updateTargetX([t], xs[t.id]);\n      }\n    });\n  };\n  ChartInternal.prototype.generateTargetX = function (rawX, id, index) {\n    var $$ = this,\n      x;\n    if ($$.isTimeSeries()) {\n      x = rawX ? $$.parseDate(rawX) : $$.parseDate($$.getXValue(id, index));\n    } else if ($$.isCustomX() && !$$.isCategorized()) {\n      x = isValue(rawX) ? +rawX : $$.getXValue(id, index);\n    } else {\n      x = index;\n    }\n    return x;\n  };\n  ChartInternal.prototype.cloneTarget = function (target) {\n    return {\n      id: target.id,\n      id_org: target.id_org,\n      values: target.values.map(function (d) {\n        return {\n          x: d.x,\n          value: d.value,\n          id: d.id\n        };\n      })\n    };\n  };\n  ChartInternal.prototype.getMaxDataCount = function () {\n    var $$ = this;\n    return $$.d3.max($$.data.targets, function (t) {\n      return t.values.length;\n    });\n  };\n  ChartInternal.prototype.mapToIds = function (targets) {\n    return targets.map(function (d) {\n      return d.id;\n    });\n  };\n  ChartInternal.prototype.mapToTargetIds = function (ids) {\n    var $$ = this;\n    return ids ? [].concat(ids) : $$.mapToIds($$.data.targets);\n  };\n  ChartInternal.prototype.hasTarget = function (targets, id) {\n    var ids = this.mapToIds(targets),\n      i;\n    for (i = 0; i < ids.length; i++) {\n      if (ids[i] === id) {\n        return true;\n      }\n    }\n    return false;\n  };\n  ChartInternal.prototype.isTargetToShow = function (targetId) {\n    return this.hiddenTargetIds.indexOf(targetId) < 0;\n  };\n  ChartInternal.prototype.isLegendToShow = function (targetId) {\n    return this.hiddenLegendIds.indexOf(targetId) < 0;\n  };\n  /**\r\n   * Returns only visible targets.\r\n   *\r\n   * This is the same as calling {@link filterTargetsToShow} on $$.data.targets.\r\n   *\r\n   * @return {Array}\r\n   */\n  ChartInternal.prototype.getTargetsToShow = function () {\n    var $$ = this;\n    return $$.filterTargetsToShow($$.data.targets);\n  };\n  ChartInternal.prototype.filterTargetsToShow = function (targets) {\n    var $$ = this;\n    return targets.filter(function (t) {\n      return $$.isTargetToShow(t.id);\n    });\n  };\n  /**\r\n   * @return {Array} Returns all the targets attached to the chart, visible or not\r\n   */\n  ChartInternal.prototype.getTargets = function () {\n    var $$ = this;\n    return $$.data.targets;\n  };\n  ChartInternal.prototype.mapTargetsToUniqueXs = function (targets) {\n    var $$ = this;\n    var xs = $$.d3.set($$.d3.merge(targets.map(function (t) {\n      return t.values.map(function (v) {\n        return +v.x;\n      });\n    }))).values();\n    xs = $$.isTimeSeries() ? xs.map(function (x) {\n      return new Date(+x);\n    }) : xs.map(function (x) {\n      return +x;\n    });\n    return xs.sort(function (a, b) {\n      return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n    });\n  };\n  ChartInternal.prototype.addHiddenTargetIds = function (targetIds) {\n    targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\n    for (var i = 0; i < targetIds.length; i++) {\n      if (this.hiddenTargetIds.indexOf(targetIds[i]) < 0) {\n        this.hiddenTargetIds = this.hiddenTargetIds.concat(targetIds[i]);\n      }\n    }\n    this.resetCache();\n  };\n  ChartInternal.prototype.removeHiddenTargetIds = function (targetIds) {\n    this.hiddenTargetIds = this.hiddenTargetIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n    this.resetCache();\n  };\n  ChartInternal.prototype.addHiddenLegendIds = function (targetIds) {\n    targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\n    for (var i = 0; i < targetIds.length; i++) {\n      if (this.hiddenLegendIds.indexOf(targetIds[i]) < 0) {\n        this.hiddenLegendIds = this.hiddenLegendIds.concat(targetIds[i]);\n      }\n    }\n  };\n  ChartInternal.prototype.removeHiddenLegendIds = function (targetIds) {\n    this.hiddenLegendIds = this.hiddenLegendIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n  };\n  ChartInternal.prototype.getValuesAsIdKeyed = function (targets) {\n    var ys = {};\n    targets.forEach(function (t) {\n      ys[t.id] = [];\n      t.values.forEach(function (v) {\n        ys[t.id].push(v.value);\n      });\n    });\n    return ys;\n  };\n  ChartInternal.prototype.checkValueInTargets = function (targets, checker) {\n    var ids = Object.keys(targets),\n      i,\n      j,\n      values;\n    for (i = 0; i < ids.length; i++) {\n      values = targets[ids[i]].values;\n      for (j = 0; j < values.length; j++) {\n        if (checker(values[j].value)) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n  ChartInternal.prototype.hasNegativeValueInTargets = function (targets) {\n    return this.checkValueInTargets(targets, function (v) {\n      return v < 0;\n    });\n  };\n  ChartInternal.prototype.hasPositiveValueInTargets = function (targets) {\n    return this.checkValueInTargets(targets, function (v) {\n      return v > 0;\n    });\n  };\n  ChartInternal.prototype.isOrderDesc = function () {\n    var config = this.config;\n    return typeof config.data_order === 'string' && config.data_order.toLowerCase() === 'desc';\n  };\n  ChartInternal.prototype.isOrderAsc = function () {\n    var config = this.config;\n    return typeof config.data_order === 'string' && config.data_order.toLowerCase() === 'asc';\n  };\n  ChartInternal.prototype.getOrderFunction = function () {\n    var $$ = this,\n      config = $$.config,\n      orderAsc = $$.isOrderAsc(),\n      orderDesc = $$.isOrderDesc();\n    if (orderAsc || orderDesc) {\n      var reducer = function (p, c) {\n        return p + Math.abs(c.value);\n      };\n      return function (t1, t2) {\n        var t1Sum = t1.values.reduce(reducer, 0),\n          t2Sum = t2.values.reduce(reducer, 0);\n        return orderAsc ? t2Sum - t1Sum : t1Sum - t2Sum;\n      };\n    } else if (isFunction(config.data_order)) {\n      return config.data_order;\n    } else if (isArray(config.data_order)) {\n      var order = config.data_order;\n      return function (t1, t2) {\n        return order.indexOf(t1.id) - order.indexOf(t2.id);\n      };\n    }\n  };\n  ChartInternal.prototype.orderTargets = function (targets) {\n    var fct = this.getOrderFunction();\n    if (fct) {\n      targets.sort(fct);\n    }\n    return targets;\n  };\n  /**\r\n   * Returns all the values from the given targets at the given index.\r\n   *\r\n   * @param {Array} targets\r\n   * @param {Number} index\r\n   * @return {Array}\r\n   */\n  ChartInternal.prototype.filterByIndex = function (targets, index) {\n    return this.d3.merge(targets.map(function (t) {\n      return t.values.filter(function (v) {\n        return v.index === index;\n      });\n    }));\n  };\n  ChartInternal.prototype.filterByX = function (targets, x) {\n    return this.d3.merge(targets.map(function (t) {\n      return t.values;\n    })).filter(function (v) {\n      return v.x - x === 0;\n    });\n  };\n  ChartInternal.prototype.filterRemoveNull = function (data) {\n    return data.filter(function (d) {\n      return isValue(d.value);\n    });\n  };\n  ChartInternal.prototype.filterByXDomain = function (targets, xDomain) {\n    return targets.map(function (t) {\n      return {\n        id: t.id,\n        id_org: t.id_org,\n        values: t.values.filter(function (v) {\n          return xDomain[0] <= v.x && v.x <= xDomain[1];\n        })\n      };\n    });\n  };\n  ChartInternal.prototype.hasDataLabel = function () {\n    var config = this.config;\n    if (typeof config.data_labels === 'boolean' && config.data_labels) {\n      return true;\n    } else if (typeof config.data_labels === 'object' && notEmpty(config.data_labels)) {\n      return true;\n    }\n    return false;\n  };\n  ChartInternal.prototype.getDataLabelLength = function (min, max, key) {\n    var $$ = this,\n      lengths = [0, 0],\n      paddingCoef = 1.3;\n    $$.selectChart.select('svg').selectAll('.dummy').data([min, max]).enter().append('text').text(function (d) {\n      return $$.dataLabelFormat(d.id)(d);\n    }).each(function (d, i) {\n      lengths[i] = getBBox(this)[key] * paddingCoef;\n    }).remove();\n    return lengths;\n  };\n  /**\r\n   * Returns true if the given data point is not arc type, otherwise false.\r\n   * @param {Object} d The data point\r\n   * @return {boolean}\r\n   */\n  ChartInternal.prototype.isNoneArc = function (d) {\n    return this.hasTarget(this.data.targets, d.id);\n  };\n  /**\r\n   * Returns true if the given data point is arc type, otherwise false.\r\n   * @param {Object} d The data point\r\n   * @return {boolean}\r\n   */\n  ChartInternal.prototype.isArc = function (d) {\n    return 'data' in d && this.hasTarget(this.data.targets, d.data.id);\n  };\n  /**\r\n   * Find the closest point from the given pos among the given targets or\r\n   * undefined if none satisfies conditions.\r\n   *\r\n   * @param {Array} targets\r\n   * @param {Array} pos An [x,y] coordinate\r\n   * @return {Object|undefined}\r\n   */\n  ChartInternal.prototype.findClosestFromTargets = function (targets, pos) {\n    var $$ = this;\n    // for each target, find the closest point\n    var candidates = targets.map(function (t) {\n      return $$.findClosest(t.values, pos, $$.config.tooltip_horizontal ? $$.horizontalDistance.bind($$) : $$.dist.bind($$), $$.config.point_sensitivity);\n    }).filter(function (v) {\n      return v;\n    });\n    // returns the closest of candidates\n    if (candidates.length === 0) {\n      return undefined;\n    } else if (candidates.length === 1) {\n      return candidates[0];\n    } else {\n      return $$.findClosest(candidates, pos, $$.dist.bind($$));\n    }\n  };\n  /**\r\n   * Find the closest point from the x value or undefined if none satisfies conditions.\r\n   *\r\n   * @param {Array} targets\r\n   * @param {Array} x A value on X axis\r\n   * @return {Object|undefined}\r\n   */\n  ChartInternal.prototype.findClosestFromTargetsByX = function (targets, x) {\n    var closest;\n    var diff;\n    targets.forEach(function (t) {\n      t.values.forEach(function (d) {\n        var newDiff = Math.abs(x - d.x);\n        if (diff === undefined || newDiff < diff) {\n          closest = d;\n          diff = newDiff;\n        }\n      });\n    });\n    return closest;\n  };\n  /**\r\n   * Using given compute distance method, returns the closest data point from the\r\n   * given position.\r\n   *\r\n   * Giving optionally a minimum distance to satisfy.\r\n   *\r\n   * @param {Array} dataPoints List of DataPoints\r\n   * @param {Array} pos An [x,y] coordinate\r\n   * @param {Function} computeDist Function to compute distance between 2 points\r\n   * @param {Number} minDist Minimal distance to satisfy\r\n   * @return {Object|undefined} Closest data point\r\n   */\n  ChartInternal.prototype.findClosest = function (dataPoints, pos, computeDist, minDist) {\n    if (minDist === void 0) {\n      minDist = Infinity;\n    }\n    var $$ = this;\n    var closest;\n    // find closest bar\n    dataPoints.filter(function (v) {\n      return v && $$.isBarType(v.id);\n    }).forEach(function (v) {\n      if (!closest) {\n        var shape = $$.main.select('.' + CLASS.bars + $$.getTargetSelectorSuffix(v.id) + ' .' + CLASS.bar + '-' + v.index).node();\n        if ($$.isWithinBar(pos, shape)) {\n          closest = v;\n        }\n      }\n    });\n    // find closest point from non-bar\n    dataPoints.filter(function (v) {\n      return v && !$$.isBarType(v.id);\n    }).forEach(function (v) {\n      var d = computeDist(v, pos);\n      if (d < minDist) {\n        minDist = d;\n        closest = v;\n      }\n    });\n    return closest;\n  };\n  ChartInternal.prototype.dist = function (data, pos) {\n    var $$ = this,\n      config = $$.config,\n      xIndex = config.axis_rotated ? 1 : 0,\n      yIndex = config.axis_rotated ? 0 : 1,\n      y = $$.circleY(data, data.index),\n      x = $$.x(data.x);\n    return Math.sqrt(Math.pow(x - pos[xIndex], 2) + Math.pow(y - pos[yIndex], 2));\n  };\n  ChartInternal.prototype.horizontalDistance = function (data, pos) {\n    var $$ = this,\n      config = $$.config,\n      xIndex = config.axis_rotated ? 1 : 0,\n      x = $$.x(data.x);\n    return Math.abs(x - pos[xIndex]);\n  };\n  ChartInternal.prototype.convertValuesToStep = function (values) {\n    var converted = [].concat(values),\n      i;\n    if (!this.isCategorized()) {\n      return values;\n    }\n    for (i = values.length + 1; 0 < i; i--) {\n      converted[i] = converted[i - 1];\n    }\n    converted[0] = {\n      x: converted[0].x - 1,\n      value: converted[0].value,\n      id: converted[0].id\n    };\n    converted[values.length + 1] = {\n      x: converted[values.length].x + 1,\n      value: converted[values.length].value,\n      id: converted[values.length].id\n    };\n    return converted;\n  };\n  /**\r\n   * Get ratio value\r\n   *\r\n   * @param {String} type Ratio for given type\r\n   * @param {Object} d Data value object\r\n   * @param {Boolean} asPercent Convert the return as percent or not\r\n   * @return {Number} Ratio value\r\n   * @private\r\n   */\n  ChartInternal.prototype.getRatio = function (type, d, asPercent) {\n    if (asPercent === void 0) {\n      asPercent = false;\n    }\n    var $$ = this;\n    var api = $$.api;\n    var ratio = 0;\n    if (d && api.data.shown.call(api).length) {\n      ratio = d.ratio || d.value;\n      if (type === 'arc') {\n        if ($$.hasType('gauge')) {\n          ratio = (d.endAngle - d.startAngle) / (Math.PI * ($$.config.gauge_fullCircle ? 2 : 1));\n        } else {\n          var total = $$.getTotalDataSum();\n          ratio = d.value / total;\n        }\n      } else if (type === 'index') {\n        var total = $$.getTotalPerIndex($$.axis.getId(d.id));\n        d.ratio = isNumber(d.value) && total && total[d.index] > 0 ? d.value / total[d.index] : 0;\n        ratio = d.ratio;\n      }\n    }\n    return asPercent && ratio ? ratio * 100 : ratio;\n  };\n  ChartInternal.prototype.updateDataAttributes = function (name, attrs) {\n    var $$ = this,\n      config = $$.config,\n      current = config['data_' + name];\n    if (typeof attrs === 'undefined') {\n      return current;\n    }\n    Object.keys(attrs).forEach(function (id) {\n      current[id] = attrs[id];\n    });\n    $$.redraw({\n      withLegend: true\n    });\n    return current;\n  };\n  ChartInternal.prototype.load = function (targets, args) {\n    var $$ = this;\n    if (targets) {\n      // filter loading targets if needed\n      if (args.filter) {\n        targets = targets.filter(args.filter);\n      }\n      // set type if args.types || args.type specified\n      if (args.type || args.types) {\n        targets.forEach(function (t) {\n          var type = args.types && args.types[t.id] ? args.types[t.id] : args.type;\n          $$.setTargetType(t.id, type);\n        });\n      }\n      // Update/Add data\n      $$.data.targets.forEach(function (d) {\n        for (var i = 0; i < targets.length; i++) {\n          if (d.id === targets[i].id) {\n            d.values = targets[i].values;\n            targets.splice(i, 1);\n            break;\n          }\n        }\n      });\n      $$.data.targets = $$.data.targets.concat(targets); // add remained\n    }\n    // Set targets\n    $$.updateTargets($$.data.targets);\n    // Redraw with new targets\n    $$.redraw({\n      withUpdateOrgXDomain: true,\n      withUpdateXDomain: true,\n      withLegend: true\n    });\n    if (args.done) {\n      args.done();\n    }\n  };\n  ChartInternal.prototype.loadFromArgs = function (args) {\n    var $$ = this;\n    $$.resetCache();\n    if (args.data) {\n      $$.load($$.convertDataToTargets(args.data), args);\n    } else if (args.url) {\n      $$.convertUrlToData(args.url, args.mimeType, args.headers, args.keys, function (data) {\n        $$.load($$.convertDataToTargets(data), args);\n      });\n    } else if (args.json) {\n      $$.load($$.convertDataToTargets($$.convertJsonToData(args.json, args.keys)), args);\n    } else if (args.rows) {\n      $$.load($$.convertDataToTargets($$.convertRowsToData(args.rows)), args);\n    } else if (args.columns) {\n      $$.load($$.convertDataToTargets($$.convertColumnsToData(args.columns)), args);\n    } else {\n      $$.load(null, args);\n    }\n  };\n  ChartInternal.prototype.unload = function (targetIds, done) {\n    var $$ = this;\n    $$.resetCache();\n    if (!done) {\n      done = function () {};\n    }\n    // filter existing target\n    targetIds = targetIds.filter(function (id) {\n      return $$.hasTarget($$.data.targets, id);\n    });\n    // If no target, call done and return\n    if (!targetIds || targetIds.length === 0) {\n      done();\n      return;\n    }\n    $$.svg.selectAll(targetIds.map(function (id) {\n      return $$.selectorTarget(id);\n    })).transition().style('opacity', 0).remove().call($$.endall, done);\n    targetIds.forEach(function (id) {\n      // Reset fadein for future load\n      $$.withoutFadeIn[id] = false;\n      // Remove target's elements\n      if ($$.legend) {\n        $$.legend.selectAll('.' + CLASS.legendItem + $$.getTargetSelectorSuffix(id)).remove();\n      }\n      // Remove target\n      $$.data.targets = $$.data.targets.filter(function (t) {\n        return t.id !== id;\n      });\n    });\n  };\n  ChartInternal.prototype.getYDomainMin = function (targets) {\n    var $$ = this,\n      config = $$.config,\n      ids = $$.mapToIds(targets),\n      ys = $$.getValuesAsIdKeyed(targets),\n      j,\n      k,\n      baseId,\n      idsInGroup,\n      id,\n      hasNegativeValue;\n    if (config.data_groups.length > 0) {\n      hasNegativeValue = $$.hasNegativeValueInTargets(targets);\n      for (j = 0; j < config.data_groups.length; j++) {\n        // Determine baseId\n        idsInGroup = config.data_groups[j].filter(function (id) {\n          return ids.indexOf(id) >= 0;\n        });\n        if (idsInGroup.length === 0) {\n          continue;\n        }\n        baseId = idsInGroup[0];\n        // Consider negative values\n        if (hasNegativeValue && ys[baseId]) {\n          ys[baseId].forEach(function (v, i) {\n            ys[baseId][i] = v < 0 ? v : 0;\n          });\n        }\n        // Compute min\n        for (k = 1; k < idsInGroup.length; k++) {\n          id = idsInGroup[k];\n          if (!ys[id]) {\n            continue;\n          }\n          ys[id].forEach(function (v, i) {\n            if ($$.axis.getId(id) === $$.axis.getId(baseId) && ys[baseId] && !(hasNegativeValue && +v > 0)) {\n              ys[baseId][i] += +v;\n            }\n          });\n        }\n      }\n    }\n    return $$.d3.min(Object.keys(ys).map(function (key) {\n      return $$.d3.min(ys[key]);\n    }));\n  };\n  ChartInternal.prototype.getYDomainMax = function (targets) {\n    var $$ = this,\n      config = $$.config,\n      ids = $$.mapToIds(targets),\n      ys = $$.getValuesAsIdKeyed(targets),\n      j,\n      k,\n      baseId,\n      idsInGroup,\n      id,\n      hasPositiveValue;\n    if (config.data_groups.length > 0) {\n      hasPositiveValue = $$.hasPositiveValueInTargets(targets);\n      for (j = 0; j < config.data_groups.length; j++) {\n        // Determine baseId\n        idsInGroup = config.data_groups[j].filter(function (id) {\n          return ids.indexOf(id) >= 0;\n        });\n        if (idsInGroup.length === 0) {\n          continue;\n        }\n        baseId = idsInGroup[0];\n        // Consider positive values\n        if (hasPositiveValue && ys[baseId]) {\n          ys[baseId].forEach(function (v, i) {\n            ys[baseId][i] = v > 0 ? v : 0;\n          });\n        }\n        // Compute max\n        for (k = 1; k < idsInGroup.length; k++) {\n          id = idsInGroup[k];\n          if (!ys[id]) {\n            continue;\n          }\n          ys[id].forEach(function (v, i) {\n            if ($$.axis.getId(id) === $$.axis.getId(baseId) && ys[baseId] && !(hasPositiveValue && +v < 0)) {\n              ys[baseId][i] += +v;\n            }\n          });\n        }\n      }\n    }\n    return $$.d3.max(Object.keys(ys).map(function (key) {\n      return $$.d3.max(ys[key]);\n    }));\n  };\n  ChartInternal.prototype.getYDomain = function (targets, axisId, xDomain) {\n    var $$ = this,\n      config = $$.config;\n    if ($$.isAxisNormalized(axisId)) {\n      return [0, 100];\n    }\n    var targetsByAxisId = targets.filter(function (t) {\n        return $$.axis.getId(t.id) === axisId;\n      }),\n      yTargets = xDomain ? $$.filterByXDomain(targetsByAxisId, xDomain) : targetsByAxisId,\n      yMin = axisId === 'y2' ? config.axis_y2_min : config.axis_y_min,\n      yMax = axisId === 'y2' ? config.axis_y2_max : config.axis_y_max,\n      yDomainMin = $$.getYDomainMin(yTargets),\n      yDomainMax = $$.getYDomainMax(yTargets),\n      domain,\n      domainLength,\n      padding_top,\n      padding_bottom,\n      center = axisId === 'y2' ? config.axis_y2_center : config.axis_y_center,\n      yDomainAbs,\n      lengths,\n      diff,\n      ratio,\n      isAllPositive,\n      isAllNegative,\n      isZeroBased = $$.hasType('bar', yTargets) && config.bar_zerobased || $$.hasType('area', yTargets) && config.area_zerobased,\n      isInverted = axisId === 'y2' ? config.axis_y2_inverted : config.axis_y_inverted,\n      showHorizontalDataLabel = $$.hasDataLabel() && config.axis_rotated,\n      showVerticalDataLabel = $$.hasDataLabel() && !config.axis_rotated;\n    // MEMO: avoid inverting domain unexpectedly\n    yDomainMin = isValue(yMin) ? yMin : isValue(yMax) ? yDomainMin < yMax ? yDomainMin : yMax - 10 : yDomainMin;\n    yDomainMax = isValue(yMax) ? yMax : isValue(yMin) ? yMin < yDomainMax ? yDomainMax : yMin + 10 : yDomainMax;\n    if (yTargets.length === 0) {\n      // use current domain if target of axisId is none\n      return axisId === 'y2' ? $$.y2.domain() : $$.y.domain();\n    }\n    if (isNaN(yDomainMin)) {\n      // set minimum to zero when not number\n      yDomainMin = 0;\n    }\n    if (isNaN(yDomainMax)) {\n      // set maximum to have same value as yDomainMin\n      yDomainMax = yDomainMin;\n    }\n    if (yDomainMin === yDomainMax) {\n      yDomainMin < 0 ? yDomainMax = 0 : yDomainMin = 0;\n    }\n    isAllPositive = yDomainMin >= 0 && yDomainMax >= 0;\n    isAllNegative = yDomainMin <= 0 && yDomainMax <= 0;\n    // Cancel zerobased if axis_*_min / axis_*_max specified\n    if (isValue(yMin) && isAllPositive || isValue(yMax) && isAllNegative) {\n      isZeroBased = false;\n    }\n    // Bar/Area chart should be 0-based if all positive|negative\n    if (isZeroBased) {\n      if (isAllPositive) {\n        yDomainMin = 0;\n      }\n      if (isAllNegative) {\n        yDomainMax = 0;\n      }\n    }\n    domainLength = Math.abs(yDomainMax - yDomainMin);\n    padding_top = padding_bottom = domainLength * 0.1;\n    if (typeof center !== 'undefined') {\n      yDomainAbs = Math.max(Math.abs(yDomainMin), Math.abs(yDomainMax));\n      yDomainMax = center + yDomainAbs;\n      yDomainMin = center - yDomainAbs;\n    }\n    // add padding for data label\n    if (showHorizontalDataLabel) {\n      lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'width');\n      diff = diffDomain($$.y.range());\n      ratio = [lengths[0] / diff, lengths[1] / diff];\n      padding_top += domainLength * (ratio[1] / (1 - ratio[0] - ratio[1]));\n      padding_bottom += domainLength * (ratio[0] / (1 - ratio[0] - ratio[1]));\n    } else if (showVerticalDataLabel) {\n      lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'height');\n      var pixelsToAxisPadding = $$.getY(config[\"axis_\" + axisId + \"_type\"],\n      // input domain as pixels\n      [0, config.axis_rotated ? $$.width : $$.height],\n      // output range as axis padding\n      [0, domainLength]);\n      padding_top += pixelsToAxisPadding(lengths[1]);\n      padding_bottom += pixelsToAxisPadding(lengths[0]);\n    }\n    if (axisId === 'y' && notEmpty(config.axis_y_padding)) {\n      padding_top = $$.axis.getPadding(config.axis_y_padding, 'top', padding_top, domainLength);\n      padding_bottom = $$.axis.getPadding(config.axis_y_padding, 'bottom', padding_bottom, domainLength);\n    }\n    if (axisId === 'y2' && notEmpty(config.axis_y2_padding)) {\n      padding_top = $$.axis.getPadding(config.axis_y2_padding, 'top', padding_top, domainLength);\n      padding_bottom = $$.axis.getPadding(config.axis_y2_padding, 'bottom', padding_bottom, domainLength);\n    }\n    // Bar/Area chart should be 0-based if all positive|negative\n    if (isZeroBased) {\n      if (isAllPositive) {\n        padding_bottom = yDomainMin;\n      }\n      if (isAllNegative) {\n        padding_top = -yDomainMax;\n      }\n    }\n    domain = [yDomainMin - padding_bottom, yDomainMax + padding_top];\n    return isInverted ? domain.reverse() : domain;\n  };\n  ChartInternal.prototype.getXDomainMin = function (targets) {\n    var $$ = this,\n      config = $$.config;\n    return isDefined(config.axis_x_min) ? $$.isTimeSeries() ? this.parseDate(config.axis_x_min) : config.axis_x_min : $$.d3.min(targets, function (t) {\n      return $$.d3.min(t.values, function (v) {\n        return v.x;\n      });\n    });\n  };\n  ChartInternal.prototype.getXDomainMax = function (targets) {\n    var $$ = this,\n      config = $$.config;\n    return isDefined(config.axis_x_max) ? $$.isTimeSeries() ? this.parseDate(config.axis_x_max) : config.axis_x_max : $$.d3.max(targets, function (t) {\n      return $$.d3.max(t.values, function (v) {\n        return v.x;\n      });\n    });\n  };\n  ChartInternal.prototype.getXDomainPadding = function (domain) {\n    var $$ = this,\n      config = $$.config,\n      diff = domain[1] - domain[0],\n      maxDataCount,\n      padding,\n      paddingLeft,\n      paddingRight;\n    if ($$.isCategorized()) {\n      padding = 0;\n    } else if ($$.hasType('bar')) {\n      maxDataCount = $$.getMaxDataCount();\n      padding = maxDataCount > 1 ? diff / (maxDataCount - 1) / 2 : 0.5;\n    } else {\n      padding = diff * 0.01;\n    }\n    if (typeof config.axis_x_padding === 'object' && notEmpty(config.axis_x_padding)) {\n      paddingLeft = isValue(config.axis_x_padding.left) ? config.axis_x_padding.left : padding;\n      paddingRight = isValue(config.axis_x_padding.right) ? config.axis_x_padding.right : padding;\n    } else if (typeof config.axis_x_padding === 'number') {\n      paddingLeft = paddingRight = config.axis_x_padding;\n    } else {\n      paddingLeft = paddingRight = padding;\n    }\n    return {\n      left: paddingLeft,\n      right: paddingRight\n    };\n  };\n  ChartInternal.prototype.getXDomain = function (targets) {\n    var $$ = this,\n      xDomain = [$$.getXDomainMin(targets), $$.getXDomainMax(targets)],\n      firstX = xDomain[0],\n      lastX = xDomain[1],\n      padding = $$.getXDomainPadding(xDomain),\n      min = 0,\n      max = 0;\n    // show center of x domain if min and max are the same\n    if (firstX - lastX === 0 && !$$.isCategorized()) {\n      if ($$.isTimeSeries()) {\n        firstX = new Date(firstX.getTime() * 0.5);\n        lastX = new Date(lastX.getTime() * 1.5);\n      } else {\n        firstX = firstX === 0 ? 1 : firstX * 0.5;\n        lastX = lastX === 0 ? -1 : lastX * 1.5;\n      }\n    }\n    if (firstX || firstX === 0) {\n      min = $$.isTimeSeries() ? new Date(firstX.getTime() - padding.left) : firstX - padding.left;\n    }\n    if (lastX || lastX === 0) {\n      max = $$.isTimeSeries() ? new Date(lastX.getTime() + padding.right) : lastX + padding.right;\n    }\n    return [min, max];\n  };\n  ChartInternal.prototype.updateXDomain = function (targets, withUpdateXDomain, withUpdateOrgXDomain, withTrim, domain) {\n    var $$ = this,\n      config = $$.config;\n    if (withUpdateOrgXDomain) {\n      $$.x.domain(domain ? domain : $$.d3.extent($$.getXDomain(targets)));\n      $$.orgXDomain = $$.x.domain();\n      if (config.zoom_enabled) {\n        $$.zoom.update();\n      }\n      $$.subX.domain($$.x.domain());\n      if ($$.brush) {\n        $$.brush.updateScale($$.subX);\n      }\n    }\n    if (withUpdateXDomain) {\n      $$.x.domain(domain ? domain : !$$.brush || $$.brush.empty() ? $$.orgXDomain : $$.brush.selectionAsValue());\n    }\n    // Trim domain when too big by zoom mousemove event\n    if (withTrim) {\n      $$.x.domain($$.trimXDomain($$.x.orgDomain()));\n    }\n    return $$.x.domain();\n  };\n  ChartInternal.prototype.trimXDomain = function (domain) {\n    var zoomDomain = this.getZoomDomain(),\n      min = zoomDomain[0],\n      max = zoomDomain[1];\n    if (domain[0] <= min) {\n      domain[1] = +domain[1] + (min - domain[0]);\n      domain[0] = min;\n    }\n    if (max <= domain[1]) {\n      domain[0] = +domain[0] - (domain[1] - max);\n      domain[1] = max;\n    }\n    return domain;\n  };\n  ChartInternal.prototype.drag = function (mouse) {\n    var $$ = this,\n      config = $$.config,\n      main = $$.main,\n      d3 = $$.d3;\n    var sx, sy, mx, my, minX, maxX, minY, maxY;\n    if ($$.hasArcType()) {\n      return;\n    }\n    if (!config.data_selection_enabled) {\n      return;\n    } // do nothing if not selectable\n    if (!config.data_selection_multiple) {\n      return;\n    } // skip when single selection because drag is used for multiple selection\n    sx = $$.dragStart[0];\n    sy = $$.dragStart[1];\n    mx = mouse[0];\n    my = mouse[1];\n    minX = Math.min(sx, mx);\n    maxX = Math.max(sx, mx);\n    minY = config.data_selection_grouped ? $$.margin.top : Math.min(sy, my);\n    maxY = config.data_selection_grouped ? $$.height : Math.max(sy, my);\n    main.select('.' + CLASS.dragarea).attr('x', minX).attr('y', minY).attr('width', maxX - minX).attr('height', maxY - minY);\n    // TODO: binary search when multiple xs\n    main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n      if (!config.data_selection_isselectable(d)) {\n        return;\n      }\n      var shape = d3.select(this),\n        isSelected = shape.classed(CLASS.SELECTED),\n        isIncluded = shape.classed(CLASS.INCLUDED),\n        _x,\n        _y,\n        _w,\n        _h,\n        toggle,\n        isWithin = false,\n        box;\n      if (shape.classed(CLASS.circle)) {\n        _x = shape.attr('cx') * 1;\n        _y = shape.attr('cy') * 1;\n        toggle = $$.togglePoint;\n        isWithin = minX < _x && _x < maxX && minY < _y && _y < maxY;\n      } else if (shape.classed(CLASS.bar)) {\n        box = getPathBox(this);\n        _x = box.x;\n        _y = box.y;\n        _w = box.width;\n        _h = box.height;\n        toggle = $$.togglePath;\n        isWithin = !(maxX < _x || _x + _w < minX) && !(maxY < _y || _y + _h < minY);\n      } else {\n        // line/area selection not supported yet\n        return;\n      }\n      if (isWithin ^ isIncluded) {\n        shape.classed(CLASS.INCLUDED, !isIncluded);\n        // TODO: included/unincluded callback here\n        shape.classed(CLASS.SELECTED, !isSelected);\n        toggle.call($$, !isSelected, shape, d, i);\n      }\n    });\n  };\n  ChartInternal.prototype.dragstart = function (mouse) {\n    var $$ = this,\n      config = $$.config;\n    if ($$.hasArcType()) {\n      return;\n    }\n    if (!config.data_selection_enabled) {\n      return;\n    } // do nothing if not selectable\n    $$.dragStart = mouse;\n    $$.main.select('.' + CLASS.chart).append('rect').attr('class', CLASS.dragarea).style('opacity', 0.1);\n    $$.dragging = true;\n  };\n  ChartInternal.prototype.dragend = function () {\n    var $$ = this,\n      config = $$.config;\n    if ($$.hasArcType()) {\n      return;\n    }\n    if (!config.data_selection_enabled) {\n      return;\n    } // do nothing if not selectable\n    $$.main.select('.' + CLASS.dragarea).transition().duration(100).style('opacity', 0).remove();\n    $$.main.selectAll('.' + CLASS.shape).classed(CLASS.INCLUDED, false);\n    $$.dragging = false;\n  };\n  ChartInternal.prototype.getYFormat = function (forArc) {\n    var $$ = this,\n      formatForY = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.yFormat,\n      formatForY2 = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.y2Format;\n    return function (v, ratio, id) {\n      var format = $$.axis.getId(id) === 'y2' ? formatForY2 : formatForY;\n      return format.call($$, v, ratio);\n    };\n  };\n  ChartInternal.prototype.yFormat = function (v) {\n    var $$ = this,\n      config = $$.config,\n      format = config.axis_y_tick_format ? config.axis_y_tick_format : $$.defaultValueFormat;\n    return format(v);\n  };\n  ChartInternal.prototype.y2Format = function (v) {\n    var $$ = this,\n      config = $$.config,\n      format = config.axis_y2_tick_format ? config.axis_y2_tick_format : $$.defaultValueFormat;\n    return format(v);\n  };\n  ChartInternal.prototype.defaultValueFormat = function (v) {\n    return isValue(v) ? +v : '';\n  };\n  ChartInternal.prototype.defaultArcValueFormat = function (v, ratio) {\n    return (ratio * 100).toFixed(1) + '%';\n  };\n  ChartInternal.prototype.dataLabelFormat = function (targetId) {\n    var $$ = this,\n      data_labels = $$.config.data_labels,\n      format,\n      defaultFormat = function (v) {\n        return isValue(v) ? +v : '';\n      };\n    // find format according to axis id\n    if (typeof data_labels.format === 'function') {\n      format = data_labels.format;\n    } else if (typeof data_labels.format === 'object') {\n      if (data_labels.format[targetId]) {\n        format = data_labels.format[targetId] === true ? defaultFormat : data_labels.format[targetId];\n      } else {\n        format = function () {\n          return '';\n        };\n      }\n    } else {\n      format = defaultFormat;\n    }\n    return format;\n  };\n  ChartInternal.prototype.initGrid = function () {\n    var $$ = this,\n      config = $$.config,\n      d3 = $$.d3;\n    $$.grid = $$.main.append('g').attr('clip-path', $$.clipPathForGrid).attr('class', CLASS.grid);\n    if (config.grid_x_show) {\n      $$.grid.append('g').attr('class', CLASS.xgrids);\n    }\n    if (config.grid_y_show) {\n      $$.grid.append('g').attr('class', CLASS.ygrids);\n    }\n    if (config.grid_focus_show) {\n      $$.grid.append('g').attr('class', CLASS.xgridFocus).append('line').attr('class', CLASS.xgridFocus);\n    }\n    $$.xgrid = d3.selectAll([]);\n    if (!config.grid_lines_front) {\n      $$.initGridLines();\n    }\n  };\n  ChartInternal.prototype.initGridLines = function () {\n    var $$ = this,\n      d3 = $$.d3;\n    $$.gridLines = $$.main.append('g').attr('clip-path', $$.clipPathForGrid).attr('class', CLASS.grid + ' ' + CLASS.gridLines);\n    $$.gridLines.append('g').attr('class', CLASS.xgridLines);\n    $$.gridLines.append('g').attr('class', CLASS.ygridLines);\n    $$.xgridLines = d3.selectAll([]);\n  };\n  ChartInternal.prototype.updateXGrid = function (withoutUpdate) {\n    var $$ = this,\n      config = $$.config,\n      d3 = $$.d3,\n      xgridData = $$.generateGridData(config.grid_x_type, $$.x),\n      tickOffset = $$.isCategorized() ? $$.xAxis.tickOffset() : 0;\n    $$.xgridAttr = config.axis_rotated ? {\n      x1: 0,\n      x2: $$.width,\n      y1: function (d) {\n        return $$.x(d) - tickOffset;\n      },\n      y2: function (d) {\n        return $$.x(d) - tickOffset;\n      }\n    } : {\n      x1: function (d) {\n        return $$.x(d) + tickOffset;\n      },\n      x2: function (d) {\n        return $$.x(d) + tickOffset;\n      },\n      y1: 0,\n      y2: $$.height\n    };\n    $$.xgridAttr.opacity = function () {\n      var pos = +d3.select(this).attr(config.axis_rotated ? 'y1' : 'x1');\n      return pos === (config.axis_rotated ? $$.height : 0) ? 0 : 1;\n    };\n    var xgrid = $$.main.select('.' + CLASS.xgrids).selectAll('.' + CLASS.xgrid).data(xgridData);\n    var xgridEnter = xgrid.enter().append('line').attr('class', CLASS.xgrid).attr('x1', $$.xgridAttr.x1).attr('x2', $$.xgridAttr.x2).attr('y1', $$.xgridAttr.y1).attr('y2', $$.xgridAttr.y2).style('opacity', 0);\n    $$.xgrid = xgridEnter.merge(xgrid);\n    if (!withoutUpdate) {\n      $$.xgrid.attr('x1', $$.xgridAttr.x1).attr('x2', $$.xgridAttr.x2).attr('y1', $$.xgridAttr.y1).attr('y2', $$.xgridAttr.y2).style('opacity', $$.xgridAttr.opacity);\n    }\n    xgrid.exit().remove();\n  };\n  ChartInternal.prototype.updateYGrid = function () {\n    var $$ = this,\n      config = $$.config,\n      gridValues = $$.yAxis.tickValues() || $$.y.ticks(config.grid_y_ticks);\n    var ygrid = $$.main.select('.' + CLASS.ygrids).selectAll('.' + CLASS.ygrid).data(gridValues);\n    var ygridEnter = ygrid.enter().append('line')\n    // TODO: x1, x2, y1, y2, opacity need to be set here maybe\n    .attr('class', CLASS.ygrid);\n    $$.ygrid = ygridEnter.merge(ygrid);\n    $$.ygrid.attr('x1', config.axis_rotated ? $$.y : 0).attr('x2', config.axis_rotated ? $$.y : $$.width).attr('y1', config.axis_rotated ? 0 : $$.y).attr('y2', config.axis_rotated ? $$.height : $$.y);\n    ygrid.exit().remove();\n    $$.smoothLines($$.ygrid, 'grid');\n  };\n  ChartInternal.prototype.gridTextAnchor = function (d) {\n    return d.position ? d.position : 'end';\n  };\n  ChartInternal.prototype.gridTextDx = function (d) {\n    return d.position === 'start' ? 4 : d.position === 'middle' ? 0 : -4;\n  };\n  ChartInternal.prototype.xGridTextX = function (d) {\n    return d.position === 'start' ? -this.height : d.position === 'middle' ? -this.height / 2 : 0;\n  };\n  ChartInternal.prototype.yGridTextX = function (d) {\n    return d.position === 'start' ? 0 : d.position === 'middle' ? this.width / 2 : this.width;\n  };\n  ChartInternal.prototype.updateGrid = function (duration) {\n    var $$ = this,\n      main = $$.main,\n      config = $$.config,\n      xgridLine,\n      xgridLineEnter,\n      ygridLine,\n      ygridLineEnter,\n      xv = $$.xv.bind($$),\n      yv = $$.yv.bind($$),\n      xGridTextX = $$.xGridTextX.bind($$),\n      yGridTextX = $$.yGridTextX.bind($$);\n    // hide if arc type\n    $$.grid.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\n    main.select('line.' + CLASS.xgridFocus).style('visibility', 'hidden');\n    if (config.grid_x_show) {\n      $$.updateXGrid();\n    }\n    xgridLine = main.select('.' + CLASS.xgridLines).selectAll('.' + CLASS.xgridLine).data(config.grid_x_lines);\n    // enter\n    xgridLineEnter = xgridLine.enter().append('g').attr('class', function (d) {\n      return CLASS.xgridLine + (d['class'] ? ' ' + d['class'] : '');\n    });\n    xgridLineEnter.append('line').attr('x1', config.axis_rotated ? 0 : xv).attr('x2', config.axis_rotated ? $$.width : xv).attr('y1', config.axis_rotated ? xv : 0).attr('y2', config.axis_rotated ? xv : $$.height).style('opacity', 0);\n    xgridLineEnter.append('text').attr('text-anchor', $$.gridTextAnchor).attr('transform', config.axis_rotated ? '' : 'rotate(-90)').attr('x', config.axis_rotated ? yGridTextX : xGridTextX).attr('y', xv).attr('dx', $$.gridTextDx).attr('dy', -5).style('opacity', 0);\n    // udpate\n    $$.xgridLines = xgridLineEnter.merge(xgridLine);\n    // done in d3.transition() of the end of this function\n    // exit\n    xgridLine.exit().transition().duration(duration).style('opacity', 0).remove();\n    // Y-Grid\n    if (config.grid_y_show) {\n      $$.updateYGrid();\n    }\n    ygridLine = main.select('.' + CLASS.ygridLines).selectAll('.' + CLASS.ygridLine).data(config.grid_y_lines);\n    // enter\n    ygridLineEnter = ygridLine.enter().append('g').attr('class', function (d) {\n      return CLASS.ygridLine + (d['class'] ? ' ' + d['class'] : '');\n    });\n    ygridLineEnter.append('line').attr('x1', config.axis_rotated ? yv : 0).attr('x2', config.axis_rotated ? yv : $$.width).attr('y1', config.axis_rotated ? 0 : yv).attr('y2', config.axis_rotated ? $$.height : yv).style('opacity', 0);\n    ygridLineEnter.append('text').attr('text-anchor', $$.gridTextAnchor).attr('transform', config.axis_rotated ? 'rotate(-90)' : '').attr('x', config.axis_rotated ? xGridTextX : yGridTextX).attr('y', yv).attr('dx', $$.gridTextDx).attr('dy', -5).style('opacity', 0);\n    // update\n    $$.ygridLines = ygridLineEnter.merge(ygridLine);\n    $$.ygridLines.select('line').transition().duration(duration).attr('x1', config.axis_rotated ? yv : 0).attr('x2', config.axis_rotated ? yv : $$.width).attr('y1', config.axis_rotated ? 0 : yv).attr('y2', config.axis_rotated ? $$.height : yv).style('opacity', 1);\n    $$.ygridLines.select('text').transition().duration(duration).attr('x', config.axis_rotated ? $$.xGridTextX.bind($$) : $$.yGridTextX.bind($$)).attr('y', yv).text(function (d) {\n      return d.text;\n    }).style('opacity', 1);\n    // exit\n    ygridLine.exit().transition().duration(duration).style('opacity', 0).remove();\n  };\n  ChartInternal.prototype.redrawGrid = function (withTransition, transition) {\n    var $$ = this,\n      config = $$.config,\n      xv = $$.xv.bind($$),\n      lines = $$.xgridLines.select('line'),\n      texts = $$.xgridLines.select('text');\n    return [(withTransition ? lines.transition(transition) : lines).attr('x1', config.axis_rotated ? 0 : xv).attr('x2', config.axis_rotated ? $$.width : xv).attr('y1', config.axis_rotated ? xv : 0).attr('y2', config.axis_rotated ? xv : $$.height).style('opacity', 1), (withTransition ? texts.transition(transition) : texts).attr('x', config.axis_rotated ? $$.yGridTextX.bind($$) : $$.xGridTextX.bind($$)).attr('y', xv).text(function (d) {\n      return d.text;\n    }).style('opacity', 1)];\n  };\n  ChartInternal.prototype.showXGridFocus = function (selectedData) {\n    var $$ = this,\n      config = $$.config,\n      dataToShow = selectedData.filter(function (d) {\n        return d && isValue(d.value);\n      }),\n      focusEl = $$.main.selectAll('line.' + CLASS.xgridFocus),\n      xx = $$.xx.bind($$);\n    if (!config.tooltip_show) {\n      return;\n    }\n    // Hide when stanford plot exists\n    if ($$.hasType('stanford') || $$.hasArcType()) {\n      return;\n    }\n    focusEl.style('visibility', 'visible').data([dataToShow[0]]).attr(config.axis_rotated ? 'y1' : 'x1', xx).attr(config.axis_rotated ? 'y2' : 'x2', xx);\n    $$.smoothLines(focusEl, 'grid');\n  };\n  ChartInternal.prototype.hideXGridFocus = function () {\n    this.main.select('line.' + CLASS.xgridFocus).style('visibility', 'hidden');\n  };\n  ChartInternal.prototype.updateXgridFocus = function () {\n    var $$ = this,\n      config = $$.config;\n    $$.main.select('line.' + CLASS.xgridFocus).attr('x1', config.axis_rotated ? 0 : -10).attr('x2', config.axis_rotated ? $$.width : -10).attr('y1', config.axis_rotated ? -10 : 0).attr('y2', config.axis_rotated ? -10 : $$.height);\n  };\n  ChartInternal.prototype.generateGridData = function (type, scale) {\n    var $$ = this,\n      gridData = [],\n      xDomain,\n      firstYear,\n      lastYear,\n      i,\n      tickNum = $$.main.select('.' + CLASS.axisX).selectAll('.tick').size();\n    if (type === 'year') {\n      xDomain = $$.getXDomain();\n      firstYear = xDomain[0].getFullYear();\n      lastYear = xDomain[1].getFullYear();\n      for (i = firstYear; i <= lastYear; i++) {\n        gridData.push(new Date(i + '-01-01 00:00:00'));\n      }\n    } else {\n      gridData = scale.ticks(10);\n      if (gridData.length > tickNum) {\n        // use only int\n        gridData = gridData.filter(function (d) {\n          return ('' + d).indexOf('.') < 0;\n        });\n      }\n    }\n    return gridData;\n  };\n  ChartInternal.prototype.getGridFilterToRemove = function (params) {\n    return params ? function (line) {\n      var found = false;\n      [].concat(params).forEach(function (param) {\n        if ('value' in param && line.value === param.value || 'class' in param && line['class'] === param['class']) {\n          found = true;\n        }\n      });\n      return found;\n    } : function () {\n      return true;\n    };\n  };\n  ChartInternal.prototype.removeGridLines = function (params, forX) {\n    var $$ = this,\n      config = $$.config,\n      toRemove = $$.getGridFilterToRemove(params),\n      toShow = function (line) {\n        return !toRemove(line);\n      },\n      classLines = forX ? CLASS.xgridLines : CLASS.ygridLines,\n      classLine = forX ? CLASS.xgridLine : CLASS.ygridLine;\n    $$.main.select('.' + classLines).selectAll('.' + classLine).filter(toRemove).transition().duration(config.transition_duration).style('opacity', 0).remove();\n    if (forX) {\n      config.grid_x_lines = config.grid_x_lines.filter(toShow);\n    } else {\n      config.grid_y_lines = config.grid_y_lines.filter(toShow);\n    }\n  };\n  ChartInternal.prototype.initEventRect = function () {\n    var $$ = this,\n      config = $$.config;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.eventRects).style('fill-opacity', 0);\n    $$.eventRect = $$.main.select('.' + CLASS.eventRects).append('rect').attr('class', CLASS.eventRect);\n    // event rect handle zoom event as well\n    if (config.zoom_enabled && $$.zoom) {\n      $$.eventRect.call($$.zoom).on('dblclick.zoom', null);\n      if (config.zoom_initialRange) {\n        // WORKAROUND: Add transition to apply transform immediately when no subchart\n        $$.eventRect.transition().duration(0).call($$.zoom.transform, $$.zoomTransform(config.zoom_initialRange));\n      }\n    }\n  };\n  ChartInternal.prototype.redrawEventRect = function () {\n    var $$ = this,\n      d3 = $$.d3,\n      config = $$.config;\n    function mouseout() {\n      $$.svg.select('.' + CLASS.eventRect).style('cursor', null);\n      $$.hideXGridFocus();\n      $$.hideTooltip();\n      $$.unexpandCircles();\n      $$.unexpandBars();\n    }\n    var isHoveringDataPoint = function (mouse, closest) {\n      return closest && ($$.isBarType(closest.id) || $$.dist(closest, mouse) < config.point_sensitivity);\n    };\n    var withName = function (d) {\n      return d ? $$.addName(Object.assign({}, d)) : null;\n    };\n    // rects for mouseover\n    $$.main.select('.' + CLASS.eventRects).style('cursor', config.zoom_enabled ? config.axis_rotated ? 'ns-resize' : 'ew-resize' : null);\n    $$.eventRect.attr('x', 0).attr('y', 0).attr('width', $$.width).attr('height', $$.height).on('mouseout', config.interaction_enabled ? function () {\n      if (!config) {\n        return;\n      } // chart is destroyed\n      if ($$.hasArcType()) {\n        return;\n      }\n      if ($$.mouseover) {\n        config.data_onmouseout.call($$.api, $$.mouseover);\n        $$.mouseover = undefined;\n      }\n      mouseout();\n    } : null).on('mousemove', config.interaction_enabled ? function () {\n      // do nothing when dragging\n      if ($$.dragging) {\n        return;\n      }\n      var targetsToShow = $$.getTargetsToShow();\n      // do nothing if arc type\n      if ($$.hasArcType(targetsToShow)) {\n        return;\n      }\n      var mouse = d3.mouse(this);\n      var closest = withName($$.findClosestFromTargets(targetsToShow, mouse));\n      var isMouseCloseToDataPoint = isHoveringDataPoint(mouse, closest);\n      // ensure onmouseout is always called if mousemove switch between 2 targets\n      if ($$.mouseover && (!closest || closest.id !== $$.mouseover.id || closest.index !== $$.mouseover.index)) {\n        config.data_onmouseout.call($$.api, $$.mouseover);\n        $$.mouseover = undefined;\n      }\n      if (closest && !$$.mouseover) {\n        config.data_onmouseover.call($$.api, closest);\n        $$.mouseover = closest;\n      }\n      // show cursor as pointer if we're hovering a data point close enough\n      $$.svg.select('.' + CLASS.eventRect).style('cursor', isMouseCloseToDataPoint ? 'pointer' : null);\n      // if tooltip not grouped, we want to display only data from closest data point\n      var showSingleDataPoint = !config.tooltip_grouped || $$.hasType('stanford', targetsToShow);\n      // find data to highlight\n      var selectedData;\n      if (showSingleDataPoint) {\n        if (closest) {\n          selectedData = [closest];\n        }\n      } else {\n        var closestByX = void 0;\n        if (closest) {\n          // reuse closest value\n          closestByX = closest;\n        } else {\n          // try to find the closest value by X values from the mouse position\n          var mouseX = config.axis_rotated ? mouse[1] : mouse[0];\n          closestByX = $$.findClosestFromTargetsByX(targetsToShow, $$.x.invert(mouseX));\n        }\n        // highlight all data for this 'x' value\n        if (closestByX) {\n          selectedData = $$.filterByX(targetsToShow, closestByX.x);\n        }\n      }\n      // ensure we have data to show\n      if (!selectedData || selectedData.length === 0) {\n        return mouseout();\n      }\n      // inject names for each point\n      selectedData = selectedData.map(withName);\n      // show tooltip\n      $$.showTooltip(selectedData, this);\n      // expand points\n      if (config.point_focus_expand_enabled) {\n        $$.unexpandCircles();\n        selectedData.forEach(function (d) {\n          $$.expandCircles(d.index, d.id, false);\n        });\n      }\n      // expand bars\n      $$.unexpandBars();\n      selectedData.forEach(function (d) {\n        $$.expandBars(d.index, d.id, false);\n      });\n      // Show xgrid focus line\n      $$.showXGridFocus(selectedData);\n    } : null).on('click', config.interaction_enabled ? function () {\n      var targetsToShow = $$.getTargetsToShow();\n      if ($$.hasArcType(targetsToShow)) {\n        return;\n      }\n      var mouse = d3.mouse(this);\n      var closest = withName($$.findClosestFromTargets(targetsToShow, mouse));\n      if (!isHoveringDataPoint(mouse, closest)) {\n        return;\n      }\n      // select if selection enabled\n      var sameXData;\n      if (!config.data_selection_grouped || $$.isStanfordType(closest)) {\n        sameXData = [closest];\n      } else {\n        sameXData = $$.filterByX(targetsToShow, closest.x);\n      }\n      // toggle selected state\n      sameXData.forEach(function (d) {\n        $$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.shape + '-' + d.index).each(function () {\n          if (config.data_selection_grouped || $$.isWithinShape(this, d)) {\n            $$.toggleShape(this, d, d.index);\n          }\n        });\n      });\n      // call data_onclick on the closest data point\n      if (closest) {\n        var shape = $$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(closest.id)).select('.' + CLASS.shape + '-' + closest.index);\n        config.data_onclick.call($$.api, closest, shape.node());\n      }\n    } : null).call(config.interaction_enabled && config.data_selection_draggable && $$.drag ? d3.drag().on('drag', function () {\n      $$.drag(d3.mouse(this));\n    }).on('start', function () {\n      $$.dragstart(d3.mouse(this));\n    }).on('end', function () {\n      $$.dragend();\n    }) : function () {});\n  };\n  ChartInternal.prototype.getMousePosition = function (data) {\n    var $$ = this;\n    return [$$.x(data.x), $$.getYScale(data.id)(data.value)];\n  };\n  ChartInternal.prototype.dispatchEvent = function (type, mouse) {\n    var $$ = this,\n      selector = '.' + CLASS.eventRect,\n      eventRect = $$.main.select(selector).node(),\n      box = eventRect.getBoundingClientRect(),\n      x = box.left + (mouse ? mouse[0] : 0),\n      y = box.top + (mouse ? mouse[1] : 0),\n      event = document.createEvent('MouseEvents');\n    event.initMouseEvent(type, true, true, window, 0, x, y, x, y, false, false, false, false, 0, null);\n    eventRect.dispatchEvent(event);\n  };\n  ChartInternal.prototype.initLegend = function () {\n    var $$ = this;\n    $$.legendItemTextBox = {};\n    $$.legendHasRendered = false;\n    $$.legend = $$.svg.append('g').attr('transform', $$.getTranslate('legend'));\n    if (!$$.config.legend_show) {\n      $$.legend.style('visibility', 'hidden');\n      $$.hiddenLegendIds = $$.mapToIds($$.data.targets);\n      return;\n    }\n    // MEMO: call here to update legend box and tranlate for all\n    // MEMO: translate will be updated by this, so transform not needed in updateLegend()\n    $$.updateLegendWithDefaults();\n  };\n  ChartInternal.prototype.updateLegendWithDefaults = function () {\n    var $$ = this;\n    $$.updateLegend($$.mapToIds($$.data.targets), {\n      withTransform: false,\n      withTransitionForTransform: false,\n      withTransition: false\n    });\n  };\n  ChartInternal.prototype.updateSizeForLegend = function (legendHeight, legendWidth) {\n    var $$ = this,\n      config = $$.config,\n      insetLegendPosition = {\n        top: $$.isLegendTop ? $$.getCurrentPaddingTop() + config.legend_inset_y + 5.5 : $$.currentHeight - legendHeight - $$.getCurrentPaddingBottom() - config.legend_inset_y,\n        left: $$.isLegendLeft ? $$.getCurrentPaddingLeft() + config.legend_inset_x + 0.5 : $$.currentWidth - legendWidth - $$.getCurrentPaddingRight() - config.legend_inset_x + 0.5\n      };\n    $$.margin3 = {\n      top: $$.isLegendRight ? 0 : $$.isLegendInset ? insetLegendPosition.top : $$.currentHeight - legendHeight,\n      right: NaN,\n      bottom: 0,\n      left: $$.isLegendRight ? $$.currentWidth - legendWidth : $$.isLegendInset ? insetLegendPosition.left : 0\n    };\n  };\n  ChartInternal.prototype.transformLegend = function (withTransition) {\n    var $$ = this;\n    (withTransition ? $$.legend.transition() : $$.legend).attr('transform', $$.getTranslate('legend'));\n  };\n  ChartInternal.prototype.updateLegendStep = function (step) {\n    this.legendStep = step;\n  };\n  ChartInternal.prototype.updateLegendItemWidth = function (w) {\n    this.legendItemWidth = w;\n  };\n  ChartInternal.prototype.updateLegendItemHeight = function (h) {\n    this.legendItemHeight = h;\n  };\n  ChartInternal.prototype.getLegendWidth = function () {\n    var $$ = this;\n    return $$.config.legend_show ? $$.isLegendRight || $$.isLegendInset ? $$.legendItemWidth * ($$.legendStep + 1) : $$.currentWidth : 0;\n  };\n  ChartInternal.prototype.getLegendHeight = function () {\n    var $$ = this,\n      h = 0;\n    if ($$.config.legend_show) {\n      if ($$.isLegendRight) {\n        h = $$.currentHeight;\n      } else {\n        h = Math.max(20, $$.legendItemHeight) * ($$.legendStep + 1);\n      }\n    }\n    return h;\n  };\n  ChartInternal.prototype.opacityForLegend = function (legendItem) {\n    return legendItem.classed(CLASS.legendItemHidden) ? null : 1;\n  };\n  ChartInternal.prototype.opacityForUnfocusedLegend = function (legendItem) {\n    return legendItem.classed(CLASS.legendItemHidden) ? null : 0.3;\n  };\n  ChartInternal.prototype.toggleFocusLegend = function (targetIds, focus) {\n    var $$ = this;\n    targetIds = $$.mapToTargetIds(targetIds);\n    $$.legend.selectAll('.' + CLASS.legendItem).filter(function (id) {\n      return targetIds.indexOf(id) >= 0;\n    }).classed(CLASS.legendItemFocused, focus).transition().duration(100).style('opacity', function () {\n      var opacity = focus ? $$.opacityForLegend : $$.opacityForUnfocusedLegend;\n      return opacity.call($$, $$.d3.select(this));\n    });\n  };\n  ChartInternal.prototype.revertLegend = function () {\n    var $$ = this,\n      d3 = $$.d3;\n    $$.legend.selectAll('.' + CLASS.legendItem).classed(CLASS.legendItemFocused, false).transition().duration(100).style('opacity', function () {\n      return $$.opacityForLegend(d3.select(this));\n    });\n  };\n  ChartInternal.prototype.showLegend = function (targetIds) {\n    var $$ = this,\n      config = $$.config;\n    if (!config.legend_show) {\n      config.legend_show = true;\n      $$.legend.style('visibility', 'visible');\n      if (!$$.legendHasRendered) {\n        $$.updateLegendWithDefaults();\n      }\n    }\n    $$.removeHiddenLegendIds(targetIds);\n    $$.legend.selectAll($$.selectorLegends(targetIds)).style('visibility', 'visible').transition().style('opacity', function () {\n      return $$.opacityForLegend($$.d3.select(this));\n    });\n  };\n  ChartInternal.prototype.hideLegend = function (targetIds) {\n    var $$ = this,\n      config = $$.config;\n    if (config.legend_show && isEmpty(targetIds)) {\n      config.legend_show = false;\n      $$.legend.style('visibility', 'hidden');\n    }\n    $$.addHiddenLegendIds(targetIds);\n    $$.legend.selectAll($$.selectorLegends(targetIds)).style('opacity', 0).style('visibility', 'hidden');\n  };\n  ChartInternal.prototype.clearLegendItemTextBoxCache = function () {\n    this.legendItemTextBox = {};\n  };\n  ChartInternal.prototype.updateLegend = function (targetIds, options, transitions) {\n    var $$ = this,\n      config = $$.config;\n    var xForLegend, xForLegendText, xForLegendRect, yForLegend, yForLegendText, yForLegendRect, x1ForLegendTile, x2ForLegendTile, yForLegendTile;\n    var paddingTop = 4,\n      paddingRight = 10,\n      maxWidth = 0,\n      maxHeight = 0,\n      posMin = 10,\n      tileWidth = config.legend_item_tile_width + 5;\n    var l,\n      totalLength = 0,\n      offsets = {},\n      widths = {},\n      heights = {},\n      margins = [0],\n      steps = {},\n      step = 0;\n    var withTransition, withTransitionForTransform;\n    var texts, rects, tiles, background;\n    // Skip elements when their name is set to null\n    targetIds = targetIds.filter(function (id) {\n      return !isDefined(config.data_names[id]) || config.data_names[id] !== null;\n    });\n    options = options || {};\n    withTransition = getOption(options, 'withTransition', true);\n    withTransitionForTransform = getOption(options, 'withTransitionForTransform', true);\n    function getTextBox(textElement, id) {\n      if (!$$.legendItemTextBox[id]) {\n        $$.legendItemTextBox[id] = $$.getTextRect(textElement.textContent, CLASS.legendItem, textElement);\n      }\n      return $$.legendItemTextBox[id];\n    }\n    function updatePositions(textElement, id, index) {\n      var reset = index === 0,\n        isLast = index === targetIds.length - 1,\n        box = getTextBox(textElement, id),\n        itemWidth = box.width + tileWidth + (isLast && !($$.isLegendRight || $$.isLegendInset) ? 0 : paddingRight) + config.legend_padding,\n        itemHeight = box.height + paddingTop,\n        itemLength = $$.isLegendRight || $$.isLegendInset ? itemHeight : itemWidth,\n        areaLength = $$.isLegendRight || $$.isLegendInset ? $$.getLegendHeight() : $$.getLegendWidth(),\n        margin,\n        maxLength;\n      // MEMO: care about condifion of step, totalLength\n      function updateValues(id, withoutStep) {\n        if (!withoutStep) {\n          margin = (areaLength - totalLength - itemLength) / 2;\n          if (margin < posMin) {\n            margin = (areaLength - itemLength) / 2;\n            totalLength = 0;\n            step++;\n          }\n        }\n        steps[id] = step;\n        margins[step] = $$.isLegendInset ? 10 : margin;\n        offsets[id] = totalLength;\n        totalLength += itemLength;\n      }\n      if (reset) {\n        totalLength = 0;\n        step = 0;\n        maxWidth = 0;\n        maxHeight = 0;\n      }\n      if (config.legend_show && !$$.isLegendToShow(id)) {\n        widths[id] = heights[id] = steps[id] = offsets[id] = 0;\n        return;\n      }\n      widths[id] = itemWidth;\n      heights[id] = itemHeight;\n      if (!maxWidth || itemWidth >= maxWidth) {\n        maxWidth = itemWidth;\n      }\n      if (!maxHeight || itemHeight >= maxHeight) {\n        maxHeight = itemHeight;\n      }\n      maxLength = $$.isLegendRight || $$.isLegendInset ? maxHeight : maxWidth;\n      if (config.legend_equally) {\n        Object.keys(widths).forEach(function (id) {\n          widths[id] = maxWidth;\n        });\n        Object.keys(heights).forEach(function (id) {\n          heights[id] = maxHeight;\n        });\n        margin = (areaLength - maxLength * targetIds.length) / 2;\n        if (margin < posMin) {\n          totalLength = 0;\n          step = 0;\n          targetIds.forEach(function (id) {\n            updateValues(id);\n          });\n        } else {\n          updateValues(id, true);\n        }\n      } else {\n        updateValues(id);\n      }\n    }\n    if ($$.isLegendInset) {\n      step = config.legend_inset_step ? config.legend_inset_step : targetIds.length;\n      $$.updateLegendStep(step);\n    }\n    if ($$.isLegendRight) {\n      xForLegend = function (id) {\n        return maxWidth * steps[id];\n      };\n      yForLegend = function (id) {\n        return margins[steps[id]] + offsets[id];\n      };\n    } else if ($$.isLegendInset) {\n      xForLegend = function (id) {\n        return maxWidth * steps[id] + 10;\n      };\n      yForLegend = function (id) {\n        return margins[steps[id]] + offsets[id];\n      };\n    } else {\n      xForLegend = function (id) {\n        return margins[steps[id]] + offsets[id];\n      };\n      yForLegend = function (id) {\n        return maxHeight * steps[id];\n      };\n    }\n    xForLegendText = function (id, i) {\n      return xForLegend(id, i) + 4 + config.legend_item_tile_width;\n    };\n    yForLegendText = function (id, i) {\n      return yForLegend(id, i) + 9;\n    };\n    xForLegendRect = function (id, i) {\n      return xForLegend(id, i);\n    };\n    yForLegendRect = function (id, i) {\n      return yForLegend(id, i) - 5;\n    };\n    x1ForLegendTile = function (id, i) {\n      return xForLegend(id, i) - 2;\n    };\n    x2ForLegendTile = function (id, i) {\n      return xForLegend(id, i) - 2 + config.legend_item_tile_width;\n    };\n    yForLegendTile = function (id, i) {\n      return yForLegend(id, i) + 4;\n    };\n    // Define g for legend area\n    l = $$.legend.selectAll('.' + CLASS.legendItem).data(targetIds).enter().append('g').attr('class', function (id) {\n      return $$.generateClass(CLASS.legendItem, id);\n    }).style('visibility', function (id) {\n      return $$.isLegendToShow(id) ? 'visible' : 'hidden';\n    }).style('cursor', function () {\n      return config.interaction_enabled ? 'pointer' : 'auto';\n    }).on('click', config.interaction_enabled ? function (id) {\n      if (config.legend_item_onclick) {\n        config.legend_item_onclick.call($$, id);\n      } else {\n        if ($$.d3.event.altKey) {\n          $$.api.hide();\n          $$.api.show(id);\n        } else {\n          $$.api.toggle(id);\n          $$.isTargetToShow(id) ? $$.api.focus(id) : $$.api.revert();\n        }\n      }\n    } : null).on('mouseover', config.interaction_enabled ? function (id) {\n      if (config.legend_item_onmouseover) {\n        config.legend_item_onmouseover.call($$, id);\n      } else {\n        $$.d3.select(this).classed(CLASS.legendItemFocused, true);\n        if (!$$.transiting && $$.isTargetToShow(id)) {\n          $$.api.focus(id);\n        }\n      }\n    } : null).on('mouseout', config.interaction_enabled ? function (id) {\n      if (config.legend_item_onmouseout) {\n        config.legend_item_onmouseout.call($$, id);\n      } else {\n        $$.d3.select(this).classed(CLASS.legendItemFocused, false);\n        $$.api.revert();\n      }\n    } : null);\n    l.append('text').text(function (id) {\n      return isDefined(config.data_names[id]) ? config.data_names[id] : id;\n    }).each(function (id, i) {\n      updatePositions(this, id, i);\n    }).style('pointer-events', 'none').attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendText : -200).attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendText);\n    l.append('rect').attr('class', CLASS.legendItemEvent).style('fill-opacity', 0).attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendRect : -200).attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendRect);\n    l.append('line').attr('class', CLASS.legendItemTile).style('stroke', $$.color).style('pointer-events', 'none').attr('x1', $$.isLegendRight || $$.isLegendInset ? x1ForLegendTile : -200).attr('y1', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile).attr('x2', $$.isLegendRight || $$.isLegendInset ? x2ForLegendTile : -200).attr('y2', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile).attr('stroke-width', config.legend_item_tile_height);\n    // Set background for inset legend\n    background = $$.legend.select('.' + CLASS.legendBackground + ' rect');\n    if ($$.isLegendInset && maxWidth > 0 && background.size() === 0) {\n      background = $$.legend.insert('g', '.' + CLASS.legendItem).attr('class', CLASS.legendBackground).append('rect');\n    }\n    texts = $$.legend.selectAll('text').data(targetIds).text(function (id) {\n      return isDefined(config.data_names[id]) ? config.data_names[id] : id;\n    }) // MEMO: needed for update\n    .each(function (id, i) {\n      updatePositions(this, id, i);\n    });\n    (withTransition ? texts.transition() : texts).attr('x', xForLegendText).attr('y', yForLegendText);\n    rects = $$.legend.selectAll('rect.' + CLASS.legendItemEvent).data(targetIds);\n    (withTransition ? rects.transition() : rects).attr('width', function (id) {\n      return widths[id];\n    }).attr('height', function (id) {\n      return heights[id];\n    }).attr('x', xForLegendRect).attr('y', yForLegendRect);\n    tiles = $$.legend.selectAll('line.' + CLASS.legendItemTile).data(targetIds);\n    (withTransition ? tiles.transition() : tiles).style('stroke', $$.levelColor ? function (id) {\n      return $$.levelColor($$.cache[id].values.reduce(function (total, item) {\n        return total + item.value;\n      }, 0));\n    } : $$.color).attr('x1', x1ForLegendTile).attr('y1', yForLegendTile).attr('x2', x2ForLegendTile).attr('y2', yForLegendTile);\n    if (background) {\n      (withTransition ? background.transition() : background).attr('height', $$.getLegendHeight() - 12).attr('width', maxWidth * (step + 1) + 10);\n    }\n    // toggle legend state\n    $$.legend.selectAll('.' + CLASS.legendItem).classed(CLASS.legendItemHidden, function (id) {\n      return !$$.isTargetToShow(id);\n    });\n    // Update all to reflect change of legend\n    $$.updateLegendItemWidth(maxWidth);\n    $$.updateLegendItemHeight(maxHeight);\n    $$.updateLegendStep(step);\n    // Update size and scale\n    $$.updateSizes();\n    $$.updateScales();\n    $$.updateSvgSize();\n    // Update g positions\n    $$.transformAll(withTransitionForTransform, transitions);\n    $$.legendHasRendered = true;\n  };\n  ChartInternal.prototype.initRegion = function () {\n    var $$ = this;\n    $$.region = $$.main.append('g').attr('clip-path', $$.clipPath).attr('class', CLASS.regions);\n  };\n  ChartInternal.prototype.updateRegion = function (duration) {\n    var $$ = this,\n      config = $$.config;\n    // hide if arc type\n    $$.region.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\n    var mainRegion = $$.main.select('.' + CLASS.regions).selectAll('.' + CLASS.region).data(config.regions);\n    var g = mainRegion.enter().append('g');\n    g.append('rect').attr('x', $$.regionX.bind($$)).attr('y', $$.regionY.bind($$)).attr('width', $$.regionWidth.bind($$)).attr('height', $$.regionHeight.bind($$)).style('fill-opacity', function (d) {\n      return isValue(d.opacity) ? d.opacity : 0.1;\n    });\n    g.append('text').text($$.labelRegion.bind($$));\n    $$.mainRegion = g.merge(mainRegion).attr('class', $$.classRegion.bind($$));\n    mainRegion.exit().transition().duration(duration).style('opacity', 0).remove();\n  };\n  ChartInternal.prototype.redrawRegion = function (withTransition, transition) {\n    var $$ = this,\n      regions = $$.mainRegion,\n      regionLabels = $$.mainRegion.selectAll('text');\n    return [(withTransition ? regions.transition(transition) : regions).attr('x', $$.regionX.bind($$)).attr('y', $$.regionY.bind($$)).attr('width', $$.regionWidth.bind($$)).attr('height', $$.regionHeight.bind($$)).style('fill-opacity', function (d) {\n      return isValue(d.opacity) ? d.opacity : 0.1;\n    }), (withTransition ? regionLabels.transition(transition) : regionLabels).attr('x', $$.labelOffsetX.bind($$)).attr('y', $$.labelOffsetY.bind($$)).attr('transform', $$.labelTransform.bind($$)).attr('style', 'text-anchor: left;')];\n  };\n  ChartInternal.prototype.regionX = function (d) {\n    var $$ = this,\n      config = $$.config,\n      xPos,\n      yScale = d.axis === 'y' ? $$.y : $$.y2;\n    if (d.axis === 'y' || d.axis === 'y2') {\n      xPos = config.axis_rotated ? 'start' in d ? yScale(d.start) : 0 : 0;\n    } else {\n      xPos = config.axis_rotated ? 0 : 'start' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start) : 0;\n    }\n    return xPos;\n  };\n  ChartInternal.prototype.regionY = function (d) {\n    var $$ = this,\n      config = $$.config,\n      yPos,\n      yScale = d.axis === 'y' ? $$.y : $$.y2;\n    if (d.axis === 'y' || d.axis === 'y2') {\n      yPos = config.axis_rotated ? 0 : 'end' in d ? yScale(d.end) : 0;\n    } else {\n      yPos = config.axis_rotated ? 'start' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start) : 0 : 0;\n    }\n    return yPos;\n  };\n  ChartInternal.prototype.regionWidth = function (d) {\n    var $$ = this,\n      config = $$.config,\n      start = $$.regionX(d),\n      end,\n      yScale = d.axis === 'y' ? $$.y : $$.y2;\n    if (d.axis === 'y' || d.axis === 'y2') {\n      end = config.axis_rotated ? 'end' in d ? yScale(d.end) : $$.width : $$.width;\n    } else {\n      end = config.axis_rotated ? $$.width : 'end' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end) : $$.width;\n    }\n    return end < start ? 0 : end - start;\n  };\n  ChartInternal.prototype.regionHeight = function (d) {\n    var $$ = this,\n      config = $$.config,\n      start = this.regionY(d),\n      end,\n      yScale = d.axis === 'y' ? $$.y : $$.y2;\n    if (d.axis === 'y' || d.axis === 'y2') {\n      end = config.axis_rotated ? $$.height : 'start' in d ? yScale(d.start) : $$.height;\n    } else {\n      end = config.axis_rotated ? 'end' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end) : $$.height : $$.height;\n    }\n    return end < start ? 0 : end - start;\n  };\n  ChartInternal.prototype.isRegionOnX = function (d) {\n    return !d.axis || d.axis === 'x';\n  };\n  ChartInternal.prototype.labelRegion = function (d) {\n    return 'label' in d ? d.label : '';\n  };\n  ChartInternal.prototype.labelTransform = function (d) {\n    return 'vertical' in d && d.vertical ? 'rotate(90)' : '';\n  };\n  ChartInternal.prototype.labelOffsetX = function (d) {\n    var paddingX = 'paddingX' in d ? d.paddingX : 3;\n    var paddingY = 'paddingY' in d ? d.paddingY : 3;\n    return 'vertical' in d && d.vertical ? this.regionY(d) + paddingY : this.regionX(d) + paddingX;\n  };\n  ChartInternal.prototype.labelOffsetY = function (d) {\n    var paddingX = 'paddingX' in d ? d.paddingX : 3;\n    var paddingY = 'paddingY' in d ? d.paddingY : 3;\n    return 'vertical' in d && d.vertical ? -(this.regionX(d) + paddingX) : this.regionY(d) + 10 + paddingY;\n  };\n  function c3LogScale(d3, linearScale, logScale) {\n    var PROJECTION = [0.01, 10];\n    if (!linearScale) {\n      linearScale = d3.scaleLinear();\n      linearScale.range(PROJECTION);\n    }\n    if (!logScale) {\n      logScale = d3.scaleLog();\n      logScale.domain(PROJECTION);\n      logScale.nice();\n    }\n    // copied from https://github.com/compute-io/logspace\n    function logspace(a, b, len) {\n      var arr, end, tmp, d;\n      if (arguments.length < 3) {\n        len = 10;\n      } else {\n        if (len === 0) {\n          return [];\n        }\n      }\n      // Calculate the increment:\n      end = len - 1;\n      d = (b - a) / end;\n      // Build the output array...\n      arr = new Array(len);\n      tmp = a;\n      arr[0] = Math.pow(10, tmp);\n      for (var i = 1; i < end; i++) {\n        tmp += d;\n        arr[i] = Math.pow(10, tmp);\n      }\n      arr[end] = Math.pow(10, b);\n      return arr;\n    }\n    function scale(x) {\n      return logScale(linearScale(x));\n    }\n    scale.domain = function (x) {\n      if (!arguments.length) {\n        return linearScale.domain();\n      }\n      linearScale.domain(x);\n      return scale;\n    };\n    scale.range = function (x) {\n      if (!arguments.length) {\n        return logScale.range();\n      }\n      logScale.range(x);\n      return scale;\n    };\n    scale.ticks = function (m) {\n      return logspace(-2, 1, m || 10).map(function (v) {\n        return linearScale.invert(v);\n      });\n    };\n    scale.copy = function () {\n      return c3LogScale(d3, linearScale.copy(), logScale.copy());\n    };\n    return scale;\n  }\n  ChartInternal.prototype.getScale = function (min, max, forTimeseries) {\n    return (forTimeseries ? this.d3.scaleTime() : this.d3.scaleLinear()).range([min, max]);\n  };\n  ChartInternal.prototype.getX = function (min, max, domain, offset) {\n    var $$ = this,\n      scale = $$.getScale(min, max, $$.isTimeSeries()),\n      _scale = domain ? scale.domain(domain) : scale,\n      key;\n    // Define customized scale if categorized axis\n    if ($$.isCategorized()) {\n      offset = offset || function () {\n        return 0;\n      };\n      scale = function (d, raw) {\n        var v = _scale(d) + offset(d);\n        return raw ? v : Math.ceil(v);\n      };\n    } else {\n      scale = function (d, raw) {\n        var v = _scale(d);\n        return raw ? v : Math.ceil(v);\n      };\n    }\n    // define functions\n    for (key in _scale) {\n      scale[key] = _scale[key];\n    }\n    scale.orgDomain = function () {\n      return _scale.domain();\n    };\n    // define custom domain() for categorized axis\n    if ($$.isCategorized()) {\n      scale.domain = function (domain) {\n        if (!arguments.length) {\n          domain = this.orgDomain();\n          return [domain[0], domain[1] + 1];\n        }\n        _scale.domain(domain);\n        return scale;\n      };\n    }\n    return scale;\n  };\n  /**\r\n   * Creates and configures a D3 scale instance for the given type.\r\n   *\r\n   * By defaults it returns a Linear scale.\r\n   *\r\n   * @param {String} type Type of d3-scale to create. Type can be 'linear', 'time', 'timeseries' or 'log'.\r\n   * @param {Array} domain The scale domain such as [from, to]\r\n   * @param {Array} range The scale's range such as [from, to]\r\n   *\r\n   * @return A d3-scale instance\r\n   */\n  ChartInternal.prototype.getY = function (type, domain, range) {\n    var scale;\n    if (type === 'timeseries' || type === 'time') {\n      scale = this.d3.scaleTime();\n    } else if (type === 'log') {\n      scale = c3LogScale(this.d3);\n    } else if (type === 'linear' || type === undefined) {\n      scale = this.d3.scaleLinear();\n    } else {\n      throw new Error(\"Invalid Y axis type: \\\"\" + type + \"\\\"\");\n    }\n    if (domain) {\n      scale.domain(domain);\n    }\n    if (range) {\n      scale.range(range);\n    }\n    return scale;\n  };\n  ChartInternal.prototype.getYScale = function (id) {\n    return this.axis.getId(id) === 'y2' ? this.y2 : this.y;\n  };\n  ChartInternal.prototype.getSubYScale = function (id) {\n    return this.axis.getId(id) === 'y2' ? this.subY2 : this.subY;\n  };\n  ChartInternal.prototype.updateScales = function () {\n    var $$ = this,\n      config = $$.config,\n      forInit = !$$.x;\n    // update edges\n    $$.xMin = config.axis_rotated ? 1 : 0;\n    $$.xMax = config.axis_rotated ? $$.height : $$.width;\n    $$.yMin = config.axis_rotated ? 0 : $$.height;\n    $$.yMax = config.axis_rotated ? $$.width : 1;\n    $$.subXMin = $$.xMin;\n    $$.subXMax = $$.xMax;\n    $$.subYMin = config.axis_rotated ? 0 : $$.height2;\n    $$.subYMax = config.axis_rotated ? $$.width2 : 1;\n    // update scales\n    $$.x = $$.getX($$.xMin, $$.xMax, forInit ? undefined : $$.x.orgDomain(), function () {\n      return $$.xAxis.tickOffset();\n    });\n    $$.y = $$.getY(config.axis_y_type, forInit ? config.axis_y_default : $$.y.domain(), [$$.yMin, $$.yMax]);\n    $$.y2 = $$.getY(config.axis_y2_type, forInit ? config.axis_y2_default : $$.y2.domain(), [$$.yMin, $$.yMax]);\n    $$.subX = $$.getX($$.xMin, $$.xMax, $$.orgXDomain, function (d) {\n      return d % 1 ? 0 : $$.subXAxis.tickOffset();\n    });\n    $$.subY = $$.getY(config.axis_y_type, forInit ? config.axis_y_default : $$.subY.domain(), [$$.subYMin, $$.subYMax]);\n    $$.subY2 = $$.getY(config.axis_y2_type, forInit ? config.axis_y2_default : $$.subY2.domain(), [$$.subYMin, $$.subYMax]);\n    // update axes\n    $$.xAxisTickFormat = $$.axis.getXAxisTickFormat();\n    $$.xAxisTickValues = $$.axis.getXAxisTickValues();\n    $$.yAxisTickValues = $$.axis.getYAxisTickValues();\n    $$.y2AxisTickValues = $$.axis.getY2AxisTickValues();\n    $$.xAxis = $$.axis.getXAxis($$.x, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\n    $$.subXAxis = $$.axis.getXAxis($$.subX, $$.subXOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\n    $$.yAxis = $$.axis.getYAxis('y', $$.y, $$.yOrient, $$.yAxisTickValues, config.axis_y_tick_outer);\n    $$.y2Axis = $$.axis.getYAxis('y2', $$.y2, $$.y2Orient, $$.y2AxisTickValues, config.axis_y2_tick_outer);\n    // Set initialized scales to brush and zoom\n    if (!forInit) {\n      if ($$.brush) {\n        $$.brush.updateScale($$.subX);\n      }\n    }\n    // update for arc\n    if ($$.updateArc) {\n      $$.updateArc();\n    }\n  };\n  ChartInternal.prototype.selectPoint = function (target, d, i) {\n    var $$ = this,\n      config = $$.config,\n      cx = (config.axis_rotated ? $$.circleY : $$.circleX).bind($$),\n      cy = (config.axis_rotated ? $$.circleX : $$.circleY).bind($$),\n      r = $$.pointSelectR.bind($$);\n    config.data_onselected.call($$.api, d, target.node());\n    // add selected-circle on low layer g\n    $$.main.select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.selectedCircle + '-' + i).data([d]).enter().append('circle').attr('class', function () {\n      return $$.generateClass(CLASS.selectedCircle, i);\n    }).attr('cx', cx).attr('cy', cy).attr('stroke', function () {\n      return $$.color(d);\n    }).attr('r', function (d) {\n      return $$.pointSelectR(d) * 1.4;\n    }).transition().duration(100).attr('r', r);\n  };\n  ChartInternal.prototype.unselectPoint = function (target, d, i) {\n    var $$ = this;\n    $$.config.data_onunselected.call($$.api, d, target.node());\n    // remove selected-circle from low layer g\n    $$.main.select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.selectedCircle + '-' + i).transition().duration(100).attr('r', 0).remove();\n  };\n  ChartInternal.prototype.togglePoint = function (selected, target, d, i) {\n    selected ? this.selectPoint(target, d, i) : this.unselectPoint(target, d, i);\n  };\n  ChartInternal.prototype.selectPath = function (target, d) {\n    var $$ = this;\n    $$.config.data_onselected.call($$, d, target.node());\n    if ($$.config.interaction_brighten) {\n      target.transition().duration(100).style('fill', function () {\n        return $$.d3.rgb($$.color(d)).brighter(0.75);\n      });\n    }\n  };\n  ChartInternal.prototype.unselectPath = function (target, d) {\n    var $$ = this;\n    $$.config.data_onunselected.call($$, d, target.node());\n    if ($$.config.interaction_brighten) {\n      target.transition().duration(100).style('fill', function () {\n        return $$.color(d);\n      });\n    }\n  };\n  ChartInternal.prototype.togglePath = function (selected, target, d, i) {\n    selected ? this.selectPath(target, d, i) : this.unselectPath(target, d, i);\n  };\n  ChartInternal.prototype.getToggle = function (that, d) {\n    var $$ = this,\n      toggle;\n    if (that.nodeName === 'circle') {\n      if ($$.isStepType(d)) {\n        // circle is hidden in step chart, so treat as within the click area\n        toggle = function () {}; // TODO: how to select step chart?\n      } else {\n        toggle = $$.togglePoint;\n      }\n    } else if (that.nodeName === 'path') {\n      toggle = $$.togglePath;\n    }\n    return toggle;\n  };\n  ChartInternal.prototype.toggleShape = function (that, d, i) {\n    var $$ = this,\n      d3 = $$.d3,\n      config = $$.config,\n      shape = d3.select(that),\n      isSelected = shape.classed(CLASS.SELECTED),\n      toggle = $$.getToggle(that, d).bind($$);\n    if (config.data_selection_enabled && config.data_selection_isselectable(d)) {\n      if (!config.data_selection_multiple) {\n        $$.main.selectAll('.' + CLASS.shapes + (config.data_selection_grouped ? $$.getTargetSelectorSuffix(d.id) : '')).selectAll('.' + CLASS.shape).each(function (d, i) {\n          var shape = d3.select(this);\n          if (shape.classed(CLASS.SELECTED)) {\n            toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n          }\n        });\n      }\n      shape.classed(CLASS.SELECTED, !isSelected);\n      toggle(!isSelected, shape, d, i);\n    }\n  };\n  ChartInternal.prototype.initBar = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartBars);\n  };\n  ChartInternal.prototype.updateTargetsForBar = function (targets) {\n    var $$ = this,\n      config = $$.config,\n      mainBars,\n      mainBarEnter,\n      classChartBar = $$.classChartBar.bind($$),\n      classBars = $$.classBars.bind($$),\n      classFocus = $$.classFocus.bind($$);\n    mainBars = $$.main.select('.' + CLASS.chartBars).selectAll('.' + CLASS.chartBar).data(targets).attr('class', function (d) {\n      return classChartBar(d) + classFocus(d);\n    });\n    mainBarEnter = mainBars.enter().append('g').attr('class', classChartBar).style('pointer-events', 'none');\n    // Bars for each data\n    mainBarEnter.append('g').attr('class', classBars).style('cursor', function (d) {\n      return config.data_selection_isselectable(d) ? 'pointer' : null;\n    });\n  };\n  ChartInternal.prototype.updateBar = function (durationForExit) {\n    var $$ = this,\n      barData = $$.barData.bind($$),\n      classBar = $$.classBar.bind($$),\n      initialOpacity = $$.initialOpacity.bind($$),\n      color = function (d) {\n        return $$.color(d.id);\n      };\n    var mainBar = $$.main.selectAll('.' + CLASS.bars).selectAll('.' + CLASS.bar).data(barData);\n    var mainBarEnter = mainBar.enter().append('path').attr('class', classBar).style('stroke', color).style('fill', color);\n    $$.mainBar = mainBarEnter.merge(mainBar).style('opacity', initialOpacity);\n    mainBar.exit().transition().duration(durationForExit).style('opacity', 0);\n  };\n  ChartInternal.prototype.redrawBar = function (drawBar, withTransition, transition) {\n    var $$ = this;\n    return [(withTransition ? this.mainBar.transition(transition) : this.mainBar).attr('d', drawBar).style('stroke', this.color).style('fill', this.color).style('opacity', function (d) {\n      return $$.isTargetToShow(d.id) ? 1 : 0;\n    })];\n  };\n  ChartInternal.prototype.getBarW = function (axis, barTargetsNum) {\n    var $$ = this,\n      config = $$.config,\n      w = typeof config.bar_width === 'number' ? config.bar_width : barTargetsNum ? axis.tickInterval() * config.bar_width_ratio / barTargetsNum : 0;\n    return config.bar_width_max && w > config.bar_width_max ? config.bar_width_max : w;\n  };\n  ChartInternal.prototype.getBars = function (i, id) {\n    var $$ = this;\n    return (id ? $$.main.selectAll('.' + CLASS.bars + $$.getTargetSelectorSuffix(id)) : $$.main).selectAll('.' + CLASS.bar + (isValue(i) ? '-' + i : ''));\n  };\n  ChartInternal.prototype.expandBars = function (i, id, reset) {\n    var $$ = this;\n    if (reset) {\n      $$.unexpandBars();\n    }\n    $$.getBars(i, id).classed(CLASS.EXPANDED, true);\n  };\n  ChartInternal.prototype.unexpandBars = function (i) {\n    var $$ = this;\n    $$.getBars(i).classed(CLASS.EXPANDED, false);\n  };\n  ChartInternal.prototype.generateDrawBar = function (barIndices, isSub) {\n    var $$ = this,\n      config = $$.config,\n      getPoints = $$.generateGetBarPoints(barIndices, isSub);\n    return function (d, i) {\n      // 4 points that make a bar\n      var points = getPoints(d, i);\n      // switch points if axis is rotated, not applicable for sub chart\n      var indexX = config.axis_rotated ? 1 : 0;\n      var indexY = config.axis_rotated ? 0 : 1;\n      var path = 'M ' + points[0][indexX] + ',' + points[0][indexY] + ' ' + 'L' + points[1][indexX] + ',' + points[1][indexY] + ' ' + 'L' + points[2][indexX] + ',' + points[2][indexY] + ' ' + 'L' + points[3][indexX] + ',' + points[3][indexY] + ' ' + 'z';\n      return path;\n    };\n  };\n  ChartInternal.prototype.generateGetBarPoints = function (barIndices, isSub) {\n    var $$ = this,\n      axis = isSub ? $$.subXAxis : $$.xAxis,\n      barTargetsNum = barIndices.__max__ + 1,\n      barW = $$.getBarW(axis, barTargetsNum),\n      barX = $$.getShapeX(barW, barTargetsNum, barIndices, !!isSub),\n      barY = $$.getShapeY(!!isSub),\n      barOffset = $$.getShapeOffset($$.isBarType, barIndices, !!isSub),\n      barSpaceOffset = barW * ($$.config.bar_space / 2),\n      yScale = isSub ? $$.getSubYScale : $$.getYScale;\n    return function (d, i) {\n      var y0 = yScale.call($$, d.id)(0),\n        offset = barOffset(d, i) || y0,\n        // offset is for stacked bar chart\n        posX = barX(d),\n        posY = barY(d);\n      // fix posY not to overflow opposite quadrant\n      if ($$.config.axis_rotated) {\n        if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n          posY = y0;\n        }\n      }\n      posY -= y0 - offset;\n      // 4 points that make a bar\n      return [[posX + barSpaceOffset, offset], [posX + barSpaceOffset, posY], [posX + barW - barSpaceOffset, posY], [posX + barW - barSpaceOffset, offset]];\n    };\n  };\n  /**\r\n   * Returns whether the data point is within the given bar shape.\r\n   *\r\n   * @param mouse\r\n   * @param barShape\r\n   * @return {boolean}\r\n   */\n  ChartInternal.prototype.isWithinBar = function (mouse, barShape) {\n    return isWithinBox(mouse, getBBox(barShape), 2);\n  };\n  ChartInternal.prototype.getShapeIndices = function (typeFilter) {\n    var $$ = this,\n      config = $$.config,\n      indices = {},\n      i = 0,\n      j,\n      k;\n    $$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$)).forEach(function (d) {\n      for (j = 0; j < config.data_groups.length; j++) {\n        if (config.data_groups[j].indexOf(d.id) < 0) {\n          continue;\n        }\n        for (k = 0; k < config.data_groups[j].length; k++) {\n          if (config.data_groups[j][k] in indices) {\n            indices[d.id] = indices[config.data_groups[j][k]];\n            break;\n          }\n        }\n      }\n      if (isUndefined(indices[d.id])) {\n        indices[d.id] = i++;\n      }\n    });\n    indices.__max__ = i - 1;\n    return indices;\n  };\n  ChartInternal.prototype.getShapeX = function (offset, targetsNum, indices, isSub) {\n    var $$ = this,\n      scale = isSub ? $$.subX : $$.x;\n    return function (d) {\n      var index = d.id in indices ? indices[d.id] : 0;\n      return d.x || d.x === 0 ? scale(d.x) - offset * (targetsNum / 2 - index) : 0;\n    };\n  };\n  ChartInternal.prototype.getShapeY = function (isSub) {\n    var $$ = this;\n    return function (d) {\n      var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id);\n      return scale($$.isTargetNormalized(d.id) ? $$.getRatio('index', d, true) : d.value);\n    };\n  };\n  ChartInternal.prototype.getShapeOffset = function (typeFilter, indices, isSub) {\n    var $$ = this,\n      targets = $$.orderTargets($$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$))),\n      targetIds = targets.map(function (t) {\n        return t.id;\n      });\n    return function (d, i) {\n      var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id),\n        y0 = scale(0),\n        offset = y0;\n      targets.forEach(function (t) {\n        var rowValues = $$.isStepType(d) ? $$.convertValuesToStep(t.values) : t.values;\n        var isTargetNormalized = $$.isTargetNormalized(d.id);\n        var values = rowValues.map(function (v) {\n          return isTargetNormalized ? $$.getRatio('index', v, true) : v.value;\n        });\n        if (t.id === d.id || indices[t.id] !== indices[d.id]) {\n          return;\n        }\n        if (targetIds.indexOf(t.id) < targetIds.indexOf(d.id)) {\n          // check if the x values line up\n          if (isUndefined(rowValues[i]) || +rowValues[i].x !== +d.x) {\n            // \"+\" for timeseries\n            // if not, try to find the value that does line up\n            i = -1;\n            rowValues.forEach(function (v, j) {\n              var x1 = v.x.constructor === Date ? +v.x : v.x;\n              var x2 = d.x.constructor === Date ? +d.x : d.x;\n              if (x1 === x2) {\n                i = j;\n              }\n            });\n          }\n          if (i in rowValues && rowValues[i].value * d.value >= 0) {\n            offset += scale(values[i]) - y0;\n          }\n        }\n      });\n      return offset;\n    };\n  };\n  ChartInternal.prototype.isWithinShape = function (that, d) {\n    var $$ = this,\n      shape = $$.d3.select(that),\n      isWithin;\n    if (!$$.isTargetToShow(d.id)) {\n      isWithin = false;\n    } else if (that.nodeName === 'circle') {\n      isWithin = $$.isStepType(d) ? $$.isWithinStep(that, $$.getYScale(d.id)(d.value)) : $$.isWithinCircle(that, $$.pointSelectR(d) * 1.5);\n    } else if (that.nodeName === 'path') {\n      isWithin = shape.classed(CLASS.bar) ? $$.isWithinBar($$.d3.mouse(that), that) : true;\n    }\n    return isWithin;\n  };\n  ChartInternal.prototype.getInterpolate = function (d) {\n    var $$ = this,\n      d3 = $$.d3,\n      types = {\n        linear: d3.curveLinear,\n        'linear-closed': d3.curveLinearClosed,\n        basis: d3.curveBasis,\n        'basis-open': d3.curveBasisOpen,\n        'basis-closed': d3.curveBasisClosed,\n        bundle: d3.curveBundle,\n        cardinal: d3.curveCardinal,\n        'cardinal-open': d3.curveCardinalOpen,\n        'cardinal-closed': d3.curveCardinalClosed,\n        monotone: d3.curveMonotoneX,\n        step: d3.curveStep,\n        'step-before': d3.curveStepBefore,\n        'step-after': d3.curveStepAfter\n      },\n      type;\n    if ($$.isSplineType(d)) {\n      type = types[$$.config.spline_interpolation_type] || types.cardinal;\n    } else if ($$.isStepType(d)) {\n      type = types[$$.config.line_step_type];\n    } else {\n      type = types.linear;\n    }\n    return type;\n  };\n  ChartInternal.prototype.initLine = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartLines);\n  };\n  ChartInternal.prototype.updateTargetsForLine = function (targets) {\n    var $$ = this,\n      config = $$.config,\n      mainLines,\n      mainLineEnter,\n      classChartLine = $$.classChartLine.bind($$),\n      classLines = $$.classLines.bind($$),\n      classAreas = $$.classAreas.bind($$),\n      classCircles = $$.classCircles.bind($$),\n      classFocus = $$.classFocus.bind($$);\n    mainLines = $$.main.select('.' + CLASS.chartLines).selectAll('.' + CLASS.chartLine).data(targets).attr('class', function (d) {\n      return classChartLine(d) + classFocus(d);\n    });\n    mainLineEnter = mainLines.enter().append('g').attr('class', classChartLine).style('opacity', 0).style('pointer-events', 'none');\n    // Lines for each data\n    mainLineEnter.append('g').attr('class', classLines);\n    // Areas\n    mainLineEnter.append('g').attr('class', classAreas);\n    // Circles for each data point on lines\n    mainLineEnter.append('g').attr('class', function (d) {\n      return $$.generateClass(CLASS.selectedCircles, d.id);\n    });\n    mainLineEnter.append('g').attr('class', classCircles).style('cursor', function (d) {\n      return config.data_selection_isselectable(d) ? 'pointer' : null;\n    });\n    // Update date for selected circles\n    targets.forEach(function (t) {\n      $$.main.selectAll('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(t.id)).selectAll('.' + CLASS.selectedCircle).each(function (d) {\n        d.value = t.values[d.index].value;\n      });\n    });\n    // MEMO: can not keep same color...\n    //mainLineUpdate.exit().remove();\n  };\n\n  ChartInternal.prototype.updateLine = function (durationForExit) {\n    var $$ = this;\n    var mainLine = $$.main.selectAll('.' + CLASS.lines).selectAll('.' + CLASS.line).data($$.lineData.bind($$));\n    var mainLineEnter = mainLine.enter().append('path').attr('class', $$.classLine.bind($$)).style('stroke', $$.color);\n    $$.mainLine = mainLineEnter.merge(mainLine).style('opacity', $$.initialOpacity.bind($$)).style('shape-rendering', function (d) {\n      return $$.isStepType(d) ? 'crispEdges' : '';\n    }).attr('transform', null);\n    mainLine.exit().transition().duration(durationForExit).style('opacity', 0);\n  };\n  ChartInternal.prototype.redrawLine = function (drawLine, withTransition, transition) {\n    return [(withTransition ? this.mainLine.transition(transition) : this.mainLine).attr('d', drawLine).style('stroke', this.color).style('opacity', 1)];\n  };\n  ChartInternal.prototype.generateDrawLine = function (lineIndices, isSub) {\n    var $$ = this,\n      config = $$.config,\n      line = $$.d3.line(),\n      getPoints = $$.generateGetLinePoints(lineIndices, isSub),\n      yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale,\n      xValue = function (d) {\n        return (isSub ? $$.subxx : $$.xx).call($$, d);\n      },\n      yValue = function (d, i) {\n        return config.data_groups.length > 0 ? getPoints(d, i)[0][1] : yScaleGetter.call($$, d.id)(d.value);\n      };\n    line = config.axis_rotated ? line.x(yValue).y(xValue) : line.x(xValue).y(yValue);\n    if (!config.line_connectNull) {\n      line = line.defined(function (d) {\n        return d.value != null;\n      });\n    }\n    return function (d) {\n      var values = config.line_connectNull ? $$.filterRemoveNull(d.values) : d.values,\n        x = isSub ? $$.subX : $$.x,\n        y = yScaleGetter.call($$, d.id),\n        x0 = 0,\n        y0 = 0,\n        path;\n      if ($$.isLineType(d)) {\n        if (config.data_regions[d.id]) {\n          path = $$.lineWithRegions(values, x, y, config.data_regions[d.id]);\n        } else {\n          if ($$.isStepType(d)) {\n            values = $$.convertValuesToStep(values);\n          }\n          path = line.curve($$.getInterpolate(d))(values);\n        }\n      } else {\n        if (values[0]) {\n          x0 = x(values[0].x);\n          y0 = y(values[0].value);\n        }\n        path = config.axis_rotated ? 'M ' + y0 + ' ' + x0 : 'M ' + x0 + ' ' + y0;\n      }\n      return path ? path : 'M 0 0';\n    };\n  };\n  ChartInternal.prototype.generateGetLinePoints = function (lineIndices, isSub) {\n    // partial duplication of generateGetBarPoints\n    var $$ = this,\n      config = $$.config,\n      lineTargetsNum = lineIndices.__max__ + 1,\n      x = $$.getShapeX(0, lineTargetsNum, lineIndices, !!isSub),\n      y = $$.getShapeY(!!isSub),\n      lineOffset = $$.getShapeOffset($$.isLineType, lineIndices, !!isSub),\n      yScale = isSub ? $$.getSubYScale : $$.getYScale;\n    return function (d, i) {\n      var y0 = yScale.call($$, d.id)(0),\n        offset = lineOffset(d, i) || y0,\n        // offset is for stacked area chart\n        posX = x(d),\n        posY = y(d);\n      // fix posY not to overflow opposite quadrant\n      if (config.axis_rotated) {\n        if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n          posY = y0;\n        }\n      }\n      // 1 point that marks the line position\n      return [[posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)] // needed for compatibility\n      ];\n    };\n  };\n\n  ChartInternal.prototype.lineWithRegions = function (d, x, y, _regions) {\n    var $$ = this,\n      config = $$.config,\n      prev = -1,\n      i,\n      j,\n      s = 'M',\n      sWithRegion,\n      xp,\n      yp,\n      dx,\n      dy,\n      dd,\n      diff,\n      diffx2,\n      xOffset = $$.isCategorized() ? 0.5 : 0,\n      xValue,\n      yValue,\n      regions = [];\n    function isWithinRegions(x, regions) {\n      var i;\n      for (i = 0; i < regions.length; i++) {\n        if (regions[i].start < x && x <= regions[i].end) {\n          return true;\n        }\n      }\n      return false;\n    }\n    // Check start/end of regions\n    if (isDefined(_regions)) {\n      for (i = 0; i < _regions.length; i++) {\n        regions[i] = {};\n        if (isUndefined(_regions[i].start)) {\n          regions[i].start = d[0].x;\n        } else {\n          regions[i].start = $$.isTimeSeries() ? $$.parseDate(_regions[i].start) : _regions[i].start;\n        }\n        if (isUndefined(_regions[i].end)) {\n          regions[i].end = d[d.length - 1].x;\n        } else {\n          regions[i].end = $$.isTimeSeries() ? $$.parseDate(_regions[i].end) : _regions[i].end;\n        }\n      }\n    }\n    // Set scales\n    xValue = config.axis_rotated ? function (d) {\n      return y(d.value);\n    } : function (d) {\n      return x(d.x);\n    };\n    yValue = config.axis_rotated ? function (d) {\n      return x(d.x);\n    } : function (d) {\n      return y(d.value);\n    };\n    // Define svg generator function for region\n    function generateM(points) {\n      return 'M' + points[0][0] + ' ' + points[0][1] + ' ' + points[1][0] + ' ' + points[1][1];\n    }\n    if ($$.isTimeSeries()) {\n      sWithRegion = function (d0, d1, j, diff) {\n        var x0 = d0.x.getTime(),\n          x_diff = d1.x - d0.x,\n          xv0 = new Date(x0 + x_diff * j),\n          xv1 = new Date(x0 + x_diff * (j + diff)),\n          points;\n        if (config.axis_rotated) {\n          points = [[y(yp(j)), x(xv0)], [y(yp(j + diff)), x(xv1)]];\n        } else {\n          points = [[x(xv0), y(yp(j))], [x(xv1), y(yp(j + diff))]];\n        }\n        return generateM(points);\n      };\n    } else {\n      sWithRegion = function (d0, d1, j, diff) {\n        var points;\n        if (config.axis_rotated) {\n          points = [[y(yp(j), true), x(xp(j))], [y(yp(j + diff), true), x(xp(j + diff))]];\n        } else {\n          points = [[x(xp(j), true), y(yp(j))], [x(xp(j + diff), true), y(yp(j + diff))]];\n        }\n        return generateM(points);\n      };\n    }\n    // Generate\n    for (i = 0; i < d.length; i++) {\n      // Draw as normal\n      if (isUndefined(regions) || !isWithinRegions(d[i].x, regions)) {\n        s += ' ' + xValue(d[i]) + ' ' + yValue(d[i]);\n      }\n      // Draw with region // TODO: Fix for horizotal charts\n      else {\n        xp = $$.getScale(d[i - 1].x + xOffset, d[i].x + xOffset, $$.isTimeSeries());\n        yp = $$.getScale(d[i - 1].value, d[i].value);\n        dx = x(d[i].x) - x(d[i - 1].x);\n        dy = y(d[i].value) - y(d[i - 1].value);\n        dd = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n        diff = 2 / dd;\n        diffx2 = diff * 2;\n        for (j = diff; j <= 1; j += diffx2) {\n          s += sWithRegion(d[i - 1], d[i], j, diff);\n        }\n      }\n      prev = d[i].x;\n    }\n    return s;\n  };\n  ChartInternal.prototype.updateArea = function (durationForExit) {\n    var $$ = this,\n      d3 = $$.d3;\n    var mainArea = $$.main.selectAll('.' + CLASS.areas).selectAll('.' + CLASS.area).data($$.lineData.bind($$));\n    var mainAreaEnter = mainArea.enter().append('path').attr('class', $$.classArea.bind($$)).style('fill', $$.color).style('opacity', function () {\n      $$.orgAreaOpacity = +d3.select(this).style('opacity');\n      return 0;\n    });\n    $$.mainArea = mainAreaEnter.merge(mainArea).style('opacity', $$.orgAreaOpacity);\n    mainArea.exit().transition().duration(durationForExit).style('opacity', 0);\n  };\n  ChartInternal.prototype.redrawArea = function (drawArea, withTransition, transition) {\n    return [(withTransition ? this.mainArea.transition(transition) : this.mainArea).attr('d', drawArea).style('fill', this.color).style('opacity', this.orgAreaOpacity)];\n  };\n  ChartInternal.prototype.generateDrawArea = function (areaIndices, isSub) {\n    var $$ = this,\n      config = $$.config,\n      area = $$.d3.area(),\n      getPoints = $$.generateGetAreaPoints(areaIndices, isSub),\n      yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale,\n      xValue = function (d) {\n        return (isSub ? $$.subxx : $$.xx).call($$, d);\n      },\n      value0 = function (d, i) {\n        return config.data_groups.length > 0 ? getPoints(d, i)[0][1] : yScaleGetter.call($$, d.id)($$.getAreaBaseValue(d.id));\n      },\n      value1 = function (d, i) {\n        return config.data_groups.length > 0 ? getPoints(d, i)[1][1] : yScaleGetter.call($$, d.id)(d.value);\n      };\n    area = config.axis_rotated ? area.x0(value0).x1(value1).y(xValue) : area.x(xValue).y0(config.area_above ? 0 : value0).y1(value1);\n    if (!config.line_connectNull) {\n      area = area.defined(function (d) {\n        return d.value !== null;\n      });\n    }\n    return function (d) {\n      var values = config.line_connectNull ? $$.filterRemoveNull(d.values) : d.values,\n        x0 = 0,\n        y0 = 0,\n        path;\n      if ($$.isAreaType(d)) {\n        if ($$.isStepType(d)) {\n          values = $$.convertValuesToStep(values);\n        }\n        path = area.curve($$.getInterpolate(d))(values);\n      } else {\n        if (values[0]) {\n          x0 = $$.x(values[0].x);\n          y0 = $$.getYScale(d.id)(values[0].value);\n        }\n        path = config.axis_rotated ? 'M ' + y0 + ' ' + x0 : 'M ' + x0 + ' ' + y0;\n      }\n      return path ? path : 'M 0 0';\n    };\n  };\n  ChartInternal.prototype.getAreaBaseValue = function () {\n    return 0;\n  };\n  ChartInternal.prototype.generateGetAreaPoints = function (areaIndices, isSub) {\n    // partial duplication of generateGetBarPoints\n    var $$ = this,\n      config = $$.config,\n      areaTargetsNum = areaIndices.__max__ + 1,\n      x = $$.getShapeX(0, areaTargetsNum, areaIndices, !!isSub),\n      y = $$.getShapeY(!!isSub),\n      areaOffset = $$.getShapeOffset($$.isAreaType, areaIndices, !!isSub),\n      yScale = isSub ? $$.getSubYScale : $$.getYScale;\n    return function (d, i) {\n      var y0 = yScale.call($$, d.id)(0),\n        offset = areaOffset(d, i) || y0,\n        // offset is for stacked area chart\n        posX = x(d),\n        posY = y(d);\n      // fix posY not to overflow opposite quadrant\n      if (config.axis_rotated) {\n        if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n          posY = y0;\n        }\n      }\n      // 1 point that marks the area position\n      return [[posX, offset], [posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)], [posX, offset] // needed for compatibility\n      ];\n    };\n  };\n\n  ChartInternal.prototype.updateCircle = function (cx, cy) {\n    var $$ = this;\n    var mainCircle = $$.main.selectAll('.' + CLASS.circles).selectAll('.' + CLASS.circle).data($$.lineOrScatterOrStanfordData.bind($$));\n    var mainCircleEnter = mainCircle.enter().append('circle').attr('shape-rendering', $$.isStanfordGraphType() ? 'crispEdges' : '').attr('class', $$.classCircle.bind($$)).attr('cx', cx).attr('cy', cy).attr('r', $$.pointR.bind($$)).style('color', $$.isStanfordGraphType() ? $$.getStanfordPointColor.bind($$) : $$.color);\n    $$.mainCircle = mainCircleEnter.merge(mainCircle).style('opacity', $$.isStanfordGraphType() ? 1 : $$.initialOpacityForCircle.bind($$));\n    mainCircle.exit().style('opacity', 0);\n  };\n  ChartInternal.prototype.redrawCircle = function (cx, cy, withTransition, transition) {\n    var $$ = this,\n      selectedCircles = $$.main.selectAll('.' + CLASS.selectedCircle);\n    return [(withTransition ? $$.mainCircle.transition(transition) : $$.mainCircle).style('opacity', this.opacityForCircle.bind($$)).style('color', $$.isStanfordGraphType() ? $$.getStanfordPointColor.bind($$) : $$.color).attr('cx', cx).attr('cy', cy), (withTransition ? selectedCircles.transition(transition) : selectedCircles).attr('cx', cx).attr('cy', cy)];\n  };\n  ChartInternal.prototype.circleX = function (d) {\n    return d.x || d.x === 0 ? this.x(d.x) : null;\n  };\n  ChartInternal.prototype.updateCircleY = function () {\n    var $$ = this,\n      lineIndices,\n      getPoints;\n    if ($$.config.data_groups.length > 0) {\n      lineIndices = $$.getShapeIndices($$.isLineType), getPoints = $$.generateGetLinePoints(lineIndices);\n      $$.circleY = function (d, i) {\n        return getPoints(d, i)[0][1];\n      };\n    } else {\n      $$.circleY = function (d) {\n        return $$.getYScale(d.id)(d.value);\n      };\n    }\n  };\n  ChartInternal.prototype.getCircles = function (i, id) {\n    var $$ = this;\n    return (id ? $$.main.selectAll('.' + CLASS.circles + $$.getTargetSelectorSuffix(id)) : $$.main).selectAll('.' + CLASS.circle + (isValue(i) ? '-' + i : ''));\n  };\n  ChartInternal.prototype.expandCircles = function (i, id, reset) {\n    var $$ = this,\n      r = $$.pointExpandedR.bind($$);\n    if (reset) {\n      $$.unexpandCircles();\n    }\n    $$.getCircles(i, id).classed(CLASS.EXPANDED, true).attr('r', r);\n  };\n  ChartInternal.prototype.unexpandCircles = function (i) {\n    var $$ = this,\n      r = $$.pointR.bind($$);\n    $$.getCircles(i).filter(function () {\n      return $$.d3.select(this).classed(CLASS.EXPANDED);\n    }).classed(CLASS.EXPANDED, false).attr('r', r);\n  };\n  ChartInternal.prototype.pointR = function (d) {\n    var $$ = this,\n      config = $$.config;\n    return $$.isStepType(d) ? 0 : isFunction(config.point_r) ? config.point_r(d) : config.point_r;\n  };\n  ChartInternal.prototype.pointExpandedR = function (d) {\n    var $$ = this,\n      config = $$.config;\n    if (config.point_focus_expand_enabled) {\n      return isFunction(config.point_focus_expand_r) ? config.point_focus_expand_r(d) : config.point_focus_expand_r ? config.point_focus_expand_r : $$.pointR(d) * 1.75;\n    } else {\n      return $$.pointR(d);\n    }\n  };\n  ChartInternal.prototype.pointSelectR = function (d) {\n    var $$ = this,\n      config = $$.config;\n    return isFunction(config.point_select_r) ? config.point_select_r(d) : config.point_select_r ? config.point_select_r : $$.pointR(d) * 4;\n  };\n  ChartInternal.prototype.isWithinCircle = function (that, r) {\n    var d3 = this.d3,\n      mouse = d3.mouse(that),\n      d3_this = d3.select(that),\n      cx = +d3_this.attr('cx'),\n      cy = +d3_this.attr('cy');\n    return Math.sqrt(Math.pow(cx - mouse[0], 2) + Math.pow(cy - mouse[1], 2)) < r;\n  };\n  ChartInternal.prototype.isWithinStep = function (that, y) {\n    return Math.abs(y - this.d3.mouse(that)[1]) < 30;\n  };\n  ChartInternal.prototype.getCurrentWidth = function () {\n    var $$ = this,\n      config = $$.config;\n    return config.size_width ? config.size_width : $$.getParentWidth();\n  };\n  ChartInternal.prototype.getCurrentHeight = function () {\n    var $$ = this,\n      config = $$.config,\n      h = config.size_height ? config.size_height : $$.getParentHeight();\n    return h > 0 ? h : 320 / ($$.hasType('gauge') && !config.gauge_fullCircle ? 2 : 1);\n  };\n  ChartInternal.prototype.getCurrentPaddingTop = function () {\n    var $$ = this,\n      config = $$.config,\n      padding = isValue(config.padding_top) ? config.padding_top : 0;\n    if ($$.title && $$.title.node()) {\n      padding += $$.getTitlePadding();\n    }\n    return padding;\n  };\n  ChartInternal.prototype.getCurrentPaddingBottom = function () {\n    var config = this.config;\n    return isValue(config.padding_bottom) ? config.padding_bottom : 0;\n  };\n  ChartInternal.prototype.getCurrentPaddingLeft = function (withoutRecompute) {\n    var $$ = this,\n      config = $$.config;\n    if (isValue(config.padding_left)) {\n      return config.padding_left;\n    } else if (config.axis_rotated) {\n      return !config.axis_x_show || config.axis_x_inner ? 1 : Math.max(ceil10($$.getAxisWidthByAxisId('x', withoutRecompute)), 40);\n    } else if (!config.axis_y_show || config.axis_y_inner) {\n      // && !config.axis_rotated\n      return $$.axis.getYAxisLabelPosition().isOuter ? 30 : 1;\n    } else {\n      return ceil10($$.getAxisWidthByAxisId('y', withoutRecompute));\n    }\n  };\n  ChartInternal.prototype.getCurrentPaddingRight = function () {\n    var $$ = this,\n      config = $$.config,\n      padding = 0,\n      defaultPadding = 10,\n      legendWidthOnRight = $$.isLegendRight ? $$.getLegendWidth() + 20 : 0;\n    if (isValue(config.padding_right)) {\n      padding = config.padding_right + 1; // 1 is needed not to hide tick line\n    } else if (config.axis_rotated) {\n      padding = defaultPadding + legendWidthOnRight;\n    } else if (!config.axis_y2_show || config.axis_y2_inner) {\n      // && !config.axis_rotated\n      padding = 2 + legendWidthOnRight + ($$.axis.getY2AxisLabelPosition().isOuter ? 20 : 0);\n    } else {\n      padding = ceil10($$.getAxisWidthByAxisId('y2')) + legendWidthOnRight;\n    }\n    if ($$.colorScale && $$.colorScale.node()) {\n      padding += $$.getColorScalePadding();\n    }\n    return padding;\n  };\n  ChartInternal.prototype.getParentRectValue = function (key) {\n    var parent = this.selectChart.node(),\n      v;\n    while (parent && parent.tagName !== 'BODY') {\n      try {\n        v = parent.getBoundingClientRect()[key];\n      } catch (e) {\n        if (key === 'width') {\n          // In IE in certain cases getBoundingClientRect\n          // will cause an \"unspecified error\"\n          v = parent.offsetWidth;\n        }\n      }\n      if (v) {\n        break;\n      }\n      parent = parent.parentNode;\n    }\n    return v;\n  };\n  ChartInternal.prototype.getParentWidth = function () {\n    return this.getParentRectValue('width');\n  };\n  ChartInternal.prototype.getParentHeight = function () {\n    var h = this.selectChart.style('height');\n    return h.indexOf('px') > 0 ? +h.replace('px', '') : 0;\n  };\n  ChartInternal.prototype.getSvgLeft = function (withoutRecompute) {\n    var $$ = this,\n      config = $$.config,\n      hasLeftAxisRect = config.axis_rotated || !config.axis_rotated && !config.axis_y_inner,\n      leftAxisClass = config.axis_rotated ? CLASS.axisX : CLASS.axisY,\n      leftAxis = $$.main.select('.' + leftAxisClass).node(),\n      svgRect = leftAxis && hasLeftAxisRect ? leftAxis.getBoundingClientRect() : {\n        right: 0\n      },\n      chartRect = $$.selectChart.node().getBoundingClientRect(),\n      hasArc = $$.hasArcType(),\n      svgLeft = svgRect.right - chartRect.left - (hasArc ? 0 : $$.getCurrentPaddingLeft(withoutRecompute));\n    return svgLeft > 0 ? svgLeft : 0;\n  };\n  ChartInternal.prototype.getAxisWidthByAxisId = function (id, withoutRecompute) {\n    var $$ = this,\n      position = $$.axis.getLabelPositionById(id);\n    return $$.axis.getMaxTickWidth(id, withoutRecompute) + (position.isInner ? 20 : 40);\n  };\n  ChartInternal.prototype.getHorizontalAxisHeight = function (axisId, isSubchart) {\n    var $$ = this,\n      config = $$.config,\n      h = 30;\n    if (axisId === 'x' && !(isDefined(isSubchart) && isSubchart ? config.subchart_axis_x_show : config.axis_x_show)) {\n      return 8;\n    }\n    if (axisId === 'x' && config.axis_x_height) {\n      return config.axis_x_height;\n    }\n    if (axisId === 'y' && !config.axis_y_show) {\n      return config.legend_show && !$$.isLegendRight && !$$.isLegendInset ? 10 : 1;\n    }\n    if (axisId === 'y2' && !config.axis_y2_show) {\n      return $$.rotated_padding_top;\n    }\n    // Calculate x axis height when tick rotated\n    if (axisId === 'x' && !config.axis_rotated && config.axis_x_tick_rotate) {\n      h = 30 + $$.axis.getMaxTickWidth(axisId) * Math.cos(Math.PI * (90 - Math.abs(config.axis_x_tick_rotate)) / 180);\n    }\n    // Calculate y axis height when tick rotated\n    if (axisId === 'y' && config.axis_rotated && config.axis_y_tick_rotate) {\n      h = 30 + $$.axis.getMaxTickWidth(axisId) * Math.cos(Math.PI * (90 - Math.abs(config.axis_y_tick_rotate)) / 180);\n    }\n    return h + ($$.axis.getLabelPositionById(axisId).isInner ? 0 : 10) + (axisId === 'y2' ? -10 : 0);\n  };\n  ChartInternal.prototype.initBrush = function (scale) {\n    var $$ = this,\n      d3 = $$.d3;\n    // TODO: dynamically change brushY/brushX according to axis_rotated.\n    $$.brush = ($$.config.axis_rotated ? d3.brushY() : d3.brushX()).on('brush', function () {\n      var event = d3.event.sourceEvent;\n      if (event && event.type === 'zoom') {\n        return;\n      }\n      $$.redrawForBrush();\n    }).on('end', function () {\n      var event = d3.event.sourceEvent;\n      if (event && event.type === 'zoom') {\n        return;\n      }\n      if ($$.brush.empty() && event && event.type !== 'end') {\n        $$.brush.clear();\n      }\n    });\n    $$.brush.updateExtent = function () {\n      var range = this.scale.range(),\n        extent;\n      if ($$.config.axis_rotated) {\n        extent = [[0, range[0]], [$$.width2, range[1]]];\n      } else {\n        extent = [[range[0], 0], [range[1], $$.height2]];\n      }\n      this.extent(extent);\n      return this;\n    };\n    $$.brush.updateScale = function (scale) {\n      this.scale = scale;\n      return this;\n    };\n    $$.brush.update = function (scale) {\n      this.updateScale(scale || $$.subX).updateExtent();\n      $$.context.select('.' + CLASS.brush).call(this);\n    };\n    $$.brush.clear = function () {\n      $$.context.select('.' + CLASS.brush).call($$.brush.move, null);\n    };\n    $$.brush.selection = function () {\n      return d3.brushSelection($$.context.select('.' + CLASS.brush).node());\n    };\n    $$.brush.selectionAsValue = function (selectionAsValue, withTransition) {\n      var selection, brush;\n      if (selectionAsValue) {\n        if ($$.context) {\n          selection = [this.scale(selectionAsValue[0]), this.scale(selectionAsValue[1])];\n          brush = $$.context.select('.' + CLASS.brush);\n          if (withTransition) {\n            brush = brush.transition();\n          }\n          $$.brush.move(brush, selection);\n        }\n        return [];\n      }\n      selection = $$.brush.selection() || [0, 0];\n      return [this.scale.invert(selection[0]), this.scale.invert(selection[1])];\n    };\n    $$.brush.empty = function () {\n      var selection = $$.brush.selection();\n      return !selection || selection[0] === selection[1];\n    };\n    return $$.brush.updateScale(scale);\n  };\n  ChartInternal.prototype.initSubchart = function () {\n    var $$ = this,\n      config = $$.config,\n      context = $$.context = $$.svg.append('g').attr('transform', $$.getTranslate('context'));\n    // set style\n    context.style('visibility', 'visible');\n    // Define g for chart area\n    context.append('g').attr('clip-path', $$.clipPathForSubchart).attr('class', CLASS.chart);\n    // Define g for bar chart area\n    context.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartBars);\n    // Define g for line chart area\n    context.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartLines);\n    // Add extent rect for Brush\n    context.append('g').attr('clip-path', $$.clipPath).attr('class', CLASS.brush);\n    // ATTENTION: This must be called AFTER chart added\n    // Add Axis\n    $$.axes.subx = context.append('g').attr('class', CLASS.axisX).attr('transform', $$.getTranslate('subx')).attr('clip-path', config.axis_rotated ? '' : $$.clipPathForXAxis).style('visibility', config.subchart_axis_x_show ? 'visible' : 'hidden');\n  };\n  ChartInternal.prototype.initSubchartBrush = function () {\n    var $$ = this;\n    // Add extent rect for Brush\n    $$.initBrush($$.subX).updateExtent();\n    $$.context.select('.' + CLASS.brush).call($$.brush);\n  };\n  ChartInternal.prototype.updateTargetsForSubchart = function (targets) {\n    var $$ = this,\n      context = $$.context,\n      config = $$.config,\n      contextLineEnter,\n      contextLine,\n      contextBarEnter,\n      contextBar,\n      classChartBar = $$.classChartBar.bind($$),\n      classBars = $$.classBars.bind($$),\n      classChartLine = $$.classChartLine.bind($$),\n      classLines = $$.classLines.bind($$),\n      classAreas = $$.classAreas.bind($$);\n    //-- Bar --//\n    contextBar = context.select('.' + CLASS.chartBars).selectAll('.' + CLASS.chartBar).data(targets);\n    contextBarEnter = contextBar.enter().append('g').style('opacity', 0);\n    contextBarEnter.merge(contextBar).attr('class', classChartBar);\n    // Bars for each data\n    contextBarEnter.append('g').attr('class', classBars);\n    //-- Line --//\n    contextLine = context.select('.' + CLASS.chartLines).selectAll('.' + CLASS.chartLine).data(targets);\n    contextLineEnter = contextLine.enter().append('g').style('opacity', 0);\n    contextLineEnter.merge(contextLine).attr('class', classChartLine);\n    // Lines for each data\n    contextLineEnter.append('g').attr('class', classLines);\n    // Area\n    contextLineEnter.append('g').attr('class', classAreas);\n    //-- Brush --//\n    context.selectAll('.' + CLASS.brush + ' rect').attr(config.axis_rotated ? 'width' : 'height', config.axis_rotated ? $$.width2 : $$.height2);\n  };\n  ChartInternal.prototype.updateBarForSubchart = function (durationForExit) {\n    var $$ = this;\n    var contextBar = $$.context.selectAll('.' + CLASS.bars).selectAll('.' + CLASS.bar).data($$.barData.bind($$));\n    var contextBarEnter = contextBar.enter().append('path').attr('class', $$.classBar.bind($$)).style('stroke', 'none').style('fill', $$.color);\n    contextBar.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    $$.contextBar = contextBarEnter.merge(contextBar).style('opacity', $$.initialOpacity.bind($$));\n  };\n  ChartInternal.prototype.redrawBarForSubchart = function (drawBarOnSub, withTransition, duration) {\n    (withTransition ? this.contextBar.transition(Math.random().toString()).duration(duration) : this.contextBar).attr('d', drawBarOnSub).style('opacity', 1);\n  };\n  ChartInternal.prototype.updateLineForSubchart = function (durationForExit) {\n    var $$ = this;\n    var contextLine = $$.context.selectAll('.' + CLASS.lines).selectAll('.' + CLASS.line).data($$.lineData.bind($$));\n    var contextLineEnter = contextLine.enter().append('path').attr('class', $$.classLine.bind($$)).style('stroke', $$.color);\n    contextLine.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    $$.contextLine = contextLineEnter.merge(contextLine).style('opacity', $$.initialOpacity.bind($$));\n  };\n  ChartInternal.prototype.redrawLineForSubchart = function (drawLineOnSub, withTransition, duration) {\n    (withTransition ? this.contextLine.transition(Math.random().toString()).duration(duration) : this.contextLine).attr('d', drawLineOnSub).style('opacity', 1);\n  };\n  ChartInternal.prototype.updateAreaForSubchart = function (durationForExit) {\n    var $$ = this,\n      d3 = $$.d3;\n    var contextArea = $$.context.selectAll('.' + CLASS.areas).selectAll('.' + CLASS.area).data($$.lineData.bind($$));\n    var contextAreaEnter = contextArea.enter().append('path').attr('class', $$.classArea.bind($$)).style('fill', $$.color).style('opacity', function () {\n      $$.orgAreaOpacity = +d3.select(this).style('opacity');\n      return 0;\n    });\n    contextArea.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    $$.contextArea = contextAreaEnter.merge(contextArea).style('opacity', 0);\n  };\n  ChartInternal.prototype.redrawAreaForSubchart = function (drawAreaOnSub, withTransition, duration) {\n    (withTransition ? this.contextArea.transition(Math.random().toString()).duration(duration) : this.contextArea).attr('d', drawAreaOnSub).style('fill', this.color).style('opacity', this.orgAreaOpacity);\n  };\n  ChartInternal.prototype.redrawSubchart = function (withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices) {\n    var $$ = this,\n      d3 = $$.d3,\n      drawAreaOnSub,\n      drawBarOnSub,\n      drawLineOnSub;\n    // reflect main chart to extent on subchart if zoomed\n    if (d3.event && d3.event.type === 'zoom') {\n      $$.brush.selectionAsValue($$.x.orgDomain());\n    }\n    // update subchart elements if needed\n    if (withSubchart) {\n      // extent rect\n      if (!$$.brush.empty()) {\n        $$.brush.selectionAsValue($$.x.orgDomain());\n      }\n      // setup drawer - MEMO: this must be called after axis updated\n      drawAreaOnSub = $$.generateDrawArea(areaIndices, true);\n      drawBarOnSub = $$.generateDrawBar(barIndices, true);\n      drawLineOnSub = $$.generateDrawLine(lineIndices, true);\n      $$.updateBarForSubchart(duration);\n      $$.updateLineForSubchart(duration);\n      $$.updateAreaForSubchart(duration);\n      $$.redrawBarForSubchart(drawBarOnSub, duration, duration);\n      $$.redrawLineForSubchart(drawLineOnSub, duration, duration);\n      $$.redrawAreaForSubchart(drawAreaOnSub, duration, duration);\n    }\n  };\n  ChartInternal.prototype.redrawForBrush = function () {\n    var $$ = this,\n      x = $$.x,\n      d3 = $$.d3,\n      s;\n    $$.redraw({\n      withTransition: false,\n      withY: $$.config.zoom_rescale,\n      withSubchart: false,\n      withUpdateXDomain: true,\n      withEventRect: false,\n      withDimension: false\n    });\n    // update zoom transation binded to event rect\n    s = d3.event.selection || $$.brush.scale.range();\n    $$.main.select('.' + CLASS.eventRect).call($$.zoom.transform, d3.zoomIdentity.scale($$.width / (s[1] - s[0])).translate(-s[0], 0));\n    $$.config.subchart_onbrush.call($$.api, x.orgDomain());\n  };\n  ChartInternal.prototype.transformContext = function (withTransition, transitions) {\n    var $$ = this,\n      subXAxis;\n    if (transitions && transitions.axisSubX) {\n      subXAxis = transitions.axisSubX;\n    } else {\n      subXAxis = $$.context.select('.' + CLASS.axisX);\n      if (withTransition) {\n        subXAxis = subXAxis.transition();\n      }\n    }\n    $$.context.attr('transform', $$.getTranslate('context'));\n    subXAxis.attr('transform', $$.getTranslate('subx'));\n  };\n  ChartInternal.prototype.getDefaultSelection = function () {\n    var $$ = this,\n      config = $$.config,\n      selection = isFunction(config.axis_x_selection) ? config.axis_x_selection($$.getXDomain($$.data.targets)) : config.axis_x_selection;\n    if ($$.isTimeSeries()) {\n      selection = [$$.parseDate(selection[0]), $$.parseDate(selection[1])];\n    }\n    return selection;\n  };\n  ChartInternal.prototype.removeSubchart = function () {\n    var $$ = this;\n    $$.brush = null;\n    $$.context.remove();\n    $$.context = null;\n  };\n  ChartInternal.prototype.initText = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartTexts);\n    $$.mainText = $$.d3.selectAll([]);\n  };\n  ChartInternal.prototype.updateTargetsForText = function (targets) {\n    var $$ = this,\n      classChartText = $$.classChartText.bind($$),\n      classTexts = $$.classTexts.bind($$),\n      classFocus = $$.classFocus.bind($$);\n    var mainText = $$.main.select('.' + CLASS.chartTexts).selectAll('.' + CLASS.chartText).data(targets);\n    var mainTextEnter = mainText.enter().append('g').attr('class', classChartText).style('opacity', 0).style('pointer-events', 'none');\n    mainTextEnter.append('g').attr('class', classTexts);\n    mainTextEnter.merge(mainText).attr('class', function (d) {\n      return classChartText(d) + classFocus(d);\n    });\n  };\n  ChartInternal.prototype.updateText = function (xForText, yForText, durationForExit) {\n    var $$ = this,\n      config = $$.config,\n      barOrLineData = $$.barOrLineData.bind($$),\n      classText = $$.classText.bind($$);\n    var mainText = $$.main.selectAll('.' + CLASS.texts).selectAll('.' + CLASS.text).data(barOrLineData);\n    var mainTextEnter = mainText.enter().append('text').attr('class', classText).attr('text-anchor', function (d) {\n      return config.axis_rotated ? d.value < 0 ? 'end' : 'start' : 'middle';\n    }).style('stroke', 'none').attr('x', xForText).attr('y', yForText).style('fill', function (d) {\n      return $$.color(d);\n    }).style('fill-opacity', 0);\n    $$.mainText = mainTextEnter.merge(mainText).text(function (d, i, j) {\n      return $$.dataLabelFormat(d.id)(d.value, d.id, i, j);\n    });\n    mainText.exit().transition().duration(durationForExit).style('fill-opacity', 0).remove();\n  };\n  ChartInternal.prototype.redrawText = function (xForText, yForText, forFlow, withTransition, transition) {\n    return [(withTransition ? this.mainText.transition(transition) : this.mainText).attr('x', xForText).attr('y', yForText).style('fill', this.color).style('fill-opacity', forFlow ? 0 : this.opacityForText.bind(this))];\n  };\n  ChartInternal.prototype.getTextRect = function (text, cls, element) {\n    var dummy = this.d3.select('body').append('div').classed('c3', true),\n      svg = dummy.append('svg').style('visibility', 'hidden').style('position', 'fixed').style('top', 0).style('left', 0),\n      font = this.d3.select(element).style('font'),\n      rect;\n    svg.selectAll('.dummy').data([text]).enter().append('text').classed(cls ? cls : '', true).style('font', font).text(text).each(function () {\n      rect = getBBox(this);\n    });\n    dummy.remove();\n    return rect;\n  };\n  ChartInternal.prototype.generateXYForText = function (areaIndices, barIndices, lineIndices, forX) {\n    var $$ = this,\n      getAreaPoints = $$.generateGetAreaPoints(areaIndices, false),\n      getBarPoints = $$.generateGetBarPoints(barIndices, false),\n      getLinePoints = $$.generateGetLinePoints(lineIndices, false),\n      getter = forX ? $$.getXForText : $$.getYForText;\n    return function (d, i) {\n      var getPoints = $$.isAreaType(d) ? getAreaPoints : $$.isBarType(d) ? getBarPoints : getLinePoints;\n      return getter.call($$, getPoints(d, i), d, this);\n    };\n  };\n  ChartInternal.prototype.getXForText = function (points, d, textElement) {\n    var $$ = this,\n      box = getBBox(textElement),\n      xPos,\n      padding;\n    if ($$.config.axis_rotated) {\n      padding = $$.isBarType(d) ? 4 : 6;\n      xPos = points[2][1] + padding * (d.value < 0 ? -1 : 1);\n    } else {\n      xPos = $$.hasType('bar') ? (points[2][0] + points[0][0]) / 2 : points[0][0];\n    }\n    // show labels regardless of the domain if value is null\n    if (d.value === null) {\n      if (xPos > $$.width) {\n        xPos = $$.width - box.width;\n      } else if (xPos < 0) {\n        xPos = 4;\n      }\n    }\n    return xPos;\n  };\n  ChartInternal.prototype.getYForText = function (points, d, textElement) {\n    var $$ = this,\n      box = getBBox(textElement),\n      yPos;\n    if ($$.config.axis_rotated) {\n      yPos = (points[0][0] + points[2][0] + box.height * 0.6) / 2;\n    } else {\n      yPos = points[2][1];\n      if (d.value < 0 || d.value === 0 && !$$.hasPositiveValue) {\n        yPos += box.height;\n        if ($$.isBarType(d) && $$.isSafari()) {\n          yPos -= 3;\n        } else if (!$$.isBarType(d) && $$.isChrome()) {\n          yPos += 3;\n        }\n      } else {\n        yPos += $$.isBarType(d) ? -3 : -6;\n      }\n    }\n    // show labels regardless of the domain if value is null\n    if (d.value === null && !$$.config.axis_rotated) {\n      if (yPos < box.height) {\n        yPos = box.height;\n      } else if (yPos > this.height) {\n        yPos = this.height - 4;\n      }\n    }\n    return yPos;\n  };\n  ChartInternal.prototype.initTitle = function () {\n    var $$ = this;\n    $$.title = $$.svg.append('text').text($$.config.title_text).attr('class', $$.CLASS.title);\n  };\n  ChartInternal.prototype.redrawTitle = function () {\n    var $$ = this;\n    $$.title.attr('x', $$.xForTitle.bind($$)).attr('y', $$.yForTitle.bind($$));\n  };\n  ChartInternal.prototype.xForTitle = function () {\n    var $$ = this,\n      config = $$.config,\n      position = config.title_position || 'left',\n      x;\n    if (position.indexOf('right') >= 0) {\n      x = $$.currentWidth - $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width - config.title_padding.right;\n    } else if (position.indexOf('center') >= 0) {\n      x = Math.max(($$.currentWidth - $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width) / 2, 0);\n    } else {\n      // left\n      x = config.title_padding.left;\n    }\n    return x;\n  };\n  ChartInternal.prototype.yForTitle = function () {\n    var $$ = this;\n    return $$.config.title_padding.top + $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).height;\n  };\n  ChartInternal.prototype.getTitlePadding = function () {\n    var $$ = this;\n    return $$.yForTitle() + $$.config.title_padding.bottom;\n  };\n  function powerOfTen(d) {\n    return d / Math.pow(10, Math.ceil(Math.log(d) / Math.LN10 - 1e-12)) === 1;\n  }\n  ChartInternal.prototype.drawColorScale = function () {\n    var $$ = this,\n      d3 = $$.d3,\n      config = $$.config,\n      target = $$.data.targets[0],\n      barWidth,\n      barHeight,\n      axis,\n      points,\n      legendAxis,\n      axisScale,\n      inverseScale,\n      height;\n    barWidth = !isNaN(config.stanford_scaleWidth) ? config.stanford_scaleWidth : 20;\n    barHeight = 5;\n    if (barHeight < 0 || barWidth < 0) {\n      throw Error(\"Colorscale's barheight and barwidth must be greater than 0.\");\n    }\n    height = $$.height - config.stanford_padding.bottom - config.stanford_padding.top;\n    points = d3.range(config.stanford_padding.bottom, height, barHeight);\n    inverseScale = d3.scaleSequential(target.colors).domain([points[points.length - 1], points[0]]);\n    if ($$.colorScale) {\n      $$.colorScale.remove();\n    }\n    $$.colorScale = $$.svg.append('g').attr('width', 50).attr('height', height).attr('class', CLASS.colorScale);\n    $$.colorScale.append('g').attr('transform', \"translate(0, \" + config.stanford_padding.top + \")\").selectAll('bars').data(points).enter().append('rect').attr('y', function (d, i) {\n      return i * barHeight;\n    }).attr('x', 0).attr('width', barWidth).attr('height', barHeight).attr('fill', function (d) {\n      return inverseScale(d);\n    });\n    // Legend Axis\n    axisScale = d3.scaleLog().domain([target.minEpochs, target.maxEpochs]).range([points[0] + config.stanford_padding.top + points[points.length - 1] + barHeight - 1, points[0] + config.stanford_padding.top]);\n    legendAxis = d3.axisRight(axisScale);\n    if (config.stanford_scaleFormat === 'pow10') {\n      legendAxis.tickValues([1, 10, 100, 1000, 10000, 100000, 1000000, 10000000]);\n    } else if (isFunction(config.stanford_scaleFormat)) {\n      legendAxis.tickFormat(config.stanford_scaleFormat);\n    } else {\n      legendAxis.tickFormat(d3.format('d'));\n    }\n    if (isFunction(config.stanford_scaleValues)) {\n      legendAxis.tickValues(config.stanford_scaleValues(target.minEpochs, target.maxEpochs));\n    }\n    // Draw Axis\n    axis = $$.colorScale.append('g').attr('class', 'legend axis').attr('transform', \"translate(\" + barWidth + \",0)\").call(legendAxis);\n    if (config.stanford_scaleFormat === 'pow10') {\n      axis.selectAll('.tick text').text(null).filter(powerOfTen).text(10).append('tspan').attr('dy', '-.7em') // https://bl.ocks.org/mbostock/6738229\n      .text(function (d) {\n        return Math.round(Math.log(d) / Math.LN10);\n      });\n    }\n    $$.colorScale.attr('transform', \"translate(\" + ($$.currentWidth - $$.xForColorScale()) + \", 0)\");\n  };\n  ChartInternal.prototype.xForColorScale = function () {\n    var $$ = this;\n    return $$.config.stanford_padding.right + getBBox($$.colorScale.node()).width;\n  };\n  ChartInternal.prototype.getColorScalePadding = function () {\n    var $$ = this;\n    return $$.xForColorScale() + $$.config.stanford_padding.left + 20;\n  };\n  ChartInternal.prototype.isStanfordGraphType = function () {\n    var $$ = this;\n    return $$.config.data_type === 'stanford';\n  };\n  ChartInternal.prototype.initStanfordData = function () {\n    var $$ = this,\n      d3 = $$.d3,\n      config = $$.config,\n      target = $$.data.targets[0],\n      epochs,\n      maxEpochs,\n      minEpochs;\n    // Make larger values appear on top\n    target.values.sort(compareEpochs);\n    // Get array of epochs\n    epochs = target.values.map(function (a) {\n      return a.epochs;\n    });\n    minEpochs = !isNaN(config.stanford_scaleMin) ? config.stanford_scaleMin : d3.min(epochs);\n    maxEpochs = !isNaN(config.stanford_scaleMax) ? config.stanford_scaleMax : d3.max(epochs);\n    if (minEpochs > maxEpochs) {\n      throw Error('Number of minEpochs has to be smaller than maxEpochs');\n    }\n    target.colors = isFunction(config.stanford_colors) ? config.stanford_colors : d3.interpolateHslLong(d3.hsl(250, 1, 0.5), d3.hsl(0, 1, 0.5));\n    target.colorscale = d3.scaleSequentialLog(target.colors).domain([minEpochs, maxEpochs]);\n    target.minEpochs = minEpochs;\n    target.maxEpochs = maxEpochs;\n  };\n  ChartInternal.prototype.getStanfordPointColor = function (d) {\n    var $$ = this,\n      target = $$.data.targets[0];\n    return target.colorscale(d.epochs);\n  };\n  // http://jsfiddle.net/Xotic750/KtzLq/\n  ChartInternal.prototype.getCentroid = function (points) {\n    var area = getRegionArea(points);\n    var x = 0,\n      y = 0,\n      i,\n      j,\n      f,\n      point1,\n      point2;\n    for (i = 0, j = points.length - 1; i < points.length; j = i, i += 1) {\n      point1 = points[i];\n      point2 = points[j];\n      f = point1.x * point2.y - point2.x * point1.y;\n      x += (point1.x + point2.x) * f;\n      y += (point1.y + point2.y) * f;\n    }\n    f = area * 6;\n    return {\n      x: x / f,\n      y: y / f\n    };\n  };\n  ChartInternal.prototype.getStanfordTooltipTitle = function (d) {\n    var $$ = this,\n      labelX = $$.axis.getLabelText('x'),\n      labelY = $$.axis.getLabelText('y');\n    return \"\\n      <tr><th>\" + (labelX ? sanitise(labelX) : 'x') + \"</th><th class='value'>\" + d.x + \"</th></tr>\\n      <tr><th>\" + (labelY ? sanitise(labelY) : 'y') + \"</th><th class='value'>\" + d.value + \"</th></tr>\\n    \";\n  };\n  ChartInternal.prototype.countEpochsInRegion = function (region) {\n    var $$ = this,\n      target = $$.data.targets[0],\n      total,\n      count;\n    total = target.values.reduce(function (accumulator, currentValue) {\n      return accumulator + Number(currentValue.epochs);\n    }, 0);\n    count = target.values.reduce(function (accumulator, currentValue) {\n      if (pointInRegion(currentValue, region)) {\n        return accumulator + Number(currentValue.epochs);\n      }\n      return accumulator;\n    }, 0);\n    return {\n      value: count,\n      percentage: count !== 0 ? (count / total * 100).toFixed(1) : 0\n    };\n  };\n  var getRegionArea = function (points) {\n    // thanks to: https://stackoverflow.com/questions/16282330/find-centerpoint-of-polygon-in-javascript\n    var area = 0,\n      i,\n      j,\n      point1,\n      point2;\n    for (i = 0, j = points.length - 1; i < points.length; j = i, i += 1) {\n      point1 = points[i];\n      point2 = points[j];\n      area += point1.x * point2.y;\n      area -= point1.y * point2.x;\n    }\n    area /= 2;\n    return area;\n  };\n  var pointInRegion = function (point, region) {\n    // thanks to: http://bl.ocks.org/bycoffe/5575904\n    // ray-casting algorithm based on\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n    var xi,\n      yi,\n      yj,\n      xj,\n      intersect,\n      x = point.x,\n      y = point.value,\n      inside = false;\n    for (var i = 0, j = region.length - 1; i < region.length; j = i++) {\n      xi = region[i].x;\n      yi = region[i].y;\n      xj = region[j].x;\n      yj = region[j].y;\n      intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;\n      if (intersect) {\n        inside = !inside;\n      }\n    }\n    return inside;\n  };\n  var compareEpochs = function (a, b) {\n    if (a.epochs < b.epochs) {\n      return -1;\n    }\n    if (a.epochs > b.epochs) {\n      return 1;\n    }\n    return 0;\n  };\n  ChartInternal.prototype.initStanfordElements = function () {\n    var $$ = this;\n    // Avoid blocking eventRect\n    $$.stanfordElements = $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.stanfordElements);\n    $$.stanfordElements.append('g').attr('class', CLASS.stanfordLines);\n    $$.stanfordElements.append('g').attr('class', CLASS.stanfordTexts);\n    $$.stanfordElements.append('g').attr('class', CLASS.stanfordRegions);\n  };\n  ChartInternal.prototype.updateStanfordElements = function (duration) {\n    var $$ = this,\n      main = $$.main,\n      config = $$.config,\n      stanfordLine,\n      stanfordLineEnter,\n      stanfordRegion,\n      stanfordRegionEnter,\n      stanfordText,\n      stanfordTextEnter,\n      xvCustom = $$.xvCustom.bind($$),\n      yvCustom = $$.yvCustom.bind($$),\n      countPointsInRegion = $$.countEpochsInRegion.bind($$);\n    // Stanford-Lines\n    stanfordLine = main.select('.' + CLASS.stanfordLines).style('shape-rendering', 'geometricprecision').selectAll('.' + CLASS.stanfordLine).data(config.stanford_lines);\n    // enter\n    stanfordLineEnter = stanfordLine.enter().append('g').attr('class', function (d) {\n      return CLASS.stanfordLine + (d['class'] ? ' ' + d['class'] : '');\n    });\n    stanfordLineEnter.append('line').attr('x1', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y1') : xvCustom(d, 'value_x1');\n    }).attr('x2', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y2') : xvCustom(d, 'value_x2');\n    }).attr('y1', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x1') : yvCustom(d, 'value_y1');\n    }).attr('y2', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x2') : yvCustom(d, 'value_y2');\n    }).style('opacity', 0);\n    // update\n    $$.stanfordLines = stanfordLineEnter.merge(stanfordLine);\n    $$.stanfordLines.select('line').transition().duration(duration).attr('x1', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y1') : xvCustom(d, 'value_x1');\n    }).attr('x2', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y2') : xvCustom(d, 'value_x2');\n    }).attr('y1', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x1') : yvCustom(d, 'value_y1');\n    }).attr('y2', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x2') : yvCustom(d, 'value_y2');\n    }).style('opacity', 1);\n    // exit\n    stanfordLine.exit().transition().duration(duration).style('opacity', 0).remove();\n    // Stanford-Text\n    stanfordText = main.select('.' + CLASS.stanfordTexts).selectAll('.' + CLASS.stanfordText).data(config.stanford_texts);\n    // enter\n    stanfordTextEnter = stanfordText.enter().append('g').attr('class', function (d) {\n      return CLASS.stanfordText + (d['class'] ? ' ' + d['class'] : '');\n    });\n    stanfordTextEnter.append('text').attr('x', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'y') : xvCustom(d, 'x');\n    }).attr('y', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'x') : yvCustom(d, 'y');\n    }).style('opacity', 0);\n    // update\n    $$.stanfordTexts = stanfordTextEnter.merge(stanfordText);\n    $$.stanfordTexts.select('text').transition().duration(duration).attr('x', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'y') : xvCustom(d, 'x');\n    }).attr('y', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'x') : yvCustom(d, 'y');\n    }).text(function (d) {\n      return d.content;\n    }).style('opacity', 1);\n    // exit\n    stanfordText.exit().transition().duration(duration).style('opacity', 0).remove();\n    // Stanford-Regions\n    stanfordRegion = main.select('.' + CLASS.stanfordRegions).selectAll('.' + CLASS.stanfordRegion).data(config.stanford_regions);\n    // enter\n    stanfordRegionEnter = stanfordRegion.enter().append('g').attr('class', function (d) {\n      return CLASS.stanfordRegion + (d['class'] ? ' ' + d['class'] : '');\n    });\n    stanfordRegionEnter.append('polygon').attr('points', function (d) {\n      return d.points.map(function (value) {\n        return [config.axis_rotated ? yvCustom(value, 'y') : xvCustom(value, 'x'), config.axis_rotated ? xvCustom(value, 'x') : yvCustom(value, 'y')].join(',');\n      }).join(' ');\n    }).style('opacity', 0);\n    stanfordRegionEnter.append('text').attr('x', function (d) {\n      return $$.getCentroid(d.points).x;\n    }).attr('y', function (d) {\n      return $$.getCentroid(d.points).y;\n    }).style('opacity', 0);\n    // update\n    $$.stanfordRegions = stanfordRegionEnter.merge(stanfordRegion);\n    $$.stanfordRegions.select('polygon').transition().duration(duration).attr('points', function (d) {\n      return d.points.map(function (value) {\n        return [config.axis_rotated ? yvCustom(value, 'y') : xvCustom(value, 'x'), config.axis_rotated ? xvCustom(value, 'x') : yvCustom(value, 'y')].join(',');\n      }).join(' ');\n    }).style('opacity', function (d) {\n      return d.opacity ? d.opacity : 0.2;\n    });\n    $$.stanfordRegions.select('text').transition().duration(duration).attr('x', function (d) {\n      return config.axis_rotated ? yvCustom($$.getCentroid(d.points), 'y') : xvCustom($$.getCentroid(d.points), 'x');\n    }).attr('y', function (d) {\n      return config.axis_rotated ? xvCustom($$.getCentroid(d.points), 'x') : yvCustom($$.getCentroid(d.points), 'y');\n    }).text(function (d) {\n      if (d.text) {\n        var value, percentage, temp;\n        if ($$.isStanfordGraphType()) {\n          temp = countPointsInRegion(d.points);\n          value = temp.value;\n          percentage = temp.percentage;\n        }\n        return d.text(value, percentage);\n      }\n      return '';\n    }).attr('text-anchor', 'middle').attr('dominant-baseline', 'middle').style('opacity', 1);\n    // exit\n    stanfordRegion.exit().transition().duration(duration).style('opacity', 0).remove();\n  };\n  ChartInternal.prototype.initTooltip = function () {\n    var $$ = this,\n      config = $$.config,\n      i;\n    $$.tooltip = $$.selectChart.style('position', 'relative').append('div').attr('class', CLASS.tooltipContainer).style('position', 'absolute').style('pointer-events', 'none').style('display', 'none');\n    // Show tooltip if needed\n    if (config.tooltip_init_show) {\n      if ($$.isTimeSeries() && isString(config.tooltip_init_x)) {\n        config.tooltip_init_x = $$.parseDate(config.tooltip_init_x);\n        for (i = 0; i < $$.data.targets[0].values.length; i++) {\n          if ($$.data.targets[0].values[i].x - config.tooltip_init_x === 0) {\n            break;\n          }\n        }\n        config.tooltip_init_x = i;\n      }\n      $$.tooltip.html(config.tooltip_contents.call($$, $$.data.targets.map(function (d) {\n        return $$.addName(d.values[config.tooltip_init_x]);\n      }), $$.axis.getXAxisTickFormat(), $$.getYFormat($$.hasArcType()), $$.color));\n      $$.tooltip.style('top', config.tooltip_init_position.top).style('left', config.tooltip_init_position.left).style('display', 'block');\n    }\n  };\n  ChartInternal.prototype.getTooltipSortFunction = function () {\n    var $$ = this,\n      config = $$.config;\n    if (config.data_groups.length === 0 || config.tooltip_order !== undefined) {\n      // if data are not grouped or if an order is specified\n      // for the tooltip values we sort them by their values\n      var order = config.tooltip_order;\n      if (order === undefined) {\n        order = config.data_order;\n      }\n      var valueOf = function (obj) {\n        return obj ? obj.value : null;\n      };\n      // if data are not grouped, we sort them by their value\n      if (isString(order) && order.toLowerCase() === 'asc') {\n        return function (a, b) {\n          return valueOf(a) - valueOf(b);\n        };\n      } else if (isString(order) && order.toLowerCase() === 'desc') {\n        return function (a, b) {\n          return valueOf(b) - valueOf(a);\n        };\n      } else if (isFunction(order)) {\n        // if the function is from data_order we need\n        // to wrap the returned function in order to format\n        // the sorted value to the expected format\n        var sortFunction = order;\n        if (config.tooltip_order === undefined) {\n          sortFunction = function (a, b) {\n            return order(a ? {\n              id: a.id,\n              values: [a]\n            } : null, b ? {\n              id: b.id,\n              values: [b]\n            } : null);\n          };\n        }\n        return sortFunction;\n      } else if (isArray(order)) {\n        return function (a, b) {\n          return order.indexOf(a.id) - order.indexOf(b.id);\n        };\n      }\n    } else {\n      // if data are grouped, we follow the order of grouped targets\n      var ids = $$.orderTargets($$.data.targets).map(function (i) {\n        return i.id;\n      });\n      // if it was either asc or desc we need to invert the order\n      // returned by orderTargets\n      if ($$.isOrderAsc() || $$.isOrderDesc()) {\n        ids = ids.reverse();\n      }\n      return function (a, b) {\n        return ids.indexOf(a.id) - ids.indexOf(b.id);\n      };\n    }\n  };\n  ChartInternal.prototype.getTooltipContent = function (d, defaultTitleFormat, defaultValueFormat, color) {\n    var $$ = this,\n      config = $$.config,\n      titleFormat = config.tooltip_format_title || defaultTitleFormat,\n      nameFormat = config.tooltip_format_name || function (name) {\n        return name;\n      },\n      text,\n      i,\n      title,\n      value,\n      name,\n      bgcolor;\n    var valueFormat = config.tooltip_format_value;\n    if (!valueFormat) {\n      valueFormat = $$.isTargetNormalized(d.id) ? function (v, ratio) {\n        return (ratio * 100).toFixed(2) + \"%\";\n      } : defaultValueFormat;\n    }\n    var tooltipSortFunction = this.getTooltipSortFunction();\n    if (tooltipSortFunction) {\n      d.sort(tooltipSortFunction);\n    }\n    for (i = 0; i < d.length; i++) {\n      if (!(d[i] && (d[i].value || d[i].value === 0))) {\n        continue;\n      }\n      if ($$.isStanfordGraphType()) {\n        // Custom tooltip for stanford plots\n        if (!text) {\n          title = $$.getStanfordTooltipTitle(d[i]);\n          text = \"<table class='\" + $$.CLASS.tooltip + \"'>\" + title;\n        }\n        bgcolor = $$.getStanfordPointColor(d[i]);\n        name = sanitise(config.data_epochs); // Epochs key name\n        value = d[i].epochs;\n      } else {\n        // Regular tooltip\n        if (!text) {\n          title = sanitise(titleFormat ? titleFormat(d[i].x, d[i].index) : d[i].x);\n          text = \"<table class='\" + $$.CLASS.tooltip + \"'>\" + (title || title === 0 ? \"<tr><th colspan='2'>\" + title + '</th></tr>' : '');\n        }\n        value = sanitise(valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index, d));\n        if (value !== undefined) {\n          // Skip elements when their name is set to null\n          if (d[i].name === null) {\n            continue;\n          }\n          name = sanitise(nameFormat(d[i].name, d[i].ratio, d[i].id, d[i].index));\n          bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);\n        }\n      }\n      if (value !== undefined) {\n        text += \"<tr class='\" + $$.CLASS.tooltipName + '-' + $$.getTargetSelectorSuffix(d[i].id) + \"'>\";\n        text += \"<td class='name'><span style='background-color:\" + bgcolor + \"'></span>\" + name + '</td>';\n        text += \"<td class='value'>\" + value + '</td>';\n        text += '</tr>';\n      }\n    }\n    return text + '</table>';\n  };\n  ChartInternal.prototype.tooltipPosition = function (dataToShow, tWidth, tHeight, element) {\n    var $$ = this,\n      config = $$.config,\n      d3 = $$.d3;\n    var svgLeft, tooltipLeft, tooltipRight, tooltipTop, chartRight;\n    var forArc = $$.hasArcType(),\n      mouse = d3.mouse(element);\n    // Determin tooltip position\n    if (forArc) {\n      tooltipLeft = ($$.width - ($$.isLegendRight ? $$.getLegendWidth() : 0)) / 2 + mouse[0];\n      tooltipTop = ($$.hasType('gauge') ? $$.height : $$.height / 2) + mouse[1] + 20;\n    } else {\n      svgLeft = $$.getSvgLeft(true);\n      if (config.axis_rotated) {\n        tooltipLeft = svgLeft + mouse[0] + 100;\n        tooltipRight = tooltipLeft + tWidth;\n        chartRight = $$.currentWidth - $$.getCurrentPaddingRight();\n        tooltipTop = $$.x(dataToShow[0].x) + 20;\n      } else {\n        tooltipLeft = svgLeft + $$.getCurrentPaddingLeft(true) + $$.x(dataToShow[0].x) + 20;\n        tooltipRight = tooltipLeft + tWidth;\n        chartRight = svgLeft + $$.currentWidth - $$.getCurrentPaddingRight();\n        tooltipTop = mouse[1] + 15;\n      }\n      if (tooltipRight > chartRight) {\n        // 20 is needed for Firefox to keep tooltip width\n        tooltipLeft -= tooltipRight - chartRight + 20;\n      }\n      if (tooltipTop + tHeight > $$.currentHeight) {\n        tooltipTop -= tHeight + 30;\n      }\n    }\n    if (tooltipTop < 0) {\n      tooltipTop = 0;\n    }\n    return {\n      top: tooltipTop,\n      left: tooltipLeft\n    };\n  };\n  ChartInternal.prototype.showTooltip = function (selectedData, element) {\n    var $$ = this,\n      config = $$.config;\n    var tWidth, tHeight, position;\n    var forArc = $$.hasArcType(),\n      dataToShow = selectedData.filter(function (d) {\n        return d && isValue(d.value);\n      }),\n      positionFunction = config.tooltip_position || ChartInternal.prototype.tooltipPosition;\n    if (dataToShow.length === 0 || !config.tooltip_show) {\n      $$.hideTooltip();\n      return;\n    }\n    $$.tooltip.html(config.tooltip_contents.call($$, selectedData, $$.axis.getXAxisTickFormat(), $$.getYFormat(forArc), $$.color)).style('display', 'block');\n    // Get tooltip dimensions\n    tWidth = $$.tooltip.property('offsetWidth');\n    tHeight = $$.tooltip.property('offsetHeight');\n    position = positionFunction.call(this, dataToShow, tWidth, tHeight, element);\n    // Set tooltip\n    $$.tooltip.style('top', position.top + 'px').style('left', position.left + 'px');\n  };\n  ChartInternal.prototype.hideTooltip = function () {\n    this.tooltip.style('display', 'none');\n  };\n  ChartInternal.prototype.setTargetType = function (targetIds, type) {\n    var $$ = this,\n      config = $$.config;\n    $$.mapToTargetIds(targetIds).forEach(function (id) {\n      $$.withoutFadeIn[id] = type === config.data_types[id];\n      config.data_types[id] = type;\n    });\n    if (!targetIds) {\n      config.data_type = type;\n    }\n  };\n  ChartInternal.prototype.hasType = function (type, targets) {\n    var $$ = this,\n      types = $$.config.data_types,\n      has = false;\n    targets = targets || $$.data.targets;\n    if (targets && targets.length) {\n      targets.forEach(function (target) {\n        var t = types[target.id];\n        if (t && t.indexOf(type) >= 0 || !t && type === 'line') {\n          has = true;\n        }\n      });\n    } else if (Object.keys(types).length) {\n      Object.keys(types).forEach(function (id) {\n        if (types[id] === type) {\n          has = true;\n        }\n      });\n    } else {\n      has = $$.config.data_type === type;\n    }\n    return has;\n  };\n  ChartInternal.prototype.hasArcType = function (targets) {\n    return this.hasType('pie', targets) || this.hasType('donut', targets) || this.hasType('gauge', targets);\n  };\n  ChartInternal.prototype.isLineType = function (d) {\n    var config = this.config,\n      id = isString(d) ? d : d.id;\n    return !config.data_types[id] || ['line', 'spline', 'area', 'area-spline', 'step', 'area-step'].indexOf(config.data_types[id]) >= 0;\n  };\n  ChartInternal.prototype.isStepType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return ['step', 'area-step'].indexOf(this.config.data_types[id]) >= 0;\n  };\n  ChartInternal.prototype.isSplineType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return ['spline', 'area-spline'].indexOf(this.config.data_types[id]) >= 0;\n  };\n  ChartInternal.prototype.isAreaType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return ['area', 'area-spline', 'area-step'].indexOf(this.config.data_types[id]) >= 0;\n  };\n  ChartInternal.prototype.isBarType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'bar';\n  };\n  ChartInternal.prototype.isScatterType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'scatter';\n  };\n  ChartInternal.prototype.isStanfordType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'stanford';\n  };\n  ChartInternal.prototype.isPieType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'pie';\n  };\n  ChartInternal.prototype.isGaugeType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'gauge';\n  };\n  ChartInternal.prototype.isDonutType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'donut';\n  };\n  ChartInternal.prototype.isArcType = function (d) {\n    return this.isPieType(d) || this.isDonutType(d) || this.isGaugeType(d);\n  };\n  ChartInternal.prototype.lineData = function (d) {\n    return this.isLineType(d) ? [d] : [];\n  };\n  ChartInternal.prototype.arcData = function (d) {\n    return this.isArcType(d.data) ? [d] : [];\n  };\n  /* not used\r\n   function scatterData(d) {\r\n   return isScatterType(d) ? d.values : [];\r\n   }\r\n   */\n  ChartInternal.prototype.barData = function (d) {\n    return this.isBarType(d) ? d.values : [];\n  };\n  ChartInternal.prototype.lineOrScatterOrStanfordData = function (d) {\n    return this.isLineType(d) || this.isScatterType(d) || this.isStanfordType(d) ? d.values : [];\n  };\n  ChartInternal.prototype.barOrLineData = function (d) {\n    return this.isBarType(d) || this.isLineType(d) ? d.values : [];\n  };\n  ChartInternal.prototype.isSafari = function () {\n    var ua = window.navigator.userAgent;\n    return ua.indexOf('Safari') >= 0 && ua.indexOf('Chrome') < 0;\n  };\n  ChartInternal.prototype.isChrome = function () {\n    var ua = window.navigator.userAgent;\n    return ua.indexOf('Chrome') >= 0;\n  };\n  ChartInternal.prototype.initZoom = function () {\n    var $$ = this,\n      d3 = $$.d3,\n      config = $$.config,\n      startEvent;\n    $$.zoom = d3.zoom().on('start', function () {\n      if (config.zoom_type !== 'scroll') {\n        return;\n      }\n      var e = d3.event.sourceEvent;\n      if (e && e.type === 'brush') {\n        return;\n      }\n      startEvent = e;\n      config.zoom_onzoomstart.call($$.api, e);\n    }).on('zoom', function () {\n      if (config.zoom_type !== 'scroll') {\n        return;\n      }\n      var e = d3.event.sourceEvent;\n      if (e && e.type === 'brush') {\n        return;\n      }\n      $$.redrawForZoom();\n      config.zoom_onzoom.call($$.api, $$.x.orgDomain());\n    }).on('end', function () {\n      if (config.zoom_type !== 'scroll') {\n        return;\n      }\n      var e = d3.event.sourceEvent;\n      if (e && e.type === 'brush') {\n        return;\n      }\n      // if click, do nothing. otherwise, click interaction will be canceled.\n      if (e && startEvent.clientX === e.clientX && startEvent.clientY === e.clientY) {\n        return;\n      }\n      config.zoom_onzoomend.call($$.api, $$.x.orgDomain());\n    });\n    $$.zoom.updateDomain = function () {\n      if (d3.event && d3.event.transform) {\n        if (config.axis_rotated && config.zoom_type === 'scroll' && d3.event.sourceEvent.type === 'mousemove') {\n          // we're moving the mouse in a rotated chart with zoom = \"scroll\", so we need rescaleY (i.e. vertical)\n          $$.x.domain(d3.event.transform.rescaleY($$.subX).domain());\n        } else {\n          $$.x.domain(d3.event.transform.rescaleX($$.subX).domain());\n        }\n      }\n      return this;\n    };\n    $$.zoom.updateExtent = function () {\n      this.scaleExtent([1, Infinity]).translateExtent([[0, 0], [$$.width, $$.height]]).extent([[0, 0], [$$.width, $$.height]]);\n      return this;\n    };\n    $$.zoom.update = function () {\n      return this.updateExtent().updateDomain();\n    };\n    return $$.zoom.updateExtent();\n  };\n  ChartInternal.prototype.zoomTransform = function (range) {\n    var $$ = this,\n      s = [$$.x(range[0]), $$.x(range[1])];\n    return $$.d3.zoomIdentity.scale($$.width / (s[1] - s[0])).translate(-s[0], 0);\n  };\n  ChartInternal.prototype.initDragZoom = function () {\n    var $$ = this;\n    var d3 = $$.d3;\n    var config = $$.config;\n    var context = $$.context = $$.svg;\n    var brushXPos = $$.margin.left + 20.5;\n    var brushYPos = $$.margin.top + 0.5;\n    if (!(config.zoom_type === 'drag' && config.zoom_enabled)) {\n      return;\n    }\n    var getZoomedDomain = function (selection) {\n      return selection && selection.map(function (x) {\n        return $$.x.invert(x);\n      });\n    };\n    var brush = $$.dragZoomBrush = d3.brushX().on('start', function () {\n      $$.api.unzoom();\n      $$.svg.select('.' + CLASS.dragZoom).classed('disabled', false);\n      config.zoom_onzoomstart.call($$.api, d3.event.sourceEvent);\n    }).on('brush', function () {\n      config.zoom_onzoom.call($$.api, getZoomedDomain(d3.event.selection));\n    }).on('end', function () {\n      if (d3.event.selection == null) {\n        return;\n      }\n      var zoomedDomain = getZoomedDomain(d3.event.selection);\n      if (!config.zoom_disableDefaultBehavior) {\n        $$.api.zoom(zoomedDomain);\n      }\n      $$.svg.select('.' + CLASS.dragZoom).classed('disabled', true);\n      config.zoom_onzoomend.call($$.api, zoomedDomain);\n    });\n    context.append('g').classed(CLASS.dragZoom, true).attr('clip-path', $$.clipPath).attr('transform', 'translate(' + brushXPos + ',' + brushYPos + ')').call(brush);\n  };\n  ChartInternal.prototype.getZoomDomain = function () {\n    var $$ = this,\n      config = $$.config,\n      d3 = $$.d3,\n      min = d3.min([$$.orgXDomain[0], config.zoom_x_min]),\n      max = d3.max([$$.orgXDomain[1], config.zoom_x_max]);\n    return [min, max];\n  };\n  ChartInternal.prototype.redrawForZoom = function () {\n    var $$ = this,\n      d3 = $$.d3,\n      config = $$.config,\n      zoom = $$.zoom,\n      x = $$.x;\n    if (!config.zoom_enabled) {\n      return;\n    }\n    if ($$.filterTargetsToShow($$.data.targets).length === 0) {\n      return;\n    }\n    zoom.update();\n    if (config.zoom_disableDefaultBehavior) {\n      return;\n    }\n    if ($$.isCategorized() && x.orgDomain()[0] === $$.orgXDomain[0]) {\n      x.domain([$$.orgXDomain[0] - 1e-10, x.orgDomain()[1]]);\n    }\n    $$.redraw({\n      withTransition: false,\n      withY: config.zoom_rescale,\n      withSubchart: false,\n      withEventRect: false,\n      withDimension: false\n    });\n    if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'mousemove') {\n      $$.cancelClick = true;\n    }\n  };\n  return c3;\n});","map":{"version":3,"names":["global","factory","exports","module","define","amd","self","c3","ChartInternal","api","$$","d3","window","require","undefined","config","getDefaultConfig","data","cache","axes","Chart","internal","loadConfig","beforeInit","init","afterInit","bindThis","fn","target","argThis","Object","keys","forEach","key","bind","length","prototype","asHalfPixel","n","Math","ceil","ceil10","v","diffDomain","d","getOption","options","defaultValue","isDefined","getPathBox","path","box","getBBox","items","pathSegList","getItem","minX","x","minY","min","y","width","height","element","ignore","hasValue","dict","value","found","isArray","o","Array","isEmpty","isString","isFunction","isNumber","isUndefined","isValue","notEmpty","sanitise","str","replace","flattenArray","arr","concat","apply","isWithinBox","point","sensitivity","xStart","xEnd","yStart","yEnd","getIEVersion","agent","navigator","userAgent","pos","indexOf","parseInt","substring","isIE","version","ver","AxisInternal","component","params","scale","scaleLinear","range","orient","innerTickSize","outerTickSize","withOuterTick","tickPadding","tickValues","tickFormat","tickArguments","tickOffset","tickCulling","tickCentered","tickTextCharSize","tickTextRotate","tickLength","axis","generateAxis","axisX","selection","attr","axisY","scaleExtent","domain","start","stop","generateTicks","i","ticks","push","unshift","copyScale","newScale","copy","isCategory","textFormatted","formatted","updateRange","rangeExtent","updateTickTextCharSize","tick","size","h","w","select","text","each","isVertical","tspanData","splitted","tickMultiline","splitTickText","tickMultilineMax","ellipsify","map","s","index","tickText","maxWidth","tickWidth","subtext","spaceIndex","textWidth","toString","call","split","charAt","substr","slice","max","ellipsified","remaining","available","padEnd","updateTickLength","lineY2","tickPosition","textY","rotate","textTransform","textTextAnchor","tspanDx","sin","PI","tspanDy","dy","g","transition","scale0","__chart__","scale1","ticksValues","selectAll","tickEnter","enter","insert","style","tickExit","exit","remove","tickUpdate","merge","tickTransform","tickX","tickY","lineUpdate","append","textUpdate","tspans","tspanEnter","tspanUpdate","pathUpdate","rangeBand","dx","arguments","top","right","bottom","left","format","isCentered","tickInterval","interval","node","getTotalLength","Infinity","culling","CLASS","chart","chartLine","chartLines","chartBar","chartBars","chartText","chartTexts","chartArc","chartArcs","chartArcsTitle","chartArcsBackground","chartArcsGaugeUnit","chartArcsGaugeMax","chartArcsGaugeMin","selectedCircle","selectedCircles","eventRect","eventRects","eventRectsSingle","eventRectsMultiple","zoomRect","brush","dragZoom","focused","defocused","region","regions","title","tooltipContainer","tooltip","tooltipName","shape","shapes","line","lines","bar","bars","circle","circles","arc","arcLabelLine","arcs","area","areas","empty","texts","gaugeValue","grid","gridLines","xgrid","xgrids","xgridLine","xgridLines","xgridFocus","ygrid","ygrids","ygridLine","ygridLines","colorScale","stanfordElements","stanfordLine","stanfordLines","stanfordRegion","stanfordRegions","stanfordText","stanfordTexts","axisXLabel","axisYLabel","axisY2","axisY2Label","legendBackground","legendItem","legendItemEvent","legendItemTile","legendItemHidden","legendItemFocused","dragarea","EXPANDED","SELECTED","INCLUDED","AxisClass","owner","Axis","main","axis_x_inner","clipPathForXAxis","getTranslate","axis_x_show","axis_rotated","textAnchorForXAxisLabel","axis_y_inner","clipPathForYAxis","axis_y_show","textAnchorForYAxisLabel","y2","axis_y2_show","textAnchorForY2AxisLabel","getXAxis","withoutTransition","withoutRotateTickText","axisParams","isCategorized","axis_x_tick_multiline","Number","axis_x_tick_multilineMax","axis_x_tick_width","axis_x_tick_rotate","isTimeSeries","parseDate","axis_x_tick_centered","axis_x_tick_culling","updateXAxisTickValues","targets","axis_x_tick_fit","axis_x_tick_count","generateTickValues","mapTargetsToUniqueXs","xAxis","subXAxis","getYAxis","axisId","isAxisNormalized","axis_y_tick_rotate","isTimeSeriesY","axis_y_tick_time_type","axis_y_tick_time_interval","getId","id","data_axes","getXAxisTickFormat","defaultAxisTimeFormat","categoryName","axis_x_tick_format","date","axisTimeFormat","getTickValues","getXAxisTickValues","axis_x_tick_values","getYAxisTickValues","axis_y_tick_values","yAxis","getY2AxisTickValues","axis_y2_tick_values","y2Axis","getLabelOptionByAxisId","option","axis_y_label","axis_y2_label","axis_x_label","getLabelText","setLabelText","getLabelPosition","defaultPosition","position","isInner","isOuter","isLeft","isCenter","isRight","isTop","isMiddle","isBottom","getXAxisLabelPosition","getYAxisLabelPosition","getY2AxisLabelPosition","getLabelPositionById","textForXAxisLabel","textForYAxisLabel","textForY2AxisLabel","xForAxisLabel","forHorizontal","dxForAxisLabel","textAnchorForAxisLabel","xForXAxisLabel","xForYAxisLabel","xForY2AxisLabel","dxForXAxisLabel","dxForYAxisLabel","dxForY2AxisLabel","dyForXAxisLabel","getMaxTickWidth","getHorizontalAxisHeight","dyForYAxisLabel","dyForY2AxisLabel","axis_y2_inner","withoutRecompute","targetsToShow","dummy","svg","currentMaxTickWidths","filterTargetsToShow","getYDomain","yOrient","yAxisTickValues","y2Orient","y2AxisTickValues","getXDomain","xOrient","xAxisTickFormat","xAxisTickValues","classed","updateLabels","withTransition","getPadding","padding","domainLength","p","unit","convertPixelsToAxisPadding","pixels","values","tickCount","forTimeSeries","targetCount","end","count","tickValue","Date","sort","a","b","generateTransitions","duration","axisSubX","subx","redraw","isHidden","generate","initParams","data_url","convertUrlToData","data_mimeType","data_headers","data_keys","initWithData","data_json","convertJsonToData","data_rows","convertRowsToData","data_columns","convertColumnsToData","Error","clipId","valueOf","clipIdForXAxis","clipIdForYAxis","clipIdForGrid","clipIdForSubchart","clipPath","getClipPath","clipPathForGrid","clipPathForSubchart","dragStart","dragging","flowing","cancelClick","mouseover","transiting","color","generateColor","levelColor","generateLevelColor","dataTimeParse","data_xLocaltime","timeParse","utcParse","data_xFormat","axis_x_localtime","timeFormat","utcFormat","getMilliseconds","getSeconds","getMinutes","getHours","getDay","getDate","getMonth","hiddenTargetIds","hiddenLegendIds","focusedTargetIds","defocusedTargetIds","subXOrient","isLegendRight","legend_position","isLegendInset","isLegendTop","legend_inset_anchor","isLegendLeft","legendStep","legendItemWidth","legendItemHeight","rotated_padding_left","rotated_padding_right","rotated_padding_top","withoutFadeIn","intervalForObserveInserted","initChartElements","initBar","initLine","initArc","initGauge","initText","defs","binding","bindto","selectChart","document","createElement","observeInserted","html","xs","convertDataToTargets","data_filter","filter","data_hide","addHiddenTargetIds","mapToIds","legend_hide","addHiddenLegendIds","isStanfordGraphType","initStanfordData","updateSizes","updateScales","extent","subX","subY","subY2","orgXDomain","on","onmouseover","onmouseout","svg_classname","clipChart","appendClip","clipXAxis","clipYAxis","clipGrid","clipSubchart","updateSvgSize","initPie","initDragZoom","subchart_show","initSubchart","initTooltip","initLegend","initTitle","initZoom","drawColorScale","initSubchartBrush","initRegion","initGrid","grid_lines_front","initGridLines","initStanfordElements","initEventRect","updateTargets","axis_x_selection","selectionAsValue","getDefaultSelection","updateDimension","oninit","withTransform","withUpdateXDomain","withUpdateOrgXDomain","withTransitionForAxis","bindResize","bindWindowFocus","smoothLines","el","type","x1","x2","y1","legendHeight","legend","getLegendHeight","legendWidth","getLegendWidth","legendHeightForBottom","hasArc","hasArcType","xAxisHeight","subchartXAxisHeight","subchartHeight","subchart_size_height","currentWidth","getCurrentWidth","currentHeight","getCurrentHeight","margin","getCurrentPaddingTop","getCurrentPaddingRight","getCurrentPaddingBottom","getCurrentPaddingLeft","margin2","NaN","margin3","updateSizeForLegend","width2","height2","arcWidth","arcHeight","hasType","gauge_fullCircle","getGaugeLabelHeight","updateRadius","radiusExpanded","updateTargetsForText","updateTargetsForBar","updateTargetsForLine","updateTargetsForArc","updateTargetsForSubchart","showTargets","isTargetToShow","transition_duration","transitions","areaIndices","getShapeIndices","isAreaType","barIndices","isBarType","lineIndices","isLineType","withY","withSubchart","withTransitionForExit","withTrimXDomain","withLegend","withEventRect","withDimension","withUpdateXAxis","hideAxis","drawArea","drawBar","drawLine","xForText","yForText","durationForExit","durationForAxis","transitionsToWait","waitForDraw","flow","intervalForCulling","xDomainForZoom","xv","cx","cy","legend_show","updateLegend","updateXDomain","zoom_rescale","orgDomain","axis_y_tick_count","axis_y2_tick_count","axis_x_tick_culling_max","e","generateDrawArea","generateDrawBar","generateDrawLine","generateXYForText","updateCircleY","circleY","circleX","updateXgridFocus","data_empty_label_text","redrawEventRect","updateGrid","updateStanfordElements","updateRegion","updateBar","updateLine","updateArea","updateCircle","hasDataLabel","updateText","redrawTitle","redrawArc","redrawSubchart","generateFlow","isTabVisible","redrawBar","redrawLine","redrawArea","redrawCircle","redrawText","redrawRegion","redrawGrid","generateWait","t","add","onrendered","updateAndRedraw","withTransitionForTransform","transformAll","redrawWithoutRescale","axis_x_type","isCustomX","data_x","data_xs","axis_y_type","initialOpacity","initialOpacityForCircle","opacityForCircle","isPointShouldBeShown","point_show","opacity","isStanfordType","isScatterType","opacityForText","xx","xvCustom","xyValue","axis_x_categories","yvCustom","yScale","yv","subxx","transformMain","transformContext","transformLegend","getXAxisClipX","getXAxisClipY","getXAxisClipWidth","getXAxisClipHeight","getYAxisClipX","getYAxisClipY","getYAxisClipWidth","getYAxisClipHeight","withoutAxis","observer","MutationObserver","console","error","mutations","mutation","previousSibling","disconnect","setInterval","parentNode","clearInterval","update","observe","attributes","childList","characterData","resizeFunction","generateResize","onresize","resize_auto","resizeTimeout","clearTimeout","setTimeout","onresized","resizeIfElementDisplayed","offsetParent","addEventListener","_this","windowFocusHandler","unbindWindowFocus","removeEventListener","resizeFunctions","callResizeFunctions","f","splice","endall","callback","timer","done","parsedDate","isNaN","hidden","SVGPathSeg","typeAsLetter","owningPathSegList","pathSegType","pathSegTypeAsLetter","_owningPathSegList","classname","PATHSEG_UNKNOWN","PATHSEG_CLOSEPATH","PATHSEG_MOVETO_ABS","PATHSEG_MOVETO_REL","PATHSEG_LINETO_ABS","PATHSEG_LINETO_REL","PATHSEG_CURVETO_CUBIC_ABS","PATHSEG_CURVETO_CUBIC_REL","PATHSEG_CURVETO_QUADRATIC_ABS","PATHSEG_CURVETO_QUADRATIC_REL","PATHSEG_ARC_ABS","PATHSEG_ARC_REL","PATHSEG_LINETO_HORIZONTAL_ABS","PATHSEG_LINETO_HORIZONTAL_REL","PATHSEG_LINETO_VERTICAL_ABS","PATHSEG_LINETO_VERTICAL_REL","PATHSEG_CURVETO_CUBIC_SMOOTH_ABS","PATHSEG_CURVETO_CUBIC_SMOOTH_REL","PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS","PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL","_segmentChanged","segmentChanged","SVGPathSegClosePath","create","_asPathString","clone","SVGPathSegMovetoAbs","_x","_y","defineProperty","get","set","enumerable","SVGPathSegMovetoRel","SVGPathSegLinetoAbs","SVGPathSegLinetoRel","SVGPathSegCurvetoCubicAbs","_x1","_y1","_x2","_y2","SVGPathSegCurvetoCubicRel","SVGPathSegCurvetoQuadraticAbs","SVGPathSegCurvetoQuadraticRel","SVGPathSegArcAbs","r1","r2","angle","largeArcFlag","sweepFlag","_r1","_r2","_angle","_largeArcFlag","_sweepFlag","SVGPathSegArcRel","SVGPathSegLinetoHorizontalAbs","SVGPathSegLinetoHorizontalRel","SVGPathSegLinetoVerticalAbs","SVGPathSegLinetoVerticalRel","SVGPathSegCurvetoCubicSmoothAbs","SVGPathSegCurvetoCubicSmoothRel","SVGPathSegCurvetoQuadraticSmoothAbs","SVGPathSegCurvetoQuadraticSmoothRel","SVGPathElement","createSVGPathSegClosePath","createSVGPathSegMovetoAbs","createSVGPathSegMovetoRel","createSVGPathSegLinetoAbs","createSVGPathSegLinetoRel","createSVGPathSegCurvetoCubicAbs","createSVGPathSegCurvetoCubicRel","createSVGPathSegCurvetoQuadraticAbs","createSVGPathSegCurvetoQuadraticRel","createSVGPathSegArcAbs","createSVGPathSegArcRel","createSVGPathSegLinetoHorizontalAbs","createSVGPathSegLinetoHorizontalRel","createSVGPathSegLinetoVerticalAbs","createSVGPathSegLinetoVerticalRel","createSVGPathSegCurvetoCubicSmoothAbs","createSVGPathSegCurvetoCubicSmoothRel","createSVGPathSegCurvetoQuadraticSmoothAbs","createSVGPathSegCurvetoQuadraticSmoothRel","getPathSegAtLength","distance","isFinite","measurementElement","createElementNS","setAttribute","getAttribute","lastPathSegment","numberOfItems","removeItem","SVGPathSegList","pathElement","_pathElement","_list","_parsePath","_mutationObserverConfig","attributeFilter","_pathElementMutationObserver","_updateListFromPathMutations","_checkPathSynchronizedToList","_pathSegList","takeRecords","mutationRecords","hasPathMutations","record","attributeName","_writeListToPath","_pathSegArrayAsString","pathSeg","clear","initialize","newItem","_checkValidIndex","insertItemBefore","replaceItem","item","appendItem","pathSegArray","string","first","Builder","appendSegment","Source","_string","_currentIndex","_endIndex","_previousCommand","_skipOptionalSpaces","_isCurrentSpace","character","_skipOptionalSpacesOrDelimiter","hasMoreData","peekSegmentType","lookahead","_pathSegTypeFromChar","_nextCommandHelper","previousCommand","initialCommandIsMoveTo","command","_parseNumber","exponent","integer","frac","decimal","sign","expsign","startIndex","startIntPartIndex","scanIntPartIndex","multiplier","number","pow","_parseArcFlag","flag","flagChar","parseSegment","points","arcAngle","arcLarge","arcSweep","builder","source","String","targetLength","padString","repeat","assign","varArgs","TypeError","to","nextSource","nextKey","hasOwnProperty","writable","configurable","labels","axis_x_max","axis_y_max","axis_y2_max","axis_x_min","axis_y_min","axis_y2_min","types","axis_y2_type","category","categories","resize","size_width","size_height","flush","destroy","targetIds","shown","targetId","flat","reduce","ret","dataValue","names","clearLegendItemTextBoxCache","updateDataAttributes","colors","stackNormalized","normalized","isStackNormalized","data_stack_normalize","donut","padAngle","donut_padAngle","args","notfoundIds","orgDataCount","getMaxDataCount","dataCount","baseTarget","baseValue","tail","diff","json","rows","columns","j","getOtherTargetX","missing","translateX","scaleX","transform","flowIndex","flowLength","flowStart","getValueOnIndex","flowEnd","durationForFlow","wait","mainRegion","mainText","mainBar","mainLine","mainArea","mainCircle","updateXGrid","hideXGridFocus","flowTransition","ease","easeLinear","isRegionOnX","xgridAttr","regionX","regionWidth","focus","candidates","mapToTargetIds","selectorTargets","revert","defocus","expandArc","toggleFocusLegend","unexpandArc","showLegend","isLegendToShow","selectorLegends","grids","grid_x_lines","removeGridLines","grid_y_lines","groups","data_groups","show","hide","hideLegend","load","addXs","classes","data_classes","data_colors","hasCaches","cacheIds","getCaches","unload","loadFromArgs","ids","pie","pie_padAngle","c","selected","getTargetSelectorSuffix","nodes","__data__","indices","resetOther","data_selection_enabled","toggle","getToggle","isTargetId","data_selection_grouped","isTargetIndex","isSelected","data_selection_isselectable","unselect","removeHiddenTargetIds","that","subchart","isShown","getTargets","removeSubchart","mouse","filterByX","getMousePosition","dispatchEvent","tooltip_onshow","tooltip_onhide","transformTo","optionsForRedraw","setTargetType","updateTargetX","updateTargetXs","zoom","zoom_onzoom","enable","enabled","zoom_enabled","unzoom","zoom_x_max","zoom_x_min","getPadAngle","orderFct","getOrderFunction","isOrderAsc","isOrderDesc","defaultSort_1","t1","t2","gauge_width","donut_width","gaugeArcWidth","gauge_arcs_minWidth","radius","innerRadiusRatio","innerRadius","updateArc","svgArc","getSvgArc","svgArcExpanded","getSvgArcExpanded","svgArcExpandedSub","updateAngle","gMin","gMax","gTic","gValue","startAngle","endAngle","isGaugeType","gauge_min","gauge_max","gauge_startingAngle","hasGaugeType","singleArcWidth","outerRadius","newArc","withoutUpdate","updated","centroid","rate","expandWidth","getArc","force","isArcType","transformForArcLabel","ratio","translate","hasGauge","sqrt","donut_label_ratio","pie_label_ratio","cos","abs","getArcRatio","getRatio","convertToArcData","addName","textForArcLabel","shouldShowArcLabel","meetsArcLabelThreshold","getArcLabelFormat","defaultArcValueFormat","textForGaugeMinMax","isMax","getGaugeLabelExtents","shouldExpand","expandDuration","isDonutType","donut_expand_duration","gauge_expand_duration","isPieType","pie_expand_duration","donut_expand","gauge_expand","pie_expand","shouldShow","donut_label_show","pie_label_show","threshold","donut_label_threshold","pie_label_threshold","pie_label_format","gauge_label_format","donut_label_format","gauge_label_extents","getArcTitle","donut_title","mainPies","mainPieEnter","classChartArc","classArcs","classFocus","mainArc","arcLabelLines","mainArcLabelLine","arcData","classArc","interaction_enabled","_current","total","gauge_labelLine_show","lineLength","lineThickness","innerLineLength","lineAngle","arcInnerRadius","linePositioningAngle","data_onmouseover","selectedData","showTooltip","revertLegend","hideTooltip","data_onmouseout","toggleShape","data_onclick","attrTween","interpolate","interpolated","round","index_1","backgroundArc","d1","gauge_label_show","gauge_units","addToCache","getFromCache","resetCache","test","addCache","cloneTarget","generateTargetClass","generateClass","prefix","classText","classTexts","classShape","classShapes","classLine","classLines","classCircle","classCircles","classBar","classBars","classArea","classAreas","classRegion","classEvent","classTarget","additionalClassSuffix","additionalClass","classFocused","classDefocused","classChartText","classChartLine","classChartBar","targetClass","CSS","escape","selectorTarget","selectorLegend","URL","parent","getAxisClipX","getAxisClipY","getAxisClipWidth","getAxisClipHeight","pattern","color_pattern","schemeCategory10","data_color","Function","color_threshold","asValue","padding_left","padding_right","padding_top","padding_bottom","zoom_initialRange","zoom_type","zoom_disableDefaultBehavior","zoom_privileged","zoom_onzoomstart","zoom_onzoomend","interaction_brighten","data_epochs","data_xSort","data_idConverter","data_names","data_type","data_types","data_labels","data_order","data_regions","data_selection_multiple","data_selection_draggable","data_onselected","data_onunselected","subchart_axis_x_show","subchart_onbrush","legend_inset_x","legend_inset_y","legend_inset_step","legend_item_onclick","legend_item_onmouseover","legend_item_onmouseout","legend_equally","legend_padding","legend_item_tile_width","legend_item_tile_height","axis_x_tick_outer","axis_x_padding","axis_x_height","axis_y_inverted","axis_y_center","axis_y_tick_format","axis_y_tick_outer","axis_y_padding","axis_y_default","axis_y2_inverted","axis_y2_center","axis_y2_tick_format","axis_y2_tick_outer","axis_y2_padding","axis_y2_default","grid_x_show","grid_x_type","grid_y_show","grid_y_ticks","grid_focus_show","point_r","point_sensitivity","point_focus_expand_enabled","point_focus_expand_r","point_select_r","line_connectNull","line_step_type","bar_width","bar_width_ratio","bar_width_max","bar_zerobased","bar_space","area_zerobased","area_above","spline_interpolation_type","stanford_lines","stanford_regions","stanford_texts","stanford_scaleMin","stanford_scaleMax","stanford_scaleWidth","stanford_scaleFormat","stanford_scaleValues","stanford_colors","stanford_padding","tooltip_show","tooltip_grouped","tooltip_order","tooltip_format_title","tooltip_format_name","tooltip_format_value","tooltip_horizontal","tooltip_position","tooltip_contents","defaultTitleFormat","defaultValueFormat","getTooltipContent","tooltip_init_show","tooltip_init_x","tooltip_init_position","title_text","title_padding","title_position","additionalConfig","this_config","read","find","shift","url","mimeType","headers","converter","tsv","convertXsvToData","csv","then","catch","xsv","row","_a","new_rows","targetKeys","new_row","findValueInJson","object","pathArray","k","newRows","newRow","appendXs","epochs","isX","isNotX","isEpochs","isNotXAndNotEpochs","xKey","getXKey","rawX","generateTargetX","getOtherTargetXs","getXValuesOfXKey","convertedId","id_org","returnData","v1","v2","hasNegativeValue","hasNegativeValueInTargets","hasPositiveValue","hasPositiveValueInTargets","some","isTargetNormalized","group","includes","getTotalPerIndex","cached","sum","sumByAxis","getTotalDataSum","totalDataSum","xValues","getXValue","idsForX","name","valueOnIndex","hasTarget","getTargetsToShow","removeHiddenLegendIds","getValuesAsIdKeyed","ys","checkValueInTargets","checker","toLowerCase","orderAsc","orderDesc","reducer","t1Sum","t2Sum","order","orderTargets","fct","filterByIndex","filterRemoveNull","filterByXDomain","xDomain","getDataLabelLength","lengths","paddingCoef","dataLabelFormat","isNoneArc","isArc","findClosestFromTargets","findClosest","horizontalDistance","dist","findClosestFromTargetsByX","closest","newDiff","dataPoints","computeDist","minDist","isWithinBar","xIndex","yIndex","convertValuesToStep","converted","asPercent","attrs","current","getYDomainMin","baseId","idsInGroup","getYDomainMax","targetsByAxisId","yTargets","yMin","yMax","yDomainMin","yDomainMax","center","yDomainAbs","isAllPositive","isAllNegative","isZeroBased","isInverted","showHorizontalDataLabel","showVerticalDataLabel","pixelsToAxisPadding","getY","reverse","getXDomainMin","getXDomainMax","getXDomainPadding","maxDataCount","paddingLeft","paddingRight","firstX","lastX","getTime","withTrim","updateScale","trimXDomain","zoomDomain","getZoomDomain","drag","sx","sy","mx","my","maxX","maxY","isIncluded","_w","_h","isWithin","togglePoint","togglePath","dragstart","dragend","getYFormat","forArc","formatForY","yFormat","formatForY2","y2Format","toFixed","defaultFormat","xgridData","generateGridData","xgridEnter","updateYGrid","gridValues","ygridEnter","gridTextAnchor","gridTextDx","xGridTextX","yGridTextX","xgridLineEnter","ygridLineEnter","showXGridFocus","dataToShow","focusEl","gridData","firstYear","lastYear","tickNum","getFullYear","getGridFilterToRemove","param","forX","toRemove","toShow","zoomTransform","mouseout","unexpandCircles","unexpandBars","isHoveringDataPoint","withName","isMouseCloseToDataPoint","showSingleDataPoint","closestByX","mouseX","invert","expandCircles","expandBars","sameXData","isWithinShape","getYScale","selector","getBoundingClientRect","event","createEvent","initMouseEvent","legendItemTextBox","legendHasRendered","updateLegendWithDefaults","insetLegendPosition","updateLegendStep","step","updateLegendItemWidth","updateLegendItemHeight","opacityForLegend","opacityForUnfocusedLegend","xForLegend","xForLegendText","xForLegendRect","yForLegend","yForLegendText","yForLegendRect","x1ForLegendTile","x2ForLegendTile","yForLegendTile","paddingTop","maxHeight","posMin","tileWidth","l","totalLength","offsets","widths","heights","margins","steps","rects","tiles","background","getTextBox","textElement","getTextRect","textContent","updatePositions","reset","isLast","itemWidth","itemHeight","itemLength","areaLength","maxLength","updateValues","withoutStep","altKey","regionY","regionHeight","labelRegion","regionLabels","labelOffsetX","labelOffsetY","labelTransform","xPos","yPos","label","vertical","paddingX","paddingY","c3LogScale","linearScale","logScale","PROJECTION","scaleLog","nice","logspace","len","tmp","m","getScale","forTimeseries","scaleTime","getX","offset","_scale","raw","getSubYScale","forInit","xMin","xMax","subXMin","subXMax","subYMin","subYMax","selectPoint","r","pointSelectR","unselectPoint","selectPath","rgb","brighter","unselectPath","nodeName","isStepType","mainBars","mainBarEnter","barData","getBarW","barTargetsNum","getBars","isSub","getPoints","generateGetBarPoints","indexX","indexY","__max__","barW","barX","getShapeX","barY","getShapeY","barOffset","getShapeOffset","barSpaceOffset","y0","posX","posY","barShape","typeFilter","targetsNum","rowValues","constructor","isWithinStep","isWithinCircle","getInterpolate","linear","curveLinear","curveLinearClosed","basis","curveBasis","curveBasisOpen","curveBasisClosed","bundle","curveBundle","cardinal","curveCardinal","curveCardinalOpen","curveCardinalClosed","monotone","curveMonotoneX","curveStep","curveStepBefore","curveStepAfter","isSplineType","mainLines","mainLineEnter","lineData","generateGetLinePoints","yScaleGetter","xValue","yValue","defined","x0","lineWithRegions","curve","lineTargetsNum","lineOffset","_regions","prev","sWithRegion","xp","yp","dd","diffx2","xOffset","isWithinRegions","generateM","d0","x_diff","xv0","xv1","mainAreaEnter","orgAreaOpacity","generateGetAreaPoints","value0","getAreaBaseValue","value1","areaTargetsNum","areaOffset","lineOrScatterOrStanfordData","mainCircleEnter","pointR","getStanfordPointColor","getCircles","pointExpandedR","d3_this","getParentWidth","getParentHeight","getTitlePadding","getAxisWidthByAxisId","defaultPadding","legendWidthOnRight","getColorScalePadding","getParentRectValue","tagName","offsetWidth","getSvgLeft","hasLeftAxisRect","leftAxisClass","leftAxis","svgRect","chartRect","svgLeft","isSubchart","initBrush","brushY","brushX","sourceEvent","redrawForBrush","updateExtent","context","move","brushSelection","contextLineEnter","contextLine","contextBarEnter","contextBar","updateBarForSubchart","redrawBarForSubchart","drawBarOnSub","random","updateLineForSubchart","redrawLineForSubchart","drawLineOnSub","updateAreaForSubchart","contextArea","contextAreaEnter","redrawAreaForSubchart","drawAreaOnSub","zoomIdentity","mainTextEnter","barOrLineData","forFlow","cls","font","rect","getAreaPoints","getBarPoints","getLinePoints","getter","getXForText","getYForText","isSafari","isChrome","xForTitle","yForTitle","powerOfTen","log","LN10","barWidth","barHeight","legendAxis","axisScale","inverseScale","scaleSequential","minEpochs","maxEpochs","axisRight","xForColorScale","compareEpochs","interpolateHslLong","hsl","colorscale","scaleSequentialLog","getCentroid","getRegionArea","point1","point2","getStanfordTooltipTitle","labelX","labelY","countEpochsInRegion","accumulator","currentValue","pointInRegion","percentage","xi","yi","yj","xj","intersect","inside","stanfordLineEnter","stanfordRegionEnter","stanfordTextEnter","countPointsInRegion","content","join","temp","getTooltipSortFunction","obj","sortFunction","titleFormat","nameFormat","bgcolor","valueFormat","tooltipSortFunction","tooltipPosition","tWidth","tHeight","tooltipLeft","tooltipRight","tooltipTop","chartRight","positionFunction","property","has","ua","startEvent","redrawForZoom","clientX","clientY","updateDomain","rescaleY","rescaleX","translateExtent","brushXPos","brushYPos","getZoomedDomain","dragZoomBrush","zoomedDomain"],"sources":["C:/Users/Yassir/Desktop/web/Angular-test/aglo-clone/node_modules/c3/c3.js"],"sourcesContent":["/* @license C3.js v0.7.20 | (c) C3 Team and other contributors | http://c3js.org/ */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.c3 = factory());\n}(this, (function () { 'use strict';\n\n  function ChartInternal(api) {\r\n      var $$ = this;\r\n      // Note: This part will be replaced by rollup-plugin-modify\r\n      // When bundling esm output. Beware of changing this line.\r\n      // TODO: Maybe we should check that the modification by rollup-plugin-modify\r\n      // is valid during unit tests.\r\n      $$.d3 = window.d3\r\n          ? window.d3\r\n          : typeof require !== 'undefined'\r\n              ? require('d3')\r\n              : undefined;\r\n      $$.api = api;\r\n      $$.config = $$.getDefaultConfig();\r\n      $$.data = {};\r\n      $$.cache = {};\r\n      $$.axes = {};\r\n  }\n\n  /**\r\n   * The Chart class\r\n   *\r\n   * The methods of this class is the public APIs of the chart object.\r\n   */\r\n  function Chart(config) {\r\n      this.internal = new ChartInternal(this);\r\n      this.internal.loadConfig(config);\r\n      this.internal.beforeInit(config);\r\n      this.internal.init();\r\n      this.internal.afterInit(config);\r\n      (function bindThis(fn, target, argThis) {\r\n          Object.keys(fn).forEach(function (key) {\r\n              target[key] = fn[key].bind(argThis);\r\n              if (Object.keys(fn[key]).length > 0) {\r\n                  bindThis(fn[key], target[key], argThis);\r\n              }\r\n          });\r\n      })(Chart.prototype, this, this);\r\n  }\n\n  var asHalfPixel = function (n) {\r\n      return Math.ceil(n) + 0.5;\r\n  };\r\n  var ceil10 = function (v) {\r\n      return Math.ceil(v / 10) * 10;\r\n  };\r\n  var diffDomain = function (d) {\r\n      return d[1] - d[0];\r\n  };\r\n  var getOption = function (options, key, defaultValue) {\r\n      return isDefined(options[key]) ? options[key] : defaultValue;\r\n  };\r\n  var getPathBox = function (path) {\r\n      var box = getBBox(path), items = [path.pathSegList.getItem(0), path.pathSegList.getItem(1)], minX = items[0].x, minY = Math.min(items[0].y, items[1].y);\r\n      return { x: minX, y: minY, width: box.width, height: box.height };\r\n  };\r\n  var getBBox = function (element) {\r\n      try {\r\n          return element.getBBox();\r\n      }\r\n      catch (ignore) {\r\n          // Firefox will throw an exception if getBBox() is called whereas the\r\n          // element is rendered with display:none\r\n          // See https://github.com/c3js/c3/issues/2692\r\n          // The previous code was using `getBoundingClientRect` which was returning\r\n          // everything at 0 in this case so let's reproduce this behavior here.\r\n          return { x: 0, y: 0, width: 0, height: 0 };\r\n      }\r\n  };\r\n  var hasValue = function (dict, value) {\r\n      var found = false;\r\n      Object.keys(dict).forEach(function (key) {\r\n          if (dict[key] === value) {\r\n              found = true;\r\n          }\r\n      });\r\n      return found;\r\n  };\r\n  var isArray = function (o) {\r\n      return Array.isArray(o);\r\n  };\r\n  var isDefined = function (v) {\r\n      return typeof v !== 'undefined';\r\n  };\r\n  var isEmpty = function (o) {\r\n      return (typeof o === 'undefined' ||\r\n          o === null ||\r\n          (isString(o) && o.length === 0) ||\r\n          (typeof o === 'object' && Object.keys(o).length === 0));\r\n  };\r\n  var isFunction = function (o) {\r\n      return typeof o === 'function';\r\n  };\r\n  var isNumber = function (o) {\r\n      return typeof o === 'number';\r\n  };\r\n  var isString = function (o) {\r\n      return typeof o === 'string';\r\n  };\r\n  var isUndefined = function (v) {\r\n      return typeof v === 'undefined';\r\n  };\r\n  var isValue = function (v) {\r\n      return v || v === 0;\r\n  };\r\n  var notEmpty = function (o) {\r\n      return !isEmpty(o);\r\n  };\r\n  var sanitise = function (str) {\r\n      return typeof str === 'string'\r\n          ? str.replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n          : str;\r\n  };\r\n  var flattenArray = function (arr) {\r\n      return Array.isArray(arr) ? [].concat.apply([], arr) : [];\r\n  };\r\n  /**\r\n   * Returns whether the point is within the given box.\r\n   *\r\n   * @param {Array} point An [x,y] coordinate\r\n   * @param {Object} box An object with {x, y, width, height} keys\r\n   * @param {Number} sensitivity An offset to ease check on very small boxes\r\n   */\r\n  var isWithinBox = function (point, box, sensitivity) {\r\n      if (sensitivity === void 0) { sensitivity = 0; }\r\n      var xStart = box.x - sensitivity;\r\n      var xEnd = box.x + box.width + sensitivity;\r\n      var yStart = box.y + box.height + sensitivity;\r\n      var yEnd = box.y - sensitivity;\r\n      return (xStart < point[0] && point[0] < xEnd && yEnd < point[1] && point[1] < yStart);\r\n  };\r\n  /**\r\n   * Returns Internet Explorer version number (or false if no Internet Explorer used).\r\n   *\r\n   * @param string agent Optional parameter to specify user agent\r\n   */\r\n  var getIEVersion = function (agent) {\r\n      // https://stackoverflow.com/questions/19999388/check-if-user-is-using-ie\r\n      if (typeof agent === 'undefined') {\r\n          agent = window.navigator.userAgent;\r\n      }\r\n      var pos = agent.indexOf('MSIE '); // up to IE10\r\n      if (pos > 0) {\r\n          return parseInt(agent.substring(pos + 5, agent.indexOf('.', pos)), 10);\r\n      }\r\n      pos = agent.indexOf('Trident/'); // IE11\r\n      if (pos > 0) {\r\n          pos = agent.indexOf('rv:');\r\n          return parseInt(agent.substring(pos + 3, agent.indexOf('.', pos)), 10);\r\n      }\r\n      return false;\r\n  };\r\n  /**\r\n   * Returns whether the used browser is Internet Explorer.\r\n   *\r\n   * @param version Optional parameter to specify IE version\r\n   */\r\n  var isIE = function (version) {\r\n      var ver = getIEVersion();\r\n      if (typeof version === 'undefined') {\r\n          return !!ver;\r\n      }\r\n      return version === ver;\r\n  };\n\n  function AxisInternal(component, params) {\r\n      var internal = this;\r\n      internal.component = component;\r\n      internal.params = params || {};\r\n      internal.d3 = component.d3;\r\n      internal.scale = internal.d3.scaleLinear();\r\n      internal.range;\r\n      internal.orient = 'bottom';\r\n      internal.innerTickSize = 6;\r\n      internal.outerTickSize = this.params.withOuterTick ? 6 : 0;\r\n      internal.tickPadding = 3;\r\n      internal.tickValues = null;\r\n      internal.tickFormat;\r\n      internal.tickArguments;\r\n      internal.tickOffset = 0;\r\n      internal.tickCulling = true;\r\n      internal.tickCentered;\r\n      internal.tickTextCharSize;\r\n      internal.tickTextRotate = internal.params.tickTextRotate;\r\n      internal.tickLength;\r\n      internal.axis = internal.generateAxis();\r\n  }\r\n  AxisInternal.prototype.axisX = function (selection, x, tickOffset) {\r\n      selection.attr('transform', function (d) {\r\n          return 'translate(' + Math.ceil(x(d) + tickOffset) + ', 0)';\r\n      });\r\n  };\r\n  AxisInternal.prototype.axisY = function (selection, y) {\r\n      selection.attr('transform', function (d) {\r\n          return 'translate(0,' + Math.ceil(y(d)) + ')';\r\n      });\r\n  };\r\n  AxisInternal.prototype.scaleExtent = function (domain) {\r\n      var start = domain[0], stop = domain[domain.length - 1];\r\n      return start < stop ? [start, stop] : [stop, start];\r\n  };\r\n  AxisInternal.prototype.generateTicks = function (scale) {\r\n      var internal = this;\r\n      var i, domain, ticks = [];\r\n      if (scale.ticks) {\r\n          return scale.ticks.apply(scale, internal.tickArguments);\r\n      }\r\n      domain = scale.domain();\r\n      for (i = Math.ceil(domain[0]); i < domain[1]; i++) {\r\n          ticks.push(i);\r\n      }\r\n      if (ticks.length > 0 && ticks[0] > 0) {\r\n          ticks.unshift(ticks[0] - (ticks[1] - ticks[0]));\r\n      }\r\n      return ticks;\r\n  };\r\n  AxisInternal.prototype.copyScale = function () {\r\n      var internal = this;\r\n      var newScale = internal.scale.copy(), domain;\r\n      if (internal.params.isCategory) {\r\n          domain = internal.scale.domain();\r\n          newScale.domain([domain[0], domain[1] - 1]);\r\n      }\r\n      return newScale;\r\n  };\r\n  AxisInternal.prototype.textFormatted = function (v) {\r\n      var internal = this, formatted = internal.tickFormat ? internal.tickFormat(v) : v;\r\n      return typeof formatted !== 'undefined' ? formatted : '';\r\n  };\r\n  AxisInternal.prototype.updateRange = function () {\r\n      var internal = this;\r\n      internal.range = internal.scale.rangeExtent\r\n          ? internal.scale.rangeExtent()\r\n          : internal.scaleExtent(internal.scale.range());\r\n      return internal.range;\r\n  };\r\n  AxisInternal.prototype.updateTickTextCharSize = function (tick) {\r\n      var internal = this;\r\n      if (internal.tickTextCharSize) {\r\n          return internal.tickTextCharSize;\r\n      }\r\n      var size = {\r\n          h: 11.5,\r\n          w: 5.5\r\n      };\r\n      tick\r\n          .select('text')\r\n          .text(function (d) {\r\n          return internal.textFormatted(d);\r\n      })\r\n          .each(function (d) {\r\n          var box = getBBox(this), text = internal.textFormatted(d), h = box.height, w = text ? box.width / text.length : undefined;\r\n          if (h && w) {\r\n              size.h = h;\r\n              size.w = w;\r\n          }\r\n      })\r\n          .text('');\r\n      internal.tickTextCharSize = size;\r\n      return size;\r\n  };\r\n  AxisInternal.prototype.isVertical = function () {\r\n      return this.orient === 'left' || this.orient === 'right';\r\n  };\r\n  AxisInternal.prototype.tspanData = function (d, i, scale) {\r\n      var internal = this;\r\n      var splitted = internal.params.tickMultiline\r\n          ? internal.splitTickText(d, scale)\r\n          : [].concat(internal.textFormatted(d));\r\n      if (internal.params.tickMultiline && internal.params.tickMultilineMax > 0) {\r\n          splitted = internal.ellipsify(splitted, internal.params.tickMultilineMax);\r\n      }\r\n      return splitted.map(function (s) {\r\n          return { index: i, splitted: s, length: splitted.length };\r\n      });\r\n  };\r\n  AxisInternal.prototype.splitTickText = function (d, scale) {\r\n      var internal = this, tickText = internal.textFormatted(d), maxWidth = internal.params.tickWidth, subtext, spaceIndex, textWidth, splitted = [];\r\n      if (Object.prototype.toString.call(tickText) === '[object Array]') {\r\n          return tickText;\r\n      }\r\n      if (!maxWidth || maxWidth <= 0) {\r\n          maxWidth = internal.isVertical()\r\n              ? 95\r\n              : internal.params.isCategory\r\n                  ? Math.ceil(scale(1) - scale(0)) - 12\r\n                  : 110;\r\n      }\r\n      function split(splitted, text) {\r\n          spaceIndex = undefined;\r\n          for (var i = 1; i < text.length; i++) {\r\n              if (text.charAt(i) === ' ') {\r\n                  spaceIndex = i;\r\n              }\r\n              subtext = text.substr(0, i + 1);\r\n              textWidth = internal.tickTextCharSize.w * subtext.length;\r\n              // if text width gets over tick width, split by space index or crrent index\r\n              if (maxWidth < textWidth) {\r\n                  return split(splitted.concat(text.substr(0, spaceIndex ? spaceIndex : i)), text.slice(spaceIndex ? spaceIndex + 1 : i));\r\n              }\r\n          }\r\n          return splitted.concat(text);\r\n      }\r\n      return split(splitted, tickText + '');\r\n  };\r\n  AxisInternal.prototype.ellipsify = function (splitted, max) {\r\n      if (splitted.length <= max) {\r\n          return splitted;\r\n      }\r\n      var ellipsified = splitted.slice(0, max);\r\n      var remaining = 3;\r\n      for (var i = max - 1; i >= 0; i--) {\r\n          var available = ellipsified[i].length;\r\n          ellipsified[i] = ellipsified[i]\r\n              .substr(0, available - remaining)\r\n              .padEnd(available, '.');\r\n          remaining -= available;\r\n          if (remaining <= 0) {\r\n              break;\r\n          }\r\n      }\r\n      return ellipsified;\r\n  };\r\n  AxisInternal.prototype.updateTickLength = function () {\r\n      var internal = this;\r\n      internal.tickLength =\r\n          Math.max(internal.innerTickSize, 0) + internal.tickPadding;\r\n  };\r\n  AxisInternal.prototype.lineY2 = function (d) {\r\n      var internal = this, tickPosition = internal.scale(d) + (internal.tickCentered ? 0 : internal.tickOffset);\r\n      return internal.range[0] < tickPosition && tickPosition < internal.range[1]\r\n          ? internal.innerTickSize\r\n          : 0;\r\n  };\r\n  AxisInternal.prototype.textY = function () {\r\n      var internal = this, rotate = internal.tickTextRotate;\r\n      return rotate\r\n          ? 11.5 - 2.5 * (rotate / 15) * (rotate > 0 ? 1 : -1)\r\n          : internal.tickLength;\r\n  };\r\n  AxisInternal.prototype.textTransform = function () {\r\n      var internal = this, rotate = internal.tickTextRotate;\r\n      return rotate ? 'rotate(' + rotate + ')' : '';\r\n  };\r\n  AxisInternal.prototype.textTextAnchor = function () {\r\n      var internal = this, rotate = internal.tickTextRotate;\r\n      return rotate ? (rotate > 0 ? 'start' : 'end') : 'middle';\r\n  };\r\n  AxisInternal.prototype.tspanDx = function () {\r\n      var internal = this, rotate = internal.tickTextRotate;\r\n      return rotate ? 8 * Math.sin(Math.PI * (rotate / 180)) : 0;\r\n  };\r\n  AxisInternal.prototype.tspanDy = function (d, i) {\r\n      var internal = this, dy = internal.tickTextCharSize.h;\r\n      if (i === 0) {\r\n          if (internal.isVertical()) {\r\n              dy = -((d.length - 1) * (internal.tickTextCharSize.h / 2) - 3);\r\n          }\r\n          else {\r\n              dy = '.71em';\r\n          }\r\n      }\r\n      return dy;\r\n  };\r\n  AxisInternal.prototype.generateAxis = function () {\r\n      var internal = this, d3 = internal.d3, params = internal.params;\r\n      function axis(g, transition) {\r\n          var self;\r\n          g.each(function () {\r\n              var g = (axis.g = d3.select(this));\r\n              var scale0 = this.__chart__ || internal.scale, scale1 = (this.__chart__ = internal.copyScale());\r\n              var ticksValues = internal.tickValues\r\n                  ? internal.tickValues\r\n                  : internal.generateTicks(scale1), ticks = g.selectAll('.tick').data(ticksValues, scale1), tickEnter = ticks\r\n                  .enter()\r\n                  .insert('g', '.domain')\r\n                  .attr('class', 'tick')\r\n                  .style('opacity', 1e-6), \r\n              // MEMO: No exit transition. The reason is this transition affects max tick width calculation because old tick will be included in the ticks.\r\n              tickExit = ticks.exit().remove(), tickUpdate = ticks.merge(tickEnter), tickTransform, tickX, tickY;\r\n              if (params.isCategory) {\r\n                  internal.tickOffset = Math.ceil((scale1(1) - scale1(0)) / 2);\r\n                  tickX = internal.tickCentered ? 0 : internal.tickOffset;\r\n                  tickY = internal.tickCentered ? internal.tickOffset : 0;\r\n              }\r\n              else {\r\n                  internal.tickOffset = tickX = 0;\r\n              }\r\n              internal.updateRange();\r\n              internal.updateTickLength();\r\n              internal.updateTickTextCharSize(g.select('.tick'));\r\n              var lineUpdate = tickUpdate\r\n                  .select('line')\r\n                  .merge(tickEnter.append('line')), textUpdate = tickUpdate.select('text').merge(tickEnter.append('text'));\r\n              var tspans = tickUpdate\r\n                  .selectAll('text')\r\n                  .selectAll('tspan')\r\n                  .data(function (d, i) {\r\n                  return internal.tspanData(d, i, scale1);\r\n              }), tspanEnter = tspans.enter().append('tspan'), tspanUpdate = tspanEnter.merge(tspans).text(function (d) {\r\n                  return d.splitted;\r\n              });\r\n              tspans.exit().remove();\r\n              var path = g.selectAll('.domain').data([0]), pathUpdate = path\r\n                  .enter()\r\n                  .append('path')\r\n                  .merge(path)\r\n                  .attr('class', 'domain');\r\n              // TODO: each attr should be one function and change its behavior by internal.orient, probably\r\n              switch (internal.orient) {\r\n                  case 'bottom': {\r\n                      tickTransform = internal.axisX;\r\n                      lineUpdate\r\n                          .attr('x1', tickX)\r\n                          .attr('x2', tickX)\r\n                          .attr('y2', function (d, i) {\r\n                          return internal.lineY2(d, i);\r\n                      });\r\n                      textUpdate\r\n                          .attr('x', 0)\r\n                          .attr('y', function (d, i) {\r\n                          return internal.textY(d, i);\r\n                      })\r\n                          .attr('transform', function (d, i) {\r\n                          return internal.textTransform(d, i);\r\n                      })\r\n                          .style('text-anchor', function (d, i) {\r\n                          return internal.textTextAnchor(d, i);\r\n                      });\r\n                      tspanUpdate\r\n                          .attr('x', 0)\r\n                          .attr('dy', function (d, i) {\r\n                          return internal.tspanDy(d, i);\r\n                      })\r\n                          .attr('dx', function (d, i) {\r\n                          return internal.tspanDx(d, i);\r\n                      });\r\n                      pathUpdate.attr('d', 'M' +\r\n                          internal.range[0] +\r\n                          ',' +\r\n                          internal.outerTickSize +\r\n                          'V0H' +\r\n                          internal.range[1] +\r\n                          'V' +\r\n                          internal.outerTickSize);\r\n                      break;\r\n                  }\r\n                  case 'top': {\r\n                      // TODO: rotated tick text\r\n                      tickTransform = internal.axisX;\r\n                      lineUpdate\r\n                          .attr('x1', tickX)\r\n                          .attr('x2', tickX)\r\n                          .attr('y2', function (d, i) {\r\n                          return -1 * internal.lineY2(d, i);\r\n                      });\r\n                      textUpdate\r\n                          .attr('x', 0)\r\n                          .attr('y', function (d, i) {\r\n                          return (-1 * internal.textY(d, i) -\r\n                              (params.isCategory ? 2 : internal.tickLength - 2));\r\n                      })\r\n                          .attr('transform', function (d, i) {\r\n                          return internal.textTransform(d, i);\r\n                      })\r\n                          .style('text-anchor', function (d, i) {\r\n                          return internal.textTextAnchor(d, i);\r\n                      });\r\n                      tspanUpdate\r\n                          .attr('x', 0)\r\n                          .attr('dy', function (d, i) {\r\n                          return internal.tspanDy(d, i);\r\n                      })\r\n                          .attr('dx', function (d, i) {\r\n                          return internal.tspanDx(d, i);\r\n                      });\r\n                      pathUpdate.attr('d', 'M' +\r\n                          internal.range[0] +\r\n                          ',' +\r\n                          -internal.outerTickSize +\r\n                          'V0H' +\r\n                          internal.range[1] +\r\n                          'V' +\r\n                          -internal.outerTickSize);\r\n                      break;\r\n                  }\r\n                  case 'left': {\r\n                      tickTransform = internal.axisY;\r\n                      lineUpdate\r\n                          .attr('x2', -internal.innerTickSize)\r\n                          .attr('y1', tickY)\r\n                          .attr('y2', tickY);\r\n                      textUpdate\r\n                          .attr('x', -internal.tickLength)\r\n                          .attr('y', internal.tickOffset)\r\n                          .style('text-anchor', 'end');\r\n                      tspanUpdate\r\n                          .attr('x', -internal.tickLength)\r\n                          .attr('dy', function (d, i) {\r\n                          return internal.tspanDy(d, i);\r\n                      });\r\n                      pathUpdate.attr('d', 'M' +\r\n                          -internal.outerTickSize +\r\n                          ',' +\r\n                          internal.range[0] +\r\n                          'H0V' +\r\n                          internal.range[1] +\r\n                          'H' +\r\n                          -internal.outerTickSize);\r\n                      break;\r\n                  }\r\n                  case 'right': {\r\n                      tickTransform = internal.axisY;\r\n                      lineUpdate\r\n                          .attr('x2', internal.innerTickSize)\r\n                          .attr('y1', tickY)\r\n                          .attr('y2', tickY);\r\n                      textUpdate\r\n                          .attr('x', internal.tickLength)\r\n                          .attr('y', internal.tickOffset)\r\n                          .style('text-anchor', 'start');\r\n                      tspanUpdate.attr('x', internal.tickLength).attr('dy', function (d, i) {\r\n                          return internal.tspanDy(d, i);\r\n                      });\r\n                      pathUpdate.attr('d', 'M' +\r\n                          internal.outerTickSize +\r\n                          ',' +\r\n                          internal.range[0] +\r\n                          'H0V' +\r\n                          internal.range[1] +\r\n                          'H' +\r\n                          internal.outerTickSize);\r\n                      break;\r\n                  }\r\n              }\r\n              if (scale1.rangeBand) {\r\n                  var x = scale1, dx = x.rangeBand() / 2;\r\n                  scale0 = scale1 = function (d) {\r\n                      return x(d) + dx;\r\n                  };\r\n              }\r\n              else if (scale0.rangeBand) {\r\n                  scale0 = scale1;\r\n              }\r\n              else {\r\n                  tickExit.call(tickTransform, scale1, internal.tickOffset);\r\n              }\r\n              tickEnter.call(tickTransform, scale0, internal.tickOffset);\r\n              self = (transition ? tickUpdate.transition(transition) : tickUpdate)\r\n                  .style('opacity', 1)\r\n                  .call(tickTransform, scale1, internal.tickOffset);\r\n          });\r\n          return self;\r\n      }\r\n      axis.scale = function (x) {\r\n          if (!arguments.length) {\r\n              return internal.scale;\r\n          }\r\n          internal.scale = x;\r\n          return axis;\r\n      };\r\n      axis.orient = function (x) {\r\n          if (!arguments.length) {\r\n              return internal.orient;\r\n          }\r\n          internal.orient =\r\n              x in { top: 1, right: 1, bottom: 1, left: 1 } ? x + '' : 'bottom';\r\n          return axis;\r\n      };\r\n      axis.tickFormat = function (format) {\r\n          if (!arguments.length) {\r\n              return internal.tickFormat;\r\n          }\r\n          internal.tickFormat = format;\r\n          return axis;\r\n      };\r\n      axis.tickCentered = function (isCentered) {\r\n          if (!arguments.length) {\r\n              return internal.tickCentered;\r\n          }\r\n          internal.tickCentered = isCentered;\r\n          return axis;\r\n      };\r\n      axis.tickOffset = function () {\r\n          return internal.tickOffset;\r\n      };\r\n      axis.tickInterval = function () {\r\n          var interval, length;\r\n          if (params.isCategory) {\r\n              interval = internal.tickOffset * 2;\r\n          }\r\n          else {\r\n              length =\r\n                  axis.g\r\n                      .select('path.domain')\r\n                      .node()\r\n                      .getTotalLength() -\r\n                      internal.outerTickSize * 2;\r\n              interval = length / axis.g.selectAll('line').size();\r\n          }\r\n          return interval === Infinity ? 0 : interval;\r\n      };\r\n      axis.ticks = function () {\r\n          if (!arguments.length) {\r\n              return internal.tickArguments;\r\n          }\r\n          internal.tickArguments = arguments;\r\n          return axis;\r\n      };\r\n      axis.tickCulling = function (culling) {\r\n          if (!arguments.length) {\r\n              return internal.tickCulling;\r\n          }\r\n          internal.tickCulling = culling;\r\n          return axis;\r\n      };\r\n      axis.tickValues = function (x) {\r\n          if (typeof x === 'function') {\r\n              internal.tickValues = function () {\r\n                  return x(internal.scale.domain());\r\n              };\r\n          }\r\n          else {\r\n              if (!arguments.length) {\r\n                  return internal.tickValues;\r\n              }\r\n              internal.tickValues = x;\r\n          }\r\n          return axis;\r\n      };\r\n      return axis;\r\n  };\n\n  var CLASS = {\r\n      target: 'c3-target',\r\n      chart: 'c3-chart',\r\n      chartLine: 'c3-chart-line',\r\n      chartLines: 'c3-chart-lines',\r\n      chartBar: 'c3-chart-bar',\r\n      chartBars: 'c3-chart-bars',\r\n      chartText: 'c3-chart-text',\r\n      chartTexts: 'c3-chart-texts',\r\n      chartArc: 'c3-chart-arc',\r\n      chartArcs: 'c3-chart-arcs',\r\n      chartArcsTitle: 'c3-chart-arcs-title',\r\n      chartArcsBackground: 'c3-chart-arcs-background',\r\n      chartArcsGaugeUnit: 'c3-chart-arcs-gauge-unit',\r\n      chartArcsGaugeMax: 'c3-chart-arcs-gauge-max',\r\n      chartArcsGaugeMin: 'c3-chart-arcs-gauge-min',\r\n      selectedCircle: 'c3-selected-circle',\r\n      selectedCircles: 'c3-selected-circles',\r\n      eventRect: 'c3-event-rect',\r\n      eventRects: 'c3-event-rects',\r\n      eventRectsSingle: 'c3-event-rects-single',\r\n      eventRectsMultiple: 'c3-event-rects-multiple',\r\n      zoomRect: 'c3-zoom-rect',\r\n      brush: 'c3-brush',\r\n      dragZoom: 'c3-drag-zoom',\r\n      focused: 'c3-focused',\r\n      defocused: 'c3-defocused',\r\n      region: 'c3-region',\r\n      regions: 'c3-regions',\r\n      title: 'c3-title',\r\n      tooltipContainer: 'c3-tooltip-container',\r\n      tooltip: 'c3-tooltip',\r\n      tooltipName: 'c3-tooltip-name',\r\n      shape: 'c3-shape',\r\n      shapes: 'c3-shapes',\r\n      line: 'c3-line',\r\n      lines: 'c3-lines',\r\n      bar: 'c3-bar',\r\n      bars: 'c3-bars',\r\n      circle: 'c3-circle',\r\n      circles: 'c3-circles',\r\n      arc: 'c3-arc',\r\n      arcLabelLine: 'c3-arc-label-line',\r\n      arcs: 'c3-arcs',\r\n      area: 'c3-area',\r\n      areas: 'c3-areas',\r\n      empty: 'c3-empty',\r\n      text: 'c3-text',\r\n      texts: 'c3-texts',\r\n      gaugeValue: 'c3-gauge-value',\r\n      grid: 'c3-grid',\r\n      gridLines: 'c3-grid-lines',\r\n      xgrid: 'c3-xgrid',\r\n      xgrids: 'c3-xgrids',\r\n      xgridLine: 'c3-xgrid-line',\r\n      xgridLines: 'c3-xgrid-lines',\r\n      xgridFocus: 'c3-xgrid-focus',\r\n      ygrid: 'c3-ygrid',\r\n      ygrids: 'c3-ygrids',\r\n      ygridLine: 'c3-ygrid-line',\r\n      ygridLines: 'c3-ygrid-lines',\r\n      colorScale: 'c3-colorscale',\r\n      stanfordElements: 'c3-stanford-elements',\r\n      stanfordLine: 'c3-stanford-line',\r\n      stanfordLines: 'c3-stanford-lines',\r\n      stanfordRegion: 'c3-stanford-region',\r\n      stanfordRegions: 'c3-stanford-regions',\r\n      stanfordText: 'c3-stanford-text',\r\n      stanfordTexts: 'c3-stanford-texts',\r\n      axis: 'c3-axis',\r\n      axisX: 'c3-axis-x',\r\n      axisXLabel: 'c3-axis-x-label',\r\n      axisY: 'c3-axis-y',\r\n      axisYLabel: 'c3-axis-y-label',\r\n      axisY2: 'c3-axis-y2',\r\n      axisY2Label: 'c3-axis-y2-label',\r\n      legendBackground: 'c3-legend-background',\r\n      legendItem: 'c3-legend-item',\r\n      legendItemEvent: 'c3-legend-item-event',\r\n      legendItemTile: 'c3-legend-item-tile',\r\n      legendItemHidden: 'c3-legend-item-hidden',\r\n      legendItemFocused: 'c3-legend-item-focused',\r\n      dragarea: 'c3-dragarea',\r\n      EXPANDED: '_expanded_',\r\n      SELECTED: '_selected_',\r\n      INCLUDED: '_included_'\r\n  };\n\n  var AxisClass = /** @class */ (function () {\r\n      function AxisClass(owner) {\r\n          this.owner = owner;\r\n          this.d3 = owner.d3;\r\n          this.internal = AxisInternal;\r\n      }\r\n      return AxisClass;\r\n  }());\r\n  var Axis = AxisClass;\r\n  Axis.prototype.init = function init() {\r\n      var $$ = this.owner, config = $$.config, main = $$.main;\r\n      $$.axes.x = main\r\n          .append('g')\r\n          .attr('class', CLASS.axis + ' ' + CLASS.axisX)\r\n          .attr('clip-path', config.axis_x_inner ? '' : $$.clipPathForXAxis)\r\n          .attr('transform', $$.getTranslate('x'))\r\n          .style('visibility', config.axis_x_show ? 'visible' : 'hidden');\r\n      $$.axes.x\r\n          .append('text')\r\n          .attr('class', CLASS.axisXLabel)\r\n          .attr('transform', config.axis_rotated ? 'rotate(-90)' : '')\r\n          .style('text-anchor', this.textAnchorForXAxisLabel.bind(this));\r\n      $$.axes.y = main\r\n          .append('g')\r\n          .attr('class', CLASS.axis + ' ' + CLASS.axisY)\r\n          .attr('clip-path', config.axis_y_inner ? '' : $$.clipPathForYAxis)\r\n          .attr('transform', $$.getTranslate('y'))\r\n          .style('visibility', config.axis_y_show ? 'visible' : 'hidden');\r\n      $$.axes.y\r\n          .append('text')\r\n          .attr('class', CLASS.axisYLabel)\r\n          .attr('transform', config.axis_rotated ? '' : 'rotate(-90)')\r\n          .style('text-anchor', this.textAnchorForYAxisLabel.bind(this));\r\n      $$.axes.y2 = main\r\n          .append('g')\r\n          .attr('class', CLASS.axis + ' ' + CLASS.axisY2)\r\n          // clip-path?\r\n          .attr('transform', $$.getTranslate('y2'))\r\n          .style('visibility', config.axis_y2_show ? 'visible' : 'hidden');\r\n      $$.axes.y2\r\n          .append('text')\r\n          .attr('class', CLASS.axisY2Label)\r\n          .attr('transform', config.axis_rotated ? '' : 'rotate(-90)')\r\n          .style('text-anchor', this.textAnchorForY2AxisLabel.bind(this));\r\n  };\r\n  Axis.prototype.getXAxis = function getXAxis(scale, orient, tickFormat, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\r\n      var $$ = this.owner, config = $$.config, axisParams = {\r\n          isCategory: $$.isCategorized(),\r\n          withOuterTick: withOuterTick,\r\n          tickMultiline: config.axis_x_tick_multiline,\r\n          tickMultilineMax: config.axis_x_tick_multiline\r\n              ? Number(config.axis_x_tick_multilineMax)\r\n              : 0,\r\n          tickWidth: config.axis_x_tick_width,\r\n          tickTextRotate: withoutRotateTickText ? 0 : config.axis_x_tick_rotate,\r\n          withoutTransition: withoutTransition\r\n      }, axis = new this.internal(this, axisParams).axis.scale(scale).orient(orient);\r\n      if ($$.isTimeSeries() && tickValues && typeof tickValues !== 'function') {\r\n          tickValues = tickValues.map(function (v) {\r\n              return $$.parseDate(v);\r\n          });\r\n      }\r\n      // Set tick\r\n      axis.tickFormat(tickFormat).tickValues(tickValues);\r\n      if ($$.isCategorized()) {\r\n          axis.tickCentered(config.axis_x_tick_centered);\r\n          if (isEmpty(config.axis_x_tick_culling)) {\r\n              config.axis_x_tick_culling = false;\r\n          }\r\n      }\r\n      return axis;\r\n  };\r\n  Axis.prototype.updateXAxisTickValues = function updateXAxisTickValues(targets, axis) {\r\n      var $$ = this.owner, config = $$.config, tickValues;\r\n      if (config.axis_x_tick_fit || config.axis_x_tick_count) {\r\n          tickValues = this.generateTickValues($$.mapTargetsToUniqueXs(targets), config.axis_x_tick_count, $$.isTimeSeries());\r\n      }\r\n      if (axis) {\r\n          axis.tickValues(tickValues);\r\n      }\r\n      else {\r\n          $$.xAxis.tickValues(tickValues);\r\n          $$.subXAxis.tickValues(tickValues);\r\n      }\r\n      return tickValues;\r\n  };\r\n  Axis.prototype.getYAxis = function getYAxis(axisId, scale, orient, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\r\n      var $$ = this.owner;\r\n      var config = $$.config;\r\n      var tickFormat = config[\"axis_\" + axisId + \"_tick_format\"];\r\n      if (!tickFormat && $$.isAxisNormalized(axisId)) {\r\n          tickFormat = function (x) { return x + \"%\"; };\r\n      }\r\n      var axis = new this.internal(this, {\r\n          withOuterTick: withOuterTick,\r\n          withoutTransition: withoutTransition,\r\n          tickTextRotate: withoutRotateTickText ? 0 : config.axis_y_tick_rotate\r\n      }).axis\r\n          .scale(scale)\r\n          .orient(orient);\r\n      if (tickFormat) {\r\n          axis.tickFormat(tickFormat);\r\n      }\r\n      if ($$.isTimeSeriesY()) {\r\n          axis.ticks(config.axis_y_tick_time_type, config.axis_y_tick_time_interval);\r\n      }\r\n      else {\r\n          axis.tickValues(tickValues);\r\n      }\r\n      return axis;\r\n  };\r\n  Axis.prototype.getId = function getId(id) {\r\n      var config = this.owner.config;\r\n      return id in config.data_axes ? config.data_axes[id] : 'y';\r\n  };\r\n  Axis.prototype.getXAxisTickFormat = function getXAxisTickFormat() {\r\n      // #2251 previously set any negative values to a whole number,\r\n      // however both should be truncated according to the users format specification\r\n      var $$ = this.owner, config = $$.config;\r\n      var format = $$.isTimeSeries()\r\n          ? $$.defaultAxisTimeFormat\r\n          : $$.isCategorized()\r\n              ? $$.categoryName\r\n              : function (v) {\r\n                  return v;\r\n              };\r\n      if (config.axis_x_tick_format) {\r\n          if (isFunction(config.axis_x_tick_format)) {\r\n              format = config.axis_x_tick_format;\r\n          }\r\n          else if ($$.isTimeSeries()) {\r\n              format = function (date) {\r\n                  return date ? $$.axisTimeFormat(config.axis_x_tick_format)(date) : '';\r\n              };\r\n          }\r\n      }\r\n      return isFunction(format)\r\n          ? function (v) {\r\n              return format.call($$, v);\r\n          }\r\n          : format;\r\n  };\r\n  Axis.prototype.getTickValues = function getTickValues(tickValues, axis) {\r\n      return tickValues ? tickValues : axis ? axis.tickValues() : undefined;\r\n  };\r\n  Axis.prototype.getXAxisTickValues = function getXAxisTickValues() {\r\n      return this.getTickValues(this.owner.config.axis_x_tick_values, this.owner.xAxis);\r\n  };\r\n  Axis.prototype.getYAxisTickValues = function getYAxisTickValues() {\r\n      return this.getTickValues(this.owner.config.axis_y_tick_values, this.owner.yAxis);\r\n  };\r\n  Axis.prototype.getY2AxisTickValues = function getY2AxisTickValues() {\r\n      return this.getTickValues(this.owner.config.axis_y2_tick_values, this.owner.y2Axis);\r\n  };\r\n  Axis.prototype.getLabelOptionByAxisId = function getLabelOptionByAxisId(axisId) {\r\n      var $$ = this.owner, config = $$.config, option;\r\n      if (axisId === 'y') {\r\n          option = config.axis_y_label;\r\n      }\r\n      else if (axisId === 'y2') {\r\n          option = config.axis_y2_label;\r\n      }\r\n      else if (axisId === 'x') {\r\n          option = config.axis_x_label;\r\n      }\r\n      return option;\r\n  };\r\n  Axis.prototype.getLabelText = function getLabelText(axisId) {\r\n      var option = this.getLabelOptionByAxisId(axisId);\r\n      return isString(option) ? option : option ? option.text : null;\r\n  };\r\n  Axis.prototype.setLabelText = function setLabelText(axisId, text) {\r\n      var $$ = this.owner, config = $$.config, option = this.getLabelOptionByAxisId(axisId);\r\n      if (isString(option)) {\r\n          if (axisId === 'y') {\r\n              config.axis_y_label = text;\r\n          }\r\n          else if (axisId === 'y2') {\r\n              config.axis_y2_label = text;\r\n          }\r\n          else if (axisId === 'x') {\r\n              config.axis_x_label = text;\r\n          }\r\n      }\r\n      else if (option) {\r\n          option.text = text;\r\n      }\r\n  };\r\n  Axis.prototype.getLabelPosition = function getLabelPosition(axisId, defaultPosition) {\r\n      var option = this.getLabelOptionByAxisId(axisId), position = option && typeof option === 'object' && option.position\r\n          ? option.position\r\n          : defaultPosition;\r\n      return {\r\n          isInner: position.indexOf('inner') >= 0,\r\n          isOuter: position.indexOf('outer') >= 0,\r\n          isLeft: position.indexOf('left') >= 0,\r\n          isCenter: position.indexOf('center') >= 0,\r\n          isRight: position.indexOf('right') >= 0,\r\n          isTop: position.indexOf('top') >= 0,\r\n          isMiddle: position.indexOf('middle') >= 0,\r\n          isBottom: position.indexOf('bottom') >= 0\r\n      };\r\n  };\r\n  Axis.prototype.getXAxisLabelPosition = function getXAxisLabelPosition() {\r\n      return this.getLabelPosition('x', this.owner.config.axis_rotated ? 'inner-top' : 'inner-right');\r\n  };\r\n  Axis.prototype.getYAxisLabelPosition = function getYAxisLabelPosition() {\r\n      return this.getLabelPosition('y', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\r\n  };\r\n  Axis.prototype.getY2AxisLabelPosition = function getY2AxisLabelPosition() {\r\n      return this.getLabelPosition('y2', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\r\n  };\r\n  Axis.prototype.getLabelPositionById = function getLabelPositionById(id) {\r\n      return id === 'y2'\r\n          ? this.getY2AxisLabelPosition()\r\n          : id === 'y'\r\n              ? this.getYAxisLabelPosition()\r\n              : this.getXAxisLabelPosition();\r\n  };\r\n  Axis.prototype.textForXAxisLabel = function textForXAxisLabel() {\r\n      return this.getLabelText('x');\r\n  };\r\n  Axis.prototype.textForYAxisLabel = function textForYAxisLabel() {\r\n      return this.getLabelText('y');\r\n  };\r\n  Axis.prototype.textForY2AxisLabel = function textForY2AxisLabel() {\r\n      return this.getLabelText('y2');\r\n  };\r\n  Axis.prototype.xForAxisLabel = function xForAxisLabel(forHorizontal, position) {\r\n      var $$ = this.owner;\r\n      if (forHorizontal) {\r\n          return position.isLeft ? 0 : position.isCenter ? $$.width / 2 : $$.width;\r\n      }\r\n      else {\r\n          return position.isBottom\r\n              ? -$$.height\r\n              : position.isMiddle\r\n                  ? -$$.height / 2\r\n                  : 0;\r\n      }\r\n  };\r\n  Axis.prototype.dxForAxisLabel = function dxForAxisLabel(forHorizontal, position) {\r\n      if (forHorizontal) {\r\n          return position.isLeft ? '0.5em' : position.isRight ? '-0.5em' : '0';\r\n      }\r\n      else {\r\n          return position.isTop ? '-0.5em' : position.isBottom ? '0.5em' : '0';\r\n      }\r\n  };\r\n  Axis.prototype.textAnchorForAxisLabel = function textAnchorForAxisLabel(forHorizontal, position) {\r\n      if (forHorizontal) {\r\n          return position.isLeft ? 'start' : position.isCenter ? 'middle' : 'end';\r\n      }\r\n      else {\r\n          return position.isBottom ? 'start' : position.isMiddle ? 'middle' : 'end';\r\n      }\r\n  };\r\n  Axis.prototype.xForXAxisLabel = function xForXAxisLabel() {\r\n      return this.xForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\r\n  };\r\n  Axis.prototype.xForYAxisLabel = function xForYAxisLabel() {\r\n      return this.xForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\r\n  };\r\n  Axis.prototype.xForY2AxisLabel = function xForY2AxisLabel() {\r\n      return this.xForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\r\n  };\r\n  Axis.prototype.dxForXAxisLabel = function dxForXAxisLabel() {\r\n      return this.dxForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\r\n  };\r\n  Axis.prototype.dxForYAxisLabel = function dxForYAxisLabel() {\r\n      return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\r\n  };\r\n  Axis.prototype.dxForY2AxisLabel = function dxForY2AxisLabel() {\r\n      return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\r\n  };\r\n  Axis.prototype.dyForXAxisLabel = function dyForXAxisLabel() {\r\n      var $$ = this.owner, config = $$.config, position = this.getXAxisLabelPosition();\r\n      if (config.axis_rotated) {\r\n          return position.isInner\r\n              ? '1.2em'\r\n              : -25 - ($$.config.axis_x_inner ? 0 : this.getMaxTickWidth('x'));\r\n      }\r\n      else {\r\n          return position.isInner ? '-0.5em' : $$.getHorizontalAxisHeight('x') - 10;\r\n      }\r\n  };\r\n  Axis.prototype.dyForYAxisLabel = function dyForYAxisLabel() {\r\n      var $$ = this.owner, position = this.getYAxisLabelPosition();\r\n      if ($$.config.axis_rotated) {\r\n          return position.isInner ? '-0.5em' : '3em';\r\n      }\r\n      else {\r\n          return position.isInner\r\n              ? '1.2em'\r\n              : -10 - ($$.config.axis_y_inner ? 0 : this.getMaxTickWidth('y') + 10);\r\n      }\r\n  };\r\n  Axis.prototype.dyForY2AxisLabel = function dyForY2AxisLabel() {\r\n      var $$ = this.owner, position = this.getY2AxisLabelPosition();\r\n      if ($$.config.axis_rotated) {\r\n          return position.isInner ? '1.2em' : '-2.2em';\r\n      }\r\n      else {\r\n          return position.isInner\r\n              ? '-0.5em'\r\n              : 15 + ($$.config.axis_y2_inner ? 0 : this.getMaxTickWidth('y2') + 15);\r\n      }\r\n  };\r\n  Axis.prototype.textAnchorForXAxisLabel = function textAnchorForXAxisLabel() {\r\n      var $$ = this.owner;\r\n      return this.textAnchorForAxisLabel(!$$.config.axis_rotated, this.getXAxisLabelPosition());\r\n  };\r\n  Axis.prototype.textAnchorForYAxisLabel = function textAnchorForYAxisLabel() {\r\n      var $$ = this.owner;\r\n      return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getYAxisLabelPosition());\r\n  };\r\n  Axis.prototype.textAnchorForY2AxisLabel = function textAnchorForY2AxisLabel() {\r\n      var $$ = this.owner;\r\n      return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getY2AxisLabelPosition());\r\n  };\r\n  Axis.prototype.getMaxTickWidth = function getMaxTickWidth(id, withoutRecompute) {\r\n      var $$ = this.owner, maxWidth = 0, targetsToShow, scale, axis, dummy, svg;\r\n      if (withoutRecompute && $$.currentMaxTickWidths[id]) {\r\n          return $$.currentMaxTickWidths[id];\r\n      }\r\n      if ($$.svg) {\r\n          targetsToShow = $$.filterTargetsToShow($$.data.targets);\r\n          if (id === 'y') {\r\n              scale = $$.y.copy().domain($$.getYDomain(targetsToShow, 'y'));\r\n              axis = this.getYAxis(id, scale, $$.yOrient, $$.yAxisTickValues, false, true, true);\r\n          }\r\n          else if (id === 'y2') {\r\n              scale = $$.y2.copy().domain($$.getYDomain(targetsToShow, 'y2'));\r\n              axis = this.getYAxis(id, scale, $$.y2Orient, $$.y2AxisTickValues, false, true, true);\r\n          }\r\n          else {\r\n              scale = $$.x.copy().domain($$.getXDomain(targetsToShow));\r\n              axis = this.getXAxis(scale, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, false, true, true);\r\n              this.updateXAxisTickValues(targetsToShow, axis);\r\n          }\r\n          dummy = $$.d3\r\n              .select('body')\r\n              .append('div')\r\n              .classed('c3', true);\r\n          (svg = dummy\r\n              .append('svg')\r\n              .style('visibility', 'hidden')\r\n              .style('position', 'fixed')\r\n              .style('top', 0)\r\n              .style('left', 0)),\r\n              svg\r\n                  .append('g')\r\n                  .call(axis)\r\n                  .each(function () {\r\n                  $$.d3\r\n                      .select(this)\r\n                      .selectAll('text')\r\n                      .each(function () {\r\n                      var box = getBBox(this);\r\n                      if (maxWidth < box.width) {\r\n                          maxWidth = box.width;\r\n                      }\r\n                  });\r\n                  dummy.remove();\r\n              });\r\n      }\r\n      $$.currentMaxTickWidths[id] =\r\n          maxWidth <= 0 ? $$.currentMaxTickWidths[id] : maxWidth;\r\n      return $$.currentMaxTickWidths[id];\r\n  };\r\n  Axis.prototype.updateLabels = function updateLabels(withTransition) {\r\n      var $$ = this.owner;\r\n      var axisXLabel = $$.main.select('.' + CLASS.axisX + ' .' + CLASS.axisXLabel), axisYLabel = $$.main.select('.' + CLASS.axisY + ' .' + CLASS.axisYLabel), axisY2Label = $$.main.select('.' + CLASS.axisY2 + ' .' + CLASS.axisY2Label);\r\n      (withTransition ? axisXLabel.transition() : axisXLabel)\r\n          .attr('x', this.xForXAxisLabel.bind(this))\r\n          .attr('dx', this.dxForXAxisLabel.bind(this))\r\n          .attr('dy', this.dyForXAxisLabel.bind(this))\r\n          .text(this.textForXAxisLabel.bind(this));\r\n      (withTransition ? axisYLabel.transition() : axisYLabel)\r\n          .attr('x', this.xForYAxisLabel.bind(this))\r\n          .attr('dx', this.dxForYAxisLabel.bind(this))\r\n          .attr('dy', this.dyForYAxisLabel.bind(this))\r\n          .text(this.textForYAxisLabel.bind(this));\r\n      (withTransition ? axisY2Label.transition() : axisY2Label)\r\n          .attr('x', this.xForY2AxisLabel.bind(this))\r\n          .attr('dx', this.dxForY2AxisLabel.bind(this))\r\n          .attr('dy', this.dyForY2AxisLabel.bind(this))\r\n          .text(this.textForY2AxisLabel.bind(this));\r\n  };\r\n  Axis.prototype.getPadding = function getPadding(padding, key, defaultValue, domainLength) {\r\n      var p = typeof padding === 'number' ? padding : padding[key];\r\n      if (!isValue(p)) {\r\n          return defaultValue;\r\n      }\r\n      if (padding.unit === 'ratio') {\r\n          return padding[key] * domainLength;\r\n      }\r\n      // assume padding is pixels if unit is not specified\r\n      return this.convertPixelsToAxisPadding(p, domainLength);\r\n  };\r\n  Axis.prototype.convertPixelsToAxisPadding = function convertPixelsToAxisPadding(pixels, domainLength) {\r\n      var $$ = this.owner, length = $$.config.axis_rotated ? $$.width : $$.height;\r\n      return domainLength * (pixels / length);\r\n  };\r\n  Axis.prototype.generateTickValues = function generateTickValues(values, tickCount, forTimeSeries) {\r\n      var tickValues = values, targetCount, start, end, count, interval, i, tickValue;\r\n      if (tickCount) {\r\n          targetCount = isFunction(tickCount) ? tickCount() : tickCount;\r\n          // compute ticks according to tickCount\r\n          if (targetCount === 1) {\r\n              tickValues = [values[0]];\r\n          }\r\n          else if (targetCount === 2) {\r\n              tickValues = [values[0], values[values.length - 1]];\r\n          }\r\n          else if (targetCount > 2) {\r\n              count = targetCount - 2;\r\n              start = values[0];\r\n              end = values[values.length - 1];\r\n              interval = (end - start) / (count + 1);\r\n              // re-construct unique values\r\n              tickValues = [start];\r\n              for (i = 0; i < count; i++) {\r\n                  tickValue = +start + interval * (i + 1);\r\n                  tickValues.push(forTimeSeries ? new Date(tickValue) : tickValue);\r\n              }\r\n              tickValues.push(end);\r\n          }\r\n      }\r\n      if (!forTimeSeries) {\r\n          tickValues = tickValues.sort(function (a, b) {\r\n              return a - b;\r\n          });\r\n      }\r\n      return tickValues;\r\n  };\r\n  Axis.prototype.generateTransitions = function generateTransitions(duration) {\r\n      var $$ = this.owner, axes = $$.axes;\r\n      return {\r\n          axisX: duration ? axes.x.transition().duration(duration) : axes.x,\r\n          axisY: duration ? axes.y.transition().duration(duration) : axes.y,\r\n          axisY2: duration ? axes.y2.transition().duration(duration) : axes.y2,\r\n          axisSubX: duration ? axes.subx.transition().duration(duration) : axes.subx\r\n      };\r\n  };\r\n  Axis.prototype.redraw = function redraw(duration, isHidden) {\r\n      var $$ = this.owner, transition = duration ? $$.d3.transition().duration(duration) : null;\r\n      $$.axes.x.style('opacity', isHidden ? 0 : 1).call($$.xAxis, transition);\r\n      $$.axes.y.style('opacity', isHidden ? 0 : 1).call($$.yAxis, transition);\r\n      $$.axes.y2.style('opacity', isHidden ? 0 : 1).call($$.y2Axis, transition);\r\n      $$.axes.subx.style('opacity', isHidden ? 0 : 1).call($$.subXAxis, transition);\r\n  };\n\n  var c3 = {\r\n      version: '0.7.20',\r\n      chart: {\r\n          fn: Chart.prototype,\r\n          internal: {\r\n              fn: ChartInternal.prototype,\r\n              axis: {\r\n                  fn: AxisClass.prototype,\r\n                  internal: {\r\n                      fn: AxisInternal.prototype\r\n                  }\r\n              }\r\n          }\r\n      },\r\n      generate: function (config) {\r\n          return new Chart(config);\r\n      }\r\n  };\r\n  ChartInternal.prototype.beforeInit = function () {\r\n      // can do something\r\n  };\r\n  ChartInternal.prototype.afterInit = function () {\r\n      // can do something\r\n  };\r\n  ChartInternal.prototype.init = function () {\r\n      var $$ = this, config = $$.config;\r\n      $$.initParams();\r\n      if (config.data_url) {\r\n          $$.convertUrlToData(config.data_url, config.data_mimeType, config.data_headers, config.data_keys, $$.initWithData);\r\n      }\r\n      else if (config.data_json) {\r\n          $$.initWithData($$.convertJsonToData(config.data_json, config.data_keys));\r\n      }\r\n      else if (config.data_rows) {\r\n          $$.initWithData($$.convertRowsToData(config.data_rows));\r\n      }\r\n      else if (config.data_columns) {\r\n          $$.initWithData($$.convertColumnsToData(config.data_columns));\r\n      }\r\n      else {\r\n          throw Error('url or json or rows or columns is required.');\r\n      }\r\n  };\r\n  ChartInternal.prototype.initParams = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config;\r\n      // MEMO: clipId needs to be unique because it conflicts when multiple charts exist\r\n      $$.clipId = 'c3-' + new Date().valueOf() + '-clip';\r\n      $$.clipIdForXAxis = $$.clipId + '-xaxis';\r\n      $$.clipIdForYAxis = $$.clipId + '-yaxis';\r\n      $$.clipIdForGrid = $$.clipId + '-grid';\r\n      $$.clipIdForSubchart = $$.clipId + '-subchart';\r\n      $$.clipPath = $$.getClipPath($$.clipId);\r\n      $$.clipPathForXAxis = $$.getClipPath($$.clipIdForXAxis);\r\n      $$.clipPathForYAxis = $$.getClipPath($$.clipIdForYAxis);\r\n      $$.clipPathForGrid = $$.getClipPath($$.clipIdForGrid);\r\n      $$.clipPathForSubchart = $$.getClipPath($$.clipIdForSubchart);\r\n      $$.dragStart = null;\r\n      $$.dragging = false;\r\n      $$.flowing = false;\r\n      $$.cancelClick = false;\r\n      $$.mouseover = undefined;\r\n      $$.transiting = false;\r\n      $$.color = $$.generateColor();\r\n      $$.levelColor = $$.generateLevelColor();\r\n      $$.dataTimeParse = (config.data_xLocaltime ? d3.timeParse : d3.utcParse)($$.config.data_xFormat);\r\n      $$.axisTimeFormat = config.axis_x_localtime ? d3.timeFormat : d3.utcFormat;\r\n      $$.defaultAxisTimeFormat = function (date) {\r\n          if (date.getMilliseconds()) {\r\n              return d3.timeFormat('.%L')(date);\r\n          }\r\n          if (date.getSeconds()) {\r\n              return d3.timeFormat(':%S')(date);\r\n          }\r\n          if (date.getMinutes()) {\r\n              return d3.timeFormat('%I:%M')(date);\r\n          }\r\n          if (date.getHours()) {\r\n              return d3.timeFormat('%I %p')(date);\r\n          }\r\n          if (date.getDay() && date.getDate() !== 1) {\r\n              return d3.timeFormat('%-m/%-d')(date);\r\n          }\r\n          if (date.getDate() !== 1) {\r\n              return d3.timeFormat('%-m/%-d')(date);\r\n          }\r\n          if (date.getMonth()) {\r\n              return d3.timeFormat('%-m/%-d')(date);\r\n          }\r\n          return d3.timeFormat('%Y/%-m/%-d')(date);\r\n      };\r\n      $$.hiddenTargetIds = [];\r\n      $$.hiddenLegendIds = [];\r\n      $$.focusedTargetIds = [];\r\n      $$.defocusedTargetIds = [];\r\n      $$.xOrient = config.axis_rotated\r\n          ? config.axis_x_inner\r\n              ? 'right'\r\n              : 'left'\r\n          : config.axis_x_inner\r\n              ? 'top'\r\n              : 'bottom';\r\n      $$.yOrient = config.axis_rotated\r\n          ? config.axis_y_inner\r\n              ? 'top'\r\n              : 'bottom'\r\n          : config.axis_y_inner\r\n              ? 'right'\r\n              : 'left';\r\n      $$.y2Orient = config.axis_rotated\r\n          ? config.axis_y2_inner\r\n              ? 'bottom'\r\n              : 'top'\r\n          : config.axis_y2_inner\r\n              ? 'left'\r\n              : 'right';\r\n      $$.subXOrient = config.axis_rotated ? 'left' : 'bottom';\r\n      $$.isLegendRight = config.legend_position === 'right';\r\n      $$.isLegendInset = config.legend_position === 'inset';\r\n      $$.isLegendTop =\r\n          config.legend_inset_anchor === 'top-left' ||\r\n              config.legend_inset_anchor === 'top-right';\r\n      $$.isLegendLeft =\r\n          config.legend_inset_anchor === 'top-left' ||\r\n              config.legend_inset_anchor === 'bottom-left';\r\n      $$.legendStep = 0;\r\n      $$.legendItemWidth = 0;\r\n      $$.legendItemHeight = 0;\r\n      $$.currentMaxTickWidths = {\r\n          x: 0,\r\n          y: 0,\r\n          y2: 0\r\n      };\r\n      $$.rotated_padding_left = 30;\r\n      $$.rotated_padding_right = config.axis_rotated && !config.axis_x_show ? 0 : 30;\r\n      $$.rotated_padding_top = 5;\r\n      $$.withoutFadeIn = {};\r\n      $$.intervalForObserveInserted = undefined;\r\n      $$.axes.subx = d3.selectAll([]); // needs when excluding subchart.js\r\n  };\r\n  ChartInternal.prototype.initChartElements = function () {\r\n      if (this.initBar) {\r\n          this.initBar();\r\n      }\r\n      if (this.initLine) {\r\n          this.initLine();\r\n      }\r\n      if (this.initArc) {\r\n          this.initArc();\r\n      }\r\n      if (this.initGauge) {\r\n          this.initGauge();\r\n      }\r\n      if (this.initText) {\r\n          this.initText();\r\n      }\r\n  };\r\n  ChartInternal.prototype.initWithData = function (data) {\r\n      var $$ = this, d3 = $$.d3, config = $$.config;\r\n      var defs, main, binding = true;\r\n      $$.axis = new AxisClass($$);\r\n      if (!config.bindto) {\r\n          $$.selectChart = d3.selectAll([]);\r\n      }\r\n      else if (typeof config.bindto.node === 'function') {\r\n          $$.selectChart = config.bindto;\r\n      }\r\n      else {\r\n          $$.selectChart = d3.select(config.bindto);\r\n      }\r\n      if ($$.selectChart.empty()) {\r\n          $$.selectChart = d3\r\n              .select(document.createElement('div'))\r\n              .style('opacity', 0);\r\n          $$.observeInserted($$.selectChart);\r\n          binding = false;\r\n      }\r\n      $$.selectChart.html('').classed('c3', true);\r\n      // Init data as targets\r\n      $$.data.xs = {};\r\n      $$.data.targets = $$.convertDataToTargets(data);\r\n      if (config.data_filter) {\r\n          $$.data.targets = $$.data.targets.filter(config.data_filter);\r\n      }\r\n      // Set targets to hide if needed\r\n      if (config.data_hide) {\r\n          $$.addHiddenTargetIds(config.data_hide === true\r\n              ? $$.mapToIds($$.data.targets)\r\n              : config.data_hide);\r\n      }\r\n      if (config.legend_hide) {\r\n          $$.addHiddenLegendIds(config.legend_hide === true\r\n              ? $$.mapToIds($$.data.targets)\r\n              : config.legend_hide);\r\n      }\r\n      if ($$.isStanfordGraphType()) {\r\n          $$.initStanfordData();\r\n      }\r\n      // Init sizes and scales\r\n      $$.updateSizes();\r\n      $$.updateScales();\r\n      // Set domains for each scale\r\n      $$.x.domain(d3.extent($$.getXDomain($$.data.targets)));\r\n      $$.y.domain($$.getYDomain($$.data.targets, 'y'));\r\n      $$.y2.domain($$.getYDomain($$.data.targets, 'y2'));\r\n      $$.subX.domain($$.x.domain());\r\n      $$.subY.domain($$.y.domain());\r\n      $$.subY2.domain($$.y2.domain());\r\n      // Save original x domain for zoom update\r\n      $$.orgXDomain = $$.x.domain();\r\n      /*-- Basic Elements --*/\r\n      // Define svgs\r\n      $$.svg = $$.selectChart\r\n          .append('svg')\r\n          .style('overflow', 'hidden')\r\n          .on('mouseenter', function () {\r\n          return config.onmouseover.call($$);\r\n      })\r\n          .on('mouseleave', function () {\r\n          return config.onmouseout.call($$);\r\n      });\r\n      if ($$.config.svg_classname) {\r\n          $$.svg.attr('class', $$.config.svg_classname);\r\n      }\r\n      // Define defs\r\n      defs = $$.svg.append('defs');\r\n      $$.clipChart = $$.appendClip(defs, $$.clipId);\r\n      $$.clipXAxis = $$.appendClip(defs, $$.clipIdForXAxis);\r\n      $$.clipYAxis = $$.appendClip(defs, $$.clipIdForYAxis);\r\n      $$.clipGrid = $$.appendClip(defs, $$.clipIdForGrid);\r\n      $$.clipSubchart = $$.appendClip(defs, $$.clipIdForSubchart);\r\n      $$.updateSvgSize();\r\n      // Define regions\r\n      main = $$.main = $$.svg.append('g').attr('transform', $$.getTranslate('main'));\r\n      if ($$.initPie) {\r\n          $$.initPie();\r\n      }\r\n      if ($$.initDragZoom) {\r\n          $$.initDragZoom();\r\n      }\r\n      if (config.subchart_show && $$.initSubchart) {\r\n          $$.initSubchart();\r\n      }\r\n      if ($$.initTooltip) {\r\n          $$.initTooltip();\r\n      }\r\n      if ($$.initLegend) {\r\n          $$.initLegend();\r\n      }\r\n      if ($$.initTitle) {\r\n          $$.initTitle();\r\n      }\r\n      if ($$.initZoom) {\r\n          $$.initZoom();\r\n      }\r\n      if ($$.isStanfordGraphType()) {\r\n          $$.drawColorScale();\r\n      }\r\n      // Update selection based on size and scale\r\n      // TODO: currently this must be called after initLegend because of update of sizes, but it should be done in initSubchart.\r\n      if (config.subchart_show && $$.initSubchartBrush) {\r\n          $$.initSubchartBrush();\r\n      }\r\n      /*-- Main Region --*/\r\n      // text when empty\r\n      main\r\n          .append('text')\r\n          .attr('class', CLASS.text + ' ' + CLASS.empty)\r\n          .attr('text-anchor', 'middle') // horizontal centering of text at x position in all browsers.\r\n          .attr('dominant-baseline', 'middle'); // vertical centering of text at y position in all browsers, except IE.\r\n      // Regions\r\n      $$.initRegion();\r\n      // Grids\r\n      $$.initGrid();\r\n      // Define g for chart area\r\n      main\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPath)\r\n          .attr('class', CLASS.chart);\r\n      // Grid lines\r\n      if (config.grid_lines_front) {\r\n          $$.initGridLines();\r\n      }\r\n      $$.initStanfordElements();\r\n      // Cover whole with rects for events\r\n      $$.initEventRect();\r\n      // Define g for chart\r\n      $$.initChartElements();\r\n      // Add Axis\r\n      $$.axis.init();\r\n      // Set targets\r\n      $$.updateTargets($$.data.targets);\r\n      // Set default extent if defined\r\n      if (config.axis_x_selection) {\r\n          $$.brush.selectionAsValue($$.getDefaultSelection());\r\n      }\r\n      // Draw with targets\r\n      if (binding) {\r\n          $$.updateDimension();\r\n          $$.config.oninit.call($$);\r\n          $$.redraw({\r\n              withTransition: false,\r\n              withTransform: true,\r\n              withUpdateXDomain: true,\r\n              withUpdateOrgXDomain: true,\r\n              withTransitionForAxis: false\r\n          });\r\n      }\r\n      // Bind to resize event\r\n      $$.bindResize();\r\n      // Bind to window focus event\r\n      $$.bindWindowFocus();\r\n      // export element of the chart\r\n      $$.api.element = $$.selectChart.node();\r\n  };\r\n  ChartInternal.prototype.smoothLines = function (el, type) {\r\n      var $$ = this;\r\n      if (type === 'grid') {\r\n          el.each(function () {\r\n              var g = $$.d3.select(this), x1 = g.attr('x1'), x2 = g.attr('x2'), y1 = g.attr('y1'), y2 = g.attr('y2');\r\n              g.attr({\r\n                  x1: Math.ceil(x1),\r\n                  x2: Math.ceil(x2),\r\n                  y1: Math.ceil(y1),\r\n                  y2: Math.ceil(y2)\r\n              });\r\n          });\r\n      }\r\n  };\r\n  ChartInternal.prototype.updateSizes = function () {\r\n      var $$ = this, config = $$.config;\r\n      var legendHeight = $$.legend ? $$.getLegendHeight() : 0, legendWidth = $$.legend ? $$.getLegendWidth() : 0, legendHeightForBottom = $$.isLegendRight || $$.isLegendInset ? 0 : legendHeight, hasArc = $$.hasArcType(), xAxisHeight = config.axis_rotated || hasArc ? 0 : $$.getHorizontalAxisHeight('x'), subchartXAxisHeight = config.axis_rotated || hasArc ? 0 : $$.getHorizontalAxisHeight('x', true), subchartHeight = config.subchart_show && !hasArc\r\n          ? config.subchart_size_height + subchartXAxisHeight\r\n          : 0;\r\n      $$.currentWidth = $$.getCurrentWidth();\r\n      $$.currentHeight = $$.getCurrentHeight();\r\n      // for main\r\n      $$.margin = config.axis_rotated\r\n          ? {\r\n              top: $$.getHorizontalAxisHeight('y2') + $$.getCurrentPaddingTop(),\r\n              right: hasArc ? 0 : $$.getCurrentPaddingRight(),\r\n              bottom: $$.getHorizontalAxisHeight('y') +\r\n                  legendHeightForBottom +\r\n                  $$.getCurrentPaddingBottom(),\r\n              left: subchartHeight + (hasArc ? 0 : $$.getCurrentPaddingLeft())\r\n          }\r\n          : {\r\n              top: 4 + $$.getCurrentPaddingTop(),\r\n              right: hasArc ? 0 : $$.getCurrentPaddingRight(),\r\n              bottom: xAxisHeight +\r\n                  subchartHeight +\r\n                  legendHeightForBottom +\r\n                  $$.getCurrentPaddingBottom(),\r\n              left: hasArc ? 0 : $$.getCurrentPaddingLeft()\r\n          };\r\n      // for subchart\r\n      $$.margin2 = config.axis_rotated\r\n          ? {\r\n              top: $$.margin.top,\r\n              right: NaN,\r\n              bottom: 20 + legendHeightForBottom,\r\n              left: $$.rotated_padding_left\r\n          }\r\n          : {\r\n              top: $$.currentHeight - subchartHeight - legendHeightForBottom,\r\n              right: NaN,\r\n              bottom: subchartXAxisHeight + legendHeightForBottom,\r\n              left: $$.margin.left\r\n          };\r\n      // for legend\r\n      $$.margin3 = {\r\n          top: 0,\r\n          right: NaN,\r\n          bottom: 0,\r\n          left: 0\r\n      };\r\n      if ($$.updateSizeForLegend) {\r\n          $$.updateSizeForLegend(legendHeight, legendWidth);\r\n      }\r\n      $$.width = $$.currentWidth - $$.margin.left - $$.margin.right;\r\n      $$.height = $$.currentHeight - $$.margin.top - $$.margin.bottom;\r\n      if ($$.width < 0) {\r\n          $$.width = 0;\r\n      }\r\n      if ($$.height < 0) {\r\n          $$.height = 0;\r\n      }\r\n      $$.width2 = config.axis_rotated\r\n          ? $$.margin.left - $$.rotated_padding_left - $$.rotated_padding_right\r\n          : $$.width;\r\n      $$.height2 = config.axis_rotated\r\n          ? $$.height\r\n          : $$.currentHeight - $$.margin2.top - $$.margin2.bottom;\r\n      if ($$.width2 < 0) {\r\n          $$.width2 = 0;\r\n      }\r\n      if ($$.height2 < 0) {\r\n          $$.height2 = 0;\r\n      }\r\n      // for arc\r\n      $$.arcWidth = $$.width - ($$.isLegendRight ? legendWidth + 10 : 0);\r\n      $$.arcHeight = $$.height - ($$.isLegendRight ? 0 : 10);\r\n      if ($$.hasType('gauge') && !config.gauge_fullCircle) {\r\n          $$.arcHeight += $$.height - $$.getGaugeLabelHeight();\r\n      }\r\n      if ($$.updateRadius) {\r\n          $$.updateRadius();\r\n      }\r\n      if ($$.isLegendRight && hasArc) {\r\n          $$.margin3.left = $$.arcWidth / 2 + $$.radiusExpanded * 1.1;\r\n      }\r\n  };\r\n  ChartInternal.prototype.updateTargets = function (targets) {\r\n      var $$ = this, config = $$.config;\r\n      /*-- Main --*/\r\n      //-- Text --//\r\n      $$.updateTargetsForText(targets);\r\n      //-- Bar --//\r\n      $$.updateTargetsForBar(targets);\r\n      //-- Line --//\r\n      $$.updateTargetsForLine(targets);\r\n      //-- Arc --//\r\n      if ($$.hasArcType() && $$.updateTargetsForArc) {\r\n          $$.updateTargetsForArc(targets);\r\n      }\r\n      /*-- Sub --*/\r\n      if (config.subchart_show && $$.updateTargetsForSubchart) {\r\n          $$.updateTargetsForSubchart(targets);\r\n      }\r\n      // Fade-in each chart\r\n      $$.showTargets();\r\n  };\r\n  ChartInternal.prototype.showTargets = function () {\r\n      var $$ = this;\r\n      $$.svg\r\n          .selectAll('.' + CLASS.target)\r\n          .filter(function (d) {\r\n          return $$.isTargetToShow(d.id);\r\n      })\r\n          .transition()\r\n          .duration($$.config.transition_duration)\r\n          .style('opacity', 1);\r\n  };\r\n  ChartInternal.prototype.redraw = function (options, transitions) {\r\n      var $$ = this, main = $$.main, d3 = $$.d3, config = $$.config;\r\n      var areaIndices = $$.getShapeIndices($$.isAreaType), barIndices = $$.getShapeIndices($$.isBarType), lineIndices = $$.getShapeIndices($$.isLineType);\r\n      var withY, withSubchart, withTransition, withTransitionForExit, withTransitionForAxis, withTransform, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain, withLegend, withEventRect, withDimension, withUpdateXAxis;\r\n      var hideAxis = $$.hasArcType();\r\n      var drawArea, drawBar, drawLine, xForText, yForText;\r\n      var duration, durationForExit, durationForAxis;\r\n      var transitionsToWait, waitForDraw, flow, transition;\r\n      var targetsToShow = $$.filterTargetsToShow($$.data.targets), tickValues, i, intervalForCulling, xDomainForZoom;\r\n      var xv = $$.xv.bind($$), cx, cy;\r\n      options = options || {};\r\n      withY = getOption(options, 'withY', true);\r\n      withSubchart = getOption(options, 'withSubchart', true);\r\n      withTransition = getOption(options, 'withTransition', true);\r\n      withTransform = getOption(options, 'withTransform', false);\r\n      withUpdateXDomain = getOption(options, 'withUpdateXDomain', false);\r\n      withUpdateOrgXDomain = getOption(options, 'withUpdateOrgXDomain', false);\r\n      withTrimXDomain = getOption(options, 'withTrimXDomain', true);\r\n      withUpdateXAxis = getOption(options, 'withUpdateXAxis', withUpdateXDomain);\r\n      withLegend = getOption(options, 'withLegend', false);\r\n      withEventRect = getOption(options, 'withEventRect', true);\r\n      withDimension = getOption(options, 'withDimension', true);\r\n      withTransitionForExit = getOption(options, 'withTransitionForExit', withTransition);\r\n      withTransitionForAxis = getOption(options, 'withTransitionForAxis', withTransition);\r\n      duration = withTransition ? config.transition_duration : 0;\r\n      durationForExit = withTransitionForExit ? duration : 0;\r\n      durationForAxis = withTransitionForAxis ? duration : 0;\r\n      transitions = transitions || $$.axis.generateTransitions(durationForAxis);\r\n      // update legend and transform each g\r\n      if (withLegend && config.legend_show) {\r\n          $$.updateLegend($$.mapToIds($$.data.targets), options, transitions);\r\n      }\r\n      else if (withDimension) {\r\n          // need to update dimension (e.g. axis.y.tick.values) because y tick values should change\r\n          // no need to update axis in it because they will be updated in redraw()\r\n          $$.updateDimension(true);\r\n      }\r\n      // MEMO: needed for grids calculation\r\n      if ($$.isCategorized() && targetsToShow.length === 0) {\r\n          $$.x.domain([0, $$.axes.x.selectAll('.tick').size()]);\r\n      }\r\n      if (targetsToShow.length) {\r\n          $$.updateXDomain(targetsToShow, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain);\r\n          if (!config.axis_x_tick_values) {\r\n              tickValues = $$.axis.updateXAxisTickValues(targetsToShow);\r\n          }\r\n      }\r\n      else {\r\n          $$.xAxis.tickValues([]);\r\n          $$.subXAxis.tickValues([]);\r\n      }\r\n      if (config.zoom_rescale && !options.flow) {\r\n          xDomainForZoom = $$.x.orgDomain();\r\n      }\r\n      $$.y.domain($$.getYDomain(targetsToShow, 'y', xDomainForZoom));\r\n      $$.y2.domain($$.getYDomain(targetsToShow, 'y2', xDomainForZoom));\r\n      if (!config.axis_y_tick_values && config.axis_y_tick_count) {\r\n          $$.yAxis.tickValues($$.axis.generateTickValues($$.y.domain(), config.axis_y_tick_count));\r\n      }\r\n      if (!config.axis_y2_tick_values && config.axis_y2_tick_count) {\r\n          $$.y2Axis.tickValues($$.axis.generateTickValues($$.y2.domain(), config.axis_y2_tick_count));\r\n      }\r\n      // axes\r\n      $$.axis.redraw(durationForAxis, hideAxis);\r\n      // Update axis label\r\n      $$.axis.updateLabels(withTransition);\r\n      // show/hide if manual culling needed\r\n      if ((withUpdateXDomain || withUpdateXAxis) && targetsToShow.length) {\r\n          if (config.axis_x_tick_culling && tickValues) {\r\n              for (i = 1; i < tickValues.length; i++) {\r\n                  if (tickValues.length / i < config.axis_x_tick_culling_max) {\r\n                      intervalForCulling = i;\r\n                      break;\r\n                  }\r\n              }\r\n              $$.svg.selectAll('.' + CLASS.axisX + ' .tick text').each(function (e) {\r\n                  var index = tickValues.indexOf(e);\r\n                  if (index >= 0) {\r\n                      d3.select(this).style('display', index % intervalForCulling ? 'none' : 'block');\r\n                  }\r\n              });\r\n          }\r\n          else {\r\n              $$.svg\r\n                  .selectAll('.' + CLASS.axisX + ' .tick text')\r\n                  .style('display', 'block');\r\n          }\r\n      }\r\n      // setup drawer - MEMO: these must be called after axis updated\r\n      drawArea = $$.generateDrawArea\r\n          ? $$.generateDrawArea(areaIndices, false)\r\n          : undefined;\r\n      drawBar = $$.generateDrawBar ? $$.generateDrawBar(barIndices) : undefined;\r\n      drawLine = $$.generateDrawLine\r\n          ? $$.generateDrawLine(lineIndices, false)\r\n          : undefined;\r\n      xForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, true);\r\n      yForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, false);\r\n      // update circleY based on updated parameters\r\n      $$.updateCircleY();\r\n      // generate circle x/y functions depending on updated params\r\n      cx = ($$.config.axis_rotated ? $$.circleY : $$.circleX).bind($$);\r\n      cy = ($$.config.axis_rotated ? $$.circleX : $$.circleY).bind($$);\r\n      // Update sub domain\r\n      if (withY) {\r\n          $$.subY.domain($$.getYDomain(targetsToShow, 'y'));\r\n          $$.subY2.domain($$.getYDomain(targetsToShow, 'y2'));\r\n      }\r\n      // xgrid focus\r\n      $$.updateXgridFocus();\r\n      // Data empty label positioning and text.\r\n      main\r\n          .select('text.' + CLASS.text + '.' + CLASS.empty)\r\n          .attr('x', $$.width / 2)\r\n          .attr('y', $$.height / 2)\r\n          .text(config.data_empty_label_text)\r\n          .transition()\r\n          .style('opacity', targetsToShow.length ? 0 : 1);\r\n      // event rect\r\n      if (withEventRect) {\r\n          $$.redrawEventRect();\r\n      }\r\n      // grid\r\n      $$.updateGrid(duration);\r\n      $$.updateStanfordElements(duration);\r\n      // rect for regions\r\n      $$.updateRegion(duration);\r\n      // bars\r\n      $$.updateBar(durationForExit);\r\n      // lines, areas and circles\r\n      $$.updateLine(durationForExit);\r\n      $$.updateArea(durationForExit);\r\n      $$.updateCircle(cx, cy);\r\n      // text\r\n      if ($$.hasDataLabel()) {\r\n          $$.updateText(xForText, yForText, durationForExit);\r\n      }\r\n      // title\r\n      if ($$.redrawTitle) {\r\n          $$.redrawTitle();\r\n      }\r\n      // arc\r\n      if ($$.redrawArc) {\r\n          $$.redrawArc(duration, durationForExit, withTransform);\r\n      }\r\n      // subchart\r\n      if (config.subchart_show && $$.redrawSubchart) {\r\n          $$.redrawSubchart(withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices);\r\n      }\r\n      if ($$.isStanfordGraphType()) {\r\n          $$.drawColorScale();\r\n      }\r\n      // circles for select\r\n      main\r\n          .selectAll('.' + CLASS.selectedCircles)\r\n          .filter($$.isBarType.bind($$))\r\n          .selectAll('circle')\r\n          .remove();\r\n      if (options.flow) {\r\n          flow = $$.generateFlow({\r\n              targets: targetsToShow,\r\n              flow: options.flow,\r\n              duration: options.flow.duration,\r\n              drawBar: drawBar,\r\n              drawLine: drawLine,\r\n              drawArea: drawArea,\r\n              cx: cx,\r\n              cy: cy,\r\n              xv: xv,\r\n              xForText: xForText,\r\n              yForText: yForText\r\n          });\r\n      }\r\n      if (duration && $$.isTabVisible()) {\r\n          // Only use transition if tab visible. See #938.\r\n          // transition should be derived from one transition\r\n          transition = d3.transition().duration(duration);\r\n          transitionsToWait = [];\r\n          [\r\n              $$.redrawBar(drawBar, true, transition),\r\n              $$.redrawLine(drawLine, true, transition),\r\n              $$.redrawArea(drawArea, true, transition),\r\n              $$.redrawCircle(cx, cy, true, transition),\r\n              $$.redrawText(xForText, yForText, options.flow, true, transition),\r\n              $$.redrawRegion(true, transition),\r\n              $$.redrawGrid(true, transition)\r\n          ].forEach(function (transitions) {\r\n              transitions.forEach(function (transition) {\r\n                  transitionsToWait.push(transition);\r\n              });\r\n          });\r\n          // Wait for end of transitions to call flow and onrendered callback\r\n          waitForDraw = $$.generateWait();\r\n          transitionsToWait.forEach(function (t) {\r\n              waitForDraw.add(t);\r\n          });\r\n          waitForDraw(function () {\r\n              if (flow) {\r\n                  flow();\r\n              }\r\n              if (config.onrendered) {\r\n                  config.onrendered.call($$);\r\n              }\r\n          });\r\n      }\r\n      else {\r\n          $$.redrawBar(drawBar);\r\n          $$.redrawLine(drawLine);\r\n          $$.redrawArea(drawArea);\r\n          $$.redrawCircle(cx, cy);\r\n          $$.redrawText(xForText, yForText, options.flow);\r\n          $$.redrawRegion();\r\n          $$.redrawGrid();\r\n          if (flow) {\r\n              flow();\r\n          }\r\n          if (config.onrendered) {\r\n              config.onrendered.call($$);\r\n          }\r\n      }\r\n      // update fadein condition\r\n      $$.mapToIds($$.data.targets).forEach(function (id) {\r\n          $$.withoutFadeIn[id] = true;\r\n      });\r\n  };\r\n  ChartInternal.prototype.updateAndRedraw = function (options) {\r\n      var $$ = this, config = $$.config, transitions;\r\n      options = options || {};\r\n      // same with redraw\r\n      options.withTransition = getOption(options, 'withTransition', true);\r\n      options.withTransform = getOption(options, 'withTransform', false);\r\n      options.withLegend = getOption(options, 'withLegend', false);\r\n      // NOT same with redraw\r\n      options.withUpdateXDomain = getOption(options, 'withUpdateXDomain', true);\r\n      options.withUpdateOrgXDomain = getOption(options, 'withUpdateOrgXDomain', true);\r\n      options.withTransitionForExit = false;\r\n      options.withTransitionForTransform = getOption(options, 'withTransitionForTransform', options.withTransition);\r\n      // MEMO: this needs to be called before updateLegend and it means this ALWAYS needs to be called)\r\n      $$.updateSizes();\r\n      // MEMO: called in updateLegend in redraw if withLegend\r\n      if (!(options.withLegend && config.legend_show)) {\r\n          transitions = $$.axis.generateTransitions(options.withTransitionForAxis ? config.transition_duration : 0);\r\n          // Update scales\r\n          $$.updateScales();\r\n          $$.updateSvgSize();\r\n          // Update g positions\r\n          $$.transformAll(options.withTransitionForTransform, transitions);\r\n      }\r\n      // Draw with new sizes & scales\r\n      $$.redraw(options, transitions);\r\n  };\r\n  ChartInternal.prototype.redrawWithoutRescale = function () {\r\n      this.redraw({\r\n          withY: false,\r\n          withSubchart: false,\r\n          withEventRect: false,\r\n          withTransitionForAxis: false\r\n      });\r\n  };\r\n  ChartInternal.prototype.isTimeSeries = function () {\r\n      return this.config.axis_x_type === 'timeseries';\r\n  };\r\n  ChartInternal.prototype.isCategorized = function () {\r\n      return this.config.axis_x_type.indexOf('categor') >= 0;\r\n  };\r\n  ChartInternal.prototype.isCustomX = function () {\r\n      var $$ = this, config = $$.config;\r\n      return !$$.isTimeSeries() && (config.data_x || notEmpty(config.data_xs));\r\n  };\r\n  ChartInternal.prototype.isTimeSeriesY = function () {\r\n      return this.config.axis_y_type === 'timeseries';\r\n  };\r\n  ChartInternal.prototype.getTranslate = function (target) {\r\n      var $$ = this, config = $$.config, x, y;\r\n      if (target === 'main') {\r\n          x = asHalfPixel($$.margin.left);\r\n          y = asHalfPixel($$.margin.top);\r\n      }\r\n      else if (target === 'context') {\r\n          x = asHalfPixel($$.margin2.left);\r\n          y = asHalfPixel($$.margin2.top);\r\n      }\r\n      else if (target === 'legend') {\r\n          x = $$.margin3.left;\r\n          y = $$.margin3.top;\r\n      }\r\n      else if (target === 'x') {\r\n          x = 0;\r\n          y = config.axis_rotated ? 0 : $$.height;\r\n      }\r\n      else if (target === 'y') {\r\n          x = 0;\r\n          y = config.axis_rotated ? $$.height : 0;\r\n      }\r\n      else if (target === 'y2') {\r\n          x = config.axis_rotated ? 0 : $$.width;\r\n          y = config.axis_rotated ? 1 : 0;\r\n      }\r\n      else if (target === 'subx') {\r\n          x = 0;\r\n          y = config.axis_rotated ? 0 : $$.height2;\r\n      }\r\n      else if (target === 'arc') {\r\n          x = $$.arcWidth / 2;\r\n          y = $$.arcHeight / 2 - ($$.hasType('gauge') ? 6 : 0); // to prevent wrong display of min and max label\r\n      }\r\n      return 'translate(' + x + ',' + y + ')';\r\n  };\r\n  ChartInternal.prototype.initialOpacity = function (d) {\r\n      return d.value !== null && this.withoutFadeIn[d.id] ? 1 : 0;\r\n  };\r\n  ChartInternal.prototype.initialOpacityForCircle = function (d) {\r\n      return d.value !== null && this.withoutFadeIn[d.id]\r\n          ? this.opacityForCircle(d)\r\n          : 0;\r\n  };\r\n  ChartInternal.prototype.opacityForCircle = function (d) {\r\n      var isPointShouldBeShown = isFunction(this.config.point_show)\r\n          ? this.config.point_show(d)\r\n          : this.config.point_show;\r\n      var opacity = isPointShouldBeShown || this.isStanfordType(d) ? 1 : 0;\r\n      return isValue(d.value) ? (this.isScatterType(d) ? 0.5 : opacity) : 0;\r\n  };\r\n  ChartInternal.prototype.opacityForText = function () {\r\n      return this.hasDataLabel() ? 1 : 0;\r\n  };\r\n  ChartInternal.prototype.xx = function (d) {\r\n      return d ? this.x(d.x) : null;\r\n  };\r\n  ChartInternal.prototype.xvCustom = function (d, xyValue) {\r\n      var $$ = this, value = xyValue ? d[xyValue] : d.value;\r\n      if ($$.isTimeSeries()) {\r\n          value = $$.parseDate(d.value);\r\n      }\r\n      else if ($$.isCategorized() && typeof d.value === 'string') {\r\n          value = $$.config.axis_x_categories.indexOf(d.value);\r\n      }\r\n      return Math.ceil($$.x(value));\r\n  };\r\n  ChartInternal.prototype.yvCustom = function (d, xyValue) {\r\n      var $$ = this, yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y, value = xyValue ? d[xyValue] : d.value;\r\n      return Math.ceil(yScale(value));\r\n  };\r\n  ChartInternal.prototype.xv = function (d) {\r\n      var $$ = this, value = d.value;\r\n      if ($$.isTimeSeries()) {\r\n          value = $$.parseDate(d.value);\r\n      }\r\n      else if ($$.isCategorized() && typeof d.value === 'string') {\r\n          value = $$.config.axis_x_categories.indexOf(d.value);\r\n      }\r\n      return Math.ceil($$.x(value));\r\n  };\r\n  ChartInternal.prototype.yv = function (d) {\r\n      var $$ = this, yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y;\r\n      return Math.ceil(yScale(d.value));\r\n  };\r\n  ChartInternal.prototype.subxx = function (d) {\r\n      return d ? this.subX(d.x) : null;\r\n  };\r\n  ChartInternal.prototype.transformMain = function (withTransition, transitions) {\r\n      var $$ = this, xAxis, yAxis, y2Axis;\r\n      if (transitions && transitions.axisX) {\r\n          xAxis = transitions.axisX;\r\n      }\r\n      else {\r\n          xAxis = $$.main.select('.' + CLASS.axisX);\r\n          if (withTransition) {\r\n              xAxis = xAxis.transition();\r\n          }\r\n      }\r\n      if (transitions && transitions.axisY) {\r\n          yAxis = transitions.axisY;\r\n      }\r\n      else {\r\n          yAxis = $$.main.select('.' + CLASS.axisY);\r\n          if (withTransition) {\r\n              yAxis = yAxis.transition();\r\n          }\r\n      }\r\n      if (transitions && transitions.axisY2) {\r\n          y2Axis = transitions.axisY2;\r\n      }\r\n      else {\r\n          y2Axis = $$.main.select('.' + CLASS.axisY2);\r\n          if (withTransition) {\r\n              y2Axis = y2Axis.transition();\r\n          }\r\n      }\r\n      (withTransition ? $$.main.transition() : $$.main).attr('transform', $$.getTranslate('main'));\r\n      xAxis.attr('transform', $$.getTranslate('x'));\r\n      yAxis.attr('transform', $$.getTranslate('y'));\r\n      y2Axis.attr('transform', $$.getTranslate('y2'));\r\n      $$.main\r\n          .select('.' + CLASS.chartArcs)\r\n          .attr('transform', $$.getTranslate('arc'));\r\n  };\r\n  ChartInternal.prototype.transformAll = function (withTransition, transitions) {\r\n      var $$ = this;\r\n      $$.transformMain(withTransition, transitions);\r\n      if ($$.config.subchart_show) {\r\n          $$.transformContext(withTransition, transitions);\r\n      }\r\n      if ($$.legend) {\r\n          $$.transformLegend(withTransition);\r\n      }\r\n  };\r\n  ChartInternal.prototype.updateSvgSize = function () {\r\n      var $$ = this, brush = $$.svg.select(\".\" + CLASS.brush + \" .overlay\");\r\n      $$.svg.attr('width', $$.currentWidth).attr('height', $$.currentHeight);\r\n      $$.svg\r\n          .selectAll(['#' + $$.clipId, '#' + $$.clipIdForGrid])\r\n          .select('rect')\r\n          .attr('width', $$.width)\r\n          .attr('height', $$.height);\r\n      $$.svg\r\n          .select('#' + $$.clipIdForXAxis)\r\n          .select('rect')\r\n          .attr('x', $$.getXAxisClipX.bind($$))\r\n          .attr('y', $$.getXAxisClipY.bind($$))\r\n          .attr('width', $$.getXAxisClipWidth.bind($$))\r\n          .attr('height', $$.getXAxisClipHeight.bind($$));\r\n      $$.svg\r\n          .select('#' + $$.clipIdForYAxis)\r\n          .select('rect')\r\n          .attr('x', $$.getYAxisClipX.bind($$))\r\n          .attr('y', $$.getYAxisClipY.bind($$))\r\n          .attr('width', $$.getYAxisClipWidth.bind($$))\r\n          .attr('height', $$.getYAxisClipHeight.bind($$));\r\n      $$.svg\r\n          .select('#' + $$.clipIdForSubchart)\r\n          .select('rect')\r\n          .attr('width', $$.width)\r\n          .attr('height', (brush.size() && brush.attr('height')) || 0);\r\n      // MEMO: parent div's height will be bigger than svg when <!DOCTYPE html>\r\n      $$.selectChart.style('max-height', $$.currentHeight + 'px');\r\n  };\r\n  ChartInternal.prototype.updateDimension = function (withoutAxis) {\r\n      var $$ = this;\r\n      if (!withoutAxis) {\r\n          if ($$.config.axis_rotated) {\r\n              $$.axes.x.call($$.xAxis);\r\n              $$.axes.subx.call($$.subXAxis);\r\n          }\r\n          else {\r\n              $$.axes.y.call($$.yAxis);\r\n              $$.axes.y2.call($$.y2Axis);\r\n          }\r\n      }\r\n      $$.updateSizes();\r\n      $$.updateScales();\r\n      $$.updateSvgSize();\r\n      $$.transformAll(false);\r\n  };\r\n  ChartInternal.prototype.observeInserted = function (selection) {\r\n      var $$ = this, observer;\r\n      if (typeof MutationObserver === 'undefined') {\r\n          window.console.error('MutationObserver not defined.');\r\n          return;\r\n      }\r\n      observer = new MutationObserver(function (mutations) {\r\n          mutations.forEach(function (mutation) {\r\n              if (mutation.type === 'childList' && mutation.previousSibling) {\r\n                  observer.disconnect();\r\n                  // need to wait for completion of load because size calculation requires the actual sizes determined after that completion\r\n                  $$.intervalForObserveInserted = window.setInterval(function () {\r\n                      // parentNode will NOT be null when completed\r\n                      if (selection.node().parentNode) {\r\n                          window.clearInterval($$.intervalForObserveInserted);\r\n                          $$.updateDimension();\r\n                          if ($$.brush) {\r\n                              $$.brush.update();\r\n                          }\r\n                          $$.config.oninit.call($$);\r\n                          $$.redraw({\r\n                              withTransform: true,\r\n                              withUpdateXDomain: true,\r\n                              withUpdateOrgXDomain: true,\r\n                              withTransition: false,\r\n                              withTransitionForTransform: false,\r\n                              withLegend: true\r\n                          });\r\n                          selection.transition().style('opacity', 1);\r\n                      }\r\n                  }, 10);\r\n              }\r\n          });\r\n      });\r\n      observer.observe(selection.node(), {\r\n          attributes: true,\r\n          childList: true,\r\n          characterData: true\r\n      });\r\n  };\r\n  /**\r\n   * Binds handlers to the window resize event.\r\n   */\r\n  ChartInternal.prototype.bindResize = function () {\r\n      var $$ = this, config = $$.config;\r\n      $$.resizeFunction = $$.generateResize(); // need to call .remove\r\n      $$.resizeFunction.add(function () {\r\n          config.onresize.call($$);\r\n      });\r\n      if (config.resize_auto) {\r\n          $$.resizeFunction.add(function () {\r\n              if ($$.resizeTimeout !== undefined) {\r\n                  window.clearTimeout($$.resizeTimeout);\r\n              }\r\n              $$.resizeTimeout = window.setTimeout(function () {\r\n                  delete $$.resizeTimeout;\r\n                  $$.updateAndRedraw({\r\n                      withUpdateXDomain: false,\r\n                      withUpdateOrgXDomain: false,\r\n                      withTransition: false,\r\n                      withTransitionForTransform: false,\r\n                      withLegend: true\r\n                  });\r\n                  if ($$.brush) {\r\n                      $$.brush.update();\r\n                  }\r\n              }, 100);\r\n          });\r\n      }\r\n      $$.resizeFunction.add(function () {\r\n          config.onresized.call($$);\r\n      });\r\n      $$.resizeIfElementDisplayed = function () {\r\n          // if element not displayed skip it\r\n          if ($$.api == null || !$$.api.element.offsetParent) {\r\n              return;\r\n          }\r\n          $$.resizeFunction();\r\n      };\r\n      window.addEventListener('resize', $$.resizeIfElementDisplayed, false);\r\n  };\r\n  /**\r\n   * Binds handlers to the window focus event.\r\n   */\r\n  ChartInternal.prototype.bindWindowFocus = function () {\r\n      var _this = this;\r\n      if (this.windowFocusHandler) {\r\n          // The handler is already set\r\n          return;\r\n      }\r\n      this.windowFocusHandler = function () {\r\n          _this.redraw();\r\n      };\r\n      window.addEventListener('focus', this.windowFocusHandler);\r\n  };\r\n  /**\r\n   * Unbinds from the window focus event.\r\n   */\r\n  ChartInternal.prototype.unbindWindowFocus = function () {\r\n      window.removeEventListener('focus', this.windowFocusHandler);\r\n      delete this.windowFocusHandler;\r\n  };\r\n  ChartInternal.prototype.generateResize = function () {\r\n      var resizeFunctions = [];\r\n      function callResizeFunctions() {\r\n          resizeFunctions.forEach(function (f) {\r\n              f();\r\n          });\r\n      }\r\n      callResizeFunctions.add = function (f) {\r\n          resizeFunctions.push(f);\r\n      };\r\n      callResizeFunctions.remove = function (f) {\r\n          for (var i = 0; i < resizeFunctions.length; i++) {\r\n              if (resizeFunctions[i] === f) {\r\n                  resizeFunctions.splice(i, 1);\r\n                  break;\r\n              }\r\n          }\r\n      };\r\n      return callResizeFunctions;\r\n  };\r\n  ChartInternal.prototype.endall = function (transition, callback) {\r\n      var n = 0;\r\n      transition\r\n          .each(function () {\r\n          ++n;\r\n      })\r\n          .on('end', function () {\r\n          if (!--n) {\r\n              callback.apply(this, arguments);\r\n          }\r\n      });\r\n  };\r\n  ChartInternal.prototype.generateWait = function () {\r\n      var $$ = this;\r\n      var transitionsToWait = [], f = function (callback) {\r\n          var timer = setInterval(function () {\r\n              if (!$$.isTabVisible()) {\r\n                  return;\r\n              }\r\n              var done = 0;\r\n              transitionsToWait.forEach(function (t) {\r\n                  if (t.empty()) {\r\n                      done += 1;\r\n                      return;\r\n                  }\r\n                  try {\r\n                      t.transition();\r\n                  }\r\n                  catch (e) {\r\n                      done += 1;\r\n                  }\r\n              });\r\n              if (done === transitionsToWait.length) {\r\n                  clearInterval(timer);\r\n                  if (callback) {\r\n                      callback();\r\n                  }\r\n              }\r\n          }, 50);\r\n      };\r\n      f.add = function (transition) {\r\n          transitionsToWait.push(transition);\r\n      };\r\n      return f;\r\n  };\r\n  ChartInternal.prototype.parseDate = function (date) {\r\n      var $$ = this, parsedDate;\r\n      if (date instanceof Date) {\r\n          parsedDate = date;\r\n      }\r\n      else if (typeof date === 'string') {\r\n          parsedDate = $$.dataTimeParse(date);\r\n      }\r\n      else if (typeof date === 'object') {\r\n          parsedDate = new Date(+date);\r\n      }\r\n      else if (typeof date === 'number' && !isNaN(date)) {\r\n          parsedDate = new Date(+date);\r\n      }\r\n      if (!parsedDate || isNaN(+parsedDate)) {\r\n          window.console.error(\"Failed to parse x '\" + date + \"' to Date object\");\r\n      }\r\n      return parsedDate;\r\n  };\r\n  ChartInternal.prototype.isTabVisible = function () {\r\n      return !document.hidden;\r\n  };\r\n  ChartInternal.prototype.getPathBox = getPathBox;\r\n  ChartInternal.prototype.CLASS = CLASS;\n\n  /* jshint ignore:start */\r\n  (function () {\r\n      if (!('SVGPathSeg' in window)) {\r\n          // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSeg\r\n          window.SVGPathSeg = function (type, typeAsLetter, owningPathSegList) {\r\n              this.pathSegType = type;\r\n              this.pathSegTypeAsLetter = typeAsLetter;\r\n              this._owningPathSegList = owningPathSegList;\r\n          };\r\n          window.SVGPathSeg.prototype.classname = 'SVGPathSeg';\r\n          window.SVGPathSeg.PATHSEG_UNKNOWN = 0;\r\n          window.SVGPathSeg.PATHSEG_CLOSEPATH = 1;\r\n          window.SVGPathSeg.PATHSEG_MOVETO_ABS = 2;\r\n          window.SVGPathSeg.PATHSEG_MOVETO_REL = 3;\r\n          window.SVGPathSeg.PATHSEG_LINETO_ABS = 4;\r\n          window.SVGPathSeg.PATHSEG_LINETO_REL = 5;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS = 6;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL = 7;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS = 8;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL = 9;\r\n          window.SVGPathSeg.PATHSEG_ARC_ABS = 10;\r\n          window.SVGPathSeg.PATHSEG_ARC_REL = 11;\r\n          window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS = 12;\r\n          window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL = 13;\r\n          window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS = 14;\r\n          window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL = 15;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS = 16;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL = 17;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS = 18;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL = 19;\r\n          // Notify owning PathSegList on any changes so they can be synchronized back to the path element.\r\n          window.SVGPathSeg.prototype._segmentChanged = function () {\r\n              if (this._owningPathSegList)\r\n                  this._owningPathSegList.segmentChanged(this);\r\n          };\r\n          window.SVGPathSegClosePath = function (owningPathSegList) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CLOSEPATH, 'z', owningPathSegList);\r\n          };\r\n          window.SVGPathSegClosePath.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegClosePath.prototype.toString = function () {\r\n              return '[object SVGPathSegClosePath]';\r\n          };\r\n          window.SVGPathSegClosePath.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter;\r\n          };\r\n          window.SVGPathSegClosePath.prototype.clone = function () {\r\n              return new window.SVGPathSegClosePath(undefined);\r\n          };\r\n          window.SVGPathSegMovetoAbs = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_ABS, 'M', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegMovetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegMovetoAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegMovetoAbs]';\r\n          };\r\n          window.SVGPathSegMovetoAbs.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegMovetoAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegMovetoAbs(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegMovetoRel = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_REL, 'm', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegMovetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegMovetoRel.prototype.toString = function () {\r\n              return '[object SVGPathSegMovetoRel]';\r\n          };\r\n          window.SVGPathSegMovetoRel.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegMovetoRel.prototype.clone = function () {\r\n              return new window.SVGPathSegMovetoRel(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoAbs = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_ABS, 'L', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegLinetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoAbs]';\r\n          };\r\n          window.SVGPathSegLinetoAbs.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegLinetoAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoAbs(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoRel = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_REL, 'l', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegLinetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoRel.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoRel]';\r\n          };\r\n          window.SVGPathSegLinetoRel.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegLinetoRel.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoRel(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoCubicAbs = function (owningPathSegList, x, y, x1, y1, x2, y2) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS, 'C', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x1 = x1;\r\n              this._y1 = y1;\r\n              this._x2 = x2;\r\n              this._y2 = y2;\r\n          };\r\n          window.SVGPathSegCurvetoCubicAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoCubicAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoCubicAbs]';\r\n          };\r\n          window.SVGPathSegCurvetoCubicAbs.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x1 +\r\n                  ' ' +\r\n                  this._y1 +\r\n                  ' ' +\r\n                  this._x2 +\r\n                  ' ' +\r\n                  this._y2 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoCubicAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoCubicAbs(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x1', {\r\n              get: function () {\r\n                  return this._x1;\r\n              },\r\n              set: function (x1) {\r\n                  this._x1 = x1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y1', {\r\n              get: function () {\r\n                  return this._y1;\r\n              },\r\n              set: function (y1) {\r\n                  this._y1 = y1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x2', {\r\n              get: function () {\r\n                  return this._x2;\r\n              },\r\n              set: function (x2) {\r\n                  this._x2 = x2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y2', {\r\n              get: function () {\r\n                  return this._y2;\r\n              },\r\n              set: function (y2) {\r\n                  this._y2 = y2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoCubicRel = function (owningPathSegList, x, y, x1, y1, x2, y2) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL, 'c', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x1 = x1;\r\n              this._y1 = y1;\r\n              this._x2 = x2;\r\n              this._y2 = y2;\r\n          };\r\n          window.SVGPathSegCurvetoCubicRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoCubicRel.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoCubicRel]';\r\n          };\r\n          window.SVGPathSegCurvetoCubicRel.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x1 +\r\n                  ' ' +\r\n                  this._y1 +\r\n                  ' ' +\r\n                  this._x2 +\r\n                  ' ' +\r\n                  this._y2 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoCubicRel.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoCubicRel(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x1', {\r\n              get: function () {\r\n                  return this._x1;\r\n              },\r\n              set: function (x1) {\r\n                  this._x1 = x1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y1', {\r\n              get: function () {\r\n                  return this._y1;\r\n              },\r\n              set: function (y1) {\r\n                  this._y1 = y1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x2', {\r\n              get: function () {\r\n                  return this._x2;\r\n              },\r\n              set: function (x2) {\r\n                  this._x2 = x2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y2', {\r\n              get: function () {\r\n                  return this._y2;\r\n              },\r\n              set: function (y2) {\r\n                  this._y2 = y2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoQuadraticAbs = function (owningPathSegList, x, y, x1, y1) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS, 'Q', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x1 = x1;\r\n              this._y1 = y1;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoQuadraticAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoQuadraticAbs]';\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x1 +\r\n                  ' ' +\r\n                  this._y1 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoQuadraticAbs(undefined, this._x, this._y, this._x1, this._y1);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x1', {\r\n              get: function () {\r\n                  return this._x1;\r\n              },\r\n              set: function (x1) {\r\n                  this._x1 = x1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y1', {\r\n              get: function () {\r\n                  return this._y1;\r\n              },\r\n              set: function (y1) {\r\n                  this._y1 = y1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoQuadraticRel = function (owningPathSegList, x, y, x1, y1) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL, 'q', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x1 = x1;\r\n              this._y1 = y1;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoQuadraticRel.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoQuadraticRel]';\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x1 +\r\n                  ' ' +\r\n                  this._y1 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticRel.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoQuadraticRel(undefined, this._x, this._y, this._x1, this._y1);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x1', {\r\n              get: function () {\r\n                  return this._x1;\r\n              },\r\n              set: function (x1) {\r\n                  this._x1 = x1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y1', {\r\n              get: function () {\r\n                  return this._y1;\r\n              },\r\n              set: function (y1) {\r\n                  this._y1 = y1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegArcAbs = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_ABS, 'A', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._r1 = r1;\r\n              this._r2 = r2;\r\n              this._angle = angle;\r\n              this._largeArcFlag = largeArcFlag;\r\n              this._sweepFlag = sweepFlag;\r\n          };\r\n          window.SVGPathSegArcAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegArcAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegArcAbs]';\r\n          };\r\n          window.SVGPathSegArcAbs.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._r1 +\r\n                  ' ' +\r\n                  this._r2 +\r\n                  ' ' +\r\n                  this._angle +\r\n                  ' ' +\r\n                  (this._largeArcFlag ? '1' : '0') +\r\n                  ' ' +\r\n                  (this._sweepFlag ? '1' : '0') +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegArcAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegArcAbs(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r1', {\r\n              get: function () {\r\n                  return this._r1;\r\n              },\r\n              set: function (r1) {\r\n                  this._r1 = r1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r2', {\r\n              get: function () {\r\n                  return this._r2;\r\n              },\r\n              set: function (r2) {\r\n                  this._r2 = r2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'angle', {\r\n              get: function () {\r\n                  return this._angle;\r\n              },\r\n              set: function (angle) {\r\n                  this._angle = angle;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'largeArcFlag', {\r\n              get: function () {\r\n                  return this._largeArcFlag;\r\n              },\r\n              set: function (largeArcFlag) {\r\n                  this._largeArcFlag = largeArcFlag;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'sweepFlag', {\r\n              get: function () {\r\n                  return this._sweepFlag;\r\n              },\r\n              set: function (sweepFlag) {\r\n                  this._sweepFlag = sweepFlag;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegArcRel = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_REL, 'a', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._r1 = r1;\r\n              this._r2 = r2;\r\n              this._angle = angle;\r\n              this._largeArcFlag = largeArcFlag;\r\n              this._sweepFlag = sweepFlag;\r\n          };\r\n          window.SVGPathSegArcRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegArcRel.prototype.toString = function () {\r\n              return '[object SVGPathSegArcRel]';\r\n          };\r\n          window.SVGPathSegArcRel.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._r1 +\r\n                  ' ' +\r\n                  this._r2 +\r\n                  ' ' +\r\n                  this._angle +\r\n                  ' ' +\r\n                  (this._largeArcFlag ? '1' : '0') +\r\n                  ' ' +\r\n                  (this._sweepFlag ? '1' : '0') +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegArcRel.prototype.clone = function () {\r\n              return new window.SVGPathSegArcRel(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r1', {\r\n              get: function () {\r\n                  return this._r1;\r\n              },\r\n              set: function (r1) {\r\n                  this._r1 = r1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r2', {\r\n              get: function () {\r\n                  return this._r2;\r\n              },\r\n              set: function (r2) {\r\n                  this._r2 = r2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'angle', {\r\n              get: function () {\r\n                  return this._angle;\r\n              },\r\n              set: function (angle) {\r\n                  this._angle = angle;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'largeArcFlag', {\r\n              get: function () {\r\n                  return this._largeArcFlag;\r\n              },\r\n              set: function (largeArcFlag) {\r\n                  this._largeArcFlag = largeArcFlag;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'sweepFlag', {\r\n              get: function () {\r\n                  return this._sweepFlag;\r\n              },\r\n              set: function (sweepFlag) {\r\n                  this._sweepFlag = sweepFlag;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoHorizontalAbs = function (owningPathSegList, x) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS, 'H', owningPathSegList);\r\n              this._x = x;\r\n          };\r\n          window.SVGPathSegLinetoHorizontalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoHorizontalAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoHorizontalAbs]';\r\n          };\r\n          window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x;\r\n          };\r\n          window.SVGPathSegLinetoHorizontalAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoHorizontalAbs(undefined, this._x);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoHorizontalRel = function (owningPathSegList, x) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL, 'h', owningPathSegList);\r\n              this._x = x;\r\n          };\r\n          window.SVGPathSegLinetoHorizontalRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoHorizontalRel.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoHorizontalRel]';\r\n          };\r\n          window.SVGPathSegLinetoHorizontalRel.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x;\r\n          };\r\n          window.SVGPathSegLinetoHorizontalRel.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoHorizontalRel(undefined, this._x);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoVerticalAbs = function (owningPathSegList, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS, 'V', owningPathSegList);\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegLinetoVerticalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoVerticalAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoVerticalAbs]';\r\n          };\r\n          window.SVGPathSegLinetoVerticalAbs.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegLinetoVerticalAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoVerticalAbs(undefined, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoVerticalRel = function (owningPathSegList, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL, 'v', owningPathSegList);\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegLinetoVerticalRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoVerticalRel.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoVerticalRel]';\r\n          };\r\n          window.SVGPathSegLinetoVerticalRel.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegLinetoVerticalRel.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoVerticalRel(undefined, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoCubicSmoothAbs = function (owningPathSegList, x, y, x2, y2) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS, 'S', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x2 = x2;\r\n              this._y2 = y2;\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoCubicSmoothAbs]';\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x2 +\r\n                  ' ' +\r\n                  this._y2 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, this._x, this._y, this._x2, this._y2);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x2', {\r\n              get: function () {\r\n                  return this._x2;\r\n              },\r\n              set: function (x2) {\r\n                  this._x2 = x2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y2', {\r\n              get: function () {\r\n                  return this._y2;\r\n              },\r\n              set: function (y2) {\r\n                  this._y2 = y2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoCubicSmoothRel = function (owningPathSegList, x, y, x2, y2) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL, 's', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x2 = x2;\r\n              this._y2 = y2;\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoCubicSmoothRel]';\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x2 +\r\n                  ' ' +\r\n                  this._y2 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, this._x, this._y, this._x2, this._y2);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x2', {\r\n              get: function () {\r\n                  return this._x2;\r\n              },\r\n              set: function (x2) {\r\n                  this._x2 = x2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y2', {\r\n              get: function () {\r\n                  return this._y2;\r\n              },\r\n              set: function (y2) {\r\n                  this._y2 = y2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoQuadraticSmoothAbs = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS, 'T', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoQuadraticSmoothAbs]';\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoQuadraticSmoothRel = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL, 't', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoQuadraticSmoothRel]';\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          // Add createSVGPathSeg* functions to window.SVGPathElement.\r\n          // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-Interfacewindow.SVGPathElement.\r\n          window.SVGPathElement.prototype.createSVGPathSegClosePath = function () {\r\n              return new window.SVGPathSegClosePath(undefined);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegMovetoAbs = function (x, y) {\r\n              return new window.SVGPathSegMovetoAbs(undefined, x, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegMovetoRel = function (x, y) {\r\n              return new window.SVGPathSegMovetoRel(undefined, x, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoAbs = function (x, y) {\r\n              return new window.SVGPathSegLinetoAbs(undefined, x, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoRel = function (x, y) {\r\n              return new window.SVGPathSegLinetoRel(undefined, x, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs = function (x, y, x1, y1, x2, y2) {\r\n              return new window.SVGPathSegCurvetoCubicAbs(undefined, x, y, x1, y1, x2, y2);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel = function (x, y, x1, y1, x2, y2) {\r\n              return new window.SVGPathSegCurvetoCubicRel(undefined, x, y, x1, y1, x2, y2);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs = function (x, y, x1, y1) {\r\n              return new window.SVGPathSegCurvetoQuadraticAbs(undefined, x, y, x1, y1);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel = function (x, y, x1, y1) {\r\n              return new window.SVGPathSegCurvetoQuadraticRel(undefined, x, y, x1, y1);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegArcAbs = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\r\n              return new window.SVGPathSegArcAbs(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegArcRel = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\r\n              return new window.SVGPathSegArcRel(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs = function (x) {\r\n              return new window.SVGPathSegLinetoHorizontalAbs(undefined, x);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel = function (x) {\r\n              return new window.SVGPathSegLinetoHorizontalRel(undefined, x);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs = function (y) {\r\n              return new window.SVGPathSegLinetoVerticalAbs(undefined, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel = function (y) {\r\n              return new window.SVGPathSegLinetoVerticalRel(undefined, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs = function (x, y, x2, y2) {\r\n              return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, x, y, x2, y2);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel = function (x, y, x2, y2) {\r\n              return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, x, y, x2, y2);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs = function (x, y) {\r\n              return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, x, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel = function (x, y) {\r\n              return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, x, y);\r\n          };\r\n          if (!('getPathSegAtLength' in window.SVGPathElement.prototype)) {\r\n              // Add getPathSegAtLength to SVGPathElement.\r\n              // Spec: https://www.w3.org/TR/SVG11/single-page.html#paths-__svg__SVGPathElement__getPathSegAtLength\r\n              // This polyfill requires SVGPathElement.getTotalLength to implement the distance-along-a-path algorithm.\r\n              window.SVGPathElement.prototype.getPathSegAtLength = function (distance) {\r\n                  if (distance === undefined || !isFinite(distance))\r\n                      throw 'Invalid arguments.';\r\n                  var measurementElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n                  measurementElement.setAttribute('d', this.getAttribute('d'));\r\n                  var lastPathSegment = measurementElement.pathSegList.numberOfItems - 1;\r\n                  // If the path is empty, return 0.\r\n                  if (lastPathSegment <= 0)\r\n                      return 0;\r\n                  do {\r\n                      measurementElement.pathSegList.removeItem(lastPathSegment);\r\n                      if (distance > measurementElement.getTotalLength())\r\n                          break;\r\n                      lastPathSegment--;\r\n                  } while (lastPathSegment > 0);\r\n                  return lastPathSegment;\r\n              };\r\n          }\r\n      }\r\n      if (!('SVGPathSegList' in window)) {\r\n          // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSegList\r\n          window.SVGPathSegList = function (pathElement) {\r\n              this._pathElement = pathElement;\r\n              this._list = this._parsePath(this._pathElement.getAttribute('d'));\r\n              // Use a MutationObserver to catch changes to the path's \"d\" attribute.\r\n              this._mutationObserverConfig = {\r\n                  attributes: true,\r\n                  attributeFilter: ['d']\r\n              };\r\n              this._pathElementMutationObserver = new MutationObserver(this._updateListFromPathMutations.bind(this));\r\n              this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\r\n          };\r\n          window.SVGPathSegList.prototype.classname = 'SVGPathSegList';\r\n          Object.defineProperty(window.SVGPathSegList.prototype, 'numberOfItems', {\r\n              get: function () {\r\n                  this._checkPathSynchronizedToList();\r\n                  return this._list.length;\r\n              },\r\n              enumerable: true\r\n          });\r\n          // Add the pathSegList accessors to window.SVGPathElement.\r\n          // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGAnimatedPathData\r\n          Object.defineProperty(window.SVGPathElement.prototype, 'pathSegList', {\r\n              get: function () {\r\n                  if (!this._pathSegList)\r\n                      this._pathSegList = new window.SVGPathSegList(this);\r\n                  return this._pathSegList;\r\n              },\r\n              enumerable: true\r\n          });\r\n          // FIXME: The following are not implemented and simply return window.SVGPathElement.pathSegList.\r\n          Object.defineProperty(window.SVGPathElement.prototype, 'normalizedPathSegList', {\r\n              get: function () {\r\n                  return this.pathSegList;\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathElement.prototype, 'animatedPathSegList', {\r\n              get: function () {\r\n                  return this.pathSegList;\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathElement.prototype, 'animatedNormalizedPathSegList', {\r\n              get: function () {\r\n                  return this.pathSegList;\r\n              },\r\n              enumerable: true\r\n          });\r\n          // Process any pending mutations to the path element and update the list as needed.\r\n          // This should be the first call of all public functions and is needed because\r\n          // MutationObservers are not synchronous so we can have pending asynchronous mutations.\r\n          window.SVGPathSegList.prototype._checkPathSynchronizedToList = function () {\r\n              this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords());\r\n          };\r\n          window.SVGPathSegList.prototype._updateListFromPathMutations = function (mutationRecords) {\r\n              if (!this._pathElement)\r\n                  return;\r\n              var hasPathMutations = false;\r\n              mutationRecords.forEach(function (record) {\r\n                  if (record.attributeName == 'd')\r\n                      hasPathMutations = true;\r\n              });\r\n              if (hasPathMutations)\r\n                  this._list = this._parsePath(this._pathElement.getAttribute('d'));\r\n          };\r\n          // Serialize the list and update the path's 'd' attribute.\r\n          window.SVGPathSegList.prototype._writeListToPath = function () {\r\n              this._pathElementMutationObserver.disconnect();\r\n              this._pathElement.setAttribute('d', window.SVGPathSegList._pathSegArrayAsString(this._list));\r\n              this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\r\n          };\r\n          // When a path segment changes the list needs to be synchronized back to the path element.\r\n          window.SVGPathSegList.prototype.segmentChanged = function (pathSeg) {\r\n              this._writeListToPath();\r\n          };\r\n          window.SVGPathSegList.prototype.clear = function () {\r\n              this._checkPathSynchronizedToList();\r\n              this._list.forEach(function (pathSeg) {\r\n                  pathSeg._owningPathSegList = null;\r\n              });\r\n              this._list = [];\r\n              this._writeListToPath();\r\n          };\r\n          window.SVGPathSegList.prototype.initialize = function (newItem) {\r\n              this._checkPathSynchronizedToList();\r\n              this._list = [newItem];\r\n              newItem._owningPathSegList = this;\r\n              this._writeListToPath();\r\n              return newItem;\r\n          };\r\n          window.SVGPathSegList.prototype._checkValidIndex = function (index) {\r\n              if (isNaN(index) || index < 0 || index >= this.numberOfItems)\r\n                  throw 'INDEX_SIZE_ERR';\r\n          };\r\n          window.SVGPathSegList.prototype.getItem = function (index) {\r\n              this._checkPathSynchronizedToList();\r\n              this._checkValidIndex(index);\r\n              return this._list[index];\r\n          };\r\n          window.SVGPathSegList.prototype.insertItemBefore = function (newItem, index) {\r\n              this._checkPathSynchronizedToList();\r\n              // Spec: If the index is greater than or equal to numberOfItems, then the new item is appended to the end of the list.\r\n              if (index > this.numberOfItems)\r\n                  index = this.numberOfItems;\r\n              if (newItem._owningPathSegList) {\r\n                  // SVG2 spec says to make a copy.\r\n                  newItem = newItem.clone();\r\n              }\r\n              this._list.splice(index, 0, newItem);\r\n              newItem._owningPathSegList = this;\r\n              this._writeListToPath();\r\n              return newItem;\r\n          };\r\n          window.SVGPathSegList.prototype.replaceItem = function (newItem, index) {\r\n              this._checkPathSynchronizedToList();\r\n              if (newItem._owningPathSegList) {\r\n                  // SVG2 spec says to make a copy.\r\n                  newItem = newItem.clone();\r\n              }\r\n              this._checkValidIndex(index);\r\n              this._list[index] = newItem;\r\n              newItem._owningPathSegList = this;\r\n              this._writeListToPath();\r\n              return newItem;\r\n          };\r\n          window.SVGPathSegList.prototype.removeItem = function (index) {\r\n              this._checkPathSynchronizedToList();\r\n              this._checkValidIndex(index);\r\n              var item = this._list[index];\r\n              this._list.splice(index, 1);\r\n              this._writeListToPath();\r\n              return item;\r\n          };\r\n          window.SVGPathSegList.prototype.appendItem = function (newItem) {\r\n              this._checkPathSynchronizedToList();\r\n              if (newItem._owningPathSegList) {\r\n                  // SVG2 spec says to make a copy.\r\n                  newItem = newItem.clone();\r\n              }\r\n              this._list.push(newItem);\r\n              newItem._owningPathSegList = this;\r\n              // TODO: Optimize this to just append to the existing attribute.\r\n              this._writeListToPath();\r\n              return newItem;\r\n          };\r\n          window.SVGPathSegList._pathSegArrayAsString = function (pathSegArray) {\r\n              var string = '';\r\n              var first = true;\r\n              pathSegArray.forEach(function (pathSeg) {\r\n                  if (first) {\r\n                      first = false;\r\n                      string += pathSeg._asPathString();\r\n                  }\r\n                  else {\r\n                      string += ' ' + pathSeg._asPathString();\r\n                  }\r\n              });\r\n              return string;\r\n          };\r\n          // This closely follows SVGPathParser::parsePath from Source/core/svg/SVGPathParser.cpp.\r\n          window.SVGPathSegList.prototype._parsePath = function (string) {\r\n              if (!string || string.length == 0)\r\n                  return [];\r\n              var owningPathSegList = this;\r\n              var Builder = function () {\r\n                  this.pathSegList = [];\r\n              };\r\n              Builder.prototype.appendSegment = function (pathSeg) {\r\n                  this.pathSegList.push(pathSeg);\r\n              };\r\n              var Source = function (string) {\r\n                  this._string = string;\r\n                  this._currentIndex = 0;\r\n                  this._endIndex = this._string.length;\r\n                  this._previousCommand = window.SVGPathSeg.PATHSEG_UNKNOWN;\r\n                  this._skipOptionalSpaces();\r\n              };\r\n              Source.prototype._isCurrentSpace = function () {\r\n                  var character = this._string[this._currentIndex];\r\n                  return (character <= ' ' &&\r\n                      (character == ' ' ||\r\n                          character == '\\n' ||\r\n                          character == '\\t' ||\r\n                          character == '\\r' ||\r\n                          character == '\\f'));\r\n              };\r\n              Source.prototype._skipOptionalSpaces = function () {\r\n                  while (this._currentIndex < this._endIndex && this._isCurrentSpace())\r\n                      this._currentIndex++;\r\n                  return this._currentIndex < this._endIndex;\r\n              };\r\n              Source.prototype._skipOptionalSpacesOrDelimiter = function () {\r\n                  if (this._currentIndex < this._endIndex &&\r\n                      !this._isCurrentSpace() &&\r\n                      this._string.charAt(this._currentIndex) != ',')\r\n                      return false;\r\n                  if (this._skipOptionalSpaces()) {\r\n                      if (this._currentIndex < this._endIndex &&\r\n                          this._string.charAt(this._currentIndex) == ',') {\r\n                          this._currentIndex++;\r\n                          this._skipOptionalSpaces();\r\n                      }\r\n                  }\r\n                  return this._currentIndex < this._endIndex;\r\n              };\r\n              Source.prototype.hasMoreData = function () {\r\n                  return this._currentIndex < this._endIndex;\r\n              };\r\n              Source.prototype.peekSegmentType = function () {\r\n                  var lookahead = this._string[this._currentIndex];\r\n                  return this._pathSegTypeFromChar(lookahead);\r\n              };\r\n              Source.prototype._pathSegTypeFromChar = function (lookahead) {\r\n                  switch (lookahead) {\r\n                      case 'Z':\r\n                      case 'z':\r\n                          return window.SVGPathSeg.PATHSEG_CLOSEPATH;\r\n                      case 'M':\r\n                          return window.SVGPathSeg.PATHSEG_MOVETO_ABS;\r\n                      case 'm':\r\n                          return window.SVGPathSeg.PATHSEG_MOVETO_REL;\r\n                      case 'L':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_ABS;\r\n                      case 'l':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_REL;\r\n                      case 'C':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;\r\n                      case 'c':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;\r\n                      case 'Q':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;\r\n                      case 'q':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;\r\n                      case 'A':\r\n                          return window.SVGPathSeg.PATHSEG_ARC_ABS;\r\n                      case 'a':\r\n                          return window.SVGPathSeg.PATHSEG_ARC_REL;\r\n                      case 'H':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;\r\n                      case 'h':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;\r\n                      case 'V':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;\r\n                      case 'v':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;\r\n                      case 'S':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;\r\n                      case 's':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;\r\n                      case 'T':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;\r\n                      case 't':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;\r\n                      default:\r\n                          return window.SVGPathSeg.PATHSEG_UNKNOWN;\r\n                  }\r\n              };\r\n              Source.prototype._nextCommandHelper = function (lookahead, previousCommand) {\r\n                  // Check for remaining coordinates in the current command.\r\n                  if ((lookahead == '+' ||\r\n                      lookahead == '-' ||\r\n                      lookahead == '.' ||\r\n                      (lookahead >= '0' && lookahead <= '9')) &&\r\n                      previousCommand != window.SVGPathSeg.PATHSEG_CLOSEPATH) {\r\n                      if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_ABS)\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_ABS;\r\n                      if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_REL)\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_REL;\r\n                      return previousCommand;\r\n                  }\r\n                  return window.SVGPathSeg.PATHSEG_UNKNOWN;\r\n              };\r\n              Source.prototype.initialCommandIsMoveTo = function () {\r\n                  // If the path is empty it is still valid, so return true.\r\n                  if (!this.hasMoreData())\r\n                      return true;\r\n                  var command = this.peekSegmentType();\r\n                  // Path must start with moveTo.\r\n                  return (command == window.SVGPathSeg.PATHSEG_MOVETO_ABS ||\r\n                      command == window.SVGPathSeg.PATHSEG_MOVETO_REL);\r\n              };\r\n              // Parse a number from an SVG path. This very closely follows genericParseNumber(...) from Source/core/svg/SVGParserUtilities.cpp.\r\n              // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-PathDataBNF\r\n              Source.prototype._parseNumber = function () {\r\n                  var exponent = 0;\r\n                  var integer = 0;\r\n                  var frac = 1;\r\n                  var decimal = 0;\r\n                  var sign = 1;\r\n                  var expsign = 1;\r\n                  var startIndex = this._currentIndex;\r\n                  this._skipOptionalSpaces();\r\n                  // Read the sign.\r\n                  if (this._currentIndex < this._endIndex &&\r\n                      this._string.charAt(this._currentIndex) == '+')\r\n                      this._currentIndex++;\r\n                  else if (this._currentIndex < this._endIndex &&\r\n                      this._string.charAt(this._currentIndex) == '-') {\r\n                      this._currentIndex++;\r\n                      sign = -1;\r\n                  }\r\n                  if (this._currentIndex == this._endIndex ||\r\n                      ((this._string.charAt(this._currentIndex) < '0' ||\r\n                          this._string.charAt(this._currentIndex) > '9') &&\r\n                          this._string.charAt(this._currentIndex) != '.'))\r\n                      // The first character of a number must be one of [0-9+-.].\r\n                      return undefined;\r\n                  // Read the integer part, build right-to-left.\r\n                  var startIntPartIndex = this._currentIndex;\r\n                  while (this._currentIndex < this._endIndex &&\r\n                      this._string.charAt(this._currentIndex) >= '0' &&\r\n                      this._string.charAt(this._currentIndex) <= '9')\r\n                      this._currentIndex++; // Advance to first non-digit.\r\n                  if (this._currentIndex != startIntPartIndex) {\r\n                      var scanIntPartIndex = this._currentIndex - 1;\r\n                      var multiplier = 1;\r\n                      while (scanIntPartIndex >= startIntPartIndex) {\r\n                          integer +=\r\n                              multiplier * (this._string.charAt(scanIntPartIndex--) - '0');\r\n                          multiplier *= 10;\r\n                      }\r\n                  }\r\n                  // Read the decimals.\r\n                  if (this._currentIndex < this._endIndex &&\r\n                      this._string.charAt(this._currentIndex) == '.') {\r\n                      this._currentIndex++;\r\n                      // There must be a least one digit following the .\r\n                      if (this._currentIndex >= this._endIndex ||\r\n                          this._string.charAt(this._currentIndex) < '0' ||\r\n                          this._string.charAt(this._currentIndex) > '9')\r\n                          return undefined;\r\n                      while (this._currentIndex < this._endIndex &&\r\n                          this._string.charAt(this._currentIndex) >= '0' &&\r\n                          this._string.charAt(this._currentIndex) <= '9') {\r\n                          frac *= 10;\r\n                          decimal += (this._string.charAt(this._currentIndex) - '0') / frac;\r\n                          this._currentIndex += 1;\r\n                      }\r\n                  }\r\n                  // Read the exponent part.\r\n                  if (this._currentIndex != startIndex &&\r\n                      this._currentIndex + 1 < this._endIndex &&\r\n                      (this._string.charAt(this._currentIndex) == 'e' ||\r\n                          this._string.charAt(this._currentIndex) == 'E') &&\r\n                      this._string.charAt(this._currentIndex + 1) != 'x' &&\r\n                      this._string.charAt(this._currentIndex + 1) != 'm') {\r\n                      this._currentIndex++;\r\n                      // Read the sign of the exponent.\r\n                      if (this._string.charAt(this._currentIndex) == '+') {\r\n                          this._currentIndex++;\r\n                      }\r\n                      else if (this._string.charAt(this._currentIndex) == '-') {\r\n                          this._currentIndex++;\r\n                          expsign = -1;\r\n                      }\r\n                      // There must be an exponent.\r\n                      if (this._currentIndex >= this._endIndex ||\r\n                          this._string.charAt(this._currentIndex) < '0' ||\r\n                          this._string.charAt(this._currentIndex) > '9')\r\n                          return undefined;\r\n                      while (this._currentIndex < this._endIndex &&\r\n                          this._string.charAt(this._currentIndex) >= '0' &&\r\n                          this._string.charAt(this._currentIndex) <= '9') {\r\n                          exponent *= 10;\r\n                          exponent += this._string.charAt(this._currentIndex) - '0';\r\n                          this._currentIndex++;\r\n                      }\r\n                  }\r\n                  var number = integer + decimal;\r\n                  number *= sign;\r\n                  if (exponent)\r\n                      number *= Math.pow(10, expsign * exponent);\r\n                  if (startIndex == this._currentIndex)\r\n                      return undefined;\r\n                  this._skipOptionalSpacesOrDelimiter();\r\n                  return number;\r\n              };\r\n              Source.prototype._parseArcFlag = function () {\r\n                  if (this._currentIndex >= this._endIndex)\r\n                      return undefined;\r\n                  var flag = false;\r\n                  var flagChar = this._string.charAt(this._currentIndex++);\r\n                  if (flagChar == '0')\r\n                      flag = false;\r\n                  else if (flagChar == '1')\r\n                      flag = true;\r\n                  else\r\n                      return undefined;\r\n                  this._skipOptionalSpacesOrDelimiter();\r\n                  return flag;\r\n              };\r\n              Source.prototype.parseSegment = function () {\r\n                  var lookahead = this._string[this._currentIndex];\r\n                  var command = this._pathSegTypeFromChar(lookahead);\r\n                  if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) {\r\n                      // Possibly an implicit command. Not allowed if this is the first command.\r\n                      if (this._previousCommand == window.SVGPathSeg.PATHSEG_UNKNOWN)\r\n                          return null;\r\n                      command = this._nextCommandHelper(lookahead, this._previousCommand);\r\n                      if (command == window.SVGPathSeg.PATHSEG_UNKNOWN)\r\n                          return null;\r\n                  }\r\n                  else {\r\n                      this._currentIndex++;\r\n                  }\r\n                  this._previousCommand = command;\r\n                  switch (command) {\r\n                      case window.SVGPathSeg.PATHSEG_MOVETO_REL:\r\n                          return new window.SVGPathSegMovetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_MOVETO_ABS:\r\n                          return new window.SVGPathSegMovetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_REL:\r\n                          return new window.SVGPathSegLinetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_ABS:\r\n                          return new window.SVGPathSegLinetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:\r\n                          return new window.SVGPathSegLinetoHorizontalRel(owningPathSegList, this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:\r\n                          return new window.SVGPathSegLinetoHorizontalAbs(owningPathSegList, this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:\r\n                          return new window.SVGPathSegLinetoVerticalRel(owningPathSegList, this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:\r\n                          return new window.SVGPathSegLinetoVerticalAbs(owningPathSegList, this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_CLOSEPATH:\r\n                          this._skipOptionalSpaces();\r\n                          return new window.SVGPathSegClosePath(owningPathSegList);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              x2: this._parseNumber(),\r\n                              y2: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoCubicRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              x2: this._parseNumber(),\r\n                              y2: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoCubicAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:\r\n                          var points = {\r\n                              x2: this._parseNumber(),\r\n                              y2: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoCubicSmoothRel(owningPathSegList, points.x, points.y, points.x2, points.y2);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:\r\n                          var points = {\r\n                              x2: this._parseNumber(),\r\n                              y2: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoCubicSmoothAbs(owningPathSegList, points.x, points.y, points.x2, points.y2);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoQuadraticRel(owningPathSegList, points.x, points.y, points.x1, points.y1);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoQuadraticAbs(owningPathSegList, points.x, points.y, points.x1, points.y1);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:\r\n                          return new window.SVGPathSegCurvetoQuadraticSmoothRel(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:\r\n                          return new window.SVGPathSegCurvetoQuadraticSmoothAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_ARC_REL:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              arcAngle: this._parseNumber(),\r\n                              arcLarge: this._parseArcFlag(),\r\n                              arcSweep: this._parseArcFlag(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegArcRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\r\n                      case window.SVGPathSeg.PATHSEG_ARC_ABS:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              arcAngle: this._parseNumber(),\r\n                              arcLarge: this._parseArcFlag(),\r\n                              arcSweep: this._parseArcFlag(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegArcAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\r\n                      default:\r\n                          throw 'Unknown path seg type.';\r\n                  }\r\n              };\r\n              var builder = new Builder();\r\n              var source = new Source(string);\r\n              if (!source.initialCommandIsMoveTo())\r\n                  return [];\r\n              while (source.hasMoreData()) {\r\n                  var pathSeg = source.parseSegment();\r\n                  if (!pathSeg)\r\n                      return [];\r\n                  builder.appendSegment(pathSeg);\r\n              }\r\n              return builder.pathSegList;\r\n          };\r\n      }\r\n  })();\r\n  // String.padEnd polyfill for IE11\r\n  //\r\n  // https://github.com/uxitten/polyfill/blob/master/string.polyfill.js\r\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd\r\n  if (!String.prototype.padEnd) {\r\n      String.prototype.padEnd = function padEnd(targetLength, padString) {\r\n          targetLength = targetLength >> 0; //floor if number or convert non-number to 0;\r\n          padString = String(typeof padString !== 'undefined' ? padString : ' ');\r\n          if (this.length > targetLength) {\r\n              return String(this);\r\n          }\r\n          else {\r\n              targetLength = targetLength - this.length;\r\n              if (targetLength > padString.length) {\r\n                  padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\r\n              }\r\n              return String(this) + padString.slice(0, targetLength);\r\n          }\r\n      };\r\n  }\r\n  // Object.assign polyfill for IE11\r\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\r\n  if (typeof Object.assign !== 'function') {\r\n      // Must be writable: true, enumerable: false, configurable: true\r\n      Object.defineProperty(Object, 'assign', {\r\n          value: function assign(target, varArgs) {\r\n              if (target === null || target === undefined) {\r\n                  throw new TypeError('Cannot convert undefined or null to object');\r\n              }\r\n              var to = Object(target);\r\n              for (var index = 1; index < arguments.length; index++) {\r\n                  var nextSource = arguments[index];\r\n                  if (nextSource !== null && nextSource !== undefined) {\r\n                      for (var nextKey in nextSource) {\r\n                          // Avoid bugs when hasOwnProperty is shadowed\r\n                          if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n                              to[nextKey] = nextSource[nextKey];\r\n                          }\r\n                      }\r\n                  }\r\n              }\r\n              return to;\r\n          },\r\n          writable: true,\r\n          configurable: true\r\n      });\r\n  }\r\n  /* jshint ignore:end */\n\n  Chart.prototype.axis = function () { };\r\n  Chart.prototype.axis.labels = function (labels) {\r\n      var $$ = this.internal;\r\n      if (arguments.length) {\r\n          Object.keys(labels).forEach(function (axisId) {\r\n              $$.axis.setLabelText(axisId, labels[axisId]);\r\n          });\r\n          $$.axis.updateLabels();\r\n      }\r\n      // TODO: return some values?\r\n  };\r\n  Chart.prototype.axis.max = function (max) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (arguments.length) {\r\n          if (typeof max === 'object') {\r\n              if (isValue(max.x)) {\r\n                  config.axis_x_max = max.x;\r\n              }\r\n              if (isValue(max.y)) {\r\n                  config.axis_y_max = max.y;\r\n              }\r\n              if (isValue(max.y2)) {\r\n                  config.axis_y2_max = max.y2;\r\n              }\r\n          }\r\n          else {\r\n              config.axis_y_max = config.axis_y2_max = max;\r\n          }\r\n          $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\r\n      }\r\n      else {\r\n          return {\r\n              x: config.axis_x_max,\r\n              y: config.axis_y_max,\r\n              y2: config.axis_y2_max\r\n          };\r\n      }\r\n  };\r\n  Chart.prototype.axis.min = function (min) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (arguments.length) {\r\n          if (typeof min === 'object') {\r\n              if (isValue(min.x)) {\r\n                  config.axis_x_min = min.x;\r\n              }\r\n              if (isValue(min.y)) {\r\n                  config.axis_y_min = min.y;\r\n              }\r\n              if (isValue(min.y2)) {\r\n                  config.axis_y2_min = min.y2;\r\n              }\r\n          }\r\n          else {\r\n              config.axis_y_min = config.axis_y2_min = min;\r\n          }\r\n          $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\r\n      }\r\n      else {\r\n          return {\r\n              x: config.axis_x_min,\r\n              y: config.axis_y_min,\r\n              y2: config.axis_y2_min\r\n          };\r\n      }\r\n  };\r\n  Chart.prototype.axis.range = function (range) {\r\n      if (arguments.length) {\r\n          if (isDefined(range.max)) {\r\n              this.axis.max(range.max);\r\n          }\r\n          if (isDefined(range.min)) {\r\n              this.axis.min(range.min);\r\n          }\r\n      }\r\n      else {\r\n          return {\r\n              max: this.axis.max(),\r\n              min: this.axis.min()\r\n          };\r\n      }\r\n  };\r\n  Chart.prototype.axis.types = function (types) {\r\n      var $$ = this.internal;\r\n      if (types === undefined) {\r\n          return {\r\n              y: $$.config.axis_y_type,\r\n              y2: $$.config.axis_y2_type\r\n          };\r\n      }\r\n      else {\r\n          if (isDefined(types.y)) {\r\n              $$.config.axis_y_type = types.y;\r\n          }\r\n          if (isDefined(types.y2)) {\r\n              $$.config.axis_y2_type = types.y2;\r\n          }\r\n          $$.updateScales();\r\n          $$.redraw();\r\n      }\r\n  };\n\n  Chart.prototype.category = function (i, category) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (arguments.length > 1) {\r\n          config.axis_x_categories[i] = category;\r\n          $$.redraw();\r\n      }\r\n      return config.axis_x_categories[i];\r\n  };\r\n  Chart.prototype.categories = function (categories) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (!arguments.length) {\r\n          return config.axis_x_categories;\r\n      }\r\n      config.axis_x_categories = categories;\r\n      $$.redraw();\r\n      return config.axis_x_categories;\r\n  };\n\n  Chart.prototype.resize = function (size) {\r\n      var $$ = this.internal, config = $$.config;\r\n      config.size_width = size ? size.width : null;\r\n      config.size_height = size ? size.height : null;\r\n      this.flush();\r\n  };\r\n  Chart.prototype.flush = function () {\r\n      var $$ = this.internal;\r\n      $$.updateAndRedraw({\r\n          withLegend: true,\r\n          withTransition: false,\r\n          withTransitionForTransform: false\r\n      });\r\n  };\r\n  Chart.prototype.destroy = function () {\r\n      var $$ = this.internal;\r\n      window.clearInterval($$.intervalForObserveInserted);\r\n      if ($$.resizeTimeout !== undefined) {\r\n          window.clearTimeout($$.resizeTimeout);\r\n      }\r\n      window.removeEventListener('resize', $$.resizeIfElementDisplayed);\r\n      // Removes the inner resize functions\r\n      $$.resizeFunction.remove();\r\n      // Unbinds from the window focus event\r\n      $$.unbindWindowFocus();\r\n      $$.selectChart.classed('c3', false).html('');\r\n      // MEMO: this is needed because the reference of some elements will not be released, then memory leak will happen.\r\n      Object.keys($$).forEach(function (key) {\r\n          $$[key] = null;\r\n      });\r\n      return null;\r\n  };\n\n  // TODO: fix\r\n  Chart.prototype.color = function (id) {\r\n      var $$ = this.internal;\r\n      return $$.color(id); // more patterns\r\n  };\n\n  Chart.prototype.data = function (targetIds) {\r\n      var targets = this.internal.data.targets;\r\n      return typeof targetIds === 'undefined'\r\n          ? targets\r\n          : targets.filter(function (t) {\r\n              return [].concat(targetIds).indexOf(t.id) >= 0;\r\n          });\r\n  };\r\n  Chart.prototype.data.shown = function (targetIds) {\r\n      return this.internal.filterTargetsToShow(this.data(targetIds));\r\n  };\r\n  /**\r\n   * Get values of the data loaded in the chart.\r\n   *\r\n   * @param {String|Array} targetId This API returns the value of specified target.\r\n   * @param flat\r\n   * @return {Array} Data values\r\n   */\r\n  Chart.prototype.data.values = function (targetId, flat) {\r\n      if (flat === void 0) { flat = true; }\r\n      var values = null;\r\n      if (targetId) {\r\n          var targets = this.data(targetId);\r\n          if (targets && isArray(targets)) {\r\n              values = targets.reduce(function (ret, v) {\r\n                  var dataValue = v.values.map(function (d) { return d.value; });\r\n                  if (flat) {\r\n                      ret = ret.concat(dataValue);\r\n                  }\r\n                  else {\r\n                      ret.push(dataValue);\r\n                  }\r\n                  return ret;\r\n              }, []);\r\n          }\r\n      }\r\n      return values;\r\n  };\r\n  Chart.prototype.data.names = function (names) {\r\n      this.internal.clearLegendItemTextBoxCache();\r\n      return this.internal.updateDataAttributes('names', names);\r\n  };\r\n  Chart.prototype.data.colors = function (colors) {\r\n      return this.internal.updateDataAttributes('colors', colors);\r\n  };\r\n  Chart.prototype.data.axes = function (axes) {\r\n      return this.internal.updateDataAttributes('axes', axes);\r\n  };\r\n  Chart.prototype.data.stackNormalized = function (normalized) {\r\n      if (normalized === undefined) {\r\n          return this.internal.isStackNormalized();\r\n      }\r\n      this.internal.config.data_stack_normalize = !!normalized;\r\n      this.internal.redraw();\r\n  };\n\n  Chart.prototype.donut = function () { };\r\n  Chart.prototype.donut.padAngle = function (padAngle) {\r\n      if (padAngle === undefined) {\r\n          return this.internal.config.donut_padAngle;\r\n      }\r\n      this.internal.config.donut_padAngle = padAngle;\r\n      this.flush();\r\n  };\n\n  Chart.prototype.flow = function (args) {\r\n      var $$ = this.internal, targets, data, notfoundIds = [], orgDataCount = $$.getMaxDataCount(), dataCount, domain, baseTarget, baseValue, length = 0, tail = 0, diff, to;\r\n      if (args.json) {\r\n          data = $$.convertJsonToData(args.json, args.keys);\r\n      }\r\n      else if (args.rows) {\r\n          data = $$.convertRowsToData(args.rows);\r\n      }\r\n      else if (args.columns) {\r\n          data = $$.convertColumnsToData(args.columns);\r\n      }\r\n      else {\r\n          return;\r\n      }\r\n      targets = $$.convertDataToTargets(data, true);\r\n      // Update/Add data\r\n      $$.data.targets.forEach(function (t) {\r\n          var found = false, i, j;\r\n          for (i = 0; i < targets.length; i++) {\r\n              if (t.id === targets[i].id) {\r\n                  found = true;\r\n                  if (t.values[t.values.length - 1]) {\r\n                      tail = t.values[t.values.length - 1].index + 1;\r\n                  }\r\n                  length = targets[i].values.length;\r\n                  for (j = 0; j < length; j++) {\r\n                      targets[i].values[j].index = tail + j;\r\n                      if (!$$.isTimeSeries()) {\r\n                          targets[i].values[j].x = tail + j;\r\n                      }\r\n                  }\r\n                  t.values = t.values.concat(targets[i].values);\r\n                  targets.splice(i, 1);\r\n                  break;\r\n              }\r\n          }\r\n          if (!found) {\r\n              notfoundIds.push(t.id);\r\n          }\r\n      });\r\n      // Append null for not found targets\r\n      $$.data.targets.forEach(function (t) {\r\n          var i, j;\r\n          for (i = 0; i < notfoundIds.length; i++) {\r\n              if (t.id === notfoundIds[i]) {\r\n                  tail = t.values[t.values.length - 1].index + 1;\r\n                  for (j = 0; j < length; j++) {\r\n                      t.values.push({\r\n                          id: t.id,\r\n                          index: tail + j,\r\n                          x: $$.isTimeSeries() ? $$.getOtherTargetX(tail + j) : tail + j,\r\n                          value: null\r\n                      });\r\n                  }\r\n              }\r\n          }\r\n      });\r\n      // Generate null values for new target\r\n      if ($$.data.targets.length) {\r\n          targets.forEach(function (t) {\r\n              var i, missing = [];\r\n              for (i = $$.data.targets[0].values[0].index; i < tail; i++) {\r\n                  missing.push({\r\n                      id: t.id,\r\n                      index: i,\r\n                      x: $$.isTimeSeries() ? $$.getOtherTargetX(i) : i,\r\n                      value: null\r\n                  });\r\n              }\r\n              t.values.forEach(function (v) {\r\n                  v.index += tail;\r\n                  if (!$$.isTimeSeries()) {\r\n                      v.x += tail;\r\n                  }\r\n              });\r\n              t.values = missing.concat(t.values);\r\n          });\r\n      }\r\n      $$.data.targets = $$.data.targets.concat(targets); // add remained\r\n      // check data count because behavior needs to change when it's only one\r\n      dataCount = $$.getMaxDataCount();\r\n      baseTarget = $$.data.targets[0];\r\n      baseValue = baseTarget.values[0];\r\n      // Update length to flow if needed\r\n      if (isDefined(args.to)) {\r\n          length = 0;\r\n          to = $$.isTimeSeries() ? $$.parseDate(args.to) : args.to;\r\n          baseTarget.values.forEach(function (v) {\r\n              if (v.x < to) {\r\n                  length++;\r\n              }\r\n          });\r\n      }\r\n      else if (isDefined(args.length)) {\r\n          length = args.length;\r\n      }\r\n      // If only one data, update the domain to flow from left edge of the chart\r\n      if (!orgDataCount) {\r\n          if ($$.isTimeSeries()) {\r\n              if (baseTarget.values.length > 1) {\r\n                  diff = baseTarget.values[baseTarget.values.length - 1].x - baseValue.x;\r\n              }\r\n              else {\r\n                  diff = baseValue.x - $$.getXDomain($$.data.targets)[0];\r\n              }\r\n          }\r\n          else {\r\n              diff = 1;\r\n          }\r\n          domain = [baseValue.x - diff, baseValue.x];\r\n          $$.updateXDomain(null, true, true, false, domain);\r\n      }\r\n      else if (orgDataCount === 1) {\r\n          if ($$.isTimeSeries()) {\r\n              diff =\r\n                  (baseTarget.values[baseTarget.values.length - 1].x - baseValue.x) / 2;\r\n              domain = [new Date(+baseValue.x - diff), new Date(+baseValue.x + diff)];\r\n              $$.updateXDomain(null, true, true, false, domain);\r\n          }\r\n      }\r\n      // Set targets\r\n      $$.updateTargets($$.data.targets);\r\n      // Redraw with new targets\r\n      $$.redraw({\r\n          flow: {\r\n              index: baseValue.index,\r\n              length: length,\r\n              duration: isValue(args.duration)\r\n                  ? args.duration\r\n                  : $$.config.transition_duration,\r\n              done: args.done,\r\n              orgDataCount: orgDataCount\r\n          },\r\n          withLegend: true,\r\n          withTransition: orgDataCount > 1,\r\n          withTrimXDomain: false,\r\n          withUpdateXAxis: true\r\n      });\r\n  };\r\n  ChartInternal.prototype.generateFlow = function (args) {\r\n      var $$ = this, config = $$.config, d3 = $$.d3;\r\n      return function () {\r\n          var targets = args.targets, flow = args.flow, drawBar = args.drawBar, drawLine = args.drawLine, drawArea = args.drawArea, cx = args.cx, cy = args.cy, xv = args.xv, xForText = args.xForText, yForText = args.yForText, duration = args.duration;\r\n          var translateX, scaleX = 1, transform, flowIndex = flow.index, flowLength = flow.length, flowStart = $$.getValueOnIndex($$.data.targets[0].values, flowIndex), flowEnd = $$.getValueOnIndex($$.data.targets[0].values, flowIndex + flowLength), orgDomain = $$.x.domain(), domain, durationForFlow = flow.duration || duration, done = flow.done || function () { }, wait = $$.generateWait();\r\n          var xgrid, xgridLines, mainRegion, mainText, mainBar, mainLine, mainArea, mainCircle;\r\n          // set flag\r\n          $$.flowing = true;\r\n          // remove head data after rendered\r\n          $$.data.targets.forEach(function (d) {\r\n              d.values.splice(0, flowLength);\r\n          });\r\n          // update x domain to generate axis elements for flow\r\n          domain = $$.updateXDomain(targets, true, true);\r\n          // update elements related to x scale\r\n          if ($$.updateXGrid) {\r\n              $$.updateXGrid(true);\r\n          }\r\n          xgrid = $$.xgrid || d3.selectAll([]); // xgrid needs to be obtained after updateXGrid\r\n          xgridLines = $$.xgridLines || d3.selectAll([]);\r\n          mainRegion = $$.mainRegion || d3.selectAll([]);\r\n          mainText = $$.mainText || d3.selectAll([]);\r\n          mainBar = $$.mainBar || d3.selectAll([]);\r\n          mainLine = $$.mainLine || d3.selectAll([]);\r\n          mainArea = $$.mainArea || d3.selectAll([]);\r\n          mainCircle = $$.mainCircle || d3.selectAll([]);\r\n          // generate transform to flow\r\n          if (!flow.orgDataCount) {\r\n              // if empty\r\n              if ($$.data.targets[0].values.length !== 1) {\r\n                  translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\r\n              }\r\n              else {\r\n                  if ($$.isTimeSeries()) {\r\n                      flowStart = $$.getValueOnIndex($$.data.targets[0].values, 0);\r\n                      flowEnd = $$.getValueOnIndex($$.data.targets[0].values, $$.data.targets[0].values.length - 1);\r\n                      translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\r\n                  }\r\n                  else {\r\n                      translateX = diffDomain(domain) / 2;\r\n                  }\r\n              }\r\n          }\r\n          else if (flow.orgDataCount === 1 ||\r\n              (flowStart && flowStart.x) === (flowEnd && flowEnd.x)) {\r\n              translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\r\n          }\r\n          else {\r\n              if ($$.isTimeSeries()) {\r\n                  translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\r\n              }\r\n              else {\r\n                  translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\r\n              }\r\n          }\r\n          scaleX = diffDomain(orgDomain) / diffDomain(domain);\r\n          transform = 'translate(' + translateX + ',0) scale(' + scaleX + ',1)';\r\n          $$.hideXGridFocus();\r\n          var flowTransition = d3\r\n              .transition()\r\n              .ease(d3.easeLinear)\r\n              .duration(durationForFlow);\r\n          wait.add($$.xAxis($$.axes.x, flowTransition));\r\n          wait.add(mainBar.transition(flowTransition).attr('transform', transform));\r\n          wait.add(mainLine.transition(flowTransition).attr('transform', transform));\r\n          wait.add(mainArea.transition(flowTransition).attr('transform', transform));\r\n          wait.add(mainCircle.transition(flowTransition).attr('transform', transform));\r\n          wait.add(mainText.transition(flowTransition).attr('transform', transform));\r\n          wait.add(mainRegion\r\n              .filter($$.isRegionOnX)\r\n              .transition(flowTransition)\r\n              .attr('transform', transform));\r\n          wait.add(xgrid.transition(flowTransition).attr('transform', transform));\r\n          wait.add(xgridLines.transition(flowTransition).attr('transform', transform));\r\n          wait(function () {\r\n              var i, shapes = [], texts = [];\r\n              // remove flowed elements\r\n              if (flowLength) {\r\n                  for (i = 0; i < flowLength; i++) {\r\n                      shapes.push('.' + CLASS.shape + '-' + (flowIndex + i));\r\n                      texts.push('.' + CLASS.text + '-' + (flowIndex + i));\r\n                  }\r\n                  $$.svg\r\n                      .selectAll('.' + CLASS.shapes)\r\n                      .selectAll(shapes)\r\n                      .remove();\r\n                  $$.svg\r\n                      .selectAll('.' + CLASS.texts)\r\n                      .selectAll(texts)\r\n                      .remove();\r\n                  $$.svg.select('.' + CLASS.xgrid).remove();\r\n              }\r\n              // draw again for removing flowed elements and reverting attr\r\n              xgrid\r\n                  .attr('transform', null)\r\n                  .attr('x1', $$.xgridAttr.x1)\r\n                  .attr('x2', $$.xgridAttr.x2)\r\n                  .attr('y1', $$.xgridAttr.y1)\r\n                  .attr('y2', $$.xgridAttr.y2)\r\n                  .style('opacity', $$.xgridAttr.opacity);\r\n              xgridLines.attr('transform', null);\r\n              xgridLines\r\n                  .select('line')\r\n                  .attr('x1', config.axis_rotated ? 0 : xv)\r\n                  .attr('x2', config.axis_rotated ? $$.width : xv);\r\n              xgridLines\r\n                  .select('text')\r\n                  .attr('x', config.axis_rotated ? $$.width : 0)\r\n                  .attr('y', xv);\r\n              mainBar.attr('transform', null).attr('d', drawBar);\r\n              mainLine.attr('transform', null).attr('d', drawLine);\r\n              mainArea.attr('transform', null).attr('d', drawArea);\r\n              mainCircle\r\n                  .attr('transform', null)\r\n                  .attr('cx', cx)\r\n                  .attr('cy', cy);\r\n              mainText\r\n                  .attr('transform', null)\r\n                  .attr('x', xForText)\r\n                  .attr('y', yForText)\r\n                  .style('fill-opacity', $$.opacityForText.bind($$));\r\n              mainRegion.attr('transform', null);\r\n              mainRegion\r\n                  .filter($$.isRegionOnX)\r\n                  .attr('x', $$.regionX.bind($$))\r\n                  .attr('width', $$.regionWidth.bind($$));\r\n              // callback for end of flow\r\n              done();\r\n              $$.flowing = false;\r\n          });\r\n      };\r\n  };\n\n  Chart.prototype.focus = function (targetIds) {\r\n      var $$ = this.internal, candidates;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      (candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$)))),\r\n          this.revert();\r\n      this.defocus();\r\n      candidates.classed(CLASS.focused, true).classed(CLASS.defocused, false);\r\n      if ($$.hasArcType()) {\r\n          $$.expandArc(targetIds);\r\n      }\r\n      $$.toggleFocusLegend(targetIds, true);\r\n      $$.focusedTargetIds = targetIds;\r\n      $$.defocusedTargetIds = $$.defocusedTargetIds.filter(function (id) {\r\n          return targetIds.indexOf(id) < 0;\r\n      });\r\n  };\r\n  Chart.prototype.defocus = function (targetIds) {\r\n      var $$ = this.internal, candidates;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      (candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$)))),\r\n          candidates.classed(CLASS.focused, false).classed(CLASS.defocused, true);\r\n      if ($$.hasArcType()) {\r\n          $$.unexpandArc(targetIds);\r\n      }\r\n      $$.toggleFocusLegend(targetIds, false);\r\n      $$.focusedTargetIds = $$.focusedTargetIds.filter(function (id) {\r\n          return targetIds.indexOf(id) < 0;\r\n      });\r\n      $$.defocusedTargetIds = targetIds;\r\n  };\r\n  Chart.prototype.revert = function (targetIds) {\r\n      var $$ = this.internal, candidates;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      candidates = $$.svg.selectAll($$.selectorTargets(targetIds)); // should be for all targets\r\n      candidates.classed(CLASS.focused, false).classed(CLASS.defocused, false);\r\n      if ($$.hasArcType()) {\r\n          $$.unexpandArc(targetIds);\r\n      }\r\n      if ($$.config.legend_show) {\r\n          $$.showLegend(targetIds.filter($$.isLegendToShow.bind($$)));\r\n          $$.legend\r\n              .selectAll($$.selectorLegends(targetIds))\r\n              .filter(function () {\r\n              return $$.d3.select(this).classed(CLASS.legendItemFocused);\r\n          })\r\n              .classed(CLASS.legendItemFocused, false);\r\n      }\r\n      $$.focusedTargetIds = [];\r\n      $$.defocusedTargetIds = [];\r\n  };\n\n  Chart.prototype.xgrids = function (grids) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (!grids) {\r\n          return config.grid_x_lines;\r\n      }\r\n      config.grid_x_lines = grids;\r\n      $$.redrawWithoutRescale();\r\n      return config.grid_x_lines;\r\n  };\r\n  Chart.prototype.xgrids.add = function (grids) {\r\n      var $$ = this.internal;\r\n      return this.xgrids($$.config.grid_x_lines.concat(grids ? grids : []));\r\n  };\r\n  Chart.prototype.xgrids.remove = function (params) {\r\n      // TODO: multiple\r\n      var $$ = this.internal;\r\n      $$.removeGridLines(params, true);\r\n  };\r\n  Chart.prototype.ygrids = function (grids) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (!grids) {\r\n          return config.grid_y_lines;\r\n      }\r\n      config.grid_y_lines = grids;\r\n      $$.redrawWithoutRescale();\r\n      return config.grid_y_lines;\r\n  };\r\n  Chart.prototype.ygrids.add = function (grids) {\r\n      var $$ = this.internal;\r\n      return this.ygrids($$.config.grid_y_lines.concat(grids ? grids : []));\r\n  };\r\n  Chart.prototype.ygrids.remove = function (params) {\r\n      // TODO: multiple\r\n      var $$ = this.internal;\r\n      $$.removeGridLines(params, false);\r\n  };\n\n  Chart.prototype.groups = function (groups) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (isUndefined(groups)) {\r\n          return config.data_groups;\r\n      }\r\n      config.data_groups = groups;\r\n      $$.redraw();\r\n      return config.data_groups;\r\n  };\n\n  Chart.prototype.legend = function () { };\r\n  Chart.prototype.legend.show = function (targetIds) {\r\n      var $$ = this.internal;\r\n      $$.showLegend($$.mapToTargetIds(targetIds));\r\n      $$.updateAndRedraw({ withLegend: true });\r\n  };\r\n  Chart.prototype.legend.hide = function (targetIds) {\r\n      var $$ = this.internal;\r\n      $$.hideLegend($$.mapToTargetIds(targetIds));\r\n      $$.updateAndRedraw({ withLegend: false });\r\n  };\n\n  Chart.prototype.load = function (args) {\r\n      var $$ = this.internal, config = $$.config;\r\n      // update xs if specified\r\n      if (args.xs) {\r\n          $$.addXs(args.xs);\r\n      }\r\n      // update names if exists\r\n      if ('names' in args) {\r\n          Chart.prototype.data.names.bind(this)(args.names);\r\n      }\r\n      // update classes if exists\r\n      if ('classes' in args) {\r\n          Object.keys(args.classes).forEach(function (id) {\r\n              config.data_classes[id] = args.classes[id];\r\n          });\r\n      }\r\n      // update categories if exists\r\n      if ('categories' in args && $$.isCategorized()) {\r\n          config.axis_x_categories = args.categories;\r\n      }\r\n      // update axes if exists\r\n      if ('axes' in args) {\r\n          Object.keys(args.axes).forEach(function (id) {\r\n              config.data_axes[id] = args.axes[id];\r\n          });\r\n      }\r\n      // update colors if exists\r\n      if ('colors' in args) {\r\n          Object.keys(args.colors).forEach(function (id) {\r\n              config.data_colors[id] = args.colors[id];\r\n          });\r\n      }\r\n      // use cache if exists\r\n      if ('cacheIds' in args && $$.hasCaches(args.cacheIds)) {\r\n          $$.load($$.getCaches(args.cacheIds), args.done);\r\n          return;\r\n      }\r\n      // unload if needed\r\n      if (args.unload) {\r\n          // TODO: do not unload if target will load (included in url/rows/columns)\r\n          $$.unload($$.mapToTargetIds(args.unload === true ? null : args.unload), function () {\r\n              $$.loadFromArgs(args);\r\n          });\r\n      }\r\n      else {\r\n          $$.loadFromArgs(args);\r\n      }\r\n  };\r\n  Chart.prototype.unload = function (args) {\r\n      var $$ = this.internal;\r\n      args = args || {};\r\n      if (args instanceof Array) {\r\n          args = { ids: args };\r\n      }\r\n      else if (typeof args === 'string') {\r\n          args = { ids: [args] };\r\n      }\r\n      $$.unload($$.mapToTargetIds(args.ids), function () {\r\n          $$.redraw({\r\n              withUpdateOrgXDomain: true,\r\n              withUpdateXDomain: true,\r\n              withLegend: true\r\n          });\r\n          if (args.done) {\r\n              args.done();\r\n          }\r\n      });\r\n  };\n\n  Chart.prototype.pie = function () { };\r\n  Chart.prototype.pie.padAngle = function (padAngle) {\r\n      if (padAngle === undefined) {\r\n          return this.internal.config.pie_padAngle;\r\n      }\r\n      this.internal.config.pie_padAngle = padAngle;\r\n      this.flush();\r\n  };\n\n  Chart.prototype.regions = function (regions) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (!regions) {\r\n          return config.regions;\r\n      }\r\n      config.regions = regions;\r\n      $$.redrawWithoutRescale();\r\n      return config.regions;\r\n  };\r\n  Chart.prototype.regions.add = function (regions) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (!regions) {\r\n          return config.regions;\r\n      }\r\n      config.regions = config.regions.concat(regions);\r\n      $$.redrawWithoutRescale();\r\n      return config.regions;\r\n  };\r\n  Chart.prototype.regions.remove = function (options) {\r\n      var $$ = this.internal, config = $$.config, duration, classes, regions;\r\n      options = options || {};\r\n      duration = getOption(options, 'duration', config.transition_duration);\r\n      classes = getOption(options, 'classes', [CLASS.region]);\r\n      regions = $$.main.select('.' + CLASS.regions).selectAll(classes.map(function (c) {\r\n          return '.' + c;\r\n      }));\r\n      (duration ? regions.transition().duration(duration) : regions)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      config.regions = config.regions.filter(function (region) {\r\n          var found = false;\r\n          if (!region['class']) {\r\n              return true;\r\n          }\r\n          region['class'].split(' ').forEach(function (c) {\r\n              if (classes.indexOf(c) >= 0) {\r\n                  found = true;\r\n              }\r\n          });\r\n          return !found;\r\n      });\r\n      return config.regions;\r\n  };\n\n  Chart.prototype.selected = function (targetId) {\r\n      var $$ = this.internal, d3 = $$.d3;\r\n      return $$.main\r\n          .selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(targetId))\r\n          .selectAll('.' + CLASS.shape)\r\n          .filter(function () {\r\n          return d3.select(this).classed(CLASS.SELECTED);\r\n      })\r\n          .nodes()\r\n          .map(function (d) {\r\n          var data = d.__data__;\r\n          return data.data ? data.data : data;\r\n      });\r\n  };\r\n  Chart.prototype.select = function (ids, indices, resetOther) {\r\n      var $$ = this.internal, d3 = $$.d3, config = $$.config;\r\n      if (!config.data_selection_enabled) {\r\n          return;\r\n      }\r\n      $$.main\r\n          .selectAll('.' + CLASS.shapes)\r\n          .selectAll('.' + CLASS.shape)\r\n          .each(function (d, i) {\r\n          var shape = d3.select(this), id = d.data ? d.data.id : d.id, toggle = $$.getToggle(this, d).bind($$), isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0, isTargetIndex = !indices || indices.indexOf(i) >= 0, isSelected = shape.classed(CLASS.SELECTED);\r\n          // line/area selection not supported yet\r\n          if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\r\n              return;\r\n          }\r\n          if (isTargetId && isTargetIndex) {\r\n              if (config.data_selection_isselectable(d) && !isSelected) {\r\n                  toggle(true, shape.classed(CLASS.SELECTED, true), d, i);\r\n              }\r\n          }\r\n          else if (isDefined(resetOther) && resetOther) {\r\n              if (isSelected) {\r\n                  toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\r\n              }\r\n          }\r\n      });\r\n  };\r\n  Chart.prototype.unselect = function (ids, indices) {\r\n      var $$ = this.internal, d3 = $$.d3, config = $$.config;\r\n      if (!config.data_selection_enabled) {\r\n          return;\r\n      }\r\n      $$.main\r\n          .selectAll('.' + CLASS.shapes)\r\n          .selectAll('.' + CLASS.shape)\r\n          .each(function (d, i) {\r\n          var shape = d3.select(this), id = d.data ? d.data.id : d.id, toggle = $$.getToggle(this, d).bind($$), isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0, isTargetIndex = !indices || indices.indexOf(i) >= 0, isSelected = shape.classed(CLASS.SELECTED);\r\n          // line/area selection not supported yet\r\n          if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\r\n              return;\r\n          }\r\n          if (isTargetId && isTargetIndex) {\r\n              if (config.data_selection_isselectable(d)) {\r\n                  if (isSelected) {\r\n                      toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\r\n                  }\r\n              }\r\n          }\r\n      });\r\n  };\n\n  Chart.prototype.show = function (targetIds, options) {\r\n      var $$ = this.internal, targets;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      options = options || {};\r\n      $$.removeHiddenTargetIds(targetIds);\r\n      targets = $$.svg.selectAll($$.selectorTargets(targetIds));\r\n      targets\r\n          .transition()\r\n          .style('display', isIE() ? 'block' : 'initial', 'important')\r\n          .style('opacity', 1, 'important')\r\n          .call($$.endall, function () {\r\n          targets.style('opacity', null).style('opacity', 1);\r\n      });\r\n      if (options.withLegend) {\r\n          $$.showLegend(targetIds);\r\n      }\r\n      $$.redraw({\r\n          withUpdateOrgXDomain: true,\r\n          withUpdateXDomain: true,\r\n          withLegend: true\r\n      });\r\n  };\r\n  Chart.prototype.hide = function (targetIds, options) {\r\n      var $$ = this.internal, targets;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      options = options || {};\r\n      $$.addHiddenTargetIds(targetIds);\r\n      targets = $$.svg.selectAll($$.selectorTargets(targetIds));\r\n      targets\r\n          .transition()\r\n          .style('opacity', 0, 'important')\r\n          .call($$.endall, function () {\r\n          targets.style('opacity', null).style('opacity', 0);\r\n          targets.style('display', 'none');\r\n      });\r\n      if (options.withLegend) {\r\n          $$.hideLegend(targetIds);\r\n      }\r\n      $$.redraw({\r\n          withUpdateOrgXDomain: true,\r\n          withUpdateXDomain: true,\r\n          withLegend: true\r\n      });\r\n  };\r\n  Chart.prototype.toggle = function (targetIds, options) {\r\n      var that = this, $$ = this.internal;\r\n      $$.mapToTargetIds(targetIds).forEach(function (targetId) {\r\n          $$.isTargetToShow(targetId)\r\n              ? that.hide(targetId, options)\r\n              : that.show(targetId, options);\r\n      });\r\n  };\n\n  Chart.prototype.subchart = function () { };\r\n  Chart.prototype.subchart.isShown = function () {\r\n      var $$ = this.internal;\r\n      return $$.config.subchart_show;\r\n  };\r\n  Chart.prototype.subchart.show = function () {\r\n      var $$ = this.internal;\r\n      if ($$.config.subchart_show) {\r\n          return;\r\n      }\r\n      $$.config.subchart_show = true;\r\n      // insert DOM\r\n      $$.initSubchart();\r\n      // update dimensions with sub chart now visible\r\n      $$.updateDimension();\r\n      // insert brush (depends on sizes previously updated)\r\n      $$.initSubchartBrush();\r\n      // attach data\r\n      $$.updateTargetsForSubchart($$.getTargets());\r\n      // reset fade-in state\r\n      $$.mapToIds($$.data.targets).forEach(function (id) {\r\n          $$.withoutFadeIn[id] = false;\r\n      });\r\n      // redraw chart !\r\n      $$.updateAndRedraw();\r\n      // update visible targets !\r\n      $$.showTargets();\r\n  };\r\n  Chart.prototype.subchart.hide = function () {\r\n      var $$ = this.internal;\r\n      if (!$$.config.subchart_show) {\r\n          return;\r\n      }\r\n      $$.config.subchart_show = false;\r\n      // remove DOM\r\n      $$.removeSubchart();\r\n      // re-render chart\r\n      $$.redraw();\r\n  };\n\n  Chart.prototype.tooltip = function () { };\r\n  Chart.prototype.tooltip.show = function (args) {\r\n      var $$ = this.internal, targets, data, mouse = {};\r\n      // determine mouse position on the chart\r\n      if (args.mouse) {\r\n          mouse = args.mouse;\r\n      }\r\n      else {\r\n          // determine focus data\r\n          if (args.data) {\r\n              data = args.data;\r\n          }\r\n          else if (typeof args.x !== 'undefined') {\r\n              if (args.id) {\r\n                  targets = $$.data.targets.filter(function (t) {\r\n                      return t.id === args.id;\r\n                  });\r\n              }\r\n              else {\r\n                  targets = $$.data.targets;\r\n              }\r\n              data = $$.filterByX(targets, args.x).slice(0, 1)[0];\r\n          }\r\n          mouse = data ? $$.getMousePosition(data) : null;\r\n      }\r\n      // emulate mouse events to show\r\n      $$.dispatchEvent('mousemove', mouse);\r\n      $$.config.tooltip_onshow.call($$, data);\r\n  };\r\n  Chart.prototype.tooltip.hide = function () {\r\n      // TODO: get target data by checking the state of focus\r\n      this.internal.dispatchEvent('mouseout', 0);\r\n      this.internal.config.tooltip_onhide.call(this);\r\n  };\n\n  Chart.prototype.transform = function (type, targetIds) {\r\n      var $$ = this.internal, options = ['pie', 'donut'].indexOf(type) >= 0 ? { withTransform: true } : null;\r\n      $$.transformTo(targetIds, type, options);\r\n  };\r\n  ChartInternal.prototype.transformTo = function (targetIds, type, optionsForRedraw) {\r\n      var $$ = this, withTransitionForAxis = !$$.hasArcType(), options = optionsForRedraw || {\r\n          withTransitionForAxis: withTransitionForAxis\r\n      };\r\n      options.withTransitionForTransform = false;\r\n      $$.transiting = false;\r\n      $$.setTargetType(targetIds, type);\r\n      $$.updateTargets($$.data.targets); // this is needed when transforming to arc\r\n      $$.updateAndRedraw(options);\r\n  };\n\n  Chart.prototype.x = function (x) {\r\n      var $$ = this.internal;\r\n      if (arguments.length) {\r\n          $$.updateTargetX($$.data.targets, x);\r\n          $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\r\n      }\r\n      return $$.data.xs;\r\n  };\r\n  Chart.prototype.xs = function (xs) {\r\n      var $$ = this.internal;\r\n      if (arguments.length) {\r\n          $$.updateTargetXs($$.data.targets, xs);\r\n          $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\r\n      }\r\n      return $$.data.xs;\r\n  };\n\n  Chart.prototype.zoom = function (domain) {\r\n      var $$ = this.internal;\r\n      if (domain) {\r\n          if ($$.isTimeSeries()) {\r\n              domain = domain.map(function (x) {\r\n                  return $$.parseDate(x);\r\n              });\r\n          }\r\n          if ($$.config.subchart_show) {\r\n              $$.brush.selectionAsValue(domain, true);\r\n          }\r\n          else {\r\n              $$.updateXDomain(null, true, false, false, domain);\r\n              $$.redraw({ withY: $$.config.zoom_rescale, withSubchart: false });\r\n          }\r\n          $$.config.zoom_onzoom.call(this, $$.x.orgDomain());\r\n          return domain;\r\n      }\r\n      else {\r\n          return $$.x.domain();\r\n      }\r\n  };\r\n  Chart.prototype.zoom.enable = function (enabled) {\r\n      var $$ = this.internal;\r\n      $$.config.zoom_enabled = enabled;\r\n      $$.updateAndRedraw();\r\n  };\r\n  Chart.prototype.unzoom = function () {\r\n      var $$ = this.internal;\r\n      if ($$.config.subchart_show) {\r\n          $$.brush.clear();\r\n      }\r\n      else {\r\n          $$.updateXDomain(null, true, false, false, $$.subX.domain());\r\n          $$.redraw({ withY: $$.config.zoom_rescale, withSubchart: false });\r\n      }\r\n  };\r\n  Chart.prototype.zoom.max = function (max) {\r\n      var $$ = this.internal, config = $$.config, d3 = $$.d3;\r\n      if (max === 0 || max) {\r\n          config.zoom_x_max = d3.max([$$.orgXDomain[1], max]);\r\n      }\r\n      else {\r\n          return config.zoom_x_max;\r\n      }\r\n  };\r\n  Chart.prototype.zoom.min = function (min) {\r\n      var $$ = this.internal, config = $$.config, d3 = $$.d3;\r\n      if (min === 0 || min) {\r\n          config.zoom_x_min = d3.min([$$.orgXDomain[0], min]);\r\n      }\r\n      else {\r\n          return config.zoom_x_min;\r\n      }\r\n  };\r\n  Chart.prototype.zoom.range = function (range) {\r\n      if (arguments.length) {\r\n          if (isDefined(range.max)) {\r\n              this.domain.max(range.max);\r\n          }\r\n          if (isDefined(range.min)) {\r\n              this.domain.min(range.min);\r\n          }\r\n      }\r\n      else {\r\n          return {\r\n              max: this.domain.max(),\r\n              min: this.domain.min()\r\n          };\r\n      }\r\n  };\n\n  ChartInternal.prototype.initPie = function () {\r\n      var $$ = this, d3 = $$.d3;\r\n      $$.pie = d3\r\n          .pie()\r\n          .padAngle(this.getPadAngle.bind(this))\r\n          .value(function (d) {\r\n          return d.values.reduce(function (a, b) {\r\n              return a + b.value;\r\n          }, 0);\r\n      });\r\n      var orderFct = $$.getOrderFunction();\r\n      // we need to reverse the returned order if asc or desc to have the slice in expected order.\r\n      if (orderFct && ($$.isOrderAsc() || $$.isOrderDesc())) {\r\n          var defaultSort_1 = orderFct;\r\n          orderFct = function (t1, t2) { return defaultSort_1(t1, t2) * -1; };\r\n      }\r\n      $$.pie.sort(orderFct || null);\r\n  };\r\n  ChartInternal.prototype.updateRadius = function () {\r\n      var $$ = this, config = $$.config, w = config.gauge_width || config.donut_width, gaugeArcWidth = $$.filterTargetsToShow($$.data.targets).length *\r\n          $$.config.gauge_arcs_minWidth;\r\n      $$.radiusExpanded =\r\n          (Math.min($$.arcWidth, $$.arcHeight) / 2) * ($$.hasType('gauge') ? 0.85 : 1);\r\n      $$.radius = $$.radiusExpanded * 0.95;\r\n      $$.innerRadiusRatio = w ? ($$.radius - w) / $$.radius : 0.6;\r\n      $$.innerRadius =\r\n          $$.hasType('donut') || $$.hasType('gauge')\r\n              ? $$.radius * $$.innerRadiusRatio\r\n              : 0;\r\n      $$.gaugeArcWidth = w\r\n          ? w\r\n          : gaugeArcWidth <= $$.radius - $$.innerRadius\r\n              ? $$.radius - $$.innerRadius\r\n              : gaugeArcWidth <= $$.radius\r\n                  ? gaugeArcWidth\r\n                  : $$.radius;\r\n  };\r\n  ChartInternal.prototype.getPadAngle = function () {\r\n      if (this.hasType('pie')) {\r\n          return this.config.pie_padAngle || 0;\r\n      }\r\n      else if (this.hasType('donut')) {\r\n          return this.config.donut_padAngle || 0;\r\n      }\r\n      else {\r\n          return 0;\r\n      }\r\n  };\r\n  ChartInternal.prototype.updateArc = function () {\r\n      var $$ = this;\r\n      $$.svgArc = $$.getSvgArc();\r\n      $$.svgArcExpanded = $$.getSvgArcExpanded();\r\n      $$.svgArcExpandedSub = $$.getSvgArcExpanded(0.98);\r\n  };\r\n  ChartInternal.prototype.updateAngle = function (d) {\r\n      var $$ = this, config = $$.config, found = false, index = 0, gMin, gMax, gTic, gValue;\r\n      if (!config) {\r\n          return null;\r\n      }\r\n      $$.pie($$.filterTargetsToShow($$.data.targets)).forEach(function (t) {\r\n          if (!found && t.data.id === d.data.id) {\r\n              found = true;\r\n              d = t;\r\n              d.index = index;\r\n          }\r\n          index++;\r\n      });\r\n      if (isNaN(d.startAngle)) {\r\n          d.startAngle = 0;\r\n      }\r\n      if (isNaN(d.endAngle)) {\r\n          d.endAngle = d.startAngle;\r\n      }\r\n      if ($$.isGaugeType(d.data)) {\r\n          gMin = config.gauge_min;\r\n          gMax = config.gauge_max;\r\n          gTic = (Math.PI * (config.gauge_fullCircle ? 2 : 1)) / (gMax - gMin);\r\n          gValue = d.value < gMin ? 0 : d.value < gMax ? d.value - gMin : gMax - gMin;\r\n          d.startAngle = config.gauge_startingAngle;\r\n          d.endAngle = d.startAngle + gTic * gValue;\r\n      }\r\n      return found ? d : null;\r\n  };\r\n  ChartInternal.prototype.getSvgArc = function () {\r\n      var $$ = this, hasGaugeType = $$.hasType('gauge'), singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length, arc = $$.d3\r\n          .arc()\r\n          .outerRadius(function (d) {\r\n          return hasGaugeType ? $$.radius - singleArcWidth * d.index : $$.radius;\r\n      })\r\n          .innerRadius(function (d) {\r\n          return hasGaugeType\r\n              ? $$.radius - singleArcWidth * (d.index + 1)\r\n              : $$.innerRadius;\r\n      }), newArc = function (d, withoutUpdate) {\r\n          var updated;\r\n          if (withoutUpdate) {\r\n              return arc(d);\r\n          } // for interpolate\r\n          updated = $$.updateAngle(d);\r\n          return updated ? arc(updated) : 'M 0 0';\r\n      };\r\n      newArc.centroid = arc.centroid;\r\n      return newArc;\r\n  };\r\n  ChartInternal.prototype.getSvgArcExpanded = function (rate) {\r\n      rate = rate || 1;\r\n      var $$ = this, hasGaugeType = $$.hasType('gauge'), singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length, expandWidth = Math.min($$.radiusExpanded * rate - $$.radius, singleArcWidth * 0.8 - (1 - rate) * 100), arc = $$.d3\r\n          .arc()\r\n          .outerRadius(function (d) {\r\n          return hasGaugeType\r\n              ? $$.radius - singleArcWidth * d.index + expandWidth\r\n              : $$.radiusExpanded * rate;\r\n      })\r\n          .innerRadius(function (d) {\r\n          return hasGaugeType\r\n              ? $$.radius - singleArcWidth * (d.index + 1)\r\n              : $$.innerRadius;\r\n      });\r\n      return function (d) {\r\n          var updated = $$.updateAngle(d);\r\n          return updated ? arc(updated) : 'M 0 0';\r\n      };\r\n  };\r\n  ChartInternal.prototype.getArc = function (d, withoutUpdate, force) {\r\n      return force || this.isArcType(d.data)\r\n          ? this.svgArc(d, withoutUpdate)\r\n          : 'M 0 0';\r\n  };\r\n  ChartInternal.prototype.transformForArcLabel = function (d) {\r\n      var $$ = this, config = $$.config, updated = $$.updateAngle(d), c, x, y, h, ratio, translate = '', hasGauge = $$.hasType('gauge');\r\n      if (updated && !hasGauge) {\r\n          c = this.svgArc.centroid(updated);\r\n          x = isNaN(c[0]) ? 0 : c[0];\r\n          y = isNaN(c[1]) ? 0 : c[1];\r\n          h = Math.sqrt(x * x + y * y);\r\n          if ($$.hasType('donut') && config.donut_label_ratio) {\r\n              ratio = isFunction(config.donut_label_ratio)\r\n                  ? config.donut_label_ratio(d, $$.radius, h)\r\n                  : config.donut_label_ratio;\r\n          }\r\n          else if ($$.hasType('pie') && config.pie_label_ratio) {\r\n              ratio = isFunction(config.pie_label_ratio)\r\n                  ? config.pie_label_ratio(d, $$.radius, h)\r\n                  : config.pie_label_ratio;\r\n          }\r\n          else {\r\n              ratio =\r\n                  $$.radius && h\r\n                      ? ((36 / $$.radius > 0.375 ? 1.175 - 36 / $$.radius : 0.8) *\r\n                          $$.radius) /\r\n                          h\r\n                      : 0;\r\n          }\r\n          translate = 'translate(' + x * ratio + ',' + y * ratio + ')';\r\n      }\r\n      else if (updated &&\r\n          hasGauge &&\r\n          $$.filterTargetsToShow($$.data.targets).length > 1) {\r\n          var y1 = Math.sin(updated.endAngle - Math.PI / 2);\r\n          x = Math.cos(updated.endAngle - Math.PI / 2) * ($$.radiusExpanded + 25);\r\n          y = y1 * ($$.radiusExpanded + 15 - Math.abs(y1 * 10)) + 3;\r\n          translate = 'translate(' + x + ',' + y + ')';\r\n      }\r\n      return translate;\r\n  };\r\n  /**\r\n   * @deprecated Use `getRatio('arc', d)` instead.\r\n   */\r\n  ChartInternal.prototype.getArcRatio = function (d) {\r\n      return this.getRatio('arc', d);\r\n  };\r\n  ChartInternal.prototype.convertToArcData = function (d) {\r\n      return this.addName({\r\n          id: d.data.id,\r\n          value: d.value,\r\n          ratio: this.getRatio('arc', d),\r\n          index: d.index\r\n      });\r\n  };\r\n  ChartInternal.prototype.textForArcLabel = function (d) {\r\n      var $$ = this, updated, value, ratio, id, format;\r\n      if (!$$.shouldShowArcLabel()) {\r\n          return '';\r\n      }\r\n      updated = $$.updateAngle(d);\r\n      value = updated ? updated.value : null;\r\n      ratio = $$.getRatio('arc', updated);\r\n      id = d.data.id;\r\n      if (!$$.hasType('gauge') && !$$.meetsArcLabelThreshold(ratio)) {\r\n          return '';\r\n      }\r\n      format = $$.getArcLabelFormat();\r\n      return format\r\n          ? format(value, ratio, id)\r\n          : $$.defaultArcValueFormat(value, ratio);\r\n  };\r\n  ChartInternal.prototype.textForGaugeMinMax = function (value, isMax) {\r\n      var $$ = this, format = $$.getGaugeLabelExtents();\r\n      return format ? format(value, isMax) : value;\r\n  };\r\n  ChartInternal.prototype.expandArc = function (targetIds) {\r\n      var $$ = this, interval;\r\n      // MEMO: avoid to cancel transition\r\n      if ($$.transiting) {\r\n          interval = window.setInterval(function () {\r\n              if (!$$.transiting) {\r\n                  window.clearInterval(interval);\r\n                  if ($$.legend.selectAll('.c3-legend-item-focused').size() > 0) {\r\n                      $$.expandArc(targetIds);\r\n                  }\r\n              }\r\n          }, 10);\r\n          return;\r\n      }\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      $$.svg\r\n          .selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc))\r\n          .each(function (d) {\r\n          if (!$$.shouldExpand(d.data.id)) {\r\n              return;\r\n          }\r\n          $$.d3\r\n              .select(this)\r\n              .selectAll('path')\r\n              .transition()\r\n              .duration($$.expandDuration(d.data.id))\r\n              .attr('d', $$.svgArcExpanded)\r\n              .transition()\r\n              .duration($$.expandDuration(d.data.id) * 2)\r\n              .attr('d', $$.svgArcExpandedSub)\r\n              .each(function (d) {\r\n              if ($$.isDonutType(d.data)) ;\r\n          });\r\n      });\r\n  };\r\n  ChartInternal.prototype.unexpandArc = function (targetIds) {\r\n      var $$ = this;\r\n      if ($$.transiting) {\r\n          return;\r\n      }\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      $$.svg\r\n          .selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc))\r\n          .selectAll('path')\r\n          .transition()\r\n          .duration(function (d) {\r\n          return $$.expandDuration(d.data.id);\r\n      })\r\n          .attr('d', $$.svgArc);\r\n      $$.svg.selectAll('.' + CLASS.arc);\r\n  };\r\n  ChartInternal.prototype.expandDuration = function (id) {\r\n      var $$ = this, config = $$.config;\r\n      if ($$.isDonutType(id)) {\r\n          return config.donut_expand_duration;\r\n      }\r\n      else if ($$.isGaugeType(id)) {\r\n          return config.gauge_expand_duration;\r\n      }\r\n      else if ($$.isPieType(id)) {\r\n          return config.pie_expand_duration;\r\n      }\r\n      else {\r\n          return 50;\r\n      }\r\n  };\r\n  ChartInternal.prototype.shouldExpand = function (id) {\r\n      var $$ = this, config = $$.config;\r\n      return (($$.isDonutType(id) && config.donut_expand) ||\r\n          ($$.isGaugeType(id) && config.gauge_expand) ||\r\n          ($$.isPieType(id) && config.pie_expand));\r\n  };\r\n  ChartInternal.prototype.shouldShowArcLabel = function () {\r\n      var $$ = this, config = $$.config, shouldShow = true;\r\n      if ($$.hasType('donut')) {\r\n          shouldShow = config.donut_label_show;\r\n      }\r\n      else if ($$.hasType('pie')) {\r\n          shouldShow = config.pie_label_show;\r\n      }\r\n      // when gauge, always true\r\n      return shouldShow;\r\n  };\r\n  ChartInternal.prototype.meetsArcLabelThreshold = function (ratio) {\r\n      var $$ = this, config = $$.config, threshold = $$.hasType('donut')\r\n          ? config.donut_label_threshold\r\n          : config.pie_label_threshold;\r\n      return ratio >= threshold;\r\n  };\r\n  ChartInternal.prototype.getArcLabelFormat = function () {\r\n      var $$ = this, config = $$.config, format = config.pie_label_format;\r\n      if ($$.hasType('gauge')) {\r\n          format = config.gauge_label_format;\r\n      }\r\n      else if ($$.hasType('donut')) {\r\n          format = config.donut_label_format;\r\n      }\r\n      return format;\r\n  };\r\n  ChartInternal.prototype.getGaugeLabelExtents = function () {\r\n      var $$ = this, config = $$.config;\r\n      return config.gauge_label_extents;\r\n  };\r\n  ChartInternal.prototype.getArcTitle = function () {\r\n      var $$ = this;\r\n      return $$.hasType('donut') ? $$.config.donut_title : '';\r\n  };\r\n  ChartInternal.prototype.updateTargetsForArc = function (targets) {\r\n      var $$ = this, main = $$.main, mainPies, mainPieEnter, classChartArc = $$.classChartArc.bind($$), classArcs = $$.classArcs.bind($$), classFocus = $$.classFocus.bind($$);\r\n      mainPies = main\r\n          .select('.' + CLASS.chartArcs)\r\n          .selectAll('.' + CLASS.chartArc)\r\n          .data($$.pie(targets))\r\n          .attr('class', function (d) {\r\n          return classChartArc(d) + classFocus(d.data);\r\n      });\r\n      mainPieEnter = mainPies\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', classChartArc);\r\n      mainPieEnter.append('g').attr('class', classArcs);\r\n      mainPieEnter\r\n          .append('text')\r\n          .attr('dy', $$.hasType('gauge') ? '-.1em' : '.35em')\r\n          .style('opacity', 0)\r\n          .style('text-anchor', 'middle')\r\n          .style('pointer-events', 'none');\r\n      // MEMO: can not keep same color..., but not bad to update color in redraw\r\n      //mainPieUpdate.exit().remove();\r\n  };\r\n  ChartInternal.prototype.initArc = function () {\r\n      var $$ = this;\r\n      $$.arcs = $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartArcs)\r\n          .attr('transform', $$.getTranslate('arc'));\r\n      $$.arcs\r\n          .append('text')\r\n          .attr('class', CLASS.chartArcsTitle)\r\n          .style('text-anchor', 'middle')\r\n          .text($$.getArcTitle());\r\n  };\r\n  ChartInternal.prototype.redrawArc = function (duration, durationForExit, withTransform) {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, main = $$.main, arcs, mainArc, arcLabelLines, mainArcLabelLine, hasGaugeType = $$.hasType('gauge');\r\n      arcs = main\r\n          .selectAll('.' + CLASS.arcs)\r\n          .selectAll('.' + CLASS.arc)\r\n          .data($$.arcData.bind($$));\r\n      mainArc = arcs\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classArc.bind($$))\r\n          .style('fill', function (d) {\r\n          return $$.color(d.data);\r\n      })\r\n          .style('cursor', function (d) {\r\n          return config.interaction_enabled && config.data_selection_isselectable(d)\r\n              ? 'pointer'\r\n              : null;\r\n      })\r\n          .each(function (d) {\r\n          if ($$.isGaugeType(d.data)) {\r\n              d.startAngle = d.endAngle = config.gauge_startingAngle;\r\n          }\r\n          this._current = d;\r\n      })\r\n          .merge(arcs);\r\n      if (hasGaugeType) {\r\n          arcLabelLines = main\r\n              .selectAll('.' + CLASS.arcs)\r\n              .selectAll('.' + CLASS.arcLabelLine)\r\n              .data($$.arcData.bind($$));\r\n          mainArcLabelLine = arcLabelLines\r\n              .enter()\r\n              .append('rect')\r\n              .attr('class', function (d) {\r\n              return (CLASS.arcLabelLine +\r\n                  ' ' +\r\n                  CLASS.target +\r\n                  ' ' +\r\n                  CLASS.target +\r\n                  '-' +\r\n                  d.data.id);\r\n          })\r\n              .merge(arcLabelLines);\r\n          if ($$.filterTargetsToShow($$.data.targets).length === 1) {\r\n              mainArcLabelLine.style('display', 'none');\r\n          }\r\n          else {\r\n              mainArcLabelLine\r\n                  .style('fill', function (d) {\r\n                  return $$.levelColor\r\n                      ? $$.levelColor(d.data.values.reduce(function (total, item) {\r\n                          return total + item.value;\r\n                      }, 0))\r\n                      : $$.color(d.data);\r\n              })\r\n                  .style('display', config.gauge_labelLine_show ? '' : 'none')\r\n                  .each(function (d) {\r\n                  var lineLength = 0, lineThickness = 2, x = 0, y = 0, transform = '';\r\n                  if ($$.hiddenTargetIds.indexOf(d.data.id) < 0) {\r\n                      var updated = $$.updateAngle(d), innerLineLength = ($$.gaugeArcWidth /\r\n                          $$.filterTargetsToShow($$.data.targets).length) *\r\n                          (updated.index + 1), lineAngle = updated.endAngle - Math.PI / 2, arcInnerRadius = $$.radius - innerLineLength, linePositioningAngle = lineAngle - (arcInnerRadius === 0 ? 0 : 1 / arcInnerRadius);\r\n                      lineLength = $$.radiusExpanded - $$.radius + innerLineLength;\r\n                      x = Math.cos(linePositioningAngle) * arcInnerRadius;\r\n                      y = Math.sin(linePositioningAngle) * arcInnerRadius;\r\n                      transform =\r\n                          'rotate(' +\r\n                              (lineAngle * 180) / Math.PI +\r\n                              ', ' +\r\n                              x +\r\n                              ', ' +\r\n                              y +\r\n                              ')';\r\n                  }\r\n                  d3.select(this)\r\n                      .attr('x', x)\r\n                      .attr('y', y)\r\n                      .attr('width', lineLength)\r\n                      .attr('height', lineThickness)\r\n                      .attr('transform', transform)\r\n                      .style('stroke-dasharray', '0, ' + (lineLength + lineThickness) + ', 0');\r\n              });\r\n          }\r\n      }\r\n      mainArc\r\n          .attr('transform', function (d) {\r\n          return !$$.isGaugeType(d.data) && withTransform ? 'scale(0)' : '';\r\n      })\r\n          .on('mouseover', config.interaction_enabled\r\n          ? function (d) {\r\n              var updated, arcData;\r\n              if ($$.transiting) {\r\n                  // skip while transiting\r\n                  return;\r\n              }\r\n              updated = $$.updateAngle(d);\r\n              if (updated) {\r\n                  arcData = $$.convertToArcData(updated);\r\n                  // transitions\r\n                  $$.expandArc(updated.data.id);\r\n                  $$.api.focus(updated.data.id);\r\n                  $$.toggleFocusLegend(updated.data.id, true);\r\n                  $$.config.data_onmouseover(arcData, this);\r\n              }\r\n          }\r\n          : null)\r\n          .on('mousemove', config.interaction_enabled\r\n          ? function (d) {\r\n              var updated = $$.updateAngle(d), arcData, selectedData;\r\n              if (updated) {\r\n                  (arcData = $$.convertToArcData(updated)),\r\n                      (selectedData = [arcData]);\r\n                  $$.showTooltip(selectedData, this);\r\n              }\r\n          }\r\n          : null)\r\n          .on('mouseout', config.interaction_enabled\r\n          ? function (d) {\r\n              var updated, arcData;\r\n              if ($$.transiting) {\r\n                  // skip while transiting\r\n                  return;\r\n              }\r\n              updated = $$.updateAngle(d);\r\n              if (updated) {\r\n                  arcData = $$.convertToArcData(updated);\r\n                  // transitions\r\n                  $$.unexpandArc(updated.data.id);\r\n                  $$.api.revert();\r\n                  $$.revertLegend();\r\n                  $$.hideTooltip();\r\n                  $$.config.data_onmouseout(arcData, this);\r\n              }\r\n          }\r\n          : null)\r\n          .on('click', config.interaction_enabled\r\n          ? function (d, i) {\r\n              var updated = $$.updateAngle(d), arcData;\r\n              if (updated) {\r\n                  arcData = $$.convertToArcData(updated);\r\n                  if ($$.toggleShape) {\r\n                      $$.toggleShape(this, arcData, i);\r\n                  }\r\n                  $$.config.data_onclick.call($$.api, arcData, this);\r\n              }\r\n          }\r\n          : null)\r\n          .each(function () {\r\n          $$.transiting = true;\r\n      })\r\n          .transition()\r\n          .duration(duration)\r\n          .attrTween('d', function (d) {\r\n          var updated = $$.updateAngle(d), interpolate;\r\n          if (!updated) {\r\n              return function () {\r\n                  return 'M 0 0';\r\n              };\r\n          }\r\n          //                if (this._current === d) {\r\n          //                    this._current = {\r\n          //                        startAngle: Math.PI*2,\r\n          //                        endAngle: Math.PI*2,\r\n          //                    };\r\n          //                }\r\n          if (isNaN(this._current.startAngle)) {\r\n              this._current.startAngle = 0;\r\n          }\r\n          if (isNaN(this._current.endAngle)) {\r\n              this._current.endAngle = this._current.startAngle;\r\n          }\r\n          interpolate = d3.interpolate(this._current, updated);\r\n          this._current = interpolate(0);\r\n          return function (t) {\r\n              // prevents crashing the charts once in transition and chart.destroy() has been called\r\n              if ($$.config === null) {\r\n                  return 'M 0 0';\r\n              }\r\n              var interpolated = interpolate(t);\r\n              interpolated.data = d.data; // data.id will be updated by interporator\r\n              return $$.getArc(interpolated, true);\r\n          };\r\n      })\r\n          .attr('transform', withTransform ? 'scale(1)' : '')\r\n          .style('fill', function (d) {\r\n          return $$.levelColor\r\n              ? $$.levelColor(d.data.values.reduce(function (total, item) {\r\n                  return total + item.value;\r\n              }, 0))\r\n              : $$.color(d.data.id);\r\n      }) // Where gauge reading color would receive customization.\r\n          .call($$.endall, function () {\r\n          $$.transiting = false;\r\n      });\r\n      arcs\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      main\r\n          .selectAll('.' + CLASS.chartArc)\r\n          .select('text')\r\n          .style('opacity', 0)\r\n          .attr('class', function (d) {\r\n          return $$.isGaugeType(d.data) ? CLASS.gaugeValue : '';\r\n      })\r\n          .text($$.textForArcLabel.bind($$))\r\n          .attr('transform', $$.transformForArcLabel.bind($$))\r\n          .style('font-size', function (d) {\r\n          return $$.isGaugeType(d.data) &&\r\n              $$.filterTargetsToShow($$.data.targets).length === 1\r\n              ? Math.round($$.radius / 5) + 'px'\r\n              : '';\r\n      })\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', function (d) {\r\n          return $$.isTargetToShow(d.data.id) && $$.isArcType(d.data) ? 1 : 0;\r\n      });\r\n      main\r\n          .select('.' + CLASS.chartArcsTitle)\r\n          .style('opacity', $$.hasType('donut') || hasGaugeType ? 1 : 0);\r\n      if (hasGaugeType) {\r\n          var index_1 = 0;\r\n          var backgroundArc = $$.arcs\r\n              .select('g.' + CLASS.chartArcsBackground)\r\n              .selectAll('path.' + CLASS.chartArcsBackground)\r\n              .data($$.data.targets);\r\n          backgroundArc\r\n              .enter()\r\n              .append('path')\r\n              .attr('class', function (d, i) {\r\n              return CLASS.chartArcsBackground + ' ' + CLASS.chartArcsBackground + '-' + i;\r\n          })\r\n              .merge(backgroundArc)\r\n              .attr('d', function (d1) {\r\n              if ($$.hiddenTargetIds.indexOf(d1.id) >= 0) {\r\n                  return 'M 0 0';\r\n              }\r\n              var d = {\r\n                  data: [{ value: config.gauge_max }],\r\n                  startAngle: config.gauge_startingAngle,\r\n                  endAngle: -1 *\r\n                      config.gauge_startingAngle *\r\n                      (config.gauge_fullCircle ? Math.PI : 1),\r\n                  index: index_1++\r\n              };\r\n              return $$.getArc(d, true, true);\r\n          });\r\n          backgroundArc.exit().remove();\r\n          $$.arcs\r\n              .select('.' + CLASS.chartArcsGaugeUnit)\r\n              .attr('dy', '.75em')\r\n              .text(config.gauge_label_show ? config.gauge_units : '');\r\n          $$.arcs\r\n              .select('.' + CLASS.chartArcsGaugeMin)\r\n              .attr('dx', -1 *\r\n              ($$.innerRadius +\r\n                  ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2)) +\r\n              'px')\r\n              .attr('dy', '1.2em')\r\n              .text(config.gauge_label_show\r\n              ? $$.textForGaugeMinMax(config.gauge_min, false)\r\n              : '');\r\n          $$.arcs\r\n              .select('.' + CLASS.chartArcsGaugeMax)\r\n              .attr('dx', $$.innerRadius +\r\n              ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2) +\r\n              'px')\r\n              .attr('dy', '1.2em')\r\n              .text(config.gauge_label_show\r\n              ? $$.textForGaugeMinMax(config.gauge_max, true)\r\n              : '');\r\n      }\r\n  };\r\n  ChartInternal.prototype.initGauge = function () {\r\n      var arcs = this.arcs;\r\n      if (this.hasType('gauge')) {\r\n          arcs.append('g').attr('class', CLASS.chartArcsBackground);\r\n          arcs\r\n              .append('text')\r\n              .attr('class', CLASS.chartArcsGaugeUnit)\r\n              .style('text-anchor', 'middle')\r\n              .style('pointer-events', 'none');\r\n          arcs\r\n              .append('text')\r\n              .attr('class', CLASS.chartArcsGaugeMin)\r\n              .style('text-anchor', 'middle')\r\n              .style('pointer-events', 'none');\r\n          arcs\r\n              .append('text')\r\n              .attr('class', CLASS.chartArcsGaugeMax)\r\n              .style('text-anchor', 'middle')\r\n              .style('pointer-events', 'none');\r\n      }\r\n  };\r\n  ChartInternal.prototype.getGaugeLabelHeight = function () {\r\n      return this.config.gauge_label_show ? 20 : 0;\r\n  };\n\n  /**\r\n   * Store value into cache\r\n   *\r\n   * @param key\r\n   * @param value\r\n   */\r\n  ChartInternal.prototype.addToCache = function (key, value) {\r\n      this.cache[\"$\" + key] = value;\r\n  };\r\n  /**\r\n   * Returns a cached value or undefined\r\n   *\r\n   * @param key\r\n   * @return {*}\r\n   */\r\n  ChartInternal.prototype.getFromCache = function (key) {\r\n      return this.cache[\"$\" + key];\r\n  };\r\n  /**\r\n   * Reset cached data\r\n   */\r\n  ChartInternal.prototype.resetCache = function () {\r\n      var _this = this;\r\n      Object.keys(this.cache)\r\n          .filter(function (key) { return /^\\$/.test(key); })\r\n          .forEach(function (key) {\r\n          delete _this.cache[key];\r\n      });\r\n  };\r\n  // Old API that stores Targets\r\n  ChartInternal.prototype.hasCaches = function (ids) {\r\n      for (var i = 0; i < ids.length; i++) {\r\n          if (!(ids[i] in this.cache)) {\r\n              return false;\r\n          }\r\n      }\r\n      return true;\r\n  };\r\n  ChartInternal.prototype.addCache = function (id, target) {\r\n      this.cache[id] = this.cloneTarget(target);\r\n  };\r\n  ChartInternal.prototype.getCaches = function (ids) {\r\n      var targets = [], i;\r\n      for (i = 0; i < ids.length; i++) {\r\n          if (ids[i] in this.cache) {\r\n              targets.push(this.cloneTarget(this.cache[ids[i]]));\r\n          }\r\n      }\r\n      return targets;\r\n  };\n\n  ChartInternal.prototype.categoryName = function (i) {\r\n      var config = this.config;\r\n      return i < config.axis_x_categories.length ? config.axis_x_categories[i] : i;\r\n  };\n\n  ChartInternal.prototype.generateTargetClass = function (targetId) {\r\n      return targetId || targetId === 0 ? ('-' + targetId).replace(/\\s/g, '-') : '';\r\n  };\r\n  ChartInternal.prototype.generateClass = function (prefix, targetId) {\r\n      return ' ' + prefix + ' ' + prefix + this.generateTargetClass(targetId);\r\n  };\r\n  ChartInternal.prototype.classText = function (d) {\r\n      return this.generateClass(CLASS.text, d.index);\r\n  };\r\n  ChartInternal.prototype.classTexts = function (d) {\r\n      return this.generateClass(CLASS.texts, d.id);\r\n  };\r\n  ChartInternal.prototype.classShape = function (d) {\r\n      return this.generateClass(CLASS.shape, d.index);\r\n  };\r\n  ChartInternal.prototype.classShapes = function (d) {\r\n      return this.generateClass(CLASS.shapes, d.id);\r\n  };\r\n  ChartInternal.prototype.classLine = function (d) {\r\n      return this.classShape(d) + this.generateClass(CLASS.line, d.id);\r\n  };\r\n  ChartInternal.prototype.classLines = function (d) {\r\n      return this.classShapes(d) + this.generateClass(CLASS.lines, d.id);\r\n  };\r\n  ChartInternal.prototype.classCircle = function (d) {\r\n      return this.classShape(d) + this.generateClass(CLASS.circle, d.index);\r\n  };\r\n  ChartInternal.prototype.classCircles = function (d) {\r\n      return this.classShapes(d) + this.generateClass(CLASS.circles, d.id);\r\n  };\r\n  ChartInternal.prototype.classBar = function (d) {\r\n      return this.classShape(d) + this.generateClass(CLASS.bar, d.index);\r\n  };\r\n  ChartInternal.prototype.classBars = function (d) {\r\n      return this.classShapes(d) + this.generateClass(CLASS.bars, d.id);\r\n  };\r\n  ChartInternal.prototype.classArc = function (d) {\r\n      return this.classShape(d.data) + this.generateClass(CLASS.arc, d.data.id);\r\n  };\r\n  ChartInternal.prototype.classArcs = function (d) {\r\n      return this.classShapes(d.data) + this.generateClass(CLASS.arcs, d.data.id);\r\n  };\r\n  ChartInternal.prototype.classArea = function (d) {\r\n      return this.classShape(d) + this.generateClass(CLASS.area, d.id);\r\n  };\r\n  ChartInternal.prototype.classAreas = function (d) {\r\n      return this.classShapes(d) + this.generateClass(CLASS.areas, d.id);\r\n  };\r\n  ChartInternal.prototype.classRegion = function (d, i) {\r\n      return (this.generateClass(CLASS.region, i) + ' ' + ('class' in d ? d['class'] : ''));\r\n  };\r\n  ChartInternal.prototype.classEvent = function (d) {\r\n      return this.generateClass(CLASS.eventRect, d.index);\r\n  };\r\n  ChartInternal.prototype.classTarget = function (id) {\r\n      var $$ = this;\r\n      var additionalClassSuffix = $$.config.data_classes[id], additionalClass = '';\r\n      if (additionalClassSuffix) {\r\n          additionalClass = ' ' + CLASS.target + '-' + additionalClassSuffix;\r\n      }\r\n      return $$.generateClass(CLASS.target, id) + additionalClass;\r\n  };\r\n  ChartInternal.prototype.classFocus = function (d) {\r\n      return this.classFocused(d) + this.classDefocused(d);\r\n  };\r\n  ChartInternal.prototype.classFocused = function (d) {\r\n      return ' ' + (this.focusedTargetIds.indexOf(d.id) >= 0 ? CLASS.focused : '');\r\n  };\r\n  ChartInternal.prototype.classDefocused = function (d) {\r\n      return (' ' + (this.defocusedTargetIds.indexOf(d.id) >= 0 ? CLASS.defocused : ''));\r\n  };\r\n  ChartInternal.prototype.classChartText = function (d) {\r\n      return CLASS.chartText + this.classTarget(d.id);\r\n  };\r\n  ChartInternal.prototype.classChartLine = function (d) {\r\n      return CLASS.chartLine + this.classTarget(d.id);\r\n  };\r\n  ChartInternal.prototype.classChartBar = function (d) {\r\n      return CLASS.chartBar + this.classTarget(d.id);\r\n  };\r\n  ChartInternal.prototype.classChartArc = function (d) {\r\n      return CLASS.chartArc + this.classTarget(d.data.id);\r\n  };\r\n  ChartInternal.prototype.getTargetSelectorSuffix = function (targetId) {\r\n      var targetClass = this.generateTargetClass(targetId);\r\n      if (window.CSS && window.CSS.escape) {\r\n          return window.CSS.escape(targetClass);\r\n      }\r\n      // fallback on imperfect method for old browsers (does not handles unicode)\r\n      return targetClass.replace(/([?!@#$%^&*()=+,.<>'\":;\\[\\]\\/|~`{}\\\\])/g, '\\\\$1');\r\n  };\r\n  ChartInternal.prototype.selectorTarget = function (id, prefix) {\r\n      return (prefix || '') + '.' + CLASS.target + this.getTargetSelectorSuffix(id);\r\n  };\r\n  ChartInternal.prototype.selectorTargets = function (ids, prefix) {\r\n      var $$ = this;\r\n      ids = ids || [];\r\n      return ids.length\r\n          ? ids.map(function (id) {\r\n              return $$.selectorTarget(id, prefix);\r\n          })\r\n          : null;\r\n  };\r\n  ChartInternal.prototype.selectorLegend = function (id) {\r\n      return '.' + CLASS.legendItem + this.getTargetSelectorSuffix(id);\r\n  };\r\n  ChartInternal.prototype.selectorLegends = function (ids) {\r\n      var $$ = this;\r\n      return ids && ids.length\r\n          ? ids.map(function (id) {\r\n              return $$.selectorLegend(id);\r\n          })\r\n          : null;\r\n  };\n\n  ChartInternal.prototype.getClipPath = function (id) {\r\n      return 'url(' + (isIE(9) ? '' : document.URL.split('#')[0]) + '#' + id + ')';\r\n  };\r\n  ChartInternal.prototype.appendClip = function (parent, id) {\r\n      return parent\r\n          .append('clipPath')\r\n          .attr('id', id)\r\n          .append('rect');\r\n  };\r\n  ChartInternal.prototype.getAxisClipX = function (forHorizontal) {\r\n      // axis line width + padding for left\r\n      var left = Math.max(30, this.margin.left);\r\n      return forHorizontal ? -(1 + left) : -(left - 1);\r\n  };\r\n  ChartInternal.prototype.getAxisClipY = function (forHorizontal) {\r\n      return forHorizontal ? -20 : -this.margin.top;\r\n  };\r\n  ChartInternal.prototype.getXAxisClipX = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipX(!$$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getXAxisClipY = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipY(!$$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getYAxisClipX = function () {\r\n      var $$ = this;\r\n      return $$.config.axis_y_inner ? -1 : $$.getAxisClipX($$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getYAxisClipY = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipY($$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getAxisClipWidth = function (forHorizontal) {\r\n      var $$ = this, left = Math.max(30, $$.margin.left), right = Math.max(30, $$.margin.right);\r\n      // width + axis line width + padding for left/right\r\n      return forHorizontal ? $$.width + 2 + left + right : $$.margin.left + 20;\r\n  };\r\n  ChartInternal.prototype.getAxisClipHeight = function (forHorizontal) {\r\n      // less than 20 is not enough to show the axis label 'outer' without legend\r\n      return ((forHorizontal ? this.margin.bottom : this.margin.top + this.height) + 20);\r\n  };\r\n  ChartInternal.prototype.getXAxisClipWidth = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipWidth(!$$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getXAxisClipHeight = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipHeight(!$$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getYAxisClipWidth = function () {\r\n      var $$ = this;\r\n      return ($$.getAxisClipWidth($$.config.axis_rotated) +\r\n          ($$.config.axis_y_inner ? 20 : 0));\r\n  };\r\n  ChartInternal.prototype.getYAxisClipHeight = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipHeight($$.config.axis_rotated);\r\n  };\n\n  ChartInternal.prototype.generateColor = function () {\r\n      var $$ = this, config = $$.config, d3 = $$.d3, colors = config.data_colors, pattern = notEmpty(config.color_pattern)\r\n          ? config.color_pattern\r\n          : d3.schemeCategory10, callback = config.data_color, ids = [];\r\n      return function (d) {\r\n          var id = d.id || (d.data && d.data.id) || d, color;\r\n          // if callback function is provided\r\n          if (colors[id] instanceof Function) {\r\n              color = colors[id](d);\r\n          }\r\n          // if specified, choose that color\r\n          else if (colors[id]) {\r\n              color = colors[id];\r\n          }\r\n          // if not specified, choose from pattern\r\n          else {\r\n              if (ids.indexOf(id) < 0) {\r\n                  ids.push(id);\r\n              }\r\n              color = pattern[ids.indexOf(id) % pattern.length];\r\n              colors[id] = color;\r\n          }\r\n          return callback instanceof Function ? callback(color, d) : color;\r\n      };\r\n  };\r\n  ChartInternal.prototype.generateLevelColor = function () {\r\n      var $$ = this, config = $$.config, colors = config.color_pattern, threshold = config.color_threshold, asValue = threshold.unit === 'value', values = threshold.values && threshold.values.length ? threshold.values : [], max = threshold.max || 100;\r\n      return notEmpty(threshold) && notEmpty(colors)\r\n          ? function (value) {\r\n              var i, v, color = colors[colors.length - 1];\r\n              for (i = 0; i < values.length; i++) {\r\n                  v = asValue ? value : (value * 100) / max;\r\n                  if (v < values[i]) {\r\n                      color = colors[i];\r\n                      break;\r\n                  }\r\n              }\r\n              return color;\r\n          }\r\n          : null;\r\n  };\n\n  ChartInternal.prototype.getDefaultConfig = function () {\r\n      var config = {\r\n          bindto: '#chart',\r\n          svg_classname: undefined,\r\n          size_width: undefined,\r\n          size_height: undefined,\r\n          padding_left: undefined,\r\n          padding_right: undefined,\r\n          padding_top: undefined,\r\n          padding_bottom: undefined,\r\n          resize_auto: true,\r\n          zoom_enabled: false,\r\n          zoom_initialRange: undefined,\r\n          zoom_type: 'scroll',\r\n          zoom_disableDefaultBehavior: false,\r\n          zoom_privileged: false,\r\n          zoom_rescale: false,\r\n          zoom_onzoom: function () { },\r\n          zoom_onzoomstart: function () { },\r\n          zoom_onzoomend: function () { },\r\n          zoom_x_min: undefined,\r\n          zoom_x_max: undefined,\r\n          interaction_brighten: true,\r\n          interaction_enabled: true,\r\n          onmouseover: function () { },\r\n          onmouseout: function () { },\r\n          onresize: function () { },\r\n          onresized: function () { },\r\n          oninit: function () { },\r\n          onrendered: function () { },\r\n          transition_duration: 350,\r\n          data_epochs: 'epochs',\r\n          data_x: undefined,\r\n          data_xs: {},\r\n          data_xFormat: '%Y-%m-%d',\r\n          data_xLocaltime: true,\r\n          data_xSort: true,\r\n          data_idConverter: function (id) {\r\n              return id;\r\n          },\r\n          data_names: {},\r\n          data_classes: {},\r\n          data_groups: [],\r\n          data_axes: {},\r\n          data_type: undefined,\r\n          data_types: {},\r\n          data_labels: {},\r\n          data_order: 'desc',\r\n          data_regions: {},\r\n          data_color: undefined,\r\n          data_colors: {},\r\n          data_hide: false,\r\n          data_filter: undefined,\r\n          data_selection_enabled: false,\r\n          data_selection_grouped: false,\r\n          data_selection_isselectable: function () {\r\n              return true;\r\n          },\r\n          data_selection_multiple: true,\r\n          data_selection_draggable: false,\r\n          data_stack_normalize: false,\r\n          data_onclick: function () { },\r\n          data_onmouseover: function () { },\r\n          data_onmouseout: function () { },\r\n          data_onselected: function () { },\r\n          data_onunselected: function () { },\r\n          data_url: undefined,\r\n          data_headers: undefined,\r\n          data_json: undefined,\r\n          data_rows: undefined,\r\n          data_columns: undefined,\r\n          data_mimeType: undefined,\r\n          data_keys: undefined,\r\n          // configuration for no plot-able data supplied.\r\n          data_empty_label_text: '',\r\n          // subchart\r\n          subchart_show: false,\r\n          subchart_size_height: 60,\r\n          subchart_axis_x_show: true,\r\n          subchart_onbrush: function () { },\r\n          // color\r\n          color_pattern: [],\r\n          color_threshold: {},\r\n          // legend\r\n          legend_show: true,\r\n          legend_hide: false,\r\n          legend_position: 'bottom',\r\n          legend_inset_anchor: 'top-left',\r\n          legend_inset_x: 10,\r\n          legend_inset_y: 0,\r\n          legend_inset_step: undefined,\r\n          legend_item_onclick: undefined,\r\n          legend_item_onmouseover: undefined,\r\n          legend_item_onmouseout: undefined,\r\n          legend_equally: false,\r\n          legend_padding: 0,\r\n          legend_item_tile_width: 10,\r\n          legend_item_tile_height: 10,\r\n          // axis\r\n          axis_rotated: false,\r\n          axis_x_show: true,\r\n          axis_x_type: 'indexed',\r\n          axis_x_localtime: true,\r\n          axis_x_categories: [],\r\n          axis_x_tick_centered: false,\r\n          axis_x_tick_format: undefined,\r\n          axis_x_tick_culling: {},\r\n          axis_x_tick_culling_max: 10,\r\n          axis_x_tick_count: undefined,\r\n          axis_x_tick_fit: true,\r\n          axis_x_tick_values: null,\r\n          axis_x_tick_rotate: 0,\r\n          axis_x_tick_outer: true,\r\n          axis_x_tick_multiline: true,\r\n          axis_x_tick_multilineMax: 0,\r\n          axis_x_tick_width: null,\r\n          axis_x_max: undefined,\r\n          axis_x_min: undefined,\r\n          axis_x_padding: {},\r\n          axis_x_height: undefined,\r\n          axis_x_selection: undefined,\r\n          axis_x_label: {},\r\n          axis_x_inner: undefined,\r\n          axis_y_show: true,\r\n          axis_y_type: 'linear',\r\n          axis_y_max: undefined,\r\n          axis_y_min: undefined,\r\n          axis_y_inverted: false,\r\n          axis_y_center: undefined,\r\n          axis_y_inner: undefined,\r\n          axis_y_label: {},\r\n          axis_y_tick_format: undefined,\r\n          axis_y_tick_outer: true,\r\n          axis_y_tick_values: null,\r\n          axis_y_tick_rotate: 0,\r\n          axis_y_tick_count: undefined,\r\n          axis_y_tick_time_type: undefined,\r\n          axis_y_tick_time_interval: undefined,\r\n          axis_y_padding: {},\r\n          axis_y_default: undefined,\r\n          axis_y2_show: false,\r\n          axis_y2_type: 'linear',\r\n          axis_y2_max: undefined,\r\n          axis_y2_min: undefined,\r\n          axis_y2_inverted: false,\r\n          axis_y2_center: undefined,\r\n          axis_y2_inner: undefined,\r\n          axis_y2_label: {},\r\n          axis_y2_tick_format: undefined,\r\n          axis_y2_tick_outer: true,\r\n          axis_y2_tick_values: null,\r\n          axis_y2_tick_count: undefined,\r\n          axis_y2_padding: {},\r\n          axis_y2_default: undefined,\r\n          // grid\r\n          grid_x_show: false,\r\n          grid_x_type: 'tick',\r\n          grid_x_lines: [],\r\n          grid_y_show: false,\r\n          // not used\r\n          // grid_y_type: 'tick',\r\n          grid_y_lines: [],\r\n          grid_y_ticks: 10,\r\n          grid_focus_show: true,\r\n          grid_lines_front: true,\r\n          // point - point of each data\r\n          point_show: true,\r\n          point_r: 2.5,\r\n          point_sensitivity: 10,\r\n          point_focus_expand_enabled: true,\r\n          point_focus_expand_r: undefined,\r\n          point_select_r: undefined,\r\n          // line\r\n          line_connectNull: false,\r\n          line_step_type: 'step',\r\n          // bar\r\n          bar_width: undefined,\r\n          bar_width_ratio: 0.6,\r\n          bar_width_max: undefined,\r\n          bar_zerobased: true,\r\n          bar_space: 0,\r\n          // area\r\n          area_zerobased: true,\r\n          area_above: false,\r\n          // pie\r\n          pie_label_show: true,\r\n          pie_label_format: undefined,\r\n          pie_label_threshold: 0.05,\r\n          pie_label_ratio: undefined,\r\n          pie_expand: {},\r\n          pie_expand_duration: 50,\r\n          pie_padAngle: 0,\r\n          // gauge\r\n          gauge_fullCircle: false,\r\n          gauge_label_show: true,\r\n          gauge_labelLine_show: true,\r\n          gauge_label_format: undefined,\r\n          gauge_min: 0,\r\n          gauge_max: 100,\r\n          gauge_startingAngle: (-1 * Math.PI) / 2,\r\n          gauge_label_extents: undefined,\r\n          gauge_units: undefined,\r\n          gauge_width: undefined,\r\n          gauge_arcs_minWidth: 5,\r\n          gauge_expand: {},\r\n          gauge_expand_duration: 50,\r\n          // donut\r\n          donut_label_show: true,\r\n          donut_label_format: undefined,\r\n          donut_label_threshold: 0.05,\r\n          donut_label_ratio: undefined,\r\n          donut_width: undefined,\r\n          donut_title: '',\r\n          donut_expand: {},\r\n          donut_expand_duration: 50,\r\n          donut_padAngle: 0,\r\n          // spline\r\n          spline_interpolation_type: 'cardinal',\r\n          // stanford\r\n          stanford_lines: [],\r\n          stanford_regions: [],\r\n          stanford_texts: [],\r\n          stanford_scaleMin: undefined,\r\n          stanford_scaleMax: undefined,\r\n          stanford_scaleWidth: undefined,\r\n          stanford_scaleFormat: undefined,\r\n          stanford_scaleValues: undefined,\r\n          stanford_colors: undefined,\r\n          stanford_padding: {\r\n              top: 0,\r\n              right: 0,\r\n              bottom: 0,\r\n              left: 0\r\n          },\r\n          // region - region to change style\r\n          regions: [],\r\n          // tooltip - show when mouseover on each data\r\n          tooltip_show: true,\r\n          tooltip_grouped: true,\r\n          tooltip_order: undefined,\r\n          tooltip_format_title: undefined,\r\n          tooltip_format_name: undefined,\r\n          tooltip_format_value: undefined,\r\n          tooltip_horizontal: undefined,\r\n          tooltip_position: undefined,\r\n          tooltip_contents: function (d, defaultTitleFormat, defaultValueFormat, color) {\r\n              return this.getTooltipContent\r\n                  ? this.getTooltipContent(d, defaultTitleFormat, defaultValueFormat, color)\r\n                  : '';\r\n          },\r\n          tooltip_init_show: false,\r\n          tooltip_init_x: 0,\r\n          tooltip_init_position: { top: '0px', left: '50px' },\r\n          tooltip_onshow: function () { },\r\n          tooltip_onhide: function () { },\r\n          // title\r\n          title_text: undefined,\r\n          title_padding: {\r\n              top: 0,\r\n              right: 0,\r\n              bottom: 0,\r\n              left: 0\r\n          },\r\n          title_position: 'top-center'\r\n      };\r\n      Object.keys(this.additionalConfig).forEach(function (key) {\r\n          config[key] = this.additionalConfig[key];\r\n      }, this);\r\n      return config;\r\n  };\r\n  ChartInternal.prototype.additionalConfig = {};\r\n  ChartInternal.prototype.loadConfig = function (config) {\r\n      var this_config = this.config, target, keys, read;\r\n      function find() {\r\n          var key = keys.shift();\r\n          //        console.log(\"key =>\", key, \", target =>\", target);\r\n          if (key && target && typeof target === 'object' && key in target) {\r\n              target = target[key];\r\n              return find();\r\n          }\r\n          else if (!key) {\r\n              return target;\r\n          }\r\n          else {\r\n              return undefined;\r\n          }\r\n      }\r\n      Object.keys(this_config).forEach(function (key) {\r\n          target = config;\r\n          keys = key.split('_');\r\n          read = find();\r\n          //        console.log(\"CONFIG : \", key, read);\r\n          if (isDefined(read)) {\r\n              this_config[key] = read;\r\n          }\r\n      });\r\n  };\n\n  ChartInternal.prototype.convertUrlToData = function (url, mimeType, headers, keys, done) {\r\n      var $$ = this, type = mimeType ? mimeType : 'csv', f, converter;\r\n      if (type === 'json') {\r\n          f = $$.d3.json;\r\n          converter = $$.convertJsonToData;\r\n      }\r\n      else if (type === 'tsv') {\r\n          f = $$.d3.tsv;\r\n          converter = $$.convertXsvToData;\r\n      }\r\n      else {\r\n          f = $$.d3.csv;\r\n          converter = $$.convertXsvToData;\r\n      }\r\n      f(url, headers)\r\n          .then(function (data) {\r\n          done.call($$, converter.call($$, data, keys));\r\n      })\r\n          .catch(function (error) {\r\n          throw error;\r\n      });\r\n  };\r\n  ChartInternal.prototype.convertXsvToData = function (xsv) {\r\n      var keys = xsv.columns, rows = xsv;\r\n      if (rows.length === 0) {\r\n          return {\r\n              keys: keys,\r\n              rows: [keys.reduce(function (row, key) {\r\n                      var _a;\r\n                      return Object.assign(row, (_a = {}, _a[key] = null, _a));\r\n                  }, {})]\r\n          };\r\n      }\r\n      else {\r\n          // [].concat() is to convert result into a plain array otherwise\r\n          // test is not happy because rows have properties.\r\n          return { keys: keys, rows: [].concat(xsv) };\r\n      }\r\n  };\r\n  ChartInternal.prototype.convertJsonToData = function (json, keys) {\r\n      var $$ = this, new_rows = [], targetKeys, data;\r\n      if (keys) {\r\n          // when keys specified, json would be an array that includes objects\r\n          if (keys.x) {\r\n              targetKeys = keys.value.concat(keys.x);\r\n              $$.config.data_x = keys.x;\r\n          }\r\n          else {\r\n              targetKeys = keys.value;\r\n          }\r\n          new_rows.push(targetKeys);\r\n          json.forEach(function (o) {\r\n              var new_row = [];\r\n              targetKeys.forEach(function (key) {\r\n                  // convert undefined to null because undefined data will be removed in convertDataToTargets()\r\n                  var v = $$.findValueInJson(o, key);\r\n                  if (isUndefined(v)) {\r\n                      v = null;\r\n                  }\r\n                  new_row.push(v);\r\n              });\r\n              new_rows.push(new_row);\r\n          });\r\n          data = $$.convertRowsToData(new_rows);\r\n      }\r\n      else {\r\n          Object.keys(json).forEach(function (key) {\r\n              new_rows.push([key].concat(json[key]));\r\n          });\r\n          data = $$.convertColumnsToData(new_rows);\r\n      }\r\n      return data;\r\n  };\r\n  /**\r\n   * Finds value from the given nested object by the given path.\r\n   * If it's not found, then this returns undefined.\r\n   * @param {Object} object the object\r\n   * @param {string} path the path\r\n   */\r\n  ChartInternal.prototype.findValueInJson = function (object, path) {\r\n      if (path in object) {\r\n          // If object has a key that contains . or [], return the key's value\r\n          // instead of searching for an inner object.\r\n          // See https://github.com/c3js/c3/issues/1691 for details.\r\n          return object[path];\r\n      }\r\n      path = path.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties (replace [] with .)\r\n      path = path.replace(/^\\./, ''); // strip a leading dot\r\n      var pathArray = path.split('.');\r\n      for (var i = 0; i < pathArray.length; ++i) {\r\n          var k = pathArray[i];\r\n          if (k in object) {\r\n              object = object[k];\r\n          }\r\n          else {\r\n              return;\r\n          }\r\n      }\r\n      return object;\r\n  };\r\n  /**\r\n   * Converts the rows to normalized data.\r\n   * @param {any[][]} rows The row data\r\n   * @return {Object}\r\n   */\r\n  ChartInternal.prototype.convertRowsToData = function (rows) {\r\n      var newRows = [];\r\n      var keys = rows[0];\r\n      for (var i = 1; i < rows.length; i++) {\r\n          var newRow = {};\r\n          for (var j = 0; j < rows[i].length; j++) {\r\n              if (isUndefined(rows[i][j])) {\r\n                  throw new Error('Source data is missing a component at (' + i + ',' + j + ')!');\r\n              }\r\n              newRow[keys[j]] = rows[i][j];\r\n          }\r\n          newRows.push(newRow);\r\n      }\r\n      return { keys: keys, rows: newRows };\r\n  };\r\n  /**\r\n   * Converts the columns to normalized data.\r\n   * @param {any[][]} columns The column data\r\n   * @return {Object}\r\n   */\r\n  ChartInternal.prototype.convertColumnsToData = function (columns) {\r\n      var newRows = [];\r\n      var keys = [];\r\n      for (var i = 0; i < columns.length; i++) {\r\n          var key = columns[i][0];\r\n          for (var j = 1; j < columns[i].length; j++) {\r\n              if (isUndefined(newRows[j - 1])) {\r\n                  newRows[j - 1] = {};\r\n              }\r\n              if (isUndefined(columns[i][j])) {\r\n                  throw new Error('Source data is missing a component at (' + i + ',' + j + ')!');\r\n              }\r\n              newRows[j - 1][key] = columns[i][j];\r\n          }\r\n          keys.push(key);\r\n      }\r\n      return { keys: keys, rows: newRows };\r\n  };\r\n  /**\r\n   * Converts the data format into the target format.\r\n   * @param {!Object} data\r\n   * @param {!Array} data.keys Ordered list of target IDs.\r\n   * @param {!Array} data.rows Rows of data to convert.\r\n   * @param {boolean} appendXs True to append to $$.data.xs, False to replace.\r\n   * @return {!Array}\r\n   */\r\n  ChartInternal.prototype.convertDataToTargets = function (data, appendXs) {\r\n      var $$ = this, config = $$.config, targets, ids, xs, keys, epochs;\r\n      // handles format where keys are not orderly provided\r\n      if (isArray(data)) {\r\n          keys = Object.keys(data[0]);\r\n      }\r\n      else {\r\n          keys = data.keys;\r\n          data = data.rows;\r\n      }\r\n      xs = keys.filter($$.isX, $$);\r\n      if (!$$.isStanfordGraphType()) {\r\n          ids = keys.filter($$.isNotX, $$);\r\n      }\r\n      else {\r\n          epochs = keys.filter($$.isEpochs, $$);\r\n          ids = keys.filter($$.isNotXAndNotEpochs, $$);\r\n          if (xs.length !== 1 || epochs.length !== 1 || ids.length !== 1) {\r\n              throw new Error(\"You must define the 'x' key name and the 'epochs' for Stanford Diagrams\");\r\n          }\r\n      }\r\n      // save x for update data by load when custom x and c3.x API\r\n      ids.forEach(function (id) {\r\n          var xKey = $$.getXKey(id);\r\n          if ($$.isCustomX() || $$.isTimeSeries()) {\r\n              // if included in input data\r\n              if (xs.indexOf(xKey) >= 0) {\r\n                  $$.data.xs[id] = (appendXs && $$.data.xs[id]\r\n                      ? $$.data.xs[id]\r\n                      : []).concat(data\r\n                      .map(function (d) {\r\n                      return d[xKey];\r\n                  })\r\n                      .filter(isValue)\r\n                      .map(function (rawX, i) {\r\n                      return $$.generateTargetX(rawX, id, i);\r\n                  }));\r\n              }\r\n              // if not included in input data, find from preloaded data of other id's x\r\n              else if (config.data_x) {\r\n                  $$.data.xs[id] = $$.getOtherTargetXs();\r\n              }\r\n              // if not included in input data, find from preloaded data\r\n              else if (notEmpty(config.data_xs)) {\r\n                  $$.data.xs[id] = $$.getXValuesOfXKey(xKey, $$.data.targets);\r\n              }\r\n              // MEMO: if no x included, use same x of current will be used\r\n          }\r\n          else {\r\n              $$.data.xs[id] = data.map(function (d, i) {\r\n                  return i;\r\n              });\r\n          }\r\n      });\r\n      // check x is defined\r\n      ids.forEach(function (id) {\r\n          if (!$$.data.xs[id]) {\r\n              throw new Error('x is not defined for id = \"' + id + '\".');\r\n          }\r\n      });\r\n      // convert to target\r\n      targets = ids.map(function (id, index) {\r\n          var convertedId = config.data_idConverter(id);\r\n          return {\r\n              id: convertedId,\r\n              id_org: id,\r\n              values: data\r\n                  .map(function (d, i) {\r\n                  var xKey = $$.getXKey(id), rawX = d[xKey], value = d[id] !== null && !isNaN(d[id]) ? +d[id] : null, x, returnData;\r\n                  // use x as categories if custom x and categorized\r\n                  if ($$.isCustomX() && $$.isCategorized() && !isUndefined(rawX)) {\r\n                      if (index === 0 && i === 0) {\r\n                          config.axis_x_categories = [];\r\n                      }\r\n                      x = config.axis_x_categories.indexOf(rawX);\r\n                      if (x === -1) {\r\n                          x = config.axis_x_categories.length;\r\n                          config.axis_x_categories.push(rawX);\r\n                      }\r\n                  }\r\n                  else {\r\n                      x = $$.generateTargetX(rawX, id, i);\r\n                  }\r\n                  // mark as x = undefined if value is undefined and filter to remove after mapped\r\n                  if (isUndefined(d[id]) || $$.data.xs[id].length <= i) {\r\n                      x = undefined;\r\n                  }\r\n                  returnData = { x: x, value: value, id: convertedId };\r\n                  if ($$.isStanfordGraphType()) {\r\n                      returnData.epochs = d[epochs];\r\n                  }\r\n                  return returnData;\r\n              })\r\n                  .filter(function (v) {\r\n                  return isDefined(v.x);\r\n              })\r\n          };\r\n      });\r\n      // finish targets\r\n      targets.forEach(function (t) {\r\n          var i;\r\n          // sort values by its x\r\n          if (config.data_xSort) {\r\n              t.values = t.values.sort(function (v1, v2) {\r\n                  var x1 = v1.x || v1.x === 0 ? v1.x : Infinity, x2 = v2.x || v2.x === 0 ? v2.x : Infinity;\r\n                  return x1 - x2;\r\n              });\r\n          }\r\n          // indexing each value\r\n          i = 0;\r\n          t.values.forEach(function (v) {\r\n              v.index = i++;\r\n          });\r\n          // this needs to be sorted because its index and value.index is identical\r\n          $$.data.xs[t.id].sort(function (v1, v2) {\r\n              return v1 - v2;\r\n          });\r\n      });\r\n      // cache information about values\r\n      $$.hasNegativeValue = $$.hasNegativeValueInTargets(targets);\r\n      $$.hasPositiveValue = $$.hasPositiveValueInTargets(targets);\r\n      // set target types\r\n      if (config.data_type) {\r\n          $$.setTargetType($$.mapToIds(targets).filter(function (id) {\r\n              return !(id in config.data_types);\r\n          }), config.data_type);\r\n      }\r\n      // cache as original id keyed\r\n      targets.forEach(function (d) {\r\n          $$.addCache(d.id_org, d);\r\n      });\r\n      return targets;\r\n  };\n\n  ChartInternal.prototype.isEpochs = function (key) {\r\n      var $$ = this, config = $$.config;\r\n      return config.data_epochs && key === config.data_epochs;\r\n  };\r\n  ChartInternal.prototype.isX = function (key) {\r\n      var $$ = this, config = $$.config;\r\n      return ((config.data_x && key === config.data_x) ||\r\n          (notEmpty(config.data_xs) && hasValue(config.data_xs, key)));\r\n  };\r\n  ChartInternal.prototype.isNotX = function (key) {\r\n      return !this.isX(key);\r\n  };\r\n  ChartInternal.prototype.isNotXAndNotEpochs = function (key) {\r\n      return !this.isX(key) && !this.isEpochs(key);\r\n  };\r\n  /**\r\n   * Returns whether the normalized stack option is enabled or not.\r\n   *\r\n   * To be enabled it must also have data.groups defined.\r\n   *\r\n   * @return {boolean}\r\n   */\r\n  ChartInternal.prototype.isStackNormalized = function () {\r\n      return this.config.data_stack_normalize && this.config.data_groups.length > 0;\r\n  };\r\n  /**\r\n   * Returns whether the axis is normalized or not.\r\n   *\r\n   * An axis is normalized as long as one of its associated target\r\n   * is normalized.\r\n   *\r\n   * @param axisId Axis ID (y or y2)\r\n   * @return {Boolean}\r\n   */\r\n  ChartInternal.prototype.isAxisNormalized = function (axisId) {\r\n      var $$ = this;\r\n      if (!$$.isStackNormalized()) {\r\n          // shortcut\r\n          return false;\r\n      }\r\n      return $$.data.targets\r\n          .filter(function (target) { return $$.axis.getId(target.id) === axisId; })\r\n          .some(function (target) { return $$.isTargetNormalized(target.id); });\r\n  };\r\n  /**\r\n   * Returns whether the values for this target ID is normalized or not.\r\n   *\r\n   * To be normalized the option needs to be enabled and target needs\r\n   * to be defined in `data.groups`.\r\n   *\r\n   * @param targetId ID of the target\r\n   * @return {Boolean} True if the target is normalized, false otherwise.\r\n   */\r\n  ChartInternal.prototype.isTargetNormalized = function (targetId) {\r\n      var $$ = this;\r\n      return ($$.isStackNormalized() &&\r\n          $$.config.data_groups.some(function (group) { return group.includes(targetId); }));\r\n  };\r\n  ChartInternal.prototype.getXKey = function (id) {\r\n      var $$ = this, config = $$.config;\r\n      return config.data_x\r\n          ? config.data_x\r\n          : notEmpty(config.data_xs)\r\n              ? config.data_xs[id]\r\n              : null;\r\n  };\r\n  /**\r\n   * Get sum of visible data per index for given axis.\r\n   *\r\n   * Expect axisId to be either 'y' or 'y2'.\r\n   *\r\n   * @private\r\n   * @param axisId Compute sum for data associated to given axis.\r\n   * @return {Array}\r\n   */\r\n  ChartInternal.prototype.getTotalPerIndex = function (axisId) {\r\n      var $$ = this;\r\n      if (!$$.isStackNormalized()) {\r\n          return null;\r\n      }\r\n      var cached = $$.getFromCache('getTotalPerIndex');\r\n      if (cached !== undefined) {\r\n          return cached[axisId];\r\n      }\r\n      var sum = { y: [], y2: [] };\r\n      $$.data.targets\r\n          // keep only target that are normalized\r\n          .filter(function (target) { return $$.isTargetNormalized(target.id); })\r\n          // keep only target that are visible\r\n          .filter(function (target) { return $$.isTargetToShow(target.id); })\r\n          // compute sum per axis\r\n          .forEach(function (target) {\r\n          var sumByAxis = sum[$$.axis.getId(target.id)];\r\n          target.values.forEach(function (v, i) {\r\n              if (!sumByAxis[i]) {\r\n                  sumByAxis[i] = 0;\r\n              }\r\n              sumByAxis[i] += isNumber(v.value) ? v.value : 0;\r\n          });\r\n      });\r\n      $$.addToCache('getTotalPerIndex', sum);\r\n      return sum[axisId];\r\n  };\r\n  /**\r\n   * Get sum of visible data.\r\n   *\r\n   * Should be used for normalised data only since all values\r\n   * are expected to be positive.\r\n   *\r\n   * @private\r\n   * @return {Number}\r\n   */\r\n  ChartInternal.prototype.getTotalDataSum = function () {\r\n      var $$ = this;\r\n      var cached = $$.getFromCache('getTotalDataSum');\r\n      if (cached !== undefined) {\r\n          return cached;\r\n      }\r\n      var totalDataSum = flattenArray($$.data.targets\r\n          .filter(function (target) { return $$.isTargetToShow(target.id); })\r\n          .map(function (target) { return target.values; }))\r\n          .map(function (d) { return d.value; })\r\n          .reduce(function (p, c) { return p + c; }, 0);\r\n      $$.addToCache('getTotalDataSum', totalDataSum);\r\n      return totalDataSum;\r\n  };\r\n  ChartInternal.prototype.getXValuesOfXKey = function (key, targets) {\r\n      var $$ = this, xValues, ids = targets && notEmpty(targets) ? $$.mapToIds(targets) : [];\r\n      ids.forEach(function (id) {\r\n          if ($$.getXKey(id) === key) {\r\n              xValues = $$.data.xs[id];\r\n          }\r\n      });\r\n      return xValues;\r\n  };\r\n  ChartInternal.prototype.getXValue = function (id, i) {\r\n      var $$ = this;\r\n      return id in $$.data.xs && $$.data.xs[id] && isValue($$.data.xs[id][i])\r\n          ? $$.data.xs[id][i]\r\n          : i;\r\n  };\r\n  ChartInternal.prototype.getOtherTargetXs = function () {\r\n      var $$ = this, idsForX = Object.keys($$.data.xs);\r\n      return idsForX.length ? $$.data.xs[idsForX[0]] : null;\r\n  };\r\n  ChartInternal.prototype.getOtherTargetX = function (index) {\r\n      var xs = this.getOtherTargetXs();\r\n      return xs && index < xs.length ? xs[index] : null;\r\n  };\r\n  ChartInternal.prototype.addXs = function (xs) {\r\n      var $$ = this;\r\n      Object.keys(xs).forEach(function (id) {\r\n          $$.config.data_xs[id] = xs[id];\r\n      });\r\n  };\r\n  ChartInternal.prototype.addName = function (data) {\r\n      var $$ = this, name;\r\n      if (data) {\r\n          name = $$.config.data_names[data.id];\r\n          data.name = name !== undefined ? name : data.id;\r\n      }\r\n      return data;\r\n  };\r\n  ChartInternal.prototype.getValueOnIndex = function (values, index) {\r\n      var valueOnIndex = values.filter(function (v) {\r\n          return v.index === index;\r\n      });\r\n      return valueOnIndex.length ? valueOnIndex[0] : null;\r\n  };\r\n  ChartInternal.prototype.updateTargetX = function (targets, x) {\r\n      var $$ = this;\r\n      targets.forEach(function (t) {\r\n          t.values.forEach(function (v, i) {\r\n              v.x = $$.generateTargetX(x[i], t.id, i);\r\n          });\r\n          $$.data.xs[t.id] = x;\r\n      });\r\n  };\r\n  ChartInternal.prototype.updateTargetXs = function (targets, xs) {\r\n      var $$ = this;\r\n      targets.forEach(function (t) {\r\n          if (xs[t.id]) {\r\n              $$.updateTargetX([t], xs[t.id]);\r\n          }\r\n      });\r\n  };\r\n  ChartInternal.prototype.generateTargetX = function (rawX, id, index) {\r\n      var $$ = this, x;\r\n      if ($$.isTimeSeries()) {\r\n          x = rawX ? $$.parseDate(rawX) : $$.parseDate($$.getXValue(id, index));\r\n      }\r\n      else if ($$.isCustomX() && !$$.isCategorized()) {\r\n          x = isValue(rawX) ? +rawX : $$.getXValue(id, index);\r\n      }\r\n      else {\r\n          x = index;\r\n      }\r\n      return x;\r\n  };\r\n  ChartInternal.prototype.cloneTarget = function (target) {\r\n      return {\r\n          id: target.id,\r\n          id_org: target.id_org,\r\n          values: target.values.map(function (d) {\r\n              return {\r\n                  x: d.x,\r\n                  value: d.value,\r\n                  id: d.id\r\n              };\r\n          })\r\n      };\r\n  };\r\n  ChartInternal.prototype.getMaxDataCount = function () {\r\n      var $$ = this;\r\n      return $$.d3.max($$.data.targets, function (t) {\r\n          return t.values.length;\r\n      });\r\n  };\r\n  ChartInternal.prototype.mapToIds = function (targets) {\r\n      return targets.map(function (d) {\r\n          return d.id;\r\n      });\r\n  };\r\n  ChartInternal.prototype.mapToTargetIds = function (ids) {\r\n      var $$ = this;\r\n      return ids ? [].concat(ids) : $$.mapToIds($$.data.targets);\r\n  };\r\n  ChartInternal.prototype.hasTarget = function (targets, id) {\r\n      var ids = this.mapToIds(targets), i;\r\n      for (i = 0; i < ids.length; i++) {\r\n          if (ids[i] === id) {\r\n              return true;\r\n          }\r\n      }\r\n      return false;\r\n  };\r\n  ChartInternal.prototype.isTargetToShow = function (targetId) {\r\n      return this.hiddenTargetIds.indexOf(targetId) < 0;\r\n  };\r\n  ChartInternal.prototype.isLegendToShow = function (targetId) {\r\n      return this.hiddenLegendIds.indexOf(targetId) < 0;\r\n  };\r\n  /**\r\n   * Returns only visible targets.\r\n   *\r\n   * This is the same as calling {@link filterTargetsToShow} on $$.data.targets.\r\n   *\r\n   * @return {Array}\r\n   */\r\n  ChartInternal.prototype.getTargetsToShow = function () {\r\n      var $$ = this;\r\n      return $$.filterTargetsToShow($$.data.targets);\r\n  };\r\n  ChartInternal.prototype.filterTargetsToShow = function (targets) {\r\n      var $$ = this;\r\n      return targets.filter(function (t) {\r\n          return $$.isTargetToShow(t.id);\r\n      });\r\n  };\r\n  /**\r\n   * @return {Array} Returns all the targets attached to the chart, visible or not\r\n   */\r\n  ChartInternal.prototype.getTargets = function () {\r\n      var $$ = this;\r\n      return $$.data.targets;\r\n  };\r\n  ChartInternal.prototype.mapTargetsToUniqueXs = function (targets) {\r\n      var $$ = this;\r\n      var xs = $$.d3\r\n          .set($$.d3.merge(targets.map(function (t) {\r\n          return t.values.map(function (v) {\r\n              return +v.x;\r\n          });\r\n      })))\r\n          .values();\r\n      xs = $$.isTimeSeries()\r\n          ? xs.map(function (x) {\r\n              return new Date(+x);\r\n          })\r\n          : xs.map(function (x) {\r\n              return +x;\r\n          });\r\n      return xs.sort(function (a, b) {\r\n          return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\r\n      });\r\n  };\r\n  ChartInternal.prototype.addHiddenTargetIds = function (targetIds) {\r\n      targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\r\n      for (var i = 0; i < targetIds.length; i++) {\r\n          if (this.hiddenTargetIds.indexOf(targetIds[i]) < 0) {\r\n              this.hiddenTargetIds = this.hiddenTargetIds.concat(targetIds[i]);\r\n          }\r\n      }\r\n      this.resetCache();\r\n  };\r\n  ChartInternal.prototype.removeHiddenTargetIds = function (targetIds) {\r\n      this.hiddenTargetIds = this.hiddenTargetIds.filter(function (id) {\r\n          return targetIds.indexOf(id) < 0;\r\n      });\r\n      this.resetCache();\r\n  };\r\n  ChartInternal.prototype.addHiddenLegendIds = function (targetIds) {\r\n      targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\r\n      for (var i = 0; i < targetIds.length; i++) {\r\n          if (this.hiddenLegendIds.indexOf(targetIds[i]) < 0) {\r\n              this.hiddenLegendIds = this.hiddenLegendIds.concat(targetIds[i]);\r\n          }\r\n      }\r\n  };\r\n  ChartInternal.prototype.removeHiddenLegendIds = function (targetIds) {\r\n      this.hiddenLegendIds = this.hiddenLegendIds.filter(function (id) {\r\n          return targetIds.indexOf(id) < 0;\r\n      });\r\n  };\r\n  ChartInternal.prototype.getValuesAsIdKeyed = function (targets) {\r\n      var ys = {};\r\n      targets.forEach(function (t) {\r\n          ys[t.id] = [];\r\n          t.values.forEach(function (v) {\r\n              ys[t.id].push(v.value);\r\n          });\r\n      });\r\n      return ys;\r\n  };\r\n  ChartInternal.prototype.checkValueInTargets = function (targets, checker) {\r\n      var ids = Object.keys(targets), i, j, values;\r\n      for (i = 0; i < ids.length; i++) {\r\n          values = targets[ids[i]].values;\r\n          for (j = 0; j < values.length; j++) {\r\n              if (checker(values[j].value)) {\r\n                  return true;\r\n              }\r\n          }\r\n      }\r\n      return false;\r\n  };\r\n  ChartInternal.prototype.hasNegativeValueInTargets = function (targets) {\r\n      return this.checkValueInTargets(targets, function (v) {\r\n          return v < 0;\r\n      });\r\n  };\r\n  ChartInternal.prototype.hasPositiveValueInTargets = function (targets) {\r\n      return this.checkValueInTargets(targets, function (v) {\r\n          return v > 0;\r\n      });\r\n  };\r\n  ChartInternal.prototype.isOrderDesc = function () {\r\n      var config = this.config;\r\n      return (typeof config.data_order === 'string' &&\r\n          config.data_order.toLowerCase() === 'desc');\r\n  };\r\n  ChartInternal.prototype.isOrderAsc = function () {\r\n      var config = this.config;\r\n      return (typeof config.data_order === 'string' &&\r\n          config.data_order.toLowerCase() === 'asc');\r\n  };\r\n  ChartInternal.prototype.getOrderFunction = function () {\r\n      var $$ = this, config = $$.config, orderAsc = $$.isOrderAsc(), orderDesc = $$.isOrderDesc();\r\n      if (orderAsc || orderDesc) {\r\n          var reducer = function (p, c) {\r\n              return p + Math.abs(c.value);\r\n          };\r\n          return function (t1, t2) {\r\n              var t1Sum = t1.values.reduce(reducer, 0), t2Sum = t2.values.reduce(reducer, 0);\r\n              return orderAsc ? t2Sum - t1Sum : t1Sum - t2Sum;\r\n          };\r\n      }\r\n      else if (isFunction(config.data_order)) {\r\n          return config.data_order;\r\n      }\r\n      else if (isArray(config.data_order)) {\r\n          var order = config.data_order;\r\n          return function (t1, t2) {\r\n              return order.indexOf(t1.id) - order.indexOf(t2.id);\r\n          };\r\n      }\r\n  };\r\n  ChartInternal.prototype.orderTargets = function (targets) {\r\n      var fct = this.getOrderFunction();\r\n      if (fct) {\r\n          targets.sort(fct);\r\n      }\r\n      return targets;\r\n  };\r\n  /**\r\n   * Returns all the values from the given targets at the given index.\r\n   *\r\n   * @param {Array} targets\r\n   * @param {Number} index\r\n   * @return {Array}\r\n   */\r\n  ChartInternal.prototype.filterByIndex = function (targets, index) {\r\n      return this.d3.merge(targets.map(function (t) { return t.values.filter(function (v) { return v.index === index; }); }));\r\n  };\r\n  ChartInternal.prototype.filterByX = function (targets, x) {\r\n      return this.d3\r\n          .merge(targets.map(function (t) {\r\n          return t.values;\r\n      }))\r\n          .filter(function (v) {\r\n          return v.x - x === 0;\r\n      });\r\n  };\r\n  ChartInternal.prototype.filterRemoveNull = function (data) {\r\n      return data.filter(function (d) {\r\n          return isValue(d.value);\r\n      });\r\n  };\r\n  ChartInternal.prototype.filterByXDomain = function (targets, xDomain) {\r\n      return targets.map(function (t) {\r\n          return {\r\n              id: t.id,\r\n              id_org: t.id_org,\r\n              values: t.values.filter(function (v) {\r\n                  return xDomain[0] <= v.x && v.x <= xDomain[1];\r\n              })\r\n          };\r\n      });\r\n  };\r\n  ChartInternal.prototype.hasDataLabel = function () {\r\n      var config = this.config;\r\n      if (typeof config.data_labels === 'boolean' && config.data_labels) {\r\n          return true;\r\n      }\r\n      else if (typeof config.data_labels === 'object' &&\r\n          notEmpty(config.data_labels)) {\r\n          return true;\r\n      }\r\n      return false;\r\n  };\r\n  ChartInternal.prototype.getDataLabelLength = function (min, max, key) {\r\n      var $$ = this, lengths = [0, 0], paddingCoef = 1.3;\r\n      $$.selectChart\r\n          .select('svg')\r\n          .selectAll('.dummy')\r\n          .data([min, max])\r\n          .enter()\r\n          .append('text')\r\n          .text(function (d) {\r\n          return $$.dataLabelFormat(d.id)(d);\r\n      })\r\n          .each(function (d, i) {\r\n          lengths[i] = getBBox(this)[key] * paddingCoef;\r\n      })\r\n          .remove();\r\n      return lengths;\r\n  };\r\n  /**\r\n   * Returns true if the given data point is not arc type, otherwise false.\r\n   * @param {Object} d The data point\r\n   * @return {boolean}\r\n   */\r\n  ChartInternal.prototype.isNoneArc = function (d) {\r\n      return this.hasTarget(this.data.targets, d.id);\r\n  };\r\n  /**\r\n   * Returns true if the given data point is arc type, otherwise false.\r\n   * @param {Object} d The data point\r\n   * @return {boolean}\r\n   */\r\n  ChartInternal.prototype.isArc = function (d) {\r\n      return 'data' in d && this.hasTarget(this.data.targets, d.data.id);\r\n  };\r\n  /**\r\n   * Find the closest point from the given pos among the given targets or\r\n   * undefined if none satisfies conditions.\r\n   *\r\n   * @param {Array} targets\r\n   * @param {Array} pos An [x,y] coordinate\r\n   * @return {Object|undefined}\r\n   */\r\n  ChartInternal.prototype.findClosestFromTargets = function (targets, pos) {\r\n      var $$ = this;\r\n      // for each target, find the closest point\r\n      var candidates = targets\r\n          .map(function (t) {\r\n          return $$.findClosest(t.values, pos, $$.config.tooltip_horizontal\r\n              ? $$.horizontalDistance.bind($$)\r\n              : $$.dist.bind($$), $$.config.point_sensitivity);\r\n      })\r\n          .filter(function (v) { return v; });\r\n      // returns the closest of candidates\r\n      if (candidates.length === 0) {\r\n          return undefined;\r\n      }\r\n      else if (candidates.length === 1) {\r\n          return candidates[0];\r\n      }\r\n      else {\r\n          return $$.findClosest(candidates, pos, $$.dist.bind($$));\r\n      }\r\n  };\r\n  /**\r\n   * Find the closest point from the x value or undefined if none satisfies conditions.\r\n   *\r\n   * @param {Array} targets\r\n   * @param {Array} x A value on X axis\r\n   * @return {Object|undefined}\r\n   */\r\n  ChartInternal.prototype.findClosestFromTargetsByX = function (targets, x) {\r\n      var closest;\r\n      var diff;\r\n      targets.forEach(function (t) {\r\n          t.values.forEach(function (d) {\r\n              var newDiff = Math.abs(x - d.x);\r\n              if (diff === undefined || newDiff < diff) {\r\n                  closest = d;\r\n                  diff = newDiff;\r\n              }\r\n          });\r\n      });\r\n      return closest;\r\n  };\r\n  /**\r\n   * Using given compute distance method, returns the closest data point from the\r\n   * given position.\r\n   *\r\n   * Giving optionally a minimum distance to satisfy.\r\n   *\r\n   * @param {Array} dataPoints List of DataPoints\r\n   * @param {Array} pos An [x,y] coordinate\r\n   * @param {Function} computeDist Function to compute distance between 2 points\r\n   * @param {Number} minDist Minimal distance to satisfy\r\n   * @return {Object|undefined} Closest data point\r\n   */\r\n  ChartInternal.prototype.findClosest = function (dataPoints, pos, computeDist, minDist) {\r\n      if (minDist === void 0) { minDist = Infinity; }\r\n      var $$ = this;\r\n      var closest;\r\n      // find closest bar\r\n      dataPoints\r\n          .filter(function (v) { return v && $$.isBarType(v.id); })\r\n          .forEach(function (v) {\r\n          if (!closest) {\r\n              var shape = $$.main\r\n                  .select('.' +\r\n                  CLASS.bars +\r\n                  $$.getTargetSelectorSuffix(v.id) +\r\n                  ' .' +\r\n                  CLASS.bar +\r\n                  '-' +\r\n                  v.index)\r\n                  .node();\r\n              if ($$.isWithinBar(pos, shape)) {\r\n                  closest = v;\r\n              }\r\n          }\r\n      });\r\n      // find closest point from non-bar\r\n      dataPoints\r\n          .filter(function (v) { return v && !$$.isBarType(v.id); })\r\n          .forEach(function (v) {\r\n          var d = computeDist(v, pos);\r\n          if (d < minDist) {\r\n              minDist = d;\r\n              closest = v;\r\n          }\r\n      });\r\n      return closest;\r\n  };\r\n  ChartInternal.prototype.dist = function (data, pos) {\r\n      var $$ = this, config = $$.config, xIndex = config.axis_rotated ? 1 : 0, yIndex = config.axis_rotated ? 0 : 1, y = $$.circleY(data, data.index), x = $$.x(data.x);\r\n      return Math.sqrt(Math.pow(x - pos[xIndex], 2) + Math.pow(y - pos[yIndex], 2));\r\n  };\r\n  ChartInternal.prototype.horizontalDistance = function (data, pos) {\r\n      var $$ = this, config = $$.config, xIndex = config.axis_rotated ? 1 : 0, x = $$.x(data.x);\r\n      return Math.abs(x - pos[xIndex]);\r\n  };\r\n  ChartInternal.prototype.convertValuesToStep = function (values) {\r\n      var converted = [].concat(values), i;\r\n      if (!this.isCategorized()) {\r\n          return values;\r\n      }\r\n      for (i = values.length + 1; 0 < i; i--) {\r\n          converted[i] = converted[i - 1];\r\n      }\r\n      converted[0] = {\r\n          x: converted[0].x - 1,\r\n          value: converted[0].value,\r\n          id: converted[0].id\r\n      };\r\n      converted[values.length + 1] = {\r\n          x: converted[values.length].x + 1,\r\n          value: converted[values.length].value,\r\n          id: converted[values.length].id\r\n      };\r\n      return converted;\r\n  };\r\n  /**\r\n   * Get ratio value\r\n   *\r\n   * @param {String} type Ratio for given type\r\n   * @param {Object} d Data value object\r\n   * @param {Boolean} asPercent Convert the return as percent or not\r\n   * @return {Number} Ratio value\r\n   * @private\r\n   */\r\n  ChartInternal.prototype.getRatio = function (type, d, asPercent) {\r\n      if (asPercent === void 0) { asPercent = false; }\r\n      var $$ = this;\r\n      var api = $$.api;\r\n      var ratio = 0;\r\n      if (d && api.data.shown.call(api).length) {\r\n          ratio = d.ratio || d.value;\r\n          if (type === 'arc') {\r\n              if ($$.hasType('gauge')) {\r\n                  ratio =\r\n                      (d.endAngle - d.startAngle) /\r\n                          (Math.PI * ($$.config.gauge_fullCircle ? 2 : 1));\r\n              }\r\n              else {\r\n                  var total = $$.getTotalDataSum();\r\n                  ratio = d.value / total;\r\n              }\r\n          }\r\n          else if (type === 'index') {\r\n              var total = $$.getTotalPerIndex($$.axis.getId(d.id));\r\n              d.ratio =\r\n                  isNumber(d.value) && total && total[d.index] > 0\r\n                      ? d.value / total[d.index]\r\n                      : 0;\r\n              ratio = d.ratio;\r\n          }\r\n      }\r\n      return asPercent && ratio ? ratio * 100 : ratio;\r\n  };\r\n  ChartInternal.prototype.updateDataAttributes = function (name, attrs) {\r\n      var $$ = this, config = $$.config, current = config['data_' + name];\r\n      if (typeof attrs === 'undefined') {\r\n          return current;\r\n      }\r\n      Object.keys(attrs).forEach(function (id) {\r\n          current[id] = attrs[id];\r\n      });\r\n      $$.redraw({\r\n          withLegend: true\r\n      });\r\n      return current;\r\n  };\n\n  ChartInternal.prototype.load = function (targets, args) {\r\n      var $$ = this;\r\n      if (targets) {\r\n          // filter loading targets if needed\r\n          if (args.filter) {\r\n              targets = targets.filter(args.filter);\r\n          }\r\n          // set type if args.types || args.type specified\r\n          if (args.type || args.types) {\r\n              targets.forEach(function (t) {\r\n                  var type = args.types && args.types[t.id] ? args.types[t.id] : args.type;\r\n                  $$.setTargetType(t.id, type);\r\n              });\r\n          }\r\n          // Update/Add data\r\n          $$.data.targets.forEach(function (d) {\r\n              for (var i = 0; i < targets.length; i++) {\r\n                  if (d.id === targets[i].id) {\r\n                      d.values = targets[i].values;\r\n                      targets.splice(i, 1);\r\n                      break;\r\n                  }\r\n              }\r\n          });\r\n          $$.data.targets = $$.data.targets.concat(targets); // add remained\r\n      }\r\n      // Set targets\r\n      $$.updateTargets($$.data.targets);\r\n      // Redraw with new targets\r\n      $$.redraw({\r\n          withUpdateOrgXDomain: true,\r\n          withUpdateXDomain: true,\r\n          withLegend: true\r\n      });\r\n      if (args.done) {\r\n          args.done();\r\n      }\r\n  };\r\n  ChartInternal.prototype.loadFromArgs = function (args) {\r\n      var $$ = this;\r\n      $$.resetCache();\r\n      if (args.data) {\r\n          $$.load($$.convertDataToTargets(args.data), args);\r\n      }\r\n      else if (args.url) {\r\n          $$.convertUrlToData(args.url, args.mimeType, args.headers, args.keys, function (data) {\r\n              $$.load($$.convertDataToTargets(data), args);\r\n          });\r\n      }\r\n      else if (args.json) {\r\n          $$.load($$.convertDataToTargets($$.convertJsonToData(args.json, args.keys)), args);\r\n      }\r\n      else if (args.rows) {\r\n          $$.load($$.convertDataToTargets($$.convertRowsToData(args.rows)), args);\r\n      }\r\n      else if (args.columns) {\r\n          $$.load($$.convertDataToTargets($$.convertColumnsToData(args.columns)), args);\r\n      }\r\n      else {\r\n          $$.load(null, args);\r\n      }\r\n  };\r\n  ChartInternal.prototype.unload = function (targetIds, done) {\r\n      var $$ = this;\r\n      $$.resetCache();\r\n      if (!done) {\r\n          done = function () { };\r\n      }\r\n      // filter existing target\r\n      targetIds = targetIds.filter(function (id) {\r\n          return $$.hasTarget($$.data.targets, id);\r\n      });\r\n      // If no target, call done and return\r\n      if (!targetIds || targetIds.length === 0) {\r\n          done();\r\n          return;\r\n      }\r\n      $$.svg\r\n          .selectAll(targetIds.map(function (id) {\r\n          return $$.selectorTarget(id);\r\n      }))\r\n          .transition()\r\n          .style('opacity', 0)\r\n          .remove()\r\n          .call($$.endall, done);\r\n      targetIds.forEach(function (id) {\r\n          // Reset fadein for future load\r\n          $$.withoutFadeIn[id] = false;\r\n          // Remove target's elements\r\n          if ($$.legend) {\r\n              $$.legend\r\n                  .selectAll('.' + CLASS.legendItem + $$.getTargetSelectorSuffix(id))\r\n                  .remove();\r\n          }\r\n          // Remove target\r\n          $$.data.targets = $$.data.targets.filter(function (t) {\r\n              return t.id !== id;\r\n          });\r\n      });\r\n  };\n\n  ChartInternal.prototype.getYDomainMin = function (targets) {\r\n      var $$ = this, config = $$.config, ids = $$.mapToIds(targets), ys = $$.getValuesAsIdKeyed(targets), j, k, baseId, idsInGroup, id, hasNegativeValue;\r\n      if (config.data_groups.length > 0) {\r\n          hasNegativeValue = $$.hasNegativeValueInTargets(targets);\r\n          for (j = 0; j < config.data_groups.length; j++) {\r\n              // Determine baseId\r\n              idsInGroup = config.data_groups[j].filter(function (id) {\r\n                  return ids.indexOf(id) >= 0;\r\n              });\r\n              if (idsInGroup.length === 0) {\r\n                  continue;\r\n              }\r\n              baseId = idsInGroup[0];\r\n              // Consider negative values\r\n              if (hasNegativeValue && ys[baseId]) {\r\n                  ys[baseId].forEach(function (v, i) {\r\n                      ys[baseId][i] = v < 0 ? v : 0;\r\n                  });\r\n              }\r\n              // Compute min\r\n              for (k = 1; k < idsInGroup.length; k++) {\r\n                  id = idsInGroup[k];\r\n                  if (!ys[id]) {\r\n                      continue;\r\n                  }\r\n                  ys[id].forEach(function (v, i) {\r\n                      if ($$.axis.getId(id) === $$.axis.getId(baseId) &&\r\n                          ys[baseId] &&\r\n                          !(hasNegativeValue && +v > 0)) {\r\n                          ys[baseId][i] += +v;\r\n                      }\r\n                  });\r\n              }\r\n          }\r\n      }\r\n      return $$.d3.min(Object.keys(ys).map(function (key) {\r\n          return $$.d3.min(ys[key]);\r\n      }));\r\n  };\r\n  ChartInternal.prototype.getYDomainMax = function (targets) {\r\n      var $$ = this, config = $$.config, ids = $$.mapToIds(targets), ys = $$.getValuesAsIdKeyed(targets), j, k, baseId, idsInGroup, id, hasPositiveValue;\r\n      if (config.data_groups.length > 0) {\r\n          hasPositiveValue = $$.hasPositiveValueInTargets(targets);\r\n          for (j = 0; j < config.data_groups.length; j++) {\r\n              // Determine baseId\r\n              idsInGroup = config.data_groups[j].filter(function (id) {\r\n                  return ids.indexOf(id) >= 0;\r\n              });\r\n              if (idsInGroup.length === 0) {\r\n                  continue;\r\n              }\r\n              baseId = idsInGroup[0];\r\n              // Consider positive values\r\n              if (hasPositiveValue && ys[baseId]) {\r\n                  ys[baseId].forEach(function (v, i) {\r\n                      ys[baseId][i] = v > 0 ? v : 0;\r\n                  });\r\n              }\r\n              // Compute max\r\n              for (k = 1; k < idsInGroup.length; k++) {\r\n                  id = idsInGroup[k];\r\n                  if (!ys[id]) {\r\n                      continue;\r\n                  }\r\n                  ys[id].forEach(function (v, i) {\r\n                      if ($$.axis.getId(id) === $$.axis.getId(baseId) &&\r\n                          ys[baseId] &&\r\n                          !(hasPositiveValue && +v < 0)) {\r\n                          ys[baseId][i] += +v;\r\n                      }\r\n                  });\r\n              }\r\n          }\r\n      }\r\n      return $$.d3.max(Object.keys(ys).map(function (key) {\r\n          return $$.d3.max(ys[key]);\r\n      }));\r\n  };\r\n  ChartInternal.prototype.getYDomain = function (targets, axisId, xDomain) {\r\n      var $$ = this, config = $$.config;\r\n      if ($$.isAxisNormalized(axisId)) {\r\n          return [0, 100];\r\n      }\r\n      var targetsByAxisId = targets.filter(function (t) {\r\n          return $$.axis.getId(t.id) === axisId;\r\n      }), yTargets = xDomain\r\n          ? $$.filterByXDomain(targetsByAxisId, xDomain)\r\n          : targetsByAxisId, yMin = axisId === 'y2' ? config.axis_y2_min : config.axis_y_min, yMax = axisId === 'y2' ? config.axis_y2_max : config.axis_y_max, yDomainMin = $$.getYDomainMin(yTargets), yDomainMax = $$.getYDomainMax(yTargets), domain, domainLength, padding_top, padding_bottom, center = axisId === 'y2' ? config.axis_y2_center : config.axis_y_center, yDomainAbs, lengths, diff, ratio, isAllPositive, isAllNegative, isZeroBased = ($$.hasType('bar', yTargets) && config.bar_zerobased) ||\r\n          ($$.hasType('area', yTargets) && config.area_zerobased), isInverted = axisId === 'y2' ? config.axis_y2_inverted : config.axis_y_inverted, showHorizontalDataLabel = $$.hasDataLabel() && config.axis_rotated, showVerticalDataLabel = $$.hasDataLabel() && !config.axis_rotated;\r\n      // MEMO: avoid inverting domain unexpectedly\r\n      yDomainMin = isValue(yMin)\r\n          ? yMin\r\n          : isValue(yMax)\r\n              ? yDomainMin < yMax\r\n                  ? yDomainMin\r\n                  : yMax - 10\r\n              : yDomainMin;\r\n      yDomainMax = isValue(yMax)\r\n          ? yMax\r\n          : isValue(yMin)\r\n              ? yMin < yDomainMax\r\n                  ? yDomainMax\r\n                  : yMin + 10\r\n              : yDomainMax;\r\n      if (yTargets.length === 0) {\r\n          // use current domain if target of axisId is none\r\n          return axisId === 'y2' ? $$.y2.domain() : $$.y.domain();\r\n      }\r\n      if (isNaN(yDomainMin)) {\r\n          // set minimum to zero when not number\r\n          yDomainMin = 0;\r\n      }\r\n      if (isNaN(yDomainMax)) {\r\n          // set maximum to have same value as yDomainMin\r\n          yDomainMax = yDomainMin;\r\n      }\r\n      if (yDomainMin === yDomainMax) {\r\n          yDomainMin < 0 ? (yDomainMax = 0) : (yDomainMin = 0);\r\n      }\r\n      isAllPositive = yDomainMin >= 0 && yDomainMax >= 0;\r\n      isAllNegative = yDomainMin <= 0 && yDomainMax <= 0;\r\n      // Cancel zerobased if axis_*_min / axis_*_max specified\r\n      if ((isValue(yMin) && isAllPositive) || (isValue(yMax) && isAllNegative)) {\r\n          isZeroBased = false;\r\n      }\r\n      // Bar/Area chart should be 0-based if all positive|negative\r\n      if (isZeroBased) {\r\n          if (isAllPositive) {\r\n              yDomainMin = 0;\r\n          }\r\n          if (isAllNegative) {\r\n              yDomainMax = 0;\r\n          }\r\n      }\r\n      domainLength = Math.abs(yDomainMax - yDomainMin);\r\n      padding_top = padding_bottom = domainLength * 0.1;\r\n      if (typeof center !== 'undefined') {\r\n          yDomainAbs = Math.max(Math.abs(yDomainMin), Math.abs(yDomainMax));\r\n          yDomainMax = center + yDomainAbs;\r\n          yDomainMin = center - yDomainAbs;\r\n      }\r\n      // add padding for data label\r\n      if (showHorizontalDataLabel) {\r\n          lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'width');\r\n          diff = diffDomain($$.y.range());\r\n          ratio = [lengths[0] / diff, lengths[1] / diff];\r\n          padding_top += domainLength * (ratio[1] / (1 - ratio[0] - ratio[1]));\r\n          padding_bottom += domainLength * (ratio[0] / (1 - ratio[0] - ratio[1]));\r\n      }\r\n      else if (showVerticalDataLabel) {\r\n          lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'height');\r\n          var pixelsToAxisPadding = $$.getY(config[\"axis_\" + axisId + \"_type\"], \r\n          // input domain as pixels\r\n          [0, config.axis_rotated ? $$.width : $$.height], \r\n          // output range as axis padding\r\n          [0, domainLength]);\r\n          padding_top += pixelsToAxisPadding(lengths[1]);\r\n          padding_bottom += pixelsToAxisPadding(lengths[0]);\r\n      }\r\n      if (axisId === 'y' && notEmpty(config.axis_y_padding)) {\r\n          padding_top = $$.axis.getPadding(config.axis_y_padding, 'top', padding_top, domainLength);\r\n          padding_bottom = $$.axis.getPadding(config.axis_y_padding, 'bottom', padding_bottom, domainLength);\r\n      }\r\n      if (axisId === 'y2' && notEmpty(config.axis_y2_padding)) {\r\n          padding_top = $$.axis.getPadding(config.axis_y2_padding, 'top', padding_top, domainLength);\r\n          padding_bottom = $$.axis.getPadding(config.axis_y2_padding, 'bottom', padding_bottom, domainLength);\r\n      }\r\n      // Bar/Area chart should be 0-based if all positive|negative\r\n      if (isZeroBased) {\r\n          if (isAllPositive) {\r\n              padding_bottom = yDomainMin;\r\n          }\r\n          if (isAllNegative) {\r\n              padding_top = -yDomainMax;\r\n          }\r\n      }\r\n      domain = [yDomainMin - padding_bottom, yDomainMax + padding_top];\r\n      return isInverted ? domain.reverse() : domain;\r\n  };\r\n  ChartInternal.prototype.getXDomainMin = function (targets) {\r\n      var $$ = this, config = $$.config;\r\n      return isDefined(config.axis_x_min)\r\n          ? $$.isTimeSeries()\r\n              ? this.parseDate(config.axis_x_min)\r\n              : config.axis_x_min\r\n          : $$.d3.min(targets, function (t) {\r\n              return $$.d3.min(t.values, function (v) {\r\n                  return v.x;\r\n              });\r\n          });\r\n  };\r\n  ChartInternal.prototype.getXDomainMax = function (targets) {\r\n      var $$ = this, config = $$.config;\r\n      return isDefined(config.axis_x_max)\r\n          ? $$.isTimeSeries()\r\n              ? this.parseDate(config.axis_x_max)\r\n              : config.axis_x_max\r\n          : $$.d3.max(targets, function (t) {\r\n              return $$.d3.max(t.values, function (v) {\r\n                  return v.x;\r\n              });\r\n          });\r\n  };\r\n  ChartInternal.prototype.getXDomainPadding = function (domain) {\r\n      var $$ = this, config = $$.config, diff = domain[1] - domain[0], maxDataCount, padding, paddingLeft, paddingRight;\r\n      if ($$.isCategorized()) {\r\n          padding = 0;\r\n      }\r\n      else if ($$.hasType('bar')) {\r\n          maxDataCount = $$.getMaxDataCount();\r\n          padding = maxDataCount > 1 ? diff / (maxDataCount - 1) / 2 : 0.5;\r\n      }\r\n      else {\r\n          padding = diff * 0.01;\r\n      }\r\n      if (typeof config.axis_x_padding === 'object' &&\r\n          notEmpty(config.axis_x_padding)) {\r\n          paddingLeft = isValue(config.axis_x_padding.left)\r\n              ? config.axis_x_padding.left\r\n              : padding;\r\n          paddingRight = isValue(config.axis_x_padding.right)\r\n              ? config.axis_x_padding.right\r\n              : padding;\r\n      }\r\n      else if (typeof config.axis_x_padding === 'number') {\r\n          paddingLeft = paddingRight = config.axis_x_padding;\r\n      }\r\n      else {\r\n          paddingLeft = paddingRight = padding;\r\n      }\r\n      return { left: paddingLeft, right: paddingRight };\r\n  };\r\n  ChartInternal.prototype.getXDomain = function (targets) {\r\n      var $$ = this, xDomain = [$$.getXDomainMin(targets), $$.getXDomainMax(targets)], firstX = xDomain[0], lastX = xDomain[1], padding = $$.getXDomainPadding(xDomain), min = 0, max = 0;\r\n      // show center of x domain if min and max are the same\r\n      if (firstX - lastX === 0 && !$$.isCategorized()) {\r\n          if ($$.isTimeSeries()) {\r\n              firstX = new Date(firstX.getTime() * 0.5);\r\n              lastX = new Date(lastX.getTime() * 1.5);\r\n          }\r\n          else {\r\n              firstX = firstX === 0 ? 1 : firstX * 0.5;\r\n              lastX = lastX === 0 ? -1 : lastX * 1.5;\r\n          }\r\n      }\r\n      if (firstX || firstX === 0) {\r\n          min = $$.isTimeSeries()\r\n              ? new Date(firstX.getTime() - padding.left)\r\n              : firstX - padding.left;\r\n      }\r\n      if (lastX || lastX === 0) {\r\n          max = $$.isTimeSeries()\r\n              ? new Date(lastX.getTime() + padding.right)\r\n              : lastX + padding.right;\r\n      }\r\n      return [min, max];\r\n  };\r\n  ChartInternal.prototype.updateXDomain = function (targets, withUpdateXDomain, withUpdateOrgXDomain, withTrim, domain) {\r\n      var $$ = this, config = $$.config;\r\n      if (withUpdateOrgXDomain) {\r\n          $$.x.domain(domain ? domain : $$.d3.extent($$.getXDomain(targets)));\r\n          $$.orgXDomain = $$.x.domain();\r\n          if (config.zoom_enabled) {\r\n              $$.zoom.update();\r\n          }\r\n          $$.subX.domain($$.x.domain());\r\n          if ($$.brush) {\r\n              $$.brush.updateScale($$.subX);\r\n          }\r\n      }\r\n      if (withUpdateXDomain) {\r\n          $$.x.domain(domain\r\n              ? domain\r\n              : !$$.brush || $$.brush.empty()\r\n                  ? $$.orgXDomain\r\n                  : $$.brush.selectionAsValue());\r\n      }\r\n      // Trim domain when too big by zoom mousemove event\r\n      if (withTrim) {\r\n          $$.x.domain($$.trimXDomain($$.x.orgDomain()));\r\n      }\r\n      return $$.x.domain();\r\n  };\r\n  ChartInternal.prototype.trimXDomain = function (domain) {\r\n      var zoomDomain = this.getZoomDomain(), min = zoomDomain[0], max = zoomDomain[1];\r\n      if (domain[0] <= min) {\r\n          domain[1] = +domain[1] + (min - domain[0]);\r\n          domain[0] = min;\r\n      }\r\n      if (max <= domain[1]) {\r\n          domain[0] = +domain[0] - (domain[1] - max);\r\n          domain[1] = max;\r\n      }\r\n      return domain;\r\n  };\n\n  ChartInternal.prototype.drag = function (mouse) {\r\n      var $$ = this, config = $$.config, main = $$.main, d3 = $$.d3;\r\n      var sx, sy, mx, my, minX, maxX, minY, maxY;\r\n      if ($$.hasArcType()) {\r\n          return;\r\n      }\r\n      if (!config.data_selection_enabled) {\r\n          return;\r\n      } // do nothing if not selectable\r\n      if (!config.data_selection_multiple) {\r\n          return;\r\n      } // skip when single selection because drag is used for multiple selection\r\n      sx = $$.dragStart[0];\r\n      sy = $$.dragStart[1];\r\n      mx = mouse[0];\r\n      my = mouse[1];\r\n      minX = Math.min(sx, mx);\r\n      maxX = Math.max(sx, mx);\r\n      minY = config.data_selection_grouped ? $$.margin.top : Math.min(sy, my);\r\n      maxY = config.data_selection_grouped ? $$.height : Math.max(sy, my);\r\n      main\r\n          .select('.' + CLASS.dragarea)\r\n          .attr('x', minX)\r\n          .attr('y', minY)\r\n          .attr('width', maxX - minX)\r\n          .attr('height', maxY - minY);\r\n      // TODO: binary search when multiple xs\r\n      main\r\n          .selectAll('.' + CLASS.shapes)\r\n          .selectAll('.' + CLASS.shape)\r\n          .each(function (d, i) {\r\n          if (!config.data_selection_isselectable(d)) {\r\n              return;\r\n          }\r\n          var shape = d3.select(this), isSelected = shape.classed(CLASS.SELECTED), isIncluded = shape.classed(CLASS.INCLUDED), _x, _y, _w, _h, toggle, isWithin = false, box;\r\n          if (shape.classed(CLASS.circle)) {\r\n              _x = shape.attr('cx') * 1;\r\n              _y = shape.attr('cy') * 1;\r\n              toggle = $$.togglePoint;\r\n              isWithin = minX < _x && _x < maxX && minY < _y && _y < maxY;\r\n          }\r\n          else if (shape.classed(CLASS.bar)) {\r\n              box = getPathBox(this);\r\n              _x = box.x;\r\n              _y = box.y;\r\n              _w = box.width;\r\n              _h = box.height;\r\n              toggle = $$.togglePath;\r\n              isWithin =\r\n                  !(maxX < _x || _x + _w < minX) && !(maxY < _y || _y + _h < minY);\r\n          }\r\n          else {\r\n              // line/area selection not supported yet\r\n              return;\r\n          }\r\n          if (isWithin ^ isIncluded) {\r\n              shape.classed(CLASS.INCLUDED, !isIncluded);\r\n              // TODO: included/unincluded callback here\r\n              shape.classed(CLASS.SELECTED, !isSelected);\r\n              toggle.call($$, !isSelected, shape, d, i);\r\n          }\r\n      });\r\n  };\r\n  ChartInternal.prototype.dragstart = function (mouse) {\r\n      var $$ = this, config = $$.config;\r\n      if ($$.hasArcType()) {\r\n          return;\r\n      }\r\n      if (!config.data_selection_enabled) {\r\n          return;\r\n      } // do nothing if not selectable\r\n      $$.dragStart = mouse;\r\n      $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('rect')\r\n          .attr('class', CLASS.dragarea)\r\n          .style('opacity', 0.1);\r\n      $$.dragging = true;\r\n  };\r\n  ChartInternal.prototype.dragend = function () {\r\n      var $$ = this, config = $$.config;\r\n      if ($$.hasArcType()) {\r\n          return;\r\n      }\r\n      if (!config.data_selection_enabled) {\r\n          return;\r\n      } // do nothing if not selectable\r\n      $$.main\r\n          .select('.' + CLASS.dragarea)\r\n          .transition()\r\n          .duration(100)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      $$.main.selectAll('.' + CLASS.shape).classed(CLASS.INCLUDED, false);\r\n      $$.dragging = false;\r\n  };\n\n  ChartInternal.prototype.getYFormat = function (forArc) {\r\n      var $$ = this, formatForY = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.yFormat, formatForY2 = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.y2Format;\r\n      return function (v, ratio, id) {\r\n          var format = $$.axis.getId(id) === 'y2' ? formatForY2 : formatForY;\r\n          return format.call($$, v, ratio);\r\n      };\r\n  };\r\n  ChartInternal.prototype.yFormat = function (v) {\r\n      var $$ = this, config = $$.config, format = config.axis_y_tick_format\r\n          ? config.axis_y_tick_format\r\n          : $$.defaultValueFormat;\r\n      return format(v);\r\n  };\r\n  ChartInternal.prototype.y2Format = function (v) {\r\n      var $$ = this, config = $$.config, format = config.axis_y2_tick_format\r\n          ? config.axis_y2_tick_format\r\n          : $$.defaultValueFormat;\r\n      return format(v);\r\n  };\r\n  ChartInternal.prototype.defaultValueFormat = function (v) {\r\n      return isValue(v) ? +v : '';\r\n  };\r\n  ChartInternal.prototype.defaultArcValueFormat = function (v, ratio) {\r\n      return (ratio * 100).toFixed(1) + '%';\r\n  };\r\n  ChartInternal.prototype.dataLabelFormat = function (targetId) {\r\n      var $$ = this, data_labels = $$.config.data_labels, format, defaultFormat = function (v) {\r\n          return isValue(v) ? +v : '';\r\n      };\r\n      // find format according to axis id\r\n      if (typeof data_labels.format === 'function') {\r\n          format = data_labels.format;\r\n      }\r\n      else if (typeof data_labels.format === 'object') {\r\n          if (data_labels.format[targetId]) {\r\n              format =\r\n                  data_labels.format[targetId] === true\r\n                      ? defaultFormat\r\n                      : data_labels.format[targetId];\r\n          }\r\n          else {\r\n              format = function () {\r\n                  return '';\r\n              };\r\n          }\r\n      }\r\n      else {\r\n          format = defaultFormat;\r\n      }\r\n      return format;\r\n  };\n\n  ChartInternal.prototype.initGrid = function () {\r\n      var $$ = this, config = $$.config, d3 = $$.d3;\r\n      $$.grid = $$.main\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPathForGrid)\r\n          .attr('class', CLASS.grid);\r\n      if (config.grid_x_show) {\r\n          $$.grid.append('g').attr('class', CLASS.xgrids);\r\n      }\r\n      if (config.grid_y_show) {\r\n          $$.grid.append('g').attr('class', CLASS.ygrids);\r\n      }\r\n      if (config.grid_focus_show) {\r\n          $$.grid\r\n              .append('g')\r\n              .attr('class', CLASS.xgridFocus)\r\n              .append('line')\r\n              .attr('class', CLASS.xgridFocus);\r\n      }\r\n      $$.xgrid = d3.selectAll([]);\r\n      if (!config.grid_lines_front) {\r\n          $$.initGridLines();\r\n      }\r\n  };\r\n  ChartInternal.prototype.initGridLines = function () {\r\n      var $$ = this, d3 = $$.d3;\r\n      $$.gridLines = $$.main\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPathForGrid)\r\n          .attr('class', CLASS.grid + ' ' + CLASS.gridLines);\r\n      $$.gridLines.append('g').attr('class', CLASS.xgridLines);\r\n      $$.gridLines.append('g').attr('class', CLASS.ygridLines);\r\n      $$.xgridLines = d3.selectAll([]);\r\n  };\r\n  ChartInternal.prototype.updateXGrid = function (withoutUpdate) {\r\n      var $$ = this, config = $$.config, d3 = $$.d3, xgridData = $$.generateGridData(config.grid_x_type, $$.x), tickOffset = $$.isCategorized() ? $$.xAxis.tickOffset() : 0;\r\n      $$.xgridAttr = config.axis_rotated\r\n          ? {\r\n              x1: 0,\r\n              x2: $$.width,\r\n              y1: function (d) {\r\n                  return $$.x(d) - tickOffset;\r\n              },\r\n              y2: function (d) {\r\n                  return $$.x(d) - tickOffset;\r\n              }\r\n          }\r\n          : {\r\n              x1: function (d) {\r\n                  return $$.x(d) + tickOffset;\r\n              },\r\n              x2: function (d) {\r\n                  return $$.x(d) + tickOffset;\r\n              },\r\n              y1: 0,\r\n              y2: $$.height\r\n          };\r\n      $$.xgridAttr.opacity = function () {\r\n          var pos = +d3.select(this).attr(config.axis_rotated ? 'y1' : 'x1');\r\n          return pos === (config.axis_rotated ? $$.height : 0) ? 0 : 1;\r\n      };\r\n      var xgrid = $$.main\r\n          .select('.' + CLASS.xgrids)\r\n          .selectAll('.' + CLASS.xgrid)\r\n          .data(xgridData);\r\n      var xgridEnter = xgrid\r\n          .enter()\r\n          .append('line')\r\n          .attr('class', CLASS.xgrid)\r\n          .attr('x1', $$.xgridAttr.x1)\r\n          .attr('x2', $$.xgridAttr.x2)\r\n          .attr('y1', $$.xgridAttr.y1)\r\n          .attr('y2', $$.xgridAttr.y2)\r\n          .style('opacity', 0);\r\n      $$.xgrid = xgridEnter.merge(xgrid);\r\n      if (!withoutUpdate) {\r\n          $$.xgrid\r\n              .attr('x1', $$.xgridAttr.x1)\r\n              .attr('x2', $$.xgridAttr.x2)\r\n              .attr('y1', $$.xgridAttr.y1)\r\n              .attr('y2', $$.xgridAttr.y2)\r\n              .style('opacity', $$.xgridAttr.opacity);\r\n      }\r\n      xgrid.exit().remove();\r\n  };\r\n  ChartInternal.prototype.updateYGrid = function () {\r\n      var $$ = this, config = $$.config, gridValues = $$.yAxis.tickValues() || $$.y.ticks(config.grid_y_ticks);\r\n      var ygrid = $$.main\r\n          .select('.' + CLASS.ygrids)\r\n          .selectAll('.' + CLASS.ygrid)\r\n          .data(gridValues);\r\n      var ygridEnter = ygrid\r\n          .enter()\r\n          .append('line')\r\n          // TODO: x1, x2, y1, y2, opacity need to be set here maybe\r\n          .attr('class', CLASS.ygrid);\r\n      $$.ygrid = ygridEnter.merge(ygrid);\r\n      $$.ygrid\r\n          .attr('x1', config.axis_rotated ? $$.y : 0)\r\n          .attr('x2', config.axis_rotated ? $$.y : $$.width)\r\n          .attr('y1', config.axis_rotated ? 0 : $$.y)\r\n          .attr('y2', config.axis_rotated ? $$.height : $$.y);\r\n      ygrid.exit().remove();\r\n      $$.smoothLines($$.ygrid, 'grid');\r\n  };\r\n  ChartInternal.prototype.gridTextAnchor = function (d) {\r\n      return d.position ? d.position : 'end';\r\n  };\r\n  ChartInternal.prototype.gridTextDx = function (d) {\r\n      return d.position === 'start' ? 4 : d.position === 'middle' ? 0 : -4;\r\n  };\r\n  ChartInternal.prototype.xGridTextX = function (d) {\r\n      return d.position === 'start'\r\n          ? -this.height\r\n          : d.position === 'middle'\r\n              ? -this.height / 2\r\n              : 0;\r\n  };\r\n  ChartInternal.prototype.yGridTextX = function (d) {\r\n      return d.position === 'start'\r\n          ? 0\r\n          : d.position === 'middle'\r\n              ? this.width / 2\r\n              : this.width;\r\n  };\r\n  ChartInternal.prototype.updateGrid = function (duration) {\r\n      var $$ = this, main = $$.main, config = $$.config, xgridLine, xgridLineEnter, ygridLine, ygridLineEnter, xv = $$.xv.bind($$), yv = $$.yv.bind($$), xGridTextX = $$.xGridTextX.bind($$), yGridTextX = $$.yGridTextX.bind($$);\r\n      // hide if arc type\r\n      $$.grid.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\r\n      main.select('line.' + CLASS.xgridFocus).style('visibility', 'hidden');\r\n      if (config.grid_x_show) {\r\n          $$.updateXGrid();\r\n      }\r\n      xgridLine = main\r\n          .select('.' + CLASS.xgridLines)\r\n          .selectAll('.' + CLASS.xgridLine)\r\n          .data(config.grid_x_lines);\r\n      // enter\r\n      xgridLineEnter = xgridLine\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (d) {\r\n          return CLASS.xgridLine + (d['class'] ? ' ' + d['class'] : '');\r\n      });\r\n      xgridLineEnter\r\n          .append('line')\r\n          .attr('x1', config.axis_rotated ? 0 : xv)\r\n          .attr('x2', config.axis_rotated ? $$.width : xv)\r\n          .attr('y1', config.axis_rotated ? xv : 0)\r\n          .attr('y2', config.axis_rotated ? xv : $$.height)\r\n          .style('opacity', 0);\r\n      xgridLineEnter\r\n          .append('text')\r\n          .attr('text-anchor', $$.gridTextAnchor)\r\n          .attr('transform', config.axis_rotated ? '' : 'rotate(-90)')\r\n          .attr('x', config.axis_rotated ? yGridTextX : xGridTextX)\r\n          .attr('y', xv)\r\n          .attr('dx', $$.gridTextDx)\r\n          .attr('dy', -5)\r\n          .style('opacity', 0);\r\n      // udpate\r\n      $$.xgridLines = xgridLineEnter.merge(xgridLine);\r\n      // done in d3.transition() of the end of this function\r\n      // exit\r\n      xgridLine\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      // Y-Grid\r\n      if (config.grid_y_show) {\r\n          $$.updateYGrid();\r\n      }\r\n      ygridLine = main\r\n          .select('.' + CLASS.ygridLines)\r\n          .selectAll('.' + CLASS.ygridLine)\r\n          .data(config.grid_y_lines);\r\n      // enter\r\n      ygridLineEnter = ygridLine\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (d) {\r\n          return CLASS.ygridLine + (d['class'] ? ' ' + d['class'] : '');\r\n      });\r\n      ygridLineEnter\r\n          .append('line')\r\n          .attr('x1', config.axis_rotated ? yv : 0)\r\n          .attr('x2', config.axis_rotated ? yv : $$.width)\r\n          .attr('y1', config.axis_rotated ? 0 : yv)\r\n          .attr('y2', config.axis_rotated ? $$.height : yv)\r\n          .style('opacity', 0);\r\n      ygridLineEnter\r\n          .append('text')\r\n          .attr('text-anchor', $$.gridTextAnchor)\r\n          .attr('transform', config.axis_rotated ? 'rotate(-90)' : '')\r\n          .attr('x', config.axis_rotated ? xGridTextX : yGridTextX)\r\n          .attr('y', yv)\r\n          .attr('dx', $$.gridTextDx)\r\n          .attr('dy', -5)\r\n          .style('opacity', 0);\r\n      // update\r\n      $$.ygridLines = ygridLineEnter.merge(ygridLine);\r\n      $$.ygridLines\r\n          .select('line')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('x1', config.axis_rotated ? yv : 0)\r\n          .attr('x2', config.axis_rotated ? yv : $$.width)\r\n          .attr('y1', config.axis_rotated ? 0 : yv)\r\n          .attr('y2', config.axis_rotated ? $$.height : yv)\r\n          .style('opacity', 1);\r\n      $$.ygridLines\r\n          .select('text')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('x', config.axis_rotated ? $$.xGridTextX.bind($$) : $$.yGridTextX.bind($$))\r\n          .attr('y', yv)\r\n          .text(function (d) {\r\n          return d.text;\r\n      })\r\n          .style('opacity', 1);\r\n      // exit\r\n      ygridLine\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n  };\r\n  ChartInternal.prototype.redrawGrid = function (withTransition, transition) {\r\n      var $$ = this, config = $$.config, xv = $$.xv.bind($$), lines = $$.xgridLines.select('line'), texts = $$.xgridLines.select('text');\r\n      return [\r\n          (withTransition ? lines.transition(transition) : lines)\r\n              .attr('x1', config.axis_rotated ? 0 : xv)\r\n              .attr('x2', config.axis_rotated ? $$.width : xv)\r\n              .attr('y1', config.axis_rotated ? xv : 0)\r\n              .attr('y2', config.axis_rotated ? xv : $$.height)\r\n              .style('opacity', 1),\r\n          (withTransition ? texts.transition(transition) : texts)\r\n              .attr('x', config.axis_rotated ? $$.yGridTextX.bind($$) : $$.xGridTextX.bind($$))\r\n              .attr('y', xv)\r\n              .text(function (d) {\r\n              return d.text;\r\n          })\r\n              .style('opacity', 1)\r\n      ];\r\n  };\r\n  ChartInternal.prototype.showXGridFocus = function (selectedData) {\r\n      var $$ = this, config = $$.config, dataToShow = selectedData.filter(function (d) {\r\n          return d && isValue(d.value);\r\n      }), focusEl = $$.main.selectAll('line.' + CLASS.xgridFocus), xx = $$.xx.bind($$);\r\n      if (!config.tooltip_show) {\r\n          return;\r\n      }\r\n      // Hide when stanford plot exists\r\n      if ($$.hasType('stanford') || $$.hasArcType()) {\r\n          return;\r\n      }\r\n      focusEl\r\n          .style('visibility', 'visible')\r\n          .data([dataToShow[0]])\r\n          .attr(config.axis_rotated ? 'y1' : 'x1', xx)\r\n          .attr(config.axis_rotated ? 'y2' : 'x2', xx);\r\n      $$.smoothLines(focusEl, 'grid');\r\n  };\r\n  ChartInternal.prototype.hideXGridFocus = function () {\r\n      this.main.select('line.' + CLASS.xgridFocus).style('visibility', 'hidden');\r\n  };\r\n  ChartInternal.prototype.updateXgridFocus = function () {\r\n      var $$ = this, config = $$.config;\r\n      $$.main\r\n          .select('line.' + CLASS.xgridFocus)\r\n          .attr('x1', config.axis_rotated ? 0 : -10)\r\n          .attr('x2', config.axis_rotated ? $$.width : -10)\r\n          .attr('y1', config.axis_rotated ? -10 : 0)\r\n          .attr('y2', config.axis_rotated ? -10 : $$.height);\r\n  };\r\n  ChartInternal.prototype.generateGridData = function (type, scale) {\r\n      var $$ = this, gridData = [], xDomain, firstYear, lastYear, i, tickNum = $$.main\r\n          .select('.' + CLASS.axisX)\r\n          .selectAll('.tick')\r\n          .size();\r\n      if (type === 'year') {\r\n          xDomain = $$.getXDomain();\r\n          firstYear = xDomain[0].getFullYear();\r\n          lastYear = xDomain[1].getFullYear();\r\n          for (i = firstYear; i <= lastYear; i++) {\r\n              gridData.push(new Date(i + '-01-01 00:00:00'));\r\n          }\r\n      }\r\n      else {\r\n          gridData = scale.ticks(10);\r\n          if (gridData.length > tickNum) {\r\n              // use only int\r\n              gridData = gridData.filter(function (d) {\r\n                  return ('' + d).indexOf('.') < 0;\r\n              });\r\n          }\r\n      }\r\n      return gridData;\r\n  };\r\n  ChartInternal.prototype.getGridFilterToRemove = function (params) {\r\n      return params\r\n          ? function (line) {\r\n              var found = false;\r\n              [].concat(params).forEach(function (param) {\r\n                  if (('value' in param && line.value === param.value) ||\r\n                      ('class' in param && line['class'] === param['class'])) {\r\n                      found = true;\r\n                  }\r\n              });\r\n              return found;\r\n          }\r\n          : function () {\r\n              return true;\r\n          };\r\n  };\r\n  ChartInternal.prototype.removeGridLines = function (params, forX) {\r\n      var $$ = this, config = $$.config, toRemove = $$.getGridFilterToRemove(params), toShow = function (line) {\r\n          return !toRemove(line);\r\n      }, classLines = forX ? CLASS.xgridLines : CLASS.ygridLines, classLine = forX ? CLASS.xgridLine : CLASS.ygridLine;\r\n      $$.main\r\n          .select('.' + classLines)\r\n          .selectAll('.' + classLine)\r\n          .filter(toRemove)\r\n          .transition()\r\n          .duration(config.transition_duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      if (forX) {\r\n          config.grid_x_lines = config.grid_x_lines.filter(toShow);\r\n      }\r\n      else {\r\n          config.grid_y_lines = config.grid_y_lines.filter(toShow);\r\n      }\r\n  };\n\n  ChartInternal.prototype.initEventRect = function () {\r\n      var $$ = this, config = $$.config;\r\n      $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.eventRects)\r\n          .style('fill-opacity', 0);\r\n      $$.eventRect = $$.main\r\n          .select('.' + CLASS.eventRects)\r\n          .append('rect')\r\n          .attr('class', CLASS.eventRect);\r\n      // event rect handle zoom event as well\r\n      if (config.zoom_enabled && $$.zoom) {\r\n          $$.eventRect.call($$.zoom).on('dblclick.zoom', null);\r\n          if (config.zoom_initialRange) {\r\n              // WORKAROUND: Add transition to apply transform immediately when no subchart\r\n              $$.eventRect\r\n                  .transition()\r\n                  .duration(0)\r\n                  .call($$.zoom.transform, $$.zoomTransform(config.zoom_initialRange));\r\n          }\r\n      }\r\n  };\r\n  ChartInternal.prototype.redrawEventRect = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config;\r\n      function mouseout() {\r\n          $$.svg.select('.' + CLASS.eventRect).style('cursor', null);\r\n          $$.hideXGridFocus();\r\n          $$.hideTooltip();\r\n          $$.unexpandCircles();\r\n          $$.unexpandBars();\r\n      }\r\n      var isHoveringDataPoint = function (mouse, closest) {\r\n          return closest &&\r\n              ($$.isBarType(closest.id) ||\r\n                  $$.dist(closest, mouse) < config.point_sensitivity);\r\n      };\r\n      var withName = function (d) { return (d ? $$.addName(Object.assign({}, d)) : null); };\r\n      // rects for mouseover\r\n      $$.main\r\n          .select('.' + CLASS.eventRects)\r\n          .style('cursor', config.zoom_enabled\r\n          ? config.axis_rotated\r\n              ? 'ns-resize'\r\n              : 'ew-resize'\r\n          : null);\r\n      $$.eventRect\r\n          .attr('x', 0)\r\n          .attr('y', 0)\r\n          .attr('width', $$.width)\r\n          .attr('height', $$.height)\r\n          .on('mouseout', config.interaction_enabled\r\n          ? function () {\r\n              if (!config) {\r\n                  return;\r\n              } // chart is destroyed\r\n              if ($$.hasArcType()) {\r\n                  return;\r\n              }\r\n              if ($$.mouseover) {\r\n                  config.data_onmouseout.call($$.api, $$.mouseover);\r\n                  $$.mouseover = undefined;\r\n              }\r\n              mouseout();\r\n          }\r\n          : null)\r\n          .on('mousemove', config.interaction_enabled\r\n          ? function () {\r\n              // do nothing when dragging\r\n              if ($$.dragging) {\r\n                  return;\r\n              }\r\n              var targetsToShow = $$.getTargetsToShow();\r\n              // do nothing if arc type\r\n              if ($$.hasArcType(targetsToShow)) {\r\n                  return;\r\n              }\r\n              var mouse = d3.mouse(this);\r\n              var closest = withName($$.findClosestFromTargets(targetsToShow, mouse));\r\n              var isMouseCloseToDataPoint = isHoveringDataPoint(mouse, closest);\r\n              // ensure onmouseout is always called if mousemove switch between 2 targets\r\n              if ($$.mouseover &&\r\n                  (!closest ||\r\n                      closest.id !== $$.mouseover.id ||\r\n                      closest.index !== $$.mouseover.index)) {\r\n                  config.data_onmouseout.call($$.api, $$.mouseover);\r\n                  $$.mouseover = undefined;\r\n              }\r\n              if (closest && !$$.mouseover) {\r\n                  config.data_onmouseover.call($$.api, closest);\r\n                  $$.mouseover = closest;\r\n              }\r\n              // show cursor as pointer if we're hovering a data point close enough\r\n              $$.svg\r\n                  .select('.' + CLASS.eventRect)\r\n                  .style('cursor', isMouseCloseToDataPoint ? 'pointer' : null);\r\n              // if tooltip not grouped, we want to display only data from closest data point\r\n              var showSingleDataPoint = !config.tooltip_grouped || $$.hasType('stanford', targetsToShow);\r\n              // find data to highlight\r\n              var selectedData;\r\n              if (showSingleDataPoint) {\r\n                  if (closest) {\r\n                      selectedData = [closest];\r\n                  }\r\n              }\r\n              else {\r\n                  var closestByX = void 0;\r\n                  if (closest) {\r\n                      // reuse closest value\r\n                      closestByX = closest;\r\n                  }\r\n                  else {\r\n                      // try to find the closest value by X values from the mouse position\r\n                      var mouseX = config.axis_rotated ? mouse[1] : mouse[0];\r\n                      closestByX = $$.findClosestFromTargetsByX(targetsToShow, $$.x.invert(mouseX));\r\n                  }\r\n                  // highlight all data for this 'x' value\r\n                  if (closestByX) {\r\n                      selectedData = $$.filterByX(targetsToShow, closestByX.x);\r\n                  }\r\n              }\r\n              // ensure we have data to show\r\n              if (!selectedData || selectedData.length === 0) {\r\n                  return mouseout();\r\n              }\r\n              // inject names for each point\r\n              selectedData = selectedData.map(withName);\r\n              // show tooltip\r\n              $$.showTooltip(selectedData, this);\r\n              // expand points\r\n              if (config.point_focus_expand_enabled) {\r\n                  $$.unexpandCircles();\r\n                  selectedData.forEach(function (d) {\r\n                      $$.expandCircles(d.index, d.id, false);\r\n                  });\r\n              }\r\n              // expand bars\r\n              $$.unexpandBars();\r\n              selectedData.forEach(function (d) {\r\n                  $$.expandBars(d.index, d.id, false);\r\n              });\r\n              // Show xgrid focus line\r\n              $$.showXGridFocus(selectedData);\r\n          }\r\n          : null)\r\n          .on('click', config.interaction_enabled\r\n          ? function () {\r\n              var targetsToShow = $$.getTargetsToShow();\r\n              if ($$.hasArcType(targetsToShow)) {\r\n                  return;\r\n              }\r\n              var mouse = d3.mouse(this);\r\n              var closest = withName($$.findClosestFromTargets(targetsToShow, mouse));\r\n              if (!isHoveringDataPoint(mouse, closest)) {\r\n                  return;\r\n              }\r\n              // select if selection enabled\r\n              var sameXData;\r\n              if (!config.data_selection_grouped || $$.isStanfordType(closest)) {\r\n                  sameXData = [closest];\r\n              }\r\n              else {\r\n                  sameXData = $$.filterByX(targetsToShow, closest.x);\r\n              }\r\n              // toggle selected state\r\n              sameXData.forEach(function (d) {\r\n                  $$.main\r\n                      .selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(d.id))\r\n                      .selectAll('.' + CLASS.shape + '-' + d.index)\r\n                      .each(function () {\r\n                      if (config.data_selection_grouped ||\r\n                          $$.isWithinShape(this, d)) {\r\n                          $$.toggleShape(this, d, d.index);\r\n                      }\r\n                  });\r\n              });\r\n              // call data_onclick on the closest data point\r\n              if (closest) {\r\n                  var shape = $$.main\r\n                      .selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(closest.id))\r\n                      .select('.' + CLASS.shape + '-' + closest.index);\r\n                  config.data_onclick.call($$.api, closest, shape.node());\r\n              }\r\n          }\r\n          : null)\r\n          .call(config.interaction_enabled && config.data_selection_draggable && $$.drag\r\n          ? d3\r\n              .drag()\r\n              .on('drag', function () {\r\n              $$.drag(d3.mouse(this));\r\n          })\r\n              .on('start', function () {\r\n              $$.dragstart(d3.mouse(this));\r\n          })\r\n              .on('end', function () {\r\n              $$.dragend();\r\n          })\r\n          : function () { });\r\n  };\r\n  ChartInternal.prototype.getMousePosition = function (data) {\r\n      var $$ = this;\r\n      return [$$.x(data.x), $$.getYScale(data.id)(data.value)];\r\n  };\r\n  ChartInternal.prototype.dispatchEvent = function (type, mouse) {\r\n      var $$ = this, selector = '.' + CLASS.eventRect, eventRect = $$.main.select(selector).node(), box = eventRect.getBoundingClientRect(), x = box.left + (mouse ? mouse[0] : 0), y = box.top + (mouse ? mouse[1] : 0), event = document.createEvent('MouseEvents');\r\n      event.initMouseEvent(type, true, true, window, 0, x, y, x, y, false, false, false, false, 0, null);\r\n      eventRect.dispatchEvent(event);\r\n  };\n\n  ChartInternal.prototype.initLegend = function () {\r\n      var $$ = this;\r\n      $$.legendItemTextBox = {};\r\n      $$.legendHasRendered = false;\r\n      $$.legend = $$.svg.append('g').attr('transform', $$.getTranslate('legend'));\r\n      if (!$$.config.legend_show) {\r\n          $$.legend.style('visibility', 'hidden');\r\n          $$.hiddenLegendIds = $$.mapToIds($$.data.targets);\r\n          return;\r\n      }\r\n      // MEMO: call here to update legend box and tranlate for all\r\n      // MEMO: translate will be updated by this, so transform not needed in updateLegend()\r\n      $$.updateLegendWithDefaults();\r\n  };\r\n  ChartInternal.prototype.updateLegendWithDefaults = function () {\r\n      var $$ = this;\r\n      $$.updateLegend($$.mapToIds($$.data.targets), {\r\n          withTransform: false,\r\n          withTransitionForTransform: false,\r\n          withTransition: false\r\n      });\r\n  };\r\n  ChartInternal.prototype.updateSizeForLegend = function (legendHeight, legendWidth) {\r\n      var $$ = this, config = $$.config, insetLegendPosition = {\r\n          top: $$.isLegendTop\r\n              ? $$.getCurrentPaddingTop() + config.legend_inset_y + 5.5\r\n              : $$.currentHeight -\r\n                  legendHeight -\r\n                  $$.getCurrentPaddingBottom() -\r\n                  config.legend_inset_y,\r\n          left: $$.isLegendLeft\r\n              ? $$.getCurrentPaddingLeft() + config.legend_inset_x + 0.5\r\n              : $$.currentWidth -\r\n                  legendWidth -\r\n                  $$.getCurrentPaddingRight() -\r\n                  config.legend_inset_x +\r\n                  0.5\r\n      };\r\n      $$.margin3 = {\r\n          top: $$.isLegendRight\r\n              ? 0\r\n              : $$.isLegendInset\r\n                  ? insetLegendPosition.top\r\n                  : $$.currentHeight - legendHeight,\r\n          right: NaN,\r\n          bottom: 0,\r\n          left: $$.isLegendRight\r\n              ? $$.currentWidth - legendWidth\r\n              : $$.isLegendInset\r\n                  ? insetLegendPosition.left\r\n                  : 0\r\n      };\r\n  };\r\n  ChartInternal.prototype.transformLegend = function (withTransition) {\r\n      var $$ = this;\r\n      (withTransition ? $$.legend.transition() : $$.legend).attr('transform', $$.getTranslate('legend'));\r\n  };\r\n  ChartInternal.prototype.updateLegendStep = function (step) {\r\n      this.legendStep = step;\r\n  };\r\n  ChartInternal.prototype.updateLegendItemWidth = function (w) {\r\n      this.legendItemWidth = w;\r\n  };\r\n  ChartInternal.prototype.updateLegendItemHeight = function (h) {\r\n      this.legendItemHeight = h;\r\n  };\r\n  ChartInternal.prototype.getLegendWidth = function () {\r\n      var $$ = this;\r\n      return $$.config.legend_show\r\n          ? $$.isLegendRight || $$.isLegendInset\r\n              ? $$.legendItemWidth * ($$.legendStep + 1)\r\n              : $$.currentWidth\r\n          : 0;\r\n  };\r\n  ChartInternal.prototype.getLegendHeight = function () {\r\n      var $$ = this, h = 0;\r\n      if ($$.config.legend_show) {\r\n          if ($$.isLegendRight) {\r\n              h = $$.currentHeight;\r\n          }\r\n          else {\r\n              h = Math.max(20, $$.legendItemHeight) * ($$.legendStep + 1);\r\n          }\r\n      }\r\n      return h;\r\n  };\r\n  ChartInternal.prototype.opacityForLegend = function (legendItem) {\r\n      return legendItem.classed(CLASS.legendItemHidden) ? null : 1;\r\n  };\r\n  ChartInternal.prototype.opacityForUnfocusedLegend = function (legendItem) {\r\n      return legendItem.classed(CLASS.legendItemHidden) ? null : 0.3;\r\n  };\r\n  ChartInternal.prototype.toggleFocusLegend = function (targetIds, focus) {\r\n      var $$ = this;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      $$.legend\r\n          .selectAll('.' + CLASS.legendItem)\r\n          .filter(function (id) {\r\n          return targetIds.indexOf(id) >= 0;\r\n      })\r\n          .classed(CLASS.legendItemFocused, focus)\r\n          .transition()\r\n          .duration(100)\r\n          .style('opacity', function () {\r\n          var opacity = focus ? $$.opacityForLegend : $$.opacityForUnfocusedLegend;\r\n          return opacity.call($$, $$.d3.select(this));\r\n      });\r\n  };\r\n  ChartInternal.prototype.revertLegend = function () {\r\n      var $$ = this, d3 = $$.d3;\r\n      $$.legend\r\n          .selectAll('.' + CLASS.legendItem)\r\n          .classed(CLASS.legendItemFocused, false)\r\n          .transition()\r\n          .duration(100)\r\n          .style('opacity', function () {\r\n          return $$.opacityForLegend(d3.select(this));\r\n      });\r\n  };\r\n  ChartInternal.prototype.showLegend = function (targetIds) {\r\n      var $$ = this, config = $$.config;\r\n      if (!config.legend_show) {\r\n          config.legend_show = true;\r\n          $$.legend.style('visibility', 'visible');\r\n          if (!$$.legendHasRendered) {\r\n              $$.updateLegendWithDefaults();\r\n          }\r\n      }\r\n      $$.removeHiddenLegendIds(targetIds);\r\n      $$.legend\r\n          .selectAll($$.selectorLegends(targetIds))\r\n          .style('visibility', 'visible')\r\n          .transition()\r\n          .style('opacity', function () {\r\n          return $$.opacityForLegend($$.d3.select(this));\r\n      });\r\n  };\r\n  ChartInternal.prototype.hideLegend = function (targetIds) {\r\n      var $$ = this, config = $$.config;\r\n      if (config.legend_show && isEmpty(targetIds)) {\r\n          config.legend_show = false;\r\n          $$.legend.style('visibility', 'hidden');\r\n      }\r\n      $$.addHiddenLegendIds(targetIds);\r\n      $$.legend\r\n          .selectAll($$.selectorLegends(targetIds))\r\n          .style('opacity', 0)\r\n          .style('visibility', 'hidden');\r\n  };\r\n  ChartInternal.prototype.clearLegendItemTextBoxCache = function () {\r\n      this.legendItemTextBox = {};\r\n  };\r\n  ChartInternal.prototype.updateLegend = function (targetIds, options, transitions) {\r\n      var $$ = this, config = $$.config;\r\n      var xForLegend, xForLegendText, xForLegendRect, yForLegend, yForLegendText, yForLegendRect, x1ForLegendTile, x2ForLegendTile, yForLegendTile;\r\n      var paddingTop = 4, paddingRight = 10, maxWidth = 0, maxHeight = 0, posMin = 10, tileWidth = config.legend_item_tile_width + 5;\r\n      var l, totalLength = 0, offsets = {}, widths = {}, heights = {}, margins = [0], steps = {}, step = 0;\r\n      var withTransition, withTransitionForTransform;\r\n      var texts, rects, tiles, background;\r\n      // Skip elements when their name is set to null\r\n      targetIds = targetIds.filter(function (id) {\r\n          return !isDefined(config.data_names[id]) || config.data_names[id] !== null;\r\n      });\r\n      options = options || {};\r\n      withTransition = getOption(options, 'withTransition', true);\r\n      withTransitionForTransform = getOption(options, 'withTransitionForTransform', true);\r\n      function getTextBox(textElement, id) {\r\n          if (!$$.legendItemTextBox[id]) {\r\n              $$.legendItemTextBox[id] = $$.getTextRect(textElement.textContent, CLASS.legendItem, textElement);\r\n          }\r\n          return $$.legendItemTextBox[id];\r\n      }\r\n      function updatePositions(textElement, id, index) {\r\n          var reset = index === 0, isLast = index === targetIds.length - 1, box = getTextBox(textElement, id), itemWidth = box.width +\r\n              tileWidth +\r\n              (isLast && !($$.isLegendRight || $$.isLegendInset) ? 0 : paddingRight) +\r\n              config.legend_padding, itemHeight = box.height + paddingTop, itemLength = $$.isLegendRight || $$.isLegendInset ? itemHeight : itemWidth, areaLength = $$.isLegendRight || $$.isLegendInset\r\n              ? $$.getLegendHeight()\r\n              : $$.getLegendWidth(), margin, maxLength;\r\n          // MEMO: care about condifion of step, totalLength\r\n          function updateValues(id, withoutStep) {\r\n              if (!withoutStep) {\r\n                  margin = (areaLength - totalLength - itemLength) / 2;\r\n                  if (margin < posMin) {\r\n                      margin = (areaLength - itemLength) / 2;\r\n                      totalLength = 0;\r\n                      step++;\r\n                  }\r\n              }\r\n              steps[id] = step;\r\n              margins[step] = $$.isLegendInset ? 10 : margin;\r\n              offsets[id] = totalLength;\r\n              totalLength += itemLength;\r\n          }\r\n          if (reset) {\r\n              totalLength = 0;\r\n              step = 0;\r\n              maxWidth = 0;\r\n              maxHeight = 0;\r\n          }\r\n          if (config.legend_show && !$$.isLegendToShow(id)) {\r\n              widths[id] = heights[id] = steps[id] = offsets[id] = 0;\r\n              return;\r\n          }\r\n          widths[id] = itemWidth;\r\n          heights[id] = itemHeight;\r\n          if (!maxWidth || itemWidth >= maxWidth) {\r\n              maxWidth = itemWidth;\r\n          }\r\n          if (!maxHeight || itemHeight >= maxHeight) {\r\n              maxHeight = itemHeight;\r\n          }\r\n          maxLength = $$.isLegendRight || $$.isLegendInset ? maxHeight : maxWidth;\r\n          if (config.legend_equally) {\r\n              Object.keys(widths).forEach(function (id) {\r\n                  widths[id] = maxWidth;\r\n              });\r\n              Object.keys(heights).forEach(function (id) {\r\n                  heights[id] = maxHeight;\r\n              });\r\n              margin = (areaLength - maxLength * targetIds.length) / 2;\r\n              if (margin < posMin) {\r\n                  totalLength = 0;\r\n                  step = 0;\r\n                  targetIds.forEach(function (id) {\r\n                      updateValues(id);\r\n                  });\r\n              }\r\n              else {\r\n                  updateValues(id, true);\r\n              }\r\n          }\r\n          else {\r\n              updateValues(id);\r\n          }\r\n      }\r\n      if ($$.isLegendInset) {\r\n          step = config.legend_inset_step\r\n              ? config.legend_inset_step\r\n              : targetIds.length;\r\n          $$.updateLegendStep(step);\r\n      }\r\n      if ($$.isLegendRight) {\r\n          xForLegend = function (id) {\r\n              return maxWidth * steps[id];\r\n          };\r\n          yForLegend = function (id) {\r\n              return margins[steps[id]] + offsets[id];\r\n          };\r\n      }\r\n      else if ($$.isLegendInset) {\r\n          xForLegend = function (id) {\r\n              return maxWidth * steps[id] + 10;\r\n          };\r\n          yForLegend = function (id) {\r\n              return margins[steps[id]] + offsets[id];\r\n          };\r\n      }\r\n      else {\r\n          xForLegend = function (id) {\r\n              return margins[steps[id]] + offsets[id];\r\n          };\r\n          yForLegend = function (id) {\r\n              return maxHeight * steps[id];\r\n          };\r\n      }\r\n      xForLegendText = function (id, i) {\r\n          return xForLegend(id, i) + 4 + config.legend_item_tile_width;\r\n      };\r\n      yForLegendText = function (id, i) {\r\n          return yForLegend(id, i) + 9;\r\n      };\r\n      xForLegendRect = function (id, i) {\r\n          return xForLegend(id, i);\r\n      };\r\n      yForLegendRect = function (id, i) {\r\n          return yForLegend(id, i) - 5;\r\n      };\r\n      x1ForLegendTile = function (id, i) {\r\n          return xForLegend(id, i) - 2;\r\n      };\r\n      x2ForLegendTile = function (id, i) {\r\n          return xForLegend(id, i) - 2 + config.legend_item_tile_width;\r\n      };\r\n      yForLegendTile = function (id, i) {\r\n          return yForLegend(id, i) + 4;\r\n      };\r\n      // Define g for legend area\r\n      l = $$.legend\r\n          .selectAll('.' + CLASS.legendItem)\r\n          .data(targetIds)\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (id) {\r\n          return $$.generateClass(CLASS.legendItem, id);\r\n      })\r\n          .style('visibility', function (id) {\r\n          return $$.isLegendToShow(id) ? 'visible' : 'hidden';\r\n      })\r\n          .style('cursor', function () {\r\n          return config.interaction_enabled ? 'pointer' : 'auto';\r\n      })\r\n          .on('click', config.interaction_enabled\r\n          ? function (id) {\r\n              if (config.legend_item_onclick) {\r\n                  config.legend_item_onclick.call($$, id);\r\n              }\r\n              else {\r\n                  if ($$.d3.event.altKey) {\r\n                      $$.api.hide();\r\n                      $$.api.show(id);\r\n                  }\r\n                  else {\r\n                      $$.api.toggle(id);\r\n                      $$.isTargetToShow(id) ? $$.api.focus(id) : $$.api.revert();\r\n                  }\r\n              }\r\n          }\r\n          : null)\r\n          .on('mouseover', config.interaction_enabled\r\n          ? function (id) {\r\n              if (config.legend_item_onmouseover) {\r\n                  config.legend_item_onmouseover.call($$, id);\r\n              }\r\n              else {\r\n                  $$.d3.select(this).classed(CLASS.legendItemFocused, true);\r\n                  if (!$$.transiting && $$.isTargetToShow(id)) {\r\n                      $$.api.focus(id);\r\n                  }\r\n              }\r\n          }\r\n          : null)\r\n          .on('mouseout', config.interaction_enabled\r\n          ? function (id) {\r\n              if (config.legend_item_onmouseout) {\r\n                  config.legend_item_onmouseout.call($$, id);\r\n              }\r\n              else {\r\n                  $$.d3.select(this).classed(CLASS.legendItemFocused, false);\r\n                  $$.api.revert();\r\n              }\r\n          }\r\n          : null);\r\n      l.append('text')\r\n          .text(function (id) {\r\n          return isDefined(config.data_names[id]) ? config.data_names[id] : id;\r\n      })\r\n          .each(function (id, i) {\r\n          updatePositions(this, id, i);\r\n      })\r\n          .style('pointer-events', 'none')\r\n          .attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendText : -200)\r\n          .attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendText);\r\n      l.append('rect')\r\n          .attr('class', CLASS.legendItemEvent)\r\n          .style('fill-opacity', 0)\r\n          .attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendRect : -200)\r\n          .attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendRect);\r\n      l.append('line')\r\n          .attr('class', CLASS.legendItemTile)\r\n          .style('stroke', $$.color)\r\n          .style('pointer-events', 'none')\r\n          .attr('x1', $$.isLegendRight || $$.isLegendInset ? x1ForLegendTile : -200)\r\n          .attr('y1', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile)\r\n          .attr('x2', $$.isLegendRight || $$.isLegendInset ? x2ForLegendTile : -200)\r\n          .attr('y2', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile)\r\n          .attr('stroke-width', config.legend_item_tile_height);\r\n      // Set background for inset legend\r\n      background = $$.legend.select('.' + CLASS.legendBackground + ' rect');\r\n      if ($$.isLegendInset && maxWidth > 0 && background.size() === 0) {\r\n          background = $$.legend\r\n              .insert('g', '.' + CLASS.legendItem)\r\n              .attr('class', CLASS.legendBackground)\r\n              .append('rect');\r\n      }\r\n      texts = $$.legend\r\n          .selectAll('text')\r\n          .data(targetIds)\r\n          .text(function (id) {\r\n          return isDefined(config.data_names[id]) ? config.data_names[id] : id;\r\n      }) // MEMO: needed for update\r\n          .each(function (id, i) {\r\n          updatePositions(this, id, i);\r\n      });\r\n      (withTransition ? texts.transition() : texts)\r\n          .attr('x', xForLegendText)\r\n          .attr('y', yForLegendText);\r\n      rects = $$.legend.selectAll('rect.' + CLASS.legendItemEvent).data(targetIds);\r\n      (withTransition ? rects.transition() : rects)\r\n          .attr('width', function (id) {\r\n          return widths[id];\r\n      })\r\n          .attr('height', function (id) {\r\n          return heights[id];\r\n      })\r\n          .attr('x', xForLegendRect)\r\n          .attr('y', yForLegendRect);\r\n      tiles = $$.legend.selectAll('line.' + CLASS.legendItemTile).data(targetIds);\r\n      (withTransition ? tiles.transition() : tiles)\r\n          .style('stroke', $$.levelColor\r\n          ? function (id) {\r\n              return $$.levelColor($$.cache[id].values.reduce(function (total, item) {\r\n                  return total + item.value;\r\n              }, 0));\r\n          }\r\n          : $$.color)\r\n          .attr('x1', x1ForLegendTile)\r\n          .attr('y1', yForLegendTile)\r\n          .attr('x2', x2ForLegendTile)\r\n          .attr('y2', yForLegendTile);\r\n      if (background) {\r\n          (withTransition ? background.transition() : background)\r\n              .attr('height', $$.getLegendHeight() - 12)\r\n              .attr('width', maxWidth * (step + 1) + 10);\r\n      }\r\n      // toggle legend state\r\n      $$.legend\r\n          .selectAll('.' + CLASS.legendItem)\r\n          .classed(CLASS.legendItemHidden, function (id) {\r\n          return !$$.isTargetToShow(id);\r\n      });\r\n      // Update all to reflect change of legend\r\n      $$.updateLegendItemWidth(maxWidth);\r\n      $$.updateLegendItemHeight(maxHeight);\r\n      $$.updateLegendStep(step);\r\n      // Update size and scale\r\n      $$.updateSizes();\r\n      $$.updateScales();\r\n      $$.updateSvgSize();\r\n      // Update g positions\r\n      $$.transformAll(withTransitionForTransform, transitions);\r\n      $$.legendHasRendered = true;\r\n  };\n\n  ChartInternal.prototype.initRegion = function () {\r\n      var $$ = this;\r\n      $$.region = $$.main\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPath)\r\n          .attr('class', CLASS.regions);\r\n  };\r\n  ChartInternal.prototype.updateRegion = function (duration) {\r\n      var $$ = this, config = $$.config;\r\n      // hide if arc type\r\n      $$.region.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\r\n      var mainRegion = $$.main\r\n          .select('.' + CLASS.regions)\r\n          .selectAll('.' + CLASS.region)\r\n          .data(config.regions);\r\n      var g = mainRegion.enter().append('g');\r\n      g.append('rect')\r\n          .attr('x', $$.regionX.bind($$))\r\n          .attr('y', $$.regionY.bind($$))\r\n          .attr('width', $$.regionWidth.bind($$))\r\n          .attr('height', $$.regionHeight.bind($$))\r\n          .style('fill-opacity', function (d) {\r\n          return isValue(d.opacity) ? d.opacity : 0.1;\r\n      });\r\n      g.append('text').text($$.labelRegion.bind($$));\r\n      $$.mainRegion = g.merge(mainRegion).attr('class', $$.classRegion.bind($$));\r\n      mainRegion\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n  };\r\n  ChartInternal.prototype.redrawRegion = function (withTransition, transition) {\r\n      var $$ = this, regions = $$.mainRegion, regionLabels = $$.mainRegion.selectAll('text');\r\n      return [\r\n          (withTransition ? regions.transition(transition) : regions)\r\n              .attr('x', $$.regionX.bind($$))\r\n              .attr('y', $$.regionY.bind($$))\r\n              .attr('width', $$.regionWidth.bind($$))\r\n              .attr('height', $$.regionHeight.bind($$))\r\n              .style('fill-opacity', function (d) {\r\n              return isValue(d.opacity) ? d.opacity : 0.1;\r\n          }),\r\n          (withTransition ? regionLabels.transition(transition) : regionLabels)\r\n              .attr('x', $$.labelOffsetX.bind($$))\r\n              .attr('y', $$.labelOffsetY.bind($$))\r\n              .attr('transform', $$.labelTransform.bind($$))\r\n              .attr('style', 'text-anchor: left;')\r\n      ];\r\n  };\r\n  ChartInternal.prototype.regionX = function (d) {\r\n      var $$ = this, config = $$.config, xPos, yScale = d.axis === 'y' ? $$.y : $$.y2;\r\n      if (d.axis === 'y' || d.axis === 'y2') {\r\n          xPos = config.axis_rotated ? ('start' in d ? yScale(d.start) : 0) : 0;\r\n      }\r\n      else {\r\n          xPos = config.axis_rotated\r\n              ? 0\r\n              : 'start' in d\r\n                  ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start)\r\n                  : 0;\r\n      }\r\n      return xPos;\r\n  };\r\n  ChartInternal.prototype.regionY = function (d) {\r\n      var $$ = this, config = $$.config, yPos, yScale = d.axis === 'y' ? $$.y : $$.y2;\r\n      if (d.axis === 'y' || d.axis === 'y2') {\r\n          yPos = config.axis_rotated ? 0 : 'end' in d ? yScale(d.end) : 0;\r\n      }\r\n      else {\r\n          yPos = config.axis_rotated\r\n              ? 'start' in d\r\n                  ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start)\r\n                  : 0\r\n              : 0;\r\n      }\r\n      return yPos;\r\n  };\r\n  ChartInternal.prototype.regionWidth = function (d) {\r\n      var $$ = this, config = $$.config, start = $$.regionX(d), end, yScale = d.axis === 'y' ? $$.y : $$.y2;\r\n      if (d.axis === 'y' || d.axis === 'y2') {\r\n          end = config.axis_rotated\r\n              ? 'end' in d\r\n                  ? yScale(d.end)\r\n                  : $$.width\r\n              : $$.width;\r\n      }\r\n      else {\r\n          end = config.axis_rotated\r\n              ? $$.width\r\n              : 'end' in d\r\n                  ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end)\r\n                  : $$.width;\r\n      }\r\n      return end < start ? 0 : end - start;\r\n  };\r\n  ChartInternal.prototype.regionHeight = function (d) {\r\n      var $$ = this, config = $$.config, start = this.regionY(d), end, yScale = d.axis === 'y' ? $$.y : $$.y2;\r\n      if (d.axis === 'y' || d.axis === 'y2') {\r\n          end = config.axis_rotated\r\n              ? $$.height\r\n              : 'start' in d\r\n                  ? yScale(d.start)\r\n                  : $$.height;\r\n      }\r\n      else {\r\n          end = config.axis_rotated\r\n              ? 'end' in d\r\n                  ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end)\r\n                  : $$.height\r\n              : $$.height;\r\n      }\r\n      return end < start ? 0 : end - start;\r\n  };\r\n  ChartInternal.prototype.isRegionOnX = function (d) {\r\n      return !d.axis || d.axis === 'x';\r\n  };\r\n  ChartInternal.prototype.labelRegion = function (d) {\r\n      return 'label' in d ? d.label : '';\r\n  };\r\n  ChartInternal.prototype.labelTransform = function (d) {\r\n      return 'vertical' in d && d.vertical ? 'rotate(90)' : '';\r\n  };\r\n  ChartInternal.prototype.labelOffsetX = function (d) {\r\n      var paddingX = 'paddingX' in d ? d.paddingX : 3;\r\n      var paddingY = 'paddingY' in d ? d.paddingY : 3;\r\n      return 'vertical' in d && d.vertical\r\n          ? this.regionY(d) + paddingY\r\n          : this.regionX(d) + paddingX;\r\n  };\r\n  ChartInternal.prototype.labelOffsetY = function (d) {\r\n      var paddingX = 'paddingX' in d ? d.paddingX : 3;\r\n      var paddingY = 'paddingY' in d ? d.paddingY : 3;\r\n      return 'vertical' in d && d.vertical\r\n          ? -(this.regionX(d) + paddingX)\r\n          : this.regionY(d) + 10 + paddingY;\r\n  };\n\n  function c3LogScale(d3, linearScale, logScale) {\r\n      var PROJECTION = [0.01, 10];\r\n      if (!linearScale) {\r\n          linearScale = d3.scaleLinear();\r\n          linearScale.range(PROJECTION);\r\n      }\r\n      if (!logScale) {\r\n          logScale = d3.scaleLog();\r\n          logScale.domain(PROJECTION);\r\n          logScale.nice();\r\n      }\r\n      // copied from https://github.com/compute-io/logspace\r\n      function logspace(a, b, len) {\r\n          var arr, end, tmp, d;\r\n          if (arguments.length < 3) {\r\n              len = 10;\r\n          }\r\n          else {\r\n              if (len === 0) {\r\n                  return [];\r\n              }\r\n          }\r\n          // Calculate the increment:\r\n          end = len - 1;\r\n          d = (b - a) / end;\r\n          // Build the output array...\r\n          arr = new Array(len);\r\n          tmp = a;\r\n          arr[0] = Math.pow(10, tmp);\r\n          for (var i = 1; i < end; i++) {\r\n              tmp += d;\r\n              arr[i] = Math.pow(10, tmp);\r\n          }\r\n          arr[end] = Math.pow(10, b);\r\n          return arr;\r\n      }\r\n      function scale(x) {\r\n          return logScale(linearScale(x));\r\n      }\r\n      scale.domain = function (x) {\r\n          if (!arguments.length) {\r\n              return linearScale.domain();\r\n          }\r\n          linearScale.domain(x);\r\n          return scale;\r\n      };\r\n      scale.range = function (x) {\r\n          if (!arguments.length) {\r\n              return logScale.range();\r\n          }\r\n          logScale.range(x);\r\n          return scale;\r\n      };\r\n      scale.ticks = function (m) {\r\n          return logspace(-2, 1, m || 10).map(function (v) {\r\n              return linearScale.invert(v);\r\n          });\r\n      };\r\n      scale.copy = function () {\r\n          return c3LogScale(d3, linearScale.copy(), logScale.copy());\r\n      };\r\n      return scale;\r\n  }\r\n  ChartInternal.prototype.getScale = function (min, max, forTimeseries) {\r\n      return (forTimeseries ? this.d3.scaleTime() : this.d3.scaleLinear()).range([\r\n          min,\r\n          max\r\n      ]);\r\n  };\r\n  ChartInternal.prototype.getX = function (min, max, domain, offset) {\r\n      var $$ = this, scale = $$.getScale(min, max, $$.isTimeSeries()), _scale = domain ? scale.domain(domain) : scale, key;\r\n      // Define customized scale if categorized axis\r\n      if ($$.isCategorized()) {\r\n          offset =\r\n              offset ||\r\n                  function () {\r\n                      return 0;\r\n                  };\r\n          scale = function (d, raw) {\r\n              var v = _scale(d) + offset(d);\r\n              return raw ? v : Math.ceil(v);\r\n          };\r\n      }\r\n      else {\r\n          scale = function (d, raw) {\r\n              var v = _scale(d);\r\n              return raw ? v : Math.ceil(v);\r\n          };\r\n      }\r\n      // define functions\r\n      for (key in _scale) {\r\n          scale[key] = _scale[key];\r\n      }\r\n      scale.orgDomain = function () {\r\n          return _scale.domain();\r\n      };\r\n      // define custom domain() for categorized axis\r\n      if ($$.isCategorized()) {\r\n          scale.domain = function (domain) {\r\n              if (!arguments.length) {\r\n                  domain = this.orgDomain();\r\n                  return [domain[0], domain[1] + 1];\r\n              }\r\n              _scale.domain(domain);\r\n              return scale;\r\n          };\r\n      }\r\n      return scale;\r\n  };\r\n  /**\r\n   * Creates and configures a D3 scale instance for the given type.\r\n   *\r\n   * By defaults it returns a Linear scale.\r\n   *\r\n   * @param {String} type Type of d3-scale to create. Type can be 'linear', 'time', 'timeseries' or 'log'.\r\n   * @param {Array} domain The scale domain such as [from, to]\r\n   * @param {Array} range The scale's range such as [from, to]\r\n   *\r\n   * @return A d3-scale instance\r\n   */\r\n  ChartInternal.prototype.getY = function (type, domain, range) {\r\n      var scale;\r\n      if (type === 'timeseries' || type === 'time') {\r\n          scale = this.d3.scaleTime();\r\n      }\r\n      else if (type === 'log') {\r\n          scale = c3LogScale(this.d3);\r\n      }\r\n      else if (type === 'linear' || type === undefined) {\r\n          scale = this.d3.scaleLinear();\r\n      }\r\n      else {\r\n          throw new Error(\"Invalid Y axis type: \\\"\" + type + \"\\\"\");\r\n      }\r\n      if (domain) {\r\n          scale.domain(domain);\r\n      }\r\n      if (range) {\r\n          scale.range(range);\r\n      }\r\n      return scale;\r\n  };\r\n  ChartInternal.prototype.getYScale = function (id) {\r\n      return this.axis.getId(id) === 'y2' ? this.y2 : this.y;\r\n  };\r\n  ChartInternal.prototype.getSubYScale = function (id) {\r\n      return this.axis.getId(id) === 'y2' ? this.subY2 : this.subY;\r\n  };\r\n  ChartInternal.prototype.updateScales = function () {\r\n      var $$ = this, config = $$.config, forInit = !$$.x;\r\n      // update edges\r\n      $$.xMin = config.axis_rotated ? 1 : 0;\r\n      $$.xMax = config.axis_rotated ? $$.height : $$.width;\r\n      $$.yMin = config.axis_rotated ? 0 : $$.height;\r\n      $$.yMax = config.axis_rotated ? $$.width : 1;\r\n      $$.subXMin = $$.xMin;\r\n      $$.subXMax = $$.xMax;\r\n      $$.subYMin = config.axis_rotated ? 0 : $$.height2;\r\n      $$.subYMax = config.axis_rotated ? $$.width2 : 1;\r\n      // update scales\r\n      $$.x = $$.getX($$.xMin, $$.xMax, forInit ? undefined : $$.x.orgDomain(), function () {\r\n          return $$.xAxis.tickOffset();\r\n      });\r\n      $$.y = $$.getY(config.axis_y_type, forInit ? config.axis_y_default : $$.y.domain(), [$$.yMin, $$.yMax]);\r\n      $$.y2 = $$.getY(config.axis_y2_type, forInit ? config.axis_y2_default : $$.y2.domain(), [$$.yMin, $$.yMax]);\r\n      $$.subX = $$.getX($$.xMin, $$.xMax, $$.orgXDomain, function (d) {\r\n          return d % 1 ? 0 : $$.subXAxis.tickOffset();\r\n      });\r\n      $$.subY = $$.getY(config.axis_y_type, forInit ? config.axis_y_default : $$.subY.domain(), [$$.subYMin, $$.subYMax]);\r\n      $$.subY2 = $$.getY(config.axis_y2_type, forInit ? config.axis_y2_default : $$.subY2.domain(), [$$.subYMin, $$.subYMax]);\r\n      // update axes\r\n      $$.xAxisTickFormat = $$.axis.getXAxisTickFormat();\r\n      $$.xAxisTickValues = $$.axis.getXAxisTickValues();\r\n      $$.yAxisTickValues = $$.axis.getYAxisTickValues();\r\n      $$.y2AxisTickValues = $$.axis.getY2AxisTickValues();\r\n      $$.xAxis = $$.axis.getXAxis($$.x, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\r\n      $$.subXAxis = $$.axis.getXAxis($$.subX, $$.subXOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\r\n      $$.yAxis = $$.axis.getYAxis('y', $$.y, $$.yOrient, $$.yAxisTickValues, config.axis_y_tick_outer);\r\n      $$.y2Axis = $$.axis.getYAxis('y2', $$.y2, $$.y2Orient, $$.y2AxisTickValues, config.axis_y2_tick_outer);\r\n      // Set initialized scales to brush and zoom\r\n      if (!forInit) {\r\n          if ($$.brush) {\r\n              $$.brush.updateScale($$.subX);\r\n          }\r\n      }\r\n      // update for arc\r\n      if ($$.updateArc) {\r\n          $$.updateArc();\r\n      }\r\n  };\n\n  ChartInternal.prototype.selectPoint = function (target, d, i) {\r\n      var $$ = this, config = $$.config, cx = (config.axis_rotated ? $$.circleY : $$.circleX).bind($$), cy = (config.axis_rotated ? $$.circleX : $$.circleY).bind($$), r = $$.pointSelectR.bind($$);\r\n      config.data_onselected.call($$.api, d, target.node());\r\n      // add selected-circle on low layer g\r\n      $$.main\r\n          .select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id))\r\n          .selectAll('.' + CLASS.selectedCircle + '-' + i)\r\n          .data([d])\r\n          .enter()\r\n          .append('circle')\r\n          .attr('class', function () {\r\n          return $$.generateClass(CLASS.selectedCircle, i);\r\n      })\r\n          .attr('cx', cx)\r\n          .attr('cy', cy)\r\n          .attr('stroke', function () {\r\n          return $$.color(d);\r\n      })\r\n          .attr('r', function (d) {\r\n          return $$.pointSelectR(d) * 1.4;\r\n      })\r\n          .transition()\r\n          .duration(100)\r\n          .attr('r', r);\r\n  };\r\n  ChartInternal.prototype.unselectPoint = function (target, d, i) {\r\n      var $$ = this;\r\n      $$.config.data_onunselected.call($$.api, d, target.node());\r\n      // remove selected-circle from low layer g\r\n      $$.main\r\n          .select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id))\r\n          .selectAll('.' + CLASS.selectedCircle + '-' + i)\r\n          .transition()\r\n          .duration(100)\r\n          .attr('r', 0)\r\n          .remove();\r\n  };\r\n  ChartInternal.prototype.togglePoint = function (selected, target, d, i) {\r\n      selected ? this.selectPoint(target, d, i) : this.unselectPoint(target, d, i);\r\n  };\r\n  ChartInternal.prototype.selectPath = function (target, d) {\r\n      var $$ = this;\r\n      $$.config.data_onselected.call($$, d, target.node());\r\n      if ($$.config.interaction_brighten) {\r\n          target\r\n              .transition()\r\n              .duration(100)\r\n              .style('fill', function () {\r\n              return $$.d3.rgb($$.color(d)).brighter(0.75);\r\n          });\r\n      }\r\n  };\r\n  ChartInternal.prototype.unselectPath = function (target, d) {\r\n      var $$ = this;\r\n      $$.config.data_onunselected.call($$, d, target.node());\r\n      if ($$.config.interaction_brighten) {\r\n          target\r\n              .transition()\r\n              .duration(100)\r\n              .style('fill', function () {\r\n              return $$.color(d);\r\n          });\r\n      }\r\n  };\r\n  ChartInternal.prototype.togglePath = function (selected, target, d, i) {\r\n      selected ? this.selectPath(target, d, i) : this.unselectPath(target, d, i);\r\n  };\r\n  ChartInternal.prototype.getToggle = function (that, d) {\r\n      var $$ = this, toggle;\r\n      if (that.nodeName === 'circle') {\r\n          if ($$.isStepType(d)) {\r\n              // circle is hidden in step chart, so treat as within the click area\r\n              toggle = function () { }; // TODO: how to select step chart?\r\n          }\r\n          else {\r\n              toggle = $$.togglePoint;\r\n          }\r\n      }\r\n      else if (that.nodeName === 'path') {\r\n          toggle = $$.togglePath;\r\n      }\r\n      return toggle;\r\n  };\r\n  ChartInternal.prototype.toggleShape = function (that, d, i) {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, shape = d3.select(that), isSelected = shape.classed(CLASS.SELECTED), toggle = $$.getToggle(that, d).bind($$);\r\n      if (config.data_selection_enabled && config.data_selection_isselectable(d)) {\r\n          if (!config.data_selection_multiple) {\r\n              $$.main\r\n                  .selectAll('.' +\r\n                  CLASS.shapes +\r\n                  (config.data_selection_grouped\r\n                      ? $$.getTargetSelectorSuffix(d.id)\r\n                      : ''))\r\n                  .selectAll('.' + CLASS.shape)\r\n                  .each(function (d, i) {\r\n                  var shape = d3.select(this);\r\n                  if (shape.classed(CLASS.SELECTED)) {\r\n                      toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\r\n                  }\r\n              });\r\n          }\r\n          shape.classed(CLASS.SELECTED, !isSelected);\r\n          toggle(!isSelected, shape, d, i);\r\n      }\r\n  };\n\n  ChartInternal.prototype.initBar = function () {\r\n      var $$ = this;\r\n      $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartBars);\r\n  };\r\n  ChartInternal.prototype.updateTargetsForBar = function (targets) {\r\n      var $$ = this, config = $$.config, mainBars, mainBarEnter, classChartBar = $$.classChartBar.bind($$), classBars = $$.classBars.bind($$), classFocus = $$.classFocus.bind($$);\r\n      mainBars = $$.main\r\n          .select('.' + CLASS.chartBars)\r\n          .selectAll('.' + CLASS.chartBar)\r\n          .data(targets)\r\n          .attr('class', function (d) {\r\n          return classChartBar(d) + classFocus(d);\r\n      });\r\n      mainBarEnter = mainBars\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', classChartBar)\r\n          .style('pointer-events', 'none');\r\n      // Bars for each data\r\n      mainBarEnter\r\n          .append('g')\r\n          .attr('class', classBars)\r\n          .style('cursor', function (d) {\r\n          return config.data_selection_isselectable(d) ? 'pointer' : null;\r\n      });\r\n  };\r\n  ChartInternal.prototype.updateBar = function (durationForExit) {\r\n      var $$ = this, barData = $$.barData.bind($$), classBar = $$.classBar.bind($$), initialOpacity = $$.initialOpacity.bind($$), color = function (d) {\r\n          return $$.color(d.id);\r\n      };\r\n      var mainBar = $$.main\r\n          .selectAll('.' + CLASS.bars)\r\n          .selectAll('.' + CLASS.bar)\r\n          .data(barData);\r\n      var mainBarEnter = mainBar\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', classBar)\r\n          .style('stroke', color)\r\n          .style('fill', color);\r\n      $$.mainBar = mainBarEnter.merge(mainBar).style('opacity', initialOpacity);\r\n      mainBar\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0);\r\n  };\r\n  ChartInternal.prototype.redrawBar = function (drawBar, withTransition, transition) {\r\n      var $$ = this;\r\n      return [\r\n          (withTransition ? this.mainBar.transition(transition) : this.mainBar)\r\n              .attr('d', drawBar)\r\n              .style('stroke', this.color)\r\n              .style('fill', this.color)\r\n              .style('opacity', function (d) { return ($$.isTargetToShow(d.id) ? 1 : 0); })\r\n      ];\r\n  };\r\n  ChartInternal.prototype.getBarW = function (axis, barTargetsNum) {\r\n      var $$ = this, config = $$.config, w = typeof config.bar_width === 'number'\r\n          ? config.bar_width\r\n          : barTargetsNum\r\n              ? (axis.tickInterval() * config.bar_width_ratio) / barTargetsNum\r\n              : 0;\r\n      return config.bar_width_max && w > config.bar_width_max\r\n          ? config.bar_width_max\r\n          : w;\r\n  };\r\n  ChartInternal.prototype.getBars = function (i, id) {\r\n      var $$ = this;\r\n      return (id\r\n          ? $$.main.selectAll('.' + CLASS.bars + $$.getTargetSelectorSuffix(id))\r\n          : $$.main).selectAll('.' + CLASS.bar + (isValue(i) ? '-' + i : ''));\r\n  };\r\n  ChartInternal.prototype.expandBars = function (i, id, reset) {\r\n      var $$ = this;\r\n      if (reset) {\r\n          $$.unexpandBars();\r\n      }\r\n      $$.getBars(i, id).classed(CLASS.EXPANDED, true);\r\n  };\r\n  ChartInternal.prototype.unexpandBars = function (i) {\r\n      var $$ = this;\r\n      $$.getBars(i).classed(CLASS.EXPANDED, false);\r\n  };\r\n  ChartInternal.prototype.generateDrawBar = function (barIndices, isSub) {\r\n      var $$ = this, config = $$.config, getPoints = $$.generateGetBarPoints(barIndices, isSub);\r\n      return function (d, i) {\r\n          // 4 points that make a bar\r\n          var points = getPoints(d, i);\r\n          // switch points if axis is rotated, not applicable for sub chart\r\n          var indexX = config.axis_rotated ? 1 : 0;\r\n          var indexY = config.axis_rotated ? 0 : 1;\r\n          var path = 'M ' +\r\n              points[0][indexX] +\r\n              ',' +\r\n              points[0][indexY] +\r\n              ' ' +\r\n              'L' +\r\n              points[1][indexX] +\r\n              ',' +\r\n              points[1][indexY] +\r\n              ' ' +\r\n              'L' +\r\n              points[2][indexX] +\r\n              ',' +\r\n              points[2][indexY] +\r\n              ' ' +\r\n              'L' +\r\n              points[3][indexX] +\r\n              ',' +\r\n              points[3][indexY] +\r\n              ' ' +\r\n              'z';\r\n          return path;\r\n      };\r\n  };\r\n  ChartInternal.prototype.generateGetBarPoints = function (barIndices, isSub) {\r\n      var $$ = this, axis = isSub ? $$.subXAxis : $$.xAxis, barTargetsNum = barIndices.__max__ + 1, barW = $$.getBarW(axis, barTargetsNum), barX = $$.getShapeX(barW, barTargetsNum, barIndices, !!isSub), barY = $$.getShapeY(!!isSub), barOffset = $$.getShapeOffset($$.isBarType, barIndices, !!isSub), barSpaceOffset = barW * ($$.config.bar_space / 2), yScale = isSub ? $$.getSubYScale : $$.getYScale;\r\n      return function (d, i) {\r\n          var y0 = yScale.call($$, d.id)(0), offset = barOffset(d, i) || y0, // offset is for stacked bar chart\r\n          posX = barX(d), posY = barY(d);\r\n          // fix posY not to overflow opposite quadrant\r\n          if ($$.config.axis_rotated) {\r\n              if ((0 < d.value && posY < y0) || (d.value < 0 && y0 < posY)) {\r\n                  posY = y0;\r\n              }\r\n          }\r\n          posY -= y0 - offset;\r\n          // 4 points that make a bar\r\n          return [\r\n              [posX + barSpaceOffset, offset],\r\n              [posX + barSpaceOffset, posY],\r\n              [posX + barW - barSpaceOffset, posY],\r\n              [posX + barW - barSpaceOffset, offset]\r\n          ];\r\n      };\r\n  };\r\n  /**\r\n   * Returns whether the data point is within the given bar shape.\r\n   *\r\n   * @param mouse\r\n   * @param barShape\r\n   * @return {boolean}\r\n   */\r\n  ChartInternal.prototype.isWithinBar = function (mouse, barShape) {\r\n      return isWithinBox(mouse, getBBox(barShape), 2);\r\n  };\n\n  ChartInternal.prototype.getShapeIndices = function (typeFilter) {\r\n      var $$ = this, config = $$.config, indices = {}, i = 0, j, k;\r\n      $$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$)).forEach(function (d) {\r\n          for (j = 0; j < config.data_groups.length; j++) {\r\n              if (config.data_groups[j].indexOf(d.id) < 0) {\r\n                  continue;\r\n              }\r\n              for (k = 0; k < config.data_groups[j].length; k++) {\r\n                  if (config.data_groups[j][k] in indices) {\r\n                      indices[d.id] = indices[config.data_groups[j][k]];\r\n                      break;\r\n                  }\r\n              }\r\n          }\r\n          if (isUndefined(indices[d.id])) {\r\n              indices[d.id] = i++;\r\n          }\r\n      });\r\n      indices.__max__ = i - 1;\r\n      return indices;\r\n  };\r\n  ChartInternal.prototype.getShapeX = function (offset, targetsNum, indices, isSub) {\r\n      var $$ = this, scale = isSub ? $$.subX : $$.x;\r\n      return function (d) {\r\n          var index = d.id in indices ? indices[d.id] : 0;\r\n          return d.x || d.x === 0 ? scale(d.x) - offset * (targetsNum / 2 - index) : 0;\r\n      };\r\n  };\r\n  ChartInternal.prototype.getShapeY = function (isSub) {\r\n      var $$ = this;\r\n      return function (d) {\r\n          var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id);\r\n          return scale($$.isTargetNormalized(d.id) ? $$.getRatio('index', d, true) : d.value);\r\n      };\r\n  };\r\n  ChartInternal.prototype.getShapeOffset = function (typeFilter, indices, isSub) {\r\n      var $$ = this, targets = $$.orderTargets($$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$))), targetIds = targets.map(function (t) {\r\n          return t.id;\r\n      });\r\n      return function (d, i) {\r\n          var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id), y0 = scale(0), offset = y0;\r\n          targets.forEach(function (t) {\r\n              var rowValues = $$.isStepType(d)\r\n                  ? $$.convertValuesToStep(t.values)\r\n                  : t.values;\r\n              var isTargetNormalized = $$.isTargetNormalized(d.id);\r\n              var values = rowValues.map(function (v) {\r\n                  return isTargetNormalized ? $$.getRatio('index', v, true) : v.value;\r\n              });\r\n              if (t.id === d.id || indices[t.id] !== indices[d.id]) {\r\n                  return;\r\n              }\r\n              if (targetIds.indexOf(t.id) < targetIds.indexOf(d.id)) {\r\n                  // check if the x values line up\r\n                  if (isUndefined(rowValues[i]) || +rowValues[i].x !== +d.x) {\r\n                      // \"+\" for timeseries\r\n                      // if not, try to find the value that does line up\r\n                      i = -1;\r\n                      rowValues.forEach(function (v, j) {\r\n                          var x1 = v.x.constructor === Date ? +v.x : v.x;\r\n                          var x2 = d.x.constructor === Date ? +d.x : d.x;\r\n                          if (x1 === x2) {\r\n                              i = j;\r\n                          }\r\n                      });\r\n                  }\r\n                  if (i in rowValues && rowValues[i].value * d.value >= 0) {\r\n                      offset += scale(values[i]) - y0;\r\n                  }\r\n              }\r\n          });\r\n          return offset;\r\n      };\r\n  };\r\n  ChartInternal.prototype.isWithinShape = function (that, d) {\r\n      var $$ = this, shape = $$.d3.select(that), isWithin;\r\n      if (!$$.isTargetToShow(d.id)) {\r\n          isWithin = false;\r\n      }\r\n      else if (that.nodeName === 'circle') {\r\n          isWithin = $$.isStepType(d)\r\n              ? $$.isWithinStep(that, $$.getYScale(d.id)(d.value))\r\n              : $$.isWithinCircle(that, $$.pointSelectR(d) * 1.5);\r\n      }\r\n      else if (that.nodeName === 'path') {\r\n          isWithin = shape.classed(CLASS.bar)\r\n              ? $$.isWithinBar($$.d3.mouse(that), that)\r\n              : true;\r\n      }\r\n      return isWithin;\r\n  };\r\n  ChartInternal.prototype.getInterpolate = function (d) {\r\n      var $$ = this, d3 = $$.d3, types = {\r\n          linear: d3.curveLinear,\r\n          'linear-closed': d3.curveLinearClosed,\r\n          basis: d3.curveBasis,\r\n          'basis-open': d3.curveBasisOpen,\r\n          'basis-closed': d3.curveBasisClosed,\r\n          bundle: d3.curveBundle,\r\n          cardinal: d3.curveCardinal,\r\n          'cardinal-open': d3.curveCardinalOpen,\r\n          'cardinal-closed': d3.curveCardinalClosed,\r\n          monotone: d3.curveMonotoneX,\r\n          step: d3.curveStep,\r\n          'step-before': d3.curveStepBefore,\r\n          'step-after': d3.curveStepAfter\r\n      }, type;\r\n      if ($$.isSplineType(d)) {\r\n          type = types[$$.config.spline_interpolation_type] || types.cardinal;\r\n      }\r\n      else if ($$.isStepType(d)) {\r\n          type = types[$$.config.line_step_type];\r\n      }\r\n      else {\r\n          type = types.linear;\r\n      }\r\n      return type;\r\n  };\n\n  ChartInternal.prototype.initLine = function () {\r\n      var $$ = this;\r\n      $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartLines);\r\n  };\r\n  ChartInternal.prototype.updateTargetsForLine = function (targets) {\r\n      var $$ = this, config = $$.config, mainLines, mainLineEnter, classChartLine = $$.classChartLine.bind($$), classLines = $$.classLines.bind($$), classAreas = $$.classAreas.bind($$), classCircles = $$.classCircles.bind($$), classFocus = $$.classFocus.bind($$);\r\n      mainLines = $$.main\r\n          .select('.' + CLASS.chartLines)\r\n          .selectAll('.' + CLASS.chartLine)\r\n          .data(targets)\r\n          .attr('class', function (d) {\r\n          return classChartLine(d) + classFocus(d);\r\n      });\r\n      mainLineEnter = mainLines\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', classChartLine)\r\n          .style('opacity', 0)\r\n          .style('pointer-events', 'none');\r\n      // Lines for each data\r\n      mainLineEnter.append('g').attr('class', classLines);\r\n      // Areas\r\n      mainLineEnter.append('g').attr('class', classAreas);\r\n      // Circles for each data point on lines\r\n      mainLineEnter.append('g').attr('class', function (d) {\r\n          return $$.generateClass(CLASS.selectedCircles, d.id);\r\n      });\r\n      mainLineEnter\r\n          .append('g')\r\n          .attr('class', classCircles)\r\n          .style('cursor', function (d) {\r\n          return config.data_selection_isselectable(d) ? 'pointer' : null;\r\n      });\r\n      // Update date for selected circles\r\n      targets.forEach(function (t) {\r\n          $$.main\r\n              .selectAll('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(t.id))\r\n              .selectAll('.' + CLASS.selectedCircle)\r\n              .each(function (d) {\r\n              d.value = t.values[d.index].value;\r\n          });\r\n      });\r\n      // MEMO: can not keep same color...\r\n      //mainLineUpdate.exit().remove();\r\n  };\r\n  ChartInternal.prototype.updateLine = function (durationForExit) {\r\n      var $$ = this;\r\n      var mainLine = $$.main\r\n          .selectAll('.' + CLASS.lines)\r\n          .selectAll('.' + CLASS.line)\r\n          .data($$.lineData.bind($$));\r\n      var mainLineEnter = mainLine\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classLine.bind($$))\r\n          .style('stroke', $$.color);\r\n      $$.mainLine = mainLineEnter\r\n          .merge(mainLine)\r\n          .style('opacity', $$.initialOpacity.bind($$))\r\n          .style('shape-rendering', function (d) {\r\n          return $$.isStepType(d) ? 'crispEdges' : '';\r\n      })\r\n          .attr('transform', null);\r\n      mainLine\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0);\r\n  };\r\n  ChartInternal.prototype.redrawLine = function (drawLine, withTransition, transition) {\r\n      return [\r\n          (withTransition ? this.mainLine.transition(transition) : this.mainLine)\r\n              .attr('d', drawLine)\r\n              .style('stroke', this.color)\r\n              .style('opacity', 1)\r\n      ];\r\n  };\r\n  ChartInternal.prototype.generateDrawLine = function (lineIndices, isSub) {\r\n      var $$ = this, config = $$.config, line = $$.d3.line(), getPoints = $$.generateGetLinePoints(lineIndices, isSub), yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale, xValue = function (d) {\r\n          return (isSub ? $$.subxx : $$.xx).call($$, d);\r\n      }, yValue = function (d, i) {\r\n          return config.data_groups.length > 0\r\n              ? getPoints(d, i)[0][1]\r\n              : yScaleGetter.call($$, d.id)(d.value);\r\n      };\r\n      line = config.axis_rotated\r\n          ? line.x(yValue).y(xValue)\r\n          : line.x(xValue).y(yValue);\r\n      if (!config.line_connectNull) {\r\n          line = line.defined(function (d) {\r\n              return d.value != null;\r\n          });\r\n      }\r\n      return function (d) {\r\n          var values = config.line_connectNull\r\n              ? $$.filterRemoveNull(d.values)\r\n              : d.values, x = isSub ? $$.subX : $$.x, y = yScaleGetter.call($$, d.id), x0 = 0, y0 = 0, path;\r\n          if ($$.isLineType(d)) {\r\n              if (config.data_regions[d.id]) {\r\n                  path = $$.lineWithRegions(values, x, y, config.data_regions[d.id]);\r\n              }\r\n              else {\r\n                  if ($$.isStepType(d)) {\r\n                      values = $$.convertValuesToStep(values);\r\n                  }\r\n                  path = line.curve($$.getInterpolate(d))(values);\r\n              }\r\n          }\r\n          else {\r\n              if (values[0]) {\r\n                  x0 = x(values[0].x);\r\n                  y0 = y(values[0].value);\r\n              }\r\n              path = config.axis_rotated ? 'M ' + y0 + ' ' + x0 : 'M ' + x0 + ' ' + y0;\r\n          }\r\n          return path ? path : 'M 0 0';\r\n      };\r\n  };\r\n  ChartInternal.prototype.generateGetLinePoints = function (lineIndices, isSub) {\r\n      // partial duplication of generateGetBarPoints\r\n      var $$ = this, config = $$.config, lineTargetsNum = lineIndices.__max__ + 1, x = $$.getShapeX(0, lineTargetsNum, lineIndices, !!isSub), y = $$.getShapeY(!!isSub), lineOffset = $$.getShapeOffset($$.isLineType, lineIndices, !!isSub), yScale = isSub ? $$.getSubYScale : $$.getYScale;\r\n      return function (d, i) {\r\n          var y0 = yScale.call($$, d.id)(0), offset = lineOffset(d, i) || y0, // offset is for stacked area chart\r\n          posX = x(d), posY = y(d);\r\n          // fix posY not to overflow opposite quadrant\r\n          if (config.axis_rotated) {\r\n              if ((0 < d.value && posY < y0) || (d.value < 0 && y0 < posY)) {\r\n                  posY = y0;\r\n              }\r\n          }\r\n          // 1 point that marks the line position\r\n          return [\r\n              [posX, posY - (y0 - offset)],\r\n              [posX, posY - (y0 - offset)],\r\n              [posX, posY - (y0 - offset)],\r\n              [posX, posY - (y0 - offset)] // needed for compatibility\r\n          ];\r\n      };\r\n  };\r\n  ChartInternal.prototype.lineWithRegions = function (d, x, y, _regions) {\r\n      var $$ = this, config = $$.config, prev = -1, i, j, s = 'M', sWithRegion, xp, yp, dx, dy, dd, diff, diffx2, xOffset = $$.isCategorized() ? 0.5 : 0, xValue, yValue, regions = [];\r\n      function isWithinRegions(x, regions) {\r\n          var i;\r\n          for (i = 0; i < regions.length; i++) {\r\n              if (regions[i].start < x && x <= regions[i].end) {\r\n                  return true;\r\n              }\r\n          }\r\n          return false;\r\n      }\r\n      // Check start/end of regions\r\n      if (isDefined(_regions)) {\r\n          for (i = 0; i < _regions.length; i++) {\r\n              regions[i] = {};\r\n              if (isUndefined(_regions[i].start)) {\r\n                  regions[i].start = d[0].x;\r\n              }\r\n              else {\r\n                  regions[i].start = $$.isTimeSeries()\r\n                      ? $$.parseDate(_regions[i].start)\r\n                      : _regions[i].start;\r\n              }\r\n              if (isUndefined(_regions[i].end)) {\r\n                  regions[i].end = d[d.length - 1].x;\r\n              }\r\n              else {\r\n                  regions[i].end = $$.isTimeSeries()\r\n                      ? $$.parseDate(_regions[i].end)\r\n                      : _regions[i].end;\r\n              }\r\n          }\r\n      }\r\n      // Set scales\r\n      xValue = config.axis_rotated\r\n          ? function (d) {\r\n              return y(d.value);\r\n          }\r\n          : function (d) {\r\n              return x(d.x);\r\n          };\r\n      yValue = config.axis_rotated\r\n          ? function (d) {\r\n              return x(d.x);\r\n          }\r\n          : function (d) {\r\n              return y(d.value);\r\n          };\r\n      // Define svg generator function for region\r\n      function generateM(points) {\r\n          return ('M' +\r\n              points[0][0] +\r\n              ' ' +\r\n              points[0][1] +\r\n              ' ' +\r\n              points[1][0] +\r\n              ' ' +\r\n              points[1][1]);\r\n      }\r\n      if ($$.isTimeSeries()) {\r\n          sWithRegion = function (d0, d1, j, diff) {\r\n              var x0 = d0.x.getTime(), x_diff = d1.x - d0.x, xv0 = new Date(x0 + x_diff * j), xv1 = new Date(x0 + x_diff * (j + diff)), points;\r\n              if (config.axis_rotated) {\r\n                  points = [\r\n                      [y(yp(j)), x(xv0)],\r\n                      [y(yp(j + diff)), x(xv1)]\r\n                  ];\r\n              }\r\n              else {\r\n                  points = [\r\n                      [x(xv0), y(yp(j))],\r\n                      [x(xv1), y(yp(j + diff))]\r\n                  ];\r\n              }\r\n              return generateM(points);\r\n          };\r\n      }\r\n      else {\r\n          sWithRegion = function (d0, d1, j, diff) {\r\n              var points;\r\n              if (config.axis_rotated) {\r\n                  points = [\r\n                      [y(yp(j), true), x(xp(j))],\r\n                      [y(yp(j + diff), true), x(xp(j + diff))]\r\n                  ];\r\n              }\r\n              else {\r\n                  points = [\r\n                      [x(xp(j), true), y(yp(j))],\r\n                      [x(xp(j + diff), true), y(yp(j + diff))]\r\n                  ];\r\n              }\r\n              return generateM(points);\r\n          };\r\n      }\r\n      // Generate\r\n      for (i = 0; i < d.length; i++) {\r\n          // Draw as normal\r\n          if (isUndefined(regions) || !isWithinRegions(d[i].x, regions)) {\r\n              s += ' ' + xValue(d[i]) + ' ' + yValue(d[i]);\r\n          }\r\n          // Draw with region // TODO: Fix for horizotal charts\r\n          else {\r\n              xp = $$.getScale(d[i - 1].x + xOffset, d[i].x + xOffset, $$.isTimeSeries());\r\n              yp = $$.getScale(d[i - 1].value, d[i].value);\r\n              dx = x(d[i].x) - x(d[i - 1].x);\r\n              dy = y(d[i].value) - y(d[i - 1].value);\r\n              dd = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\r\n              diff = 2 / dd;\r\n              diffx2 = diff * 2;\r\n              for (j = diff; j <= 1; j += diffx2) {\r\n                  s += sWithRegion(d[i - 1], d[i], j, diff);\r\n              }\r\n          }\r\n          prev = d[i].x;\r\n      }\r\n      return s;\r\n  };\r\n  ChartInternal.prototype.updateArea = function (durationForExit) {\r\n      var $$ = this, d3 = $$.d3;\r\n      var mainArea = $$.main\r\n          .selectAll('.' + CLASS.areas)\r\n          .selectAll('.' + CLASS.area)\r\n          .data($$.lineData.bind($$));\r\n      var mainAreaEnter = mainArea\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classArea.bind($$))\r\n          .style('fill', $$.color)\r\n          .style('opacity', function () {\r\n          $$.orgAreaOpacity = +d3.select(this).style('opacity');\r\n          return 0;\r\n      });\r\n      $$.mainArea = mainAreaEnter\r\n          .merge(mainArea)\r\n          .style('opacity', $$.orgAreaOpacity);\r\n      mainArea\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0);\r\n  };\r\n  ChartInternal.prototype.redrawArea = function (drawArea, withTransition, transition) {\r\n      return [\r\n          (withTransition ? this.mainArea.transition(transition) : this.mainArea)\r\n              .attr('d', drawArea)\r\n              .style('fill', this.color)\r\n              .style('opacity', this.orgAreaOpacity)\r\n      ];\r\n  };\r\n  ChartInternal.prototype.generateDrawArea = function (areaIndices, isSub) {\r\n      var $$ = this, config = $$.config, area = $$.d3.area(), getPoints = $$.generateGetAreaPoints(areaIndices, isSub), yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale, xValue = function (d) {\r\n          return (isSub ? $$.subxx : $$.xx).call($$, d);\r\n      }, value0 = function (d, i) {\r\n          return config.data_groups.length > 0\r\n              ? getPoints(d, i)[0][1]\r\n              : yScaleGetter.call($$, d.id)($$.getAreaBaseValue(d.id));\r\n      }, value1 = function (d, i) {\r\n          return config.data_groups.length > 0\r\n              ? getPoints(d, i)[1][1]\r\n              : yScaleGetter.call($$, d.id)(d.value);\r\n      };\r\n      area = config.axis_rotated\r\n          ? area\r\n              .x0(value0)\r\n              .x1(value1)\r\n              .y(xValue)\r\n          : area\r\n              .x(xValue)\r\n              .y0(config.area_above ? 0 : value0)\r\n              .y1(value1);\r\n      if (!config.line_connectNull) {\r\n          area = area.defined(function (d) {\r\n              return d.value !== null;\r\n          });\r\n      }\r\n      return function (d) {\r\n          var values = config.line_connectNull\r\n              ? $$.filterRemoveNull(d.values)\r\n              : d.values, x0 = 0, y0 = 0, path;\r\n          if ($$.isAreaType(d)) {\r\n              if ($$.isStepType(d)) {\r\n                  values = $$.convertValuesToStep(values);\r\n              }\r\n              path = area.curve($$.getInterpolate(d))(values);\r\n          }\r\n          else {\r\n              if (values[0]) {\r\n                  x0 = $$.x(values[0].x);\r\n                  y0 = $$.getYScale(d.id)(values[0].value);\r\n              }\r\n              path = config.axis_rotated ? 'M ' + y0 + ' ' + x0 : 'M ' + x0 + ' ' + y0;\r\n          }\r\n          return path ? path : 'M 0 0';\r\n      };\r\n  };\r\n  ChartInternal.prototype.getAreaBaseValue = function () {\r\n      return 0;\r\n  };\r\n  ChartInternal.prototype.generateGetAreaPoints = function (areaIndices, isSub) {\r\n      // partial duplication of generateGetBarPoints\r\n      var $$ = this, config = $$.config, areaTargetsNum = areaIndices.__max__ + 1, x = $$.getShapeX(0, areaTargetsNum, areaIndices, !!isSub), y = $$.getShapeY(!!isSub), areaOffset = $$.getShapeOffset($$.isAreaType, areaIndices, !!isSub), yScale = isSub ? $$.getSubYScale : $$.getYScale;\r\n      return function (d, i) {\r\n          var y0 = yScale.call($$, d.id)(0), offset = areaOffset(d, i) || y0, // offset is for stacked area chart\r\n          posX = x(d), posY = y(d);\r\n          // fix posY not to overflow opposite quadrant\r\n          if (config.axis_rotated) {\r\n              if ((0 < d.value && posY < y0) || (d.value < 0 && y0 < posY)) {\r\n                  posY = y0;\r\n              }\r\n          }\r\n          // 1 point that marks the area position\r\n          return [\r\n              [posX, offset],\r\n              [posX, posY - (y0 - offset)],\r\n              [posX, posY - (y0 - offset)],\r\n              [posX, offset] // needed for compatibility\r\n          ];\r\n      };\r\n  };\r\n  ChartInternal.prototype.updateCircle = function (cx, cy) {\r\n      var $$ = this;\r\n      var mainCircle = $$.main\r\n          .selectAll('.' + CLASS.circles)\r\n          .selectAll('.' + CLASS.circle)\r\n          .data($$.lineOrScatterOrStanfordData.bind($$));\r\n      var mainCircleEnter = mainCircle\r\n          .enter()\r\n          .append('circle')\r\n          .attr('shape-rendering', $$.isStanfordGraphType() ? 'crispEdges' : '')\r\n          .attr('class', $$.classCircle.bind($$))\r\n          .attr('cx', cx)\r\n          .attr('cy', cy)\r\n          .attr('r', $$.pointR.bind($$))\r\n          .style('color', $$.isStanfordGraphType() ? $$.getStanfordPointColor.bind($$) : $$.color);\r\n      $$.mainCircle = mainCircleEnter\r\n          .merge(mainCircle)\r\n          .style('opacity', $$.isStanfordGraphType() ? 1 : $$.initialOpacityForCircle.bind($$));\r\n      mainCircle.exit().style('opacity', 0);\r\n  };\r\n  ChartInternal.prototype.redrawCircle = function (cx, cy, withTransition, transition) {\r\n      var $$ = this, selectedCircles = $$.main.selectAll('.' + CLASS.selectedCircle);\r\n      return [\r\n          (withTransition ? $$.mainCircle.transition(transition) : $$.mainCircle)\r\n              .style('opacity', this.opacityForCircle.bind($$))\r\n              .style('color', $$.isStanfordGraphType() ? $$.getStanfordPointColor.bind($$) : $$.color)\r\n              .attr('cx', cx)\r\n              .attr('cy', cy),\r\n          (withTransition ? selectedCircles.transition(transition) : selectedCircles)\r\n              .attr('cx', cx)\r\n              .attr('cy', cy)\r\n      ];\r\n  };\r\n  ChartInternal.prototype.circleX = function (d) {\r\n      return d.x || d.x === 0 ? this.x(d.x) : null;\r\n  };\r\n  ChartInternal.prototype.updateCircleY = function () {\r\n      var $$ = this, lineIndices, getPoints;\r\n      if ($$.config.data_groups.length > 0) {\r\n          (lineIndices = $$.getShapeIndices($$.isLineType)),\r\n              (getPoints = $$.generateGetLinePoints(lineIndices));\r\n          $$.circleY = function (d, i) {\r\n              return getPoints(d, i)[0][1];\r\n          };\r\n      }\r\n      else {\r\n          $$.circleY = function (d) {\r\n              return $$.getYScale(d.id)(d.value);\r\n          };\r\n      }\r\n  };\r\n  ChartInternal.prototype.getCircles = function (i, id) {\r\n      var $$ = this;\r\n      return (id\r\n          ? $$.main.selectAll('.' + CLASS.circles + $$.getTargetSelectorSuffix(id))\r\n          : $$.main).selectAll('.' + CLASS.circle + (isValue(i) ? '-' + i : ''));\r\n  };\r\n  ChartInternal.prototype.expandCircles = function (i, id, reset) {\r\n      var $$ = this, r = $$.pointExpandedR.bind($$);\r\n      if (reset) {\r\n          $$.unexpandCircles();\r\n      }\r\n      $$.getCircles(i, id)\r\n          .classed(CLASS.EXPANDED, true)\r\n          .attr('r', r);\r\n  };\r\n  ChartInternal.prototype.unexpandCircles = function (i) {\r\n      var $$ = this, r = $$.pointR.bind($$);\r\n      $$.getCircles(i)\r\n          .filter(function () {\r\n          return $$.d3.select(this).classed(CLASS.EXPANDED);\r\n      })\r\n          .classed(CLASS.EXPANDED, false)\r\n          .attr('r', r);\r\n  };\r\n  ChartInternal.prototype.pointR = function (d) {\r\n      var $$ = this, config = $$.config;\r\n      return $$.isStepType(d)\r\n          ? 0\r\n          : isFunction(config.point_r)\r\n              ? config.point_r(d)\r\n              : config.point_r;\r\n  };\r\n  ChartInternal.prototype.pointExpandedR = function (d) {\r\n      var $$ = this, config = $$.config;\r\n      if (config.point_focus_expand_enabled) {\r\n          return isFunction(config.point_focus_expand_r)\r\n              ? config.point_focus_expand_r(d)\r\n              : config.point_focus_expand_r\r\n                  ? config.point_focus_expand_r\r\n                  : $$.pointR(d) * 1.75;\r\n      }\r\n      else {\r\n          return $$.pointR(d);\r\n      }\r\n  };\r\n  ChartInternal.prototype.pointSelectR = function (d) {\r\n      var $$ = this, config = $$.config;\r\n      return isFunction(config.point_select_r)\r\n          ? config.point_select_r(d)\r\n          : config.point_select_r\r\n              ? config.point_select_r\r\n              : $$.pointR(d) * 4;\r\n  };\r\n  ChartInternal.prototype.isWithinCircle = function (that, r) {\r\n      var d3 = this.d3, mouse = d3.mouse(that), d3_this = d3.select(that), cx = +d3_this.attr('cx'), cy = +d3_this.attr('cy');\r\n      return Math.sqrt(Math.pow(cx - mouse[0], 2) + Math.pow(cy - mouse[1], 2)) < r;\r\n  };\r\n  ChartInternal.prototype.isWithinStep = function (that, y) {\r\n      return Math.abs(y - this.d3.mouse(that)[1]) < 30;\r\n  };\n\n  ChartInternal.prototype.getCurrentWidth = function () {\r\n      var $$ = this, config = $$.config;\r\n      return config.size_width ? config.size_width : $$.getParentWidth();\r\n  };\r\n  ChartInternal.prototype.getCurrentHeight = function () {\r\n      var $$ = this, config = $$.config, h = config.size_height ? config.size_height : $$.getParentHeight();\r\n      return h > 0\r\n          ? h\r\n          : 320 / ($$.hasType('gauge') && !config.gauge_fullCircle ? 2 : 1);\r\n  };\r\n  ChartInternal.prototype.getCurrentPaddingTop = function () {\r\n      var $$ = this, config = $$.config, padding = isValue(config.padding_top) ? config.padding_top : 0;\r\n      if ($$.title && $$.title.node()) {\r\n          padding += $$.getTitlePadding();\r\n      }\r\n      return padding;\r\n  };\r\n  ChartInternal.prototype.getCurrentPaddingBottom = function () {\r\n      var config = this.config;\r\n      return isValue(config.padding_bottom) ? config.padding_bottom : 0;\r\n  };\r\n  ChartInternal.prototype.getCurrentPaddingLeft = function (withoutRecompute) {\r\n      var $$ = this, config = $$.config;\r\n      if (isValue(config.padding_left)) {\r\n          return config.padding_left;\r\n      }\r\n      else if (config.axis_rotated) {\r\n          return !config.axis_x_show || config.axis_x_inner\r\n              ? 1\r\n              : Math.max(ceil10($$.getAxisWidthByAxisId('x', withoutRecompute)), 40);\r\n      }\r\n      else if (!config.axis_y_show || config.axis_y_inner) {\r\n          // && !config.axis_rotated\r\n          return $$.axis.getYAxisLabelPosition().isOuter ? 30 : 1;\r\n      }\r\n      else {\r\n          return ceil10($$.getAxisWidthByAxisId('y', withoutRecompute));\r\n      }\r\n  };\r\n  ChartInternal.prototype.getCurrentPaddingRight = function () {\r\n      var $$ = this, config = $$.config, padding = 0, defaultPadding = 10, legendWidthOnRight = $$.isLegendRight ? $$.getLegendWidth() + 20 : 0;\r\n      if (isValue(config.padding_right)) {\r\n          padding = config.padding_right + 1; // 1 is needed not to hide tick line\r\n      }\r\n      else if (config.axis_rotated) {\r\n          padding = defaultPadding + legendWidthOnRight;\r\n      }\r\n      else if (!config.axis_y2_show || config.axis_y2_inner) {\r\n          // && !config.axis_rotated\r\n          padding =\r\n              2 +\r\n                  legendWidthOnRight +\r\n                  ($$.axis.getY2AxisLabelPosition().isOuter ? 20 : 0);\r\n      }\r\n      else {\r\n          padding = ceil10($$.getAxisWidthByAxisId('y2')) + legendWidthOnRight;\r\n      }\r\n      if ($$.colorScale && $$.colorScale.node()) {\r\n          padding += $$.getColorScalePadding();\r\n      }\r\n      return padding;\r\n  };\r\n  ChartInternal.prototype.getParentRectValue = function (key) {\r\n      var parent = this.selectChart.node(), v;\r\n      while (parent && parent.tagName !== 'BODY') {\r\n          try {\r\n              v = parent.getBoundingClientRect()[key];\r\n          }\r\n          catch (e) {\r\n              if (key === 'width') {\r\n                  // In IE in certain cases getBoundingClientRect\r\n                  // will cause an \"unspecified error\"\r\n                  v = parent.offsetWidth;\r\n              }\r\n          }\r\n          if (v) {\r\n              break;\r\n          }\r\n          parent = parent.parentNode;\r\n      }\r\n      return v;\r\n  };\r\n  ChartInternal.prototype.getParentWidth = function () {\r\n      return this.getParentRectValue('width');\r\n  };\r\n  ChartInternal.prototype.getParentHeight = function () {\r\n      var h = this.selectChart.style('height');\r\n      return h.indexOf('px') > 0 ? +h.replace('px', '') : 0;\r\n  };\r\n  ChartInternal.prototype.getSvgLeft = function (withoutRecompute) {\r\n      var $$ = this, config = $$.config, hasLeftAxisRect = config.axis_rotated || (!config.axis_rotated && !config.axis_y_inner), leftAxisClass = config.axis_rotated ? CLASS.axisX : CLASS.axisY, leftAxis = $$.main.select('.' + leftAxisClass).node(), svgRect = leftAxis && hasLeftAxisRect\r\n          ? leftAxis.getBoundingClientRect()\r\n          : { right: 0 }, chartRect = $$.selectChart.node().getBoundingClientRect(), hasArc = $$.hasArcType(), svgLeft = svgRect.right -\r\n          chartRect.left -\r\n          (hasArc ? 0 : $$.getCurrentPaddingLeft(withoutRecompute));\r\n      return svgLeft > 0 ? svgLeft : 0;\r\n  };\r\n  ChartInternal.prototype.getAxisWidthByAxisId = function (id, withoutRecompute) {\r\n      var $$ = this, position = $$.axis.getLabelPositionById(id);\r\n      return ($$.axis.getMaxTickWidth(id, withoutRecompute) + (position.isInner ? 20 : 40));\r\n  };\r\n  ChartInternal.prototype.getHorizontalAxisHeight = function (axisId, isSubchart) {\r\n      var $$ = this, config = $$.config, h = 30;\r\n      if (axisId === 'x' && !(isDefined(isSubchart) && isSubchart ? config.subchart_axis_x_show : config.axis_x_show)) {\r\n          return 8;\r\n      }\r\n      if (axisId === 'x' && config.axis_x_height) {\r\n          return config.axis_x_height;\r\n      }\r\n      if (axisId === 'y' && !config.axis_y_show) {\r\n          return config.legend_show && !$$.isLegendRight && !$$.isLegendInset ? 10 : 1;\r\n      }\r\n      if (axisId === 'y2' && !config.axis_y2_show) {\r\n          return $$.rotated_padding_top;\r\n      }\r\n      // Calculate x axis height when tick rotated\r\n      if (axisId === 'x' && !config.axis_rotated && config.axis_x_tick_rotate) {\r\n          h =\r\n              30 +\r\n                  $$.axis.getMaxTickWidth(axisId) *\r\n                      Math.cos((Math.PI * (90 - Math.abs(config.axis_x_tick_rotate))) / 180);\r\n      }\r\n      // Calculate y axis height when tick rotated\r\n      if (axisId === 'y' && config.axis_rotated && config.axis_y_tick_rotate) {\r\n          h =\r\n              30 +\r\n                  $$.axis.getMaxTickWidth(axisId) *\r\n                      Math.cos((Math.PI * (90 - Math.abs(config.axis_y_tick_rotate))) / 180);\r\n      }\r\n      return (h +\r\n          ($$.axis.getLabelPositionById(axisId).isInner ? 0 : 10) +\r\n          (axisId === 'y2' ? -10 : 0));\r\n  };\n\n  ChartInternal.prototype.initBrush = function (scale) {\r\n      var $$ = this, d3 = $$.d3;\r\n      // TODO: dynamically change brushY/brushX according to axis_rotated.\r\n      $$.brush = ($$.config.axis_rotated ? d3.brushY() : d3.brushX())\r\n          .on('brush', function () {\r\n          var event = d3.event.sourceEvent;\r\n          if (event && event.type === 'zoom') {\r\n              return;\r\n          }\r\n          $$.redrawForBrush();\r\n      })\r\n          .on('end', function () {\r\n          var event = d3.event.sourceEvent;\r\n          if (event && event.type === 'zoom') {\r\n              return;\r\n          }\r\n          if ($$.brush.empty() && event && event.type !== 'end') {\r\n              $$.brush.clear();\r\n          }\r\n      });\r\n      $$.brush.updateExtent = function () {\r\n          var range = this.scale.range(), extent;\r\n          if ($$.config.axis_rotated) {\r\n              extent = [\r\n                  [0, range[0]],\r\n                  [$$.width2, range[1]]\r\n              ];\r\n          }\r\n          else {\r\n              extent = [\r\n                  [range[0], 0],\r\n                  [range[1], $$.height2]\r\n              ];\r\n          }\r\n          this.extent(extent);\r\n          return this;\r\n      };\r\n      $$.brush.updateScale = function (scale) {\r\n          this.scale = scale;\r\n          return this;\r\n      };\r\n      $$.brush.update = function (scale) {\r\n          this.updateScale(scale || $$.subX).updateExtent();\r\n          $$.context.select('.' + CLASS.brush).call(this);\r\n      };\r\n      $$.brush.clear = function () {\r\n          $$.context.select('.' + CLASS.brush).call($$.brush.move, null);\r\n      };\r\n      $$.brush.selection = function () {\r\n          return d3.brushSelection($$.context.select('.' + CLASS.brush).node());\r\n      };\r\n      $$.brush.selectionAsValue = function (selectionAsValue, withTransition) {\r\n          var selection, brush;\r\n          if (selectionAsValue) {\r\n              if ($$.context) {\r\n                  selection = [\r\n                      this.scale(selectionAsValue[0]),\r\n                      this.scale(selectionAsValue[1])\r\n                  ];\r\n                  brush = $$.context.select('.' + CLASS.brush);\r\n                  if (withTransition) {\r\n                      brush = brush.transition();\r\n                  }\r\n                  $$.brush.move(brush, selection);\r\n              }\r\n              return [];\r\n          }\r\n          selection = $$.brush.selection() || [0, 0];\r\n          return [this.scale.invert(selection[0]), this.scale.invert(selection[1])];\r\n      };\r\n      $$.brush.empty = function () {\r\n          var selection = $$.brush.selection();\r\n          return !selection || selection[0] === selection[1];\r\n      };\r\n      return $$.brush.updateScale(scale);\r\n  };\r\n  ChartInternal.prototype.initSubchart = function () {\r\n      var $$ = this, config = $$.config, context = ($$.context = $$.svg\r\n          .append('g')\r\n          .attr('transform', $$.getTranslate('context')));\r\n      // set style\r\n      context.style('visibility', 'visible');\r\n      // Define g for chart area\r\n      context\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPathForSubchart)\r\n          .attr('class', CLASS.chart);\r\n      // Define g for bar chart area\r\n      context\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartBars);\r\n      // Define g for line chart area\r\n      context\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartLines);\r\n      // Add extent rect for Brush\r\n      context\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPath)\r\n          .attr('class', CLASS.brush);\r\n      // ATTENTION: This must be called AFTER chart added\r\n      // Add Axis\r\n      $$.axes.subx = context\r\n          .append('g')\r\n          .attr('class', CLASS.axisX)\r\n          .attr('transform', $$.getTranslate('subx'))\r\n          .attr('clip-path', config.axis_rotated ? '' : $$.clipPathForXAxis)\r\n          .style('visibility', config.subchart_axis_x_show ? 'visible' : 'hidden');\r\n  };\r\n  ChartInternal.prototype.initSubchartBrush = function () {\r\n      var $$ = this;\r\n      // Add extent rect for Brush\r\n      $$.initBrush($$.subX).updateExtent();\r\n      $$.context.select('.' + CLASS.brush).call($$.brush);\r\n  };\r\n  ChartInternal.prototype.updateTargetsForSubchart = function (targets) {\r\n      var $$ = this, context = $$.context, config = $$.config, contextLineEnter, contextLine, contextBarEnter, contextBar, classChartBar = $$.classChartBar.bind($$), classBars = $$.classBars.bind($$), classChartLine = $$.classChartLine.bind($$), classLines = $$.classLines.bind($$), classAreas = $$.classAreas.bind($$);\r\n      //-- Bar --//\r\n      contextBar = context\r\n          .select('.' + CLASS.chartBars)\r\n          .selectAll('.' + CLASS.chartBar)\r\n          .data(targets);\r\n      contextBarEnter = contextBar\r\n          .enter()\r\n          .append('g')\r\n          .style('opacity', 0);\r\n      contextBarEnter.merge(contextBar).attr('class', classChartBar);\r\n      // Bars for each data\r\n      contextBarEnter.append('g').attr('class', classBars);\r\n      //-- Line --//\r\n      contextLine = context\r\n          .select('.' + CLASS.chartLines)\r\n          .selectAll('.' + CLASS.chartLine)\r\n          .data(targets);\r\n      contextLineEnter = contextLine\r\n          .enter()\r\n          .append('g')\r\n          .style('opacity', 0);\r\n      contextLineEnter.merge(contextLine).attr('class', classChartLine);\r\n      // Lines for each data\r\n      contextLineEnter.append('g').attr('class', classLines);\r\n      // Area\r\n      contextLineEnter.append('g').attr('class', classAreas);\r\n      //-- Brush --//\r\n      context\r\n          .selectAll('.' + CLASS.brush + ' rect')\r\n          .attr(config.axis_rotated ? 'width' : 'height', config.axis_rotated ? $$.width2 : $$.height2);\r\n  };\r\n  ChartInternal.prototype.updateBarForSubchart = function (durationForExit) {\r\n      var $$ = this;\r\n      var contextBar = $$.context\r\n          .selectAll('.' + CLASS.bars)\r\n          .selectAll('.' + CLASS.bar)\r\n          .data($$.barData.bind($$));\r\n      var contextBarEnter = contextBar\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classBar.bind($$))\r\n          .style('stroke', 'none')\r\n          .style('fill', $$.color);\r\n      contextBar\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      $$.contextBar = contextBarEnter\r\n          .merge(contextBar)\r\n          .style('opacity', $$.initialOpacity.bind($$));\r\n  };\r\n  ChartInternal.prototype.redrawBarForSubchart = function (drawBarOnSub, withTransition, duration) {\r\n      (withTransition\r\n          ? this.contextBar.transition(Math.random().toString()).duration(duration)\r\n          : this.contextBar)\r\n          .attr('d', drawBarOnSub)\r\n          .style('opacity', 1);\r\n  };\r\n  ChartInternal.prototype.updateLineForSubchart = function (durationForExit) {\r\n      var $$ = this;\r\n      var contextLine = $$.context\r\n          .selectAll('.' + CLASS.lines)\r\n          .selectAll('.' + CLASS.line)\r\n          .data($$.lineData.bind($$));\r\n      var contextLineEnter = contextLine\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classLine.bind($$))\r\n          .style('stroke', $$.color);\r\n      contextLine\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      $$.contextLine = contextLineEnter\r\n          .merge(contextLine)\r\n          .style('opacity', $$.initialOpacity.bind($$));\r\n  };\r\n  ChartInternal.prototype.redrawLineForSubchart = function (drawLineOnSub, withTransition, duration) {\r\n      (withTransition\r\n          ? this.contextLine.transition(Math.random().toString()).duration(duration)\r\n          : this.contextLine)\r\n          .attr('d', drawLineOnSub)\r\n          .style('opacity', 1);\r\n  };\r\n  ChartInternal.prototype.updateAreaForSubchart = function (durationForExit) {\r\n      var $$ = this, d3 = $$.d3;\r\n      var contextArea = $$.context\r\n          .selectAll('.' + CLASS.areas)\r\n          .selectAll('.' + CLASS.area)\r\n          .data($$.lineData.bind($$));\r\n      var contextAreaEnter = contextArea\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classArea.bind($$))\r\n          .style('fill', $$.color)\r\n          .style('opacity', function () {\r\n          $$.orgAreaOpacity = +d3.select(this).style('opacity');\r\n          return 0;\r\n      });\r\n      contextArea\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      $$.contextArea = contextAreaEnter.merge(contextArea).style('opacity', 0);\r\n  };\r\n  ChartInternal.prototype.redrawAreaForSubchart = function (drawAreaOnSub, withTransition, duration) {\r\n      (withTransition\r\n          ? this.contextArea.transition(Math.random().toString()).duration(duration)\r\n          : this.contextArea)\r\n          .attr('d', drawAreaOnSub)\r\n          .style('fill', this.color)\r\n          .style('opacity', this.orgAreaOpacity);\r\n  };\r\n  ChartInternal.prototype.redrawSubchart = function (withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices) {\r\n      var $$ = this, d3 = $$.d3, drawAreaOnSub, drawBarOnSub, drawLineOnSub;\r\n      // reflect main chart to extent on subchart if zoomed\r\n      if (d3.event && d3.event.type === 'zoom') {\r\n          $$.brush.selectionAsValue($$.x.orgDomain());\r\n      }\r\n      // update subchart elements if needed\r\n      if (withSubchart) {\r\n          // extent rect\r\n          if (!$$.brush.empty()) {\r\n              $$.brush.selectionAsValue($$.x.orgDomain());\r\n          }\r\n          // setup drawer - MEMO: this must be called after axis updated\r\n          drawAreaOnSub = $$.generateDrawArea(areaIndices, true);\r\n          drawBarOnSub = $$.generateDrawBar(barIndices, true);\r\n          drawLineOnSub = $$.generateDrawLine(lineIndices, true);\r\n          $$.updateBarForSubchart(duration);\r\n          $$.updateLineForSubchart(duration);\r\n          $$.updateAreaForSubchart(duration);\r\n          $$.redrawBarForSubchart(drawBarOnSub, duration, duration);\r\n          $$.redrawLineForSubchart(drawLineOnSub, duration, duration);\r\n          $$.redrawAreaForSubchart(drawAreaOnSub, duration, duration);\r\n      }\r\n  };\r\n  ChartInternal.prototype.redrawForBrush = function () {\r\n      var $$ = this, x = $$.x, d3 = $$.d3, s;\r\n      $$.redraw({\r\n          withTransition: false,\r\n          withY: $$.config.zoom_rescale,\r\n          withSubchart: false,\r\n          withUpdateXDomain: true,\r\n          withEventRect: false,\r\n          withDimension: false\r\n      });\r\n      // update zoom transation binded to event rect\r\n      s = d3.event.selection || $$.brush.scale.range();\r\n      $$.main\r\n          .select('.' + CLASS.eventRect)\r\n          .call($$.zoom.transform, d3.zoomIdentity.scale($$.width / (s[1] - s[0])).translate(-s[0], 0));\r\n      $$.config.subchart_onbrush.call($$.api, x.orgDomain());\r\n  };\r\n  ChartInternal.prototype.transformContext = function (withTransition, transitions) {\r\n      var $$ = this, subXAxis;\r\n      if (transitions && transitions.axisSubX) {\r\n          subXAxis = transitions.axisSubX;\r\n      }\r\n      else {\r\n          subXAxis = $$.context.select('.' + CLASS.axisX);\r\n          if (withTransition) {\r\n              subXAxis = subXAxis.transition();\r\n          }\r\n      }\r\n      $$.context.attr('transform', $$.getTranslate('context'));\r\n      subXAxis.attr('transform', $$.getTranslate('subx'));\r\n  };\r\n  ChartInternal.prototype.getDefaultSelection = function () {\r\n      var $$ = this, config = $$.config, selection = isFunction(config.axis_x_selection)\r\n          ? config.axis_x_selection($$.getXDomain($$.data.targets))\r\n          : config.axis_x_selection;\r\n      if ($$.isTimeSeries()) {\r\n          selection = [$$.parseDate(selection[0]), $$.parseDate(selection[1])];\r\n      }\r\n      return selection;\r\n  };\r\n  ChartInternal.prototype.removeSubchart = function () {\r\n      var $$ = this;\r\n      $$.brush = null;\r\n      $$.context.remove();\r\n      $$.context = null;\r\n  };\n\n  ChartInternal.prototype.initText = function () {\r\n      var $$ = this;\r\n      $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartTexts);\r\n      $$.mainText = $$.d3.selectAll([]);\r\n  };\r\n  ChartInternal.prototype.updateTargetsForText = function (targets) {\r\n      var $$ = this, classChartText = $$.classChartText.bind($$), classTexts = $$.classTexts.bind($$), classFocus = $$.classFocus.bind($$);\r\n      var mainText = $$.main\r\n          .select('.' + CLASS.chartTexts)\r\n          .selectAll('.' + CLASS.chartText)\r\n          .data(targets);\r\n      var mainTextEnter = mainText\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', classChartText)\r\n          .style('opacity', 0)\r\n          .style('pointer-events', 'none');\r\n      mainTextEnter.append('g').attr('class', classTexts);\r\n      mainTextEnter.merge(mainText).attr('class', function (d) {\r\n          return classChartText(d) + classFocus(d);\r\n      });\r\n  };\r\n  ChartInternal.prototype.updateText = function (xForText, yForText, durationForExit) {\r\n      var $$ = this, config = $$.config, barOrLineData = $$.barOrLineData.bind($$), classText = $$.classText.bind($$);\r\n      var mainText = $$.main\r\n          .selectAll('.' + CLASS.texts)\r\n          .selectAll('.' + CLASS.text)\r\n          .data(barOrLineData);\r\n      var mainTextEnter = mainText\r\n          .enter()\r\n          .append('text')\r\n          .attr('class', classText)\r\n          .attr('text-anchor', function (d) {\r\n          return config.axis_rotated ? (d.value < 0 ? 'end' : 'start') : 'middle';\r\n      })\r\n          .style('stroke', 'none')\r\n          .attr('x', xForText)\r\n          .attr('y', yForText)\r\n          .style('fill', function (d) {\r\n          return $$.color(d);\r\n      })\r\n          .style('fill-opacity', 0);\r\n      $$.mainText = mainTextEnter.merge(mainText).text(function (d, i, j) {\r\n          return $$.dataLabelFormat(d.id)(d.value, d.id, i, j);\r\n      });\r\n      mainText\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('fill-opacity', 0)\r\n          .remove();\r\n  };\r\n  ChartInternal.prototype.redrawText = function (xForText, yForText, forFlow, withTransition, transition) {\r\n      return [\r\n          (withTransition ? this.mainText.transition(transition) : this.mainText)\r\n              .attr('x', xForText)\r\n              .attr('y', yForText)\r\n              .style('fill', this.color)\r\n              .style('fill-opacity', forFlow ? 0 : this.opacityForText.bind(this))\r\n      ];\r\n  };\r\n  ChartInternal.prototype.getTextRect = function (text, cls, element) {\r\n      var dummy = this.d3\r\n          .select('body')\r\n          .append('div')\r\n          .classed('c3', true), svg = dummy\r\n          .append('svg')\r\n          .style('visibility', 'hidden')\r\n          .style('position', 'fixed')\r\n          .style('top', 0)\r\n          .style('left', 0), font = this.d3.select(element).style('font'), rect;\r\n      svg\r\n          .selectAll('.dummy')\r\n          .data([text])\r\n          .enter()\r\n          .append('text')\r\n          .classed(cls ? cls : '', true)\r\n          .style('font', font)\r\n          .text(text)\r\n          .each(function () {\r\n          rect = getBBox(this);\r\n      });\r\n      dummy.remove();\r\n      return rect;\r\n  };\r\n  ChartInternal.prototype.generateXYForText = function (areaIndices, barIndices, lineIndices, forX) {\r\n      var $$ = this, getAreaPoints = $$.generateGetAreaPoints(areaIndices, false), getBarPoints = $$.generateGetBarPoints(barIndices, false), getLinePoints = $$.generateGetLinePoints(lineIndices, false), getter = forX ? $$.getXForText : $$.getYForText;\r\n      return function (d, i) {\r\n          var getPoints = $$.isAreaType(d)\r\n              ? getAreaPoints\r\n              : $$.isBarType(d)\r\n                  ? getBarPoints\r\n                  : getLinePoints;\r\n          return getter.call($$, getPoints(d, i), d, this);\r\n      };\r\n  };\r\n  ChartInternal.prototype.getXForText = function (points, d, textElement) {\r\n      var $$ = this, box = getBBox(textElement), xPos, padding;\r\n      if ($$.config.axis_rotated) {\r\n          padding = $$.isBarType(d) ? 4 : 6;\r\n          xPos = points[2][1] + padding * (d.value < 0 ? -1 : 1);\r\n      }\r\n      else {\r\n          xPos = $$.hasType('bar') ? (points[2][0] + points[0][0]) / 2 : points[0][0];\r\n      }\r\n      // show labels regardless of the domain if value is null\r\n      if (d.value === null) {\r\n          if (xPos > $$.width) {\r\n              xPos = $$.width - box.width;\r\n          }\r\n          else if (xPos < 0) {\r\n              xPos = 4;\r\n          }\r\n      }\r\n      return xPos;\r\n  };\r\n  ChartInternal.prototype.getYForText = function (points, d, textElement) {\r\n      var $$ = this, box = getBBox(textElement), yPos;\r\n      if ($$.config.axis_rotated) {\r\n          yPos = (points[0][0] + points[2][0] + box.height * 0.6) / 2;\r\n      }\r\n      else {\r\n          yPos = points[2][1];\r\n          if (d.value < 0 || (d.value === 0 && !$$.hasPositiveValue)) {\r\n              yPos += box.height;\r\n              if ($$.isBarType(d) && $$.isSafari()) {\r\n                  yPos -= 3;\r\n              }\r\n              else if (!$$.isBarType(d) && $$.isChrome()) {\r\n                  yPos += 3;\r\n              }\r\n          }\r\n          else {\r\n              yPos += $$.isBarType(d) ? -3 : -6;\r\n          }\r\n      }\r\n      // show labels regardless of the domain if value is null\r\n      if (d.value === null && !$$.config.axis_rotated) {\r\n          if (yPos < box.height) {\r\n              yPos = box.height;\r\n          }\r\n          else if (yPos > this.height) {\r\n              yPos = this.height - 4;\r\n          }\r\n      }\r\n      return yPos;\r\n  };\n\n  ChartInternal.prototype.initTitle = function () {\r\n      var $$ = this;\r\n      $$.title = $$.svg\r\n          .append('text')\r\n          .text($$.config.title_text)\r\n          .attr('class', $$.CLASS.title);\r\n  };\r\n  ChartInternal.prototype.redrawTitle = function () {\r\n      var $$ = this;\r\n      $$.title.attr('x', $$.xForTitle.bind($$)).attr('y', $$.yForTitle.bind($$));\r\n  };\r\n  ChartInternal.prototype.xForTitle = function () {\r\n      var $$ = this, config = $$.config, position = config.title_position || 'left', x;\r\n      if (position.indexOf('right') >= 0) {\r\n          x =\r\n              $$.currentWidth -\r\n                  $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width -\r\n                  config.title_padding.right;\r\n      }\r\n      else if (position.indexOf('center') >= 0) {\r\n          x = Math.max(($$.currentWidth -\r\n              $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width) /\r\n              2, 0);\r\n      }\r\n      else {\r\n          // left\r\n          x = config.title_padding.left;\r\n      }\r\n      return x;\r\n  };\r\n  ChartInternal.prototype.yForTitle = function () {\r\n      var $$ = this;\r\n      return ($$.config.title_padding.top +\r\n          $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node())\r\n              .height);\r\n  };\r\n  ChartInternal.prototype.getTitlePadding = function () {\r\n      var $$ = this;\r\n      return $$.yForTitle() + $$.config.title_padding.bottom;\r\n  };\n\n  function powerOfTen(d) {\r\n      return d / Math.pow(10, Math.ceil(Math.log(d) / Math.LN10 - 1e-12)) === 1;\r\n  }\r\n  ChartInternal.prototype.drawColorScale = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, target = $$.data.targets[0], barWidth, barHeight, axis, points, legendAxis, axisScale, inverseScale, height;\r\n      barWidth = !isNaN(config.stanford_scaleWidth)\r\n          ? config.stanford_scaleWidth\r\n          : 20;\r\n      barHeight = 5;\r\n      if (barHeight < 0 || barWidth < 0) {\r\n          throw Error(\"Colorscale's barheight and barwidth must be greater than 0.\");\r\n      }\r\n      height =\r\n          $$.height - config.stanford_padding.bottom - config.stanford_padding.top;\r\n      points = d3.range(config.stanford_padding.bottom, height, barHeight);\r\n      inverseScale = d3\r\n          .scaleSequential(target.colors)\r\n          .domain([points[points.length - 1], points[0]]);\r\n      if ($$.colorScale) {\r\n          $$.colorScale.remove();\r\n      }\r\n      $$.colorScale = $$.svg\r\n          .append('g')\r\n          .attr('width', 50)\r\n          .attr('height', height)\r\n          .attr('class', CLASS.colorScale);\r\n      $$.colorScale\r\n          .append('g')\r\n          .attr('transform', \"translate(0, \" + config.stanford_padding.top + \")\")\r\n          .selectAll('bars')\r\n          .data(points)\r\n          .enter()\r\n          .append('rect')\r\n          .attr('y', function (d, i) { return i * barHeight; })\r\n          .attr('x', 0)\r\n          .attr('width', barWidth)\r\n          .attr('height', barHeight)\r\n          .attr('fill', function (d) {\r\n          return inverseScale(d);\r\n      });\r\n      // Legend Axis\r\n      axisScale = d3\r\n          .scaleLog()\r\n          .domain([target.minEpochs, target.maxEpochs])\r\n          .range([\r\n          points[0] +\r\n              config.stanford_padding.top +\r\n              points[points.length - 1] +\r\n              barHeight -\r\n              1,\r\n          points[0] + config.stanford_padding.top\r\n      ]);\r\n      legendAxis = d3.axisRight(axisScale);\r\n      if (config.stanford_scaleFormat === 'pow10') {\r\n          legendAxis.tickValues([1, 10, 100, 1000, 10000, 100000, 1000000, 10000000]);\r\n      }\r\n      else if (isFunction(config.stanford_scaleFormat)) {\r\n          legendAxis.tickFormat(config.stanford_scaleFormat);\r\n      }\r\n      else {\r\n          legendAxis.tickFormat(d3.format('d'));\r\n      }\r\n      if (isFunction(config.stanford_scaleValues)) {\r\n          legendAxis.tickValues(config.stanford_scaleValues(target.minEpochs, target.maxEpochs));\r\n      }\r\n      // Draw Axis\r\n      axis = $$.colorScale\r\n          .append('g')\r\n          .attr('class', 'legend axis')\r\n          .attr('transform', \"translate(\" + barWidth + \",0)\")\r\n          .call(legendAxis);\r\n      if (config.stanford_scaleFormat === 'pow10') {\r\n          axis\r\n              .selectAll('.tick text')\r\n              .text(null)\r\n              .filter(powerOfTen)\r\n              .text(10)\r\n              .append('tspan')\r\n              .attr('dy', '-.7em') // https://bl.ocks.org/mbostock/6738229\r\n              .text(function (d) {\r\n              return Math.round(Math.log(d) / Math.LN10);\r\n          });\r\n      }\r\n      $$.colorScale.attr('transform', \"translate(\" + ($$.currentWidth - $$.xForColorScale()) + \", 0)\");\r\n  };\r\n  ChartInternal.prototype.xForColorScale = function () {\r\n      var $$ = this;\r\n      return $$.config.stanford_padding.right + getBBox($$.colorScale.node()).width;\r\n  };\r\n  ChartInternal.prototype.getColorScalePadding = function () {\r\n      var $$ = this;\r\n      return $$.xForColorScale() + $$.config.stanford_padding.left + 20;\r\n  };\n\n  ChartInternal.prototype.isStanfordGraphType = function () {\r\n      var $$ = this;\r\n      return $$.config.data_type === 'stanford';\r\n  };\r\n  ChartInternal.prototype.initStanfordData = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, target = $$.data.targets[0], epochs, maxEpochs, minEpochs;\r\n      // Make larger values appear on top\r\n      target.values.sort(compareEpochs);\r\n      // Get array of epochs\r\n      epochs = target.values.map(function (a) { return a.epochs; });\r\n      minEpochs = !isNaN(config.stanford_scaleMin)\r\n          ? config.stanford_scaleMin\r\n          : d3.min(epochs);\r\n      maxEpochs = !isNaN(config.stanford_scaleMax)\r\n          ? config.stanford_scaleMax\r\n          : d3.max(epochs);\r\n      if (minEpochs > maxEpochs) {\r\n          throw Error('Number of minEpochs has to be smaller than maxEpochs');\r\n      }\r\n      target.colors = isFunction(config.stanford_colors)\r\n          ? config.stanford_colors\r\n          : d3.interpolateHslLong(d3.hsl(250, 1, 0.5), d3.hsl(0, 1, 0.5));\r\n      target.colorscale = d3\r\n          .scaleSequentialLog(target.colors)\r\n          .domain([minEpochs, maxEpochs]);\r\n      target.minEpochs = minEpochs;\r\n      target.maxEpochs = maxEpochs;\r\n  };\r\n  ChartInternal.prototype.getStanfordPointColor = function (d) {\r\n      var $$ = this, target = $$.data.targets[0];\r\n      return target.colorscale(d.epochs);\r\n  };\r\n  // http://jsfiddle.net/Xotic750/KtzLq/\r\n  ChartInternal.prototype.getCentroid = function (points) {\r\n      var area = getRegionArea(points);\r\n      var x = 0, y = 0, i, j, f, point1, point2;\r\n      for (i = 0, j = points.length - 1; i < points.length; j = i, i += 1) {\r\n          point1 = points[i];\r\n          point2 = points[j];\r\n          f = point1.x * point2.y - point2.x * point1.y;\r\n          x += (point1.x + point2.x) * f;\r\n          y += (point1.y + point2.y) * f;\r\n      }\r\n      f = area * 6;\r\n      return {\r\n          x: x / f,\r\n          y: y / f\r\n      };\r\n  };\r\n  ChartInternal.prototype.getStanfordTooltipTitle = function (d) {\r\n      var $$ = this, labelX = $$.axis.getLabelText('x'), labelY = $$.axis.getLabelText('y');\r\n      return \"\\n      <tr><th>\" + (labelX ? sanitise(labelX) : 'x') + \"</th><th class='value'>\" + d.x + \"</th></tr>\\n      <tr><th>\" + (labelY ? sanitise(labelY) : 'y') + \"</th><th class='value'>\" + d.value + \"</th></tr>\\n    \";\r\n  };\r\n  ChartInternal.prototype.countEpochsInRegion = function (region) {\r\n      var $$ = this, target = $$.data.targets[0], total, count;\r\n      total = target.values.reduce(function (accumulator, currentValue) { return accumulator + Number(currentValue.epochs); }, 0);\r\n      count = target.values.reduce(function (accumulator, currentValue) {\r\n          if (pointInRegion(currentValue, region)) {\r\n              return accumulator + Number(currentValue.epochs);\r\n          }\r\n          return accumulator;\r\n      }, 0);\r\n      return {\r\n          value: count,\r\n          percentage: count !== 0 ? ((count / total) * 100).toFixed(1) : 0\r\n      };\r\n  };\r\n  var getRegionArea = function (points) {\r\n      // thanks to: https://stackoverflow.com/questions/16282330/find-centerpoint-of-polygon-in-javascript\r\n      var area = 0, i, j, point1, point2;\r\n      for (i = 0, j = points.length - 1; i < points.length; j = i, i += 1) {\r\n          point1 = points[i];\r\n          point2 = points[j];\r\n          area += point1.x * point2.y;\r\n          area -= point1.y * point2.x;\r\n      }\r\n      area /= 2;\r\n      return area;\r\n  };\r\n  var pointInRegion = function (point, region) {\r\n      // thanks to: http://bl.ocks.org/bycoffe/5575904\r\n      // ray-casting algorithm based on\r\n      // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\r\n      var xi, yi, yj, xj, intersect, x = point.x, y = point.value, inside = false;\r\n      for (var i = 0, j = region.length - 1; i < region.length; j = i++) {\r\n          xi = region[i].x;\r\n          yi = region[i].y;\r\n          xj = region[j].x;\r\n          yj = region[j].y;\r\n          intersect = yi > y !== yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\r\n          if (intersect) {\r\n              inside = !inside;\r\n          }\r\n      }\r\n      return inside;\r\n  };\r\n  var compareEpochs = function (a, b) {\r\n      if (a.epochs < b.epochs) {\r\n          return -1;\r\n      }\r\n      if (a.epochs > b.epochs) {\r\n          return 1;\r\n      }\r\n      return 0;\r\n  };\n\n  ChartInternal.prototype.initStanfordElements = function () {\r\n      var $$ = this;\r\n      // Avoid blocking eventRect\r\n      $$.stanfordElements = $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.stanfordElements);\r\n      $$.stanfordElements.append('g').attr('class', CLASS.stanfordLines);\r\n      $$.stanfordElements.append('g').attr('class', CLASS.stanfordTexts);\r\n      $$.stanfordElements.append('g').attr('class', CLASS.stanfordRegions);\r\n  };\r\n  ChartInternal.prototype.updateStanfordElements = function (duration) {\r\n      var $$ = this, main = $$.main, config = $$.config, stanfordLine, stanfordLineEnter, stanfordRegion, stanfordRegionEnter, stanfordText, stanfordTextEnter, xvCustom = $$.xvCustom.bind($$), yvCustom = $$.yvCustom.bind($$), countPointsInRegion = $$.countEpochsInRegion.bind($$);\r\n      // Stanford-Lines\r\n      stanfordLine = main\r\n          .select('.' + CLASS.stanfordLines)\r\n          .style('shape-rendering', 'geometricprecision')\r\n          .selectAll('.' + CLASS.stanfordLine)\r\n          .data(config.stanford_lines);\r\n      // enter\r\n      stanfordLineEnter = stanfordLine\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (d) {\r\n          return CLASS.stanfordLine + (d['class'] ? ' ' + d['class'] : '');\r\n      });\r\n      stanfordLineEnter\r\n          .append('line')\r\n          .attr('x1', function (d) {\r\n          return config.axis_rotated ? yvCustom(d, 'value_y1') : xvCustom(d, 'value_x1');\r\n      })\r\n          .attr('x2', function (d) {\r\n          return config.axis_rotated ? yvCustom(d, 'value_y2') : xvCustom(d, 'value_x2');\r\n      })\r\n          .attr('y1', function (d) {\r\n          return config.axis_rotated ? xvCustom(d, 'value_x1') : yvCustom(d, 'value_y1');\r\n      })\r\n          .attr('y2', function (d) {\r\n          return config.axis_rotated ? xvCustom(d, 'value_x2') : yvCustom(d, 'value_y2');\r\n      })\r\n          .style('opacity', 0);\r\n      // update\r\n      $$.stanfordLines = stanfordLineEnter.merge(stanfordLine);\r\n      $$.stanfordLines\r\n          .select('line')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('x1', function (d) {\r\n          return config.axis_rotated ? yvCustom(d, 'value_y1') : xvCustom(d, 'value_x1');\r\n      })\r\n          .attr('x2', function (d) {\r\n          return config.axis_rotated ? yvCustom(d, 'value_y2') : xvCustom(d, 'value_x2');\r\n      })\r\n          .attr('y1', function (d) {\r\n          return config.axis_rotated ? xvCustom(d, 'value_x1') : yvCustom(d, 'value_y1');\r\n      })\r\n          .attr('y2', function (d) {\r\n          return config.axis_rotated ? xvCustom(d, 'value_x2') : yvCustom(d, 'value_y2');\r\n      })\r\n          .style('opacity', 1);\r\n      // exit\r\n      stanfordLine\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      // Stanford-Text\r\n      stanfordText = main\r\n          .select('.' + CLASS.stanfordTexts)\r\n          .selectAll('.' + CLASS.stanfordText)\r\n          .data(config.stanford_texts);\r\n      // enter\r\n      stanfordTextEnter = stanfordText\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (d) {\r\n          return CLASS.stanfordText + (d['class'] ? ' ' + d['class'] : '');\r\n      });\r\n      stanfordTextEnter\r\n          .append('text')\r\n          .attr('x', function (d) { return (config.axis_rotated ? yvCustom(d, 'y') : xvCustom(d, 'x')); })\r\n          .attr('y', function (d) { return (config.axis_rotated ? xvCustom(d, 'x') : yvCustom(d, 'y')); })\r\n          .style('opacity', 0);\r\n      // update\r\n      $$.stanfordTexts = stanfordTextEnter.merge(stanfordText);\r\n      $$.stanfordTexts\r\n          .select('text')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('x', function (d) { return (config.axis_rotated ? yvCustom(d, 'y') : xvCustom(d, 'x')); })\r\n          .attr('y', function (d) { return (config.axis_rotated ? xvCustom(d, 'x') : yvCustom(d, 'y')); })\r\n          .text(function (d) {\r\n          return d.content;\r\n      })\r\n          .style('opacity', 1);\r\n      // exit\r\n      stanfordText\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      // Stanford-Regions\r\n      stanfordRegion = main\r\n          .select('.' + CLASS.stanfordRegions)\r\n          .selectAll('.' + CLASS.stanfordRegion)\r\n          .data(config.stanford_regions);\r\n      // enter\r\n      stanfordRegionEnter = stanfordRegion\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (d) {\r\n          return CLASS.stanfordRegion + (d['class'] ? ' ' + d['class'] : '');\r\n      });\r\n      stanfordRegionEnter\r\n          .append('polygon')\r\n          .attr('points', function (d) {\r\n          return d.points\r\n              .map(function (value) {\r\n              return [\r\n                  config.axis_rotated ? yvCustom(value, 'y') : xvCustom(value, 'x'),\r\n                  config.axis_rotated ? xvCustom(value, 'x') : yvCustom(value, 'y')\r\n              ].join(',');\r\n          })\r\n              .join(' ');\r\n      })\r\n          .style('opacity', 0);\r\n      stanfordRegionEnter\r\n          .append('text')\r\n          .attr('x', function (d) { return $$.getCentroid(d.points).x; })\r\n          .attr('y', function (d) { return $$.getCentroid(d.points).y; })\r\n          .style('opacity', 0);\r\n      // update\r\n      $$.stanfordRegions = stanfordRegionEnter.merge(stanfordRegion);\r\n      $$.stanfordRegions\r\n          .select('polygon')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('points', function (d) {\r\n          return d.points\r\n              .map(function (value) {\r\n              return [\r\n                  config.axis_rotated ? yvCustom(value, 'y') : xvCustom(value, 'x'),\r\n                  config.axis_rotated ? xvCustom(value, 'x') : yvCustom(value, 'y')\r\n              ].join(',');\r\n          })\r\n              .join(' ');\r\n      })\r\n          .style('opacity', function (d) {\r\n          return d.opacity ? d.opacity : 0.2;\r\n      });\r\n      $$.stanfordRegions\r\n          .select('text')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('x', function (d) {\r\n          return config.axis_rotated\r\n              ? yvCustom($$.getCentroid(d.points), 'y')\r\n              : xvCustom($$.getCentroid(d.points), 'x');\r\n      })\r\n          .attr('y', function (d) {\r\n          return config.axis_rotated\r\n              ? xvCustom($$.getCentroid(d.points), 'x')\r\n              : yvCustom($$.getCentroid(d.points), 'y');\r\n      })\r\n          .text(function (d) {\r\n          if (d.text) {\r\n              var value, percentage, temp;\r\n              if ($$.isStanfordGraphType()) {\r\n                  temp = countPointsInRegion(d.points);\r\n                  value = temp.value;\r\n                  percentage = temp.percentage;\r\n              }\r\n              return d.text(value, percentage);\r\n          }\r\n          return '';\r\n      })\r\n          .attr('text-anchor', 'middle')\r\n          .attr('dominant-baseline', 'middle')\r\n          .style('opacity', 1);\r\n      // exit\r\n      stanfordRegion\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n  };\n\n  ChartInternal.prototype.initTooltip = function () {\r\n      var $$ = this, config = $$.config, i;\r\n      $$.tooltip = $$.selectChart\r\n          .style('position', 'relative')\r\n          .append('div')\r\n          .attr('class', CLASS.tooltipContainer)\r\n          .style('position', 'absolute')\r\n          .style('pointer-events', 'none')\r\n          .style('display', 'none');\r\n      // Show tooltip if needed\r\n      if (config.tooltip_init_show) {\r\n          if ($$.isTimeSeries() && isString(config.tooltip_init_x)) {\r\n              config.tooltip_init_x = $$.parseDate(config.tooltip_init_x);\r\n              for (i = 0; i < $$.data.targets[0].values.length; i++) {\r\n                  if ($$.data.targets[0].values[i].x - config.tooltip_init_x === 0) {\r\n                      break;\r\n                  }\r\n              }\r\n              config.tooltip_init_x = i;\r\n          }\r\n          $$.tooltip.html(config.tooltip_contents.call($$, $$.data.targets.map(function (d) {\r\n              return $$.addName(d.values[config.tooltip_init_x]);\r\n          }), $$.axis.getXAxisTickFormat(), $$.getYFormat($$.hasArcType()), $$.color));\r\n          $$.tooltip\r\n              .style('top', config.tooltip_init_position.top)\r\n              .style('left', config.tooltip_init_position.left)\r\n              .style('display', 'block');\r\n      }\r\n  };\r\n  ChartInternal.prototype.getTooltipSortFunction = function () {\r\n      var $$ = this, config = $$.config;\r\n      if (config.data_groups.length === 0 || config.tooltip_order !== undefined) {\r\n          // if data are not grouped or if an order is specified\r\n          // for the tooltip values we sort them by their values\r\n          var order = config.tooltip_order;\r\n          if (order === undefined) {\r\n              order = config.data_order;\r\n          }\r\n          var valueOf = function (obj) {\r\n              return obj ? obj.value : null;\r\n          };\r\n          // if data are not grouped, we sort them by their value\r\n          if (isString(order) && order.toLowerCase() === 'asc') {\r\n              return function (a, b) {\r\n                  return valueOf(a) - valueOf(b);\r\n              };\r\n          }\r\n          else if (isString(order) && order.toLowerCase() === 'desc') {\r\n              return function (a, b) {\r\n                  return valueOf(b) - valueOf(a);\r\n              };\r\n          }\r\n          else if (isFunction(order)) {\r\n              // if the function is from data_order we need\r\n              // to wrap the returned function in order to format\r\n              // the sorted value to the expected format\r\n              var sortFunction = order;\r\n              if (config.tooltip_order === undefined) {\r\n                  sortFunction = function (a, b) {\r\n                      return order(a\r\n                          ? {\r\n                              id: a.id,\r\n                              values: [a]\r\n                          }\r\n                          : null, b\r\n                          ? {\r\n                              id: b.id,\r\n                              values: [b]\r\n                          }\r\n                          : null);\r\n                  };\r\n              }\r\n              return sortFunction;\r\n          }\r\n          else if (isArray(order)) {\r\n              return function (a, b) {\r\n                  return order.indexOf(a.id) - order.indexOf(b.id);\r\n              };\r\n          }\r\n      }\r\n      else {\r\n          // if data are grouped, we follow the order of grouped targets\r\n          var ids = $$.orderTargets($$.data.targets).map(function (i) {\r\n              return i.id;\r\n          });\r\n          // if it was either asc or desc we need to invert the order\r\n          // returned by orderTargets\r\n          if ($$.isOrderAsc() || $$.isOrderDesc()) {\r\n              ids = ids.reverse();\r\n          }\r\n          return function (a, b) {\r\n              return ids.indexOf(a.id) - ids.indexOf(b.id);\r\n          };\r\n      }\r\n  };\r\n  ChartInternal.prototype.getTooltipContent = function (d, defaultTitleFormat, defaultValueFormat, color) {\r\n      var $$ = this, config = $$.config, titleFormat = config.tooltip_format_title || defaultTitleFormat, nameFormat = config.tooltip_format_name ||\r\n          function (name) {\r\n              return name;\r\n          }, text, i, title, value, name, bgcolor;\r\n      var valueFormat = config.tooltip_format_value;\r\n      if (!valueFormat) {\r\n          valueFormat = $$.isTargetNormalized(d.id)\r\n              ? function (v, ratio) { return (ratio * 100).toFixed(2) + \"%\"; }\r\n              : defaultValueFormat;\r\n      }\r\n      var tooltipSortFunction = this.getTooltipSortFunction();\r\n      if (tooltipSortFunction) {\r\n          d.sort(tooltipSortFunction);\r\n      }\r\n      for (i = 0; i < d.length; i++) {\r\n          if (!(d[i] && (d[i].value || d[i].value === 0))) {\r\n              continue;\r\n          }\r\n          if ($$.isStanfordGraphType()) {\r\n              // Custom tooltip for stanford plots\r\n              if (!text) {\r\n                  title = $$.getStanfordTooltipTitle(d[i]);\r\n                  text = \"<table class='\" + $$.CLASS.tooltip + \"'>\" + title;\r\n              }\r\n              bgcolor = $$.getStanfordPointColor(d[i]);\r\n              name = sanitise(config.data_epochs); // Epochs key name\r\n              value = d[i].epochs;\r\n          }\r\n          else {\r\n              // Regular tooltip\r\n              if (!text) {\r\n                  title = sanitise(titleFormat ? titleFormat(d[i].x, d[i].index) : d[i].x);\r\n                  text =\r\n                      \"<table class='\" +\r\n                          $$.CLASS.tooltip +\r\n                          \"'>\" +\r\n                          (title || title === 0\r\n                              ? \"<tr><th colspan='2'>\" + title + '</th></tr>'\r\n                              : '');\r\n              }\r\n              value = sanitise(valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index, d));\r\n              if (value !== undefined) {\r\n                  // Skip elements when their name is set to null\r\n                  if (d[i].name === null) {\r\n                      continue;\r\n                  }\r\n                  name = sanitise(nameFormat(d[i].name, d[i].ratio, d[i].id, d[i].index));\r\n                  bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);\r\n              }\r\n          }\r\n          if (value !== undefined) {\r\n              text +=\r\n                  \"<tr class='\" +\r\n                      $$.CLASS.tooltipName +\r\n                      '-' +\r\n                      $$.getTargetSelectorSuffix(d[i].id) +\r\n                      \"'>\";\r\n              text +=\r\n                  \"<td class='name'><span style='background-color:\" +\r\n                      bgcolor +\r\n                      \"'></span>\" +\r\n                      name +\r\n                      '</td>';\r\n              text += \"<td class='value'>\" + value + '</td>';\r\n              text += '</tr>';\r\n          }\r\n      }\r\n      return text + '</table>';\r\n  };\r\n  ChartInternal.prototype.tooltipPosition = function (dataToShow, tWidth, tHeight, element) {\r\n      var $$ = this, config = $$.config, d3 = $$.d3;\r\n      var svgLeft, tooltipLeft, tooltipRight, tooltipTop, chartRight;\r\n      var forArc = $$.hasArcType(), mouse = d3.mouse(element);\r\n      // Determin tooltip position\r\n      if (forArc) {\r\n          tooltipLeft =\r\n              ($$.width - ($$.isLegendRight ? $$.getLegendWidth() : 0)) / 2 + mouse[0];\r\n          tooltipTop =\r\n              ($$.hasType('gauge') ? $$.height : $$.height / 2) + mouse[1] + 20;\r\n      }\r\n      else {\r\n          svgLeft = $$.getSvgLeft(true);\r\n          if (config.axis_rotated) {\r\n              tooltipLeft = svgLeft + mouse[0] + 100;\r\n              tooltipRight = tooltipLeft + tWidth;\r\n              chartRight = $$.currentWidth - $$.getCurrentPaddingRight();\r\n              tooltipTop = $$.x(dataToShow[0].x) + 20;\r\n          }\r\n          else {\r\n              tooltipLeft =\r\n                  svgLeft + $$.getCurrentPaddingLeft(true) + $$.x(dataToShow[0].x) + 20;\r\n              tooltipRight = tooltipLeft + tWidth;\r\n              chartRight = svgLeft + $$.currentWidth - $$.getCurrentPaddingRight();\r\n              tooltipTop = mouse[1] + 15;\r\n          }\r\n          if (tooltipRight > chartRight) {\r\n              // 20 is needed for Firefox to keep tooltip width\r\n              tooltipLeft -= tooltipRight - chartRight + 20;\r\n          }\r\n          if (tooltipTop + tHeight > $$.currentHeight) {\r\n              tooltipTop -= tHeight + 30;\r\n          }\r\n      }\r\n      if (tooltipTop < 0) {\r\n          tooltipTop = 0;\r\n      }\r\n      return {\r\n          top: tooltipTop,\r\n          left: tooltipLeft\r\n      };\r\n  };\r\n  ChartInternal.prototype.showTooltip = function (selectedData, element) {\r\n      var $$ = this, config = $$.config;\r\n      var tWidth, tHeight, position;\r\n      var forArc = $$.hasArcType(), dataToShow = selectedData.filter(function (d) {\r\n          return d && isValue(d.value);\r\n      }), positionFunction = config.tooltip_position || ChartInternal.prototype.tooltipPosition;\r\n      if (dataToShow.length === 0 || !config.tooltip_show) {\r\n          $$.hideTooltip();\r\n          return;\r\n      }\r\n      $$.tooltip\r\n          .html(config.tooltip_contents.call($$, selectedData, $$.axis.getXAxisTickFormat(), $$.getYFormat(forArc), $$.color))\r\n          .style('display', 'block');\r\n      // Get tooltip dimensions\r\n      tWidth = $$.tooltip.property('offsetWidth');\r\n      tHeight = $$.tooltip.property('offsetHeight');\r\n      position = positionFunction.call(this, dataToShow, tWidth, tHeight, element);\r\n      // Set tooltip\r\n      $$.tooltip\r\n          .style('top', position.top + 'px')\r\n          .style('left', position.left + 'px');\r\n  };\r\n  ChartInternal.prototype.hideTooltip = function () {\r\n      this.tooltip.style('display', 'none');\r\n  };\n\n  ChartInternal.prototype.setTargetType = function (targetIds, type) {\r\n      var $$ = this, config = $$.config;\r\n      $$.mapToTargetIds(targetIds).forEach(function (id) {\r\n          $$.withoutFadeIn[id] = type === config.data_types[id];\r\n          config.data_types[id] = type;\r\n      });\r\n      if (!targetIds) {\r\n          config.data_type = type;\r\n      }\r\n  };\r\n  ChartInternal.prototype.hasType = function (type, targets) {\r\n      var $$ = this, types = $$.config.data_types, has = false;\r\n      targets = targets || $$.data.targets;\r\n      if (targets && targets.length) {\r\n          targets.forEach(function (target) {\r\n              var t = types[target.id];\r\n              if ((t && t.indexOf(type) >= 0) || (!t && type === 'line')) {\r\n                  has = true;\r\n              }\r\n          });\r\n      }\r\n      else if (Object.keys(types).length) {\r\n          Object.keys(types).forEach(function (id) {\r\n              if (types[id] === type) {\r\n                  has = true;\r\n              }\r\n          });\r\n      }\r\n      else {\r\n          has = $$.config.data_type === type;\r\n      }\r\n      return has;\r\n  };\r\n  ChartInternal.prototype.hasArcType = function (targets) {\r\n      return (this.hasType('pie', targets) ||\r\n          this.hasType('donut', targets) ||\r\n          this.hasType('gauge', targets));\r\n  };\r\n  ChartInternal.prototype.isLineType = function (d) {\r\n      var config = this.config, id = isString(d) ? d : d.id;\r\n      return (!config.data_types[id] ||\r\n          ['line', 'spline', 'area', 'area-spline', 'step', 'area-step'].indexOf(config.data_types[id]) >= 0);\r\n  };\r\n  ChartInternal.prototype.isStepType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return ['step', 'area-step'].indexOf(this.config.data_types[id]) >= 0;\r\n  };\r\n  ChartInternal.prototype.isSplineType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return ['spline', 'area-spline'].indexOf(this.config.data_types[id]) >= 0;\r\n  };\r\n  ChartInternal.prototype.isAreaType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return (['area', 'area-spline', 'area-step'].indexOf(this.config.data_types[id]) >=\r\n          0);\r\n  };\r\n  ChartInternal.prototype.isBarType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'bar';\r\n  };\r\n  ChartInternal.prototype.isScatterType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'scatter';\r\n  };\r\n  ChartInternal.prototype.isStanfordType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'stanford';\r\n  };\r\n  ChartInternal.prototype.isPieType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'pie';\r\n  };\r\n  ChartInternal.prototype.isGaugeType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'gauge';\r\n  };\r\n  ChartInternal.prototype.isDonutType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'donut';\r\n  };\r\n  ChartInternal.prototype.isArcType = function (d) {\r\n      return this.isPieType(d) || this.isDonutType(d) || this.isGaugeType(d);\r\n  };\r\n  ChartInternal.prototype.lineData = function (d) {\r\n      return this.isLineType(d) ? [d] : [];\r\n  };\r\n  ChartInternal.prototype.arcData = function (d) {\r\n      return this.isArcType(d.data) ? [d] : [];\r\n  };\r\n  /* not used\r\n   function scatterData(d) {\r\n   return isScatterType(d) ? d.values : [];\r\n   }\r\n   */\r\n  ChartInternal.prototype.barData = function (d) {\r\n      return this.isBarType(d) ? d.values : [];\r\n  };\r\n  ChartInternal.prototype.lineOrScatterOrStanfordData = function (d) {\r\n      return this.isLineType(d) || this.isScatterType(d) || this.isStanfordType(d)\r\n          ? d.values\r\n          : [];\r\n  };\r\n  ChartInternal.prototype.barOrLineData = function (d) {\r\n      return this.isBarType(d) || this.isLineType(d) ? d.values : [];\r\n  };\n\n  ChartInternal.prototype.isSafari = function () {\r\n      var ua = window.navigator.userAgent;\r\n      return ua.indexOf('Safari') >= 0 && ua.indexOf('Chrome') < 0;\r\n  };\r\n  ChartInternal.prototype.isChrome = function () {\r\n      var ua = window.navigator.userAgent;\r\n      return ua.indexOf('Chrome') >= 0;\r\n  };\n\n  ChartInternal.prototype.initZoom = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, startEvent;\r\n      $$.zoom = d3\r\n          .zoom()\r\n          .on('start', function () {\r\n          if (config.zoom_type !== 'scroll') {\r\n              return;\r\n          }\r\n          var e = d3.event.sourceEvent;\r\n          if (e && e.type === 'brush') {\r\n              return;\r\n          }\r\n          startEvent = e;\r\n          config.zoom_onzoomstart.call($$.api, e);\r\n      })\r\n          .on('zoom', function () {\r\n          if (config.zoom_type !== 'scroll') {\r\n              return;\r\n          }\r\n          var e = d3.event.sourceEvent;\r\n          if (e && e.type === 'brush') {\r\n              return;\r\n          }\r\n          $$.redrawForZoom();\r\n          config.zoom_onzoom.call($$.api, $$.x.orgDomain());\r\n      })\r\n          .on('end', function () {\r\n          if (config.zoom_type !== 'scroll') {\r\n              return;\r\n          }\r\n          var e = d3.event.sourceEvent;\r\n          if (e && e.type === 'brush') {\r\n              return;\r\n          }\r\n          // if click, do nothing. otherwise, click interaction will be canceled.\r\n          if (e &&\r\n              startEvent.clientX === e.clientX &&\r\n              startEvent.clientY === e.clientY) {\r\n              return;\r\n          }\r\n          config.zoom_onzoomend.call($$.api, $$.x.orgDomain());\r\n      });\r\n      $$.zoom.updateDomain = function () {\r\n          if (d3.event && d3.event.transform) {\r\n              if (config.axis_rotated && config.zoom_type === 'scroll' && d3.event.sourceEvent.type === 'mousemove') {\r\n                  // we're moving the mouse in a rotated chart with zoom = \"scroll\", so we need rescaleY (i.e. vertical)\r\n                  $$.x.domain(d3.event.transform.rescaleY($$.subX).domain());\r\n              }\r\n              else {\r\n                  $$.x.domain(d3.event.transform.rescaleX($$.subX).domain());\r\n              }\r\n          }\r\n          return this;\r\n      };\r\n      $$.zoom.updateExtent = function () {\r\n          this.scaleExtent([1, Infinity])\r\n              .translateExtent([\r\n              [0, 0],\r\n              [$$.width, $$.height]\r\n          ])\r\n              .extent([\r\n              [0, 0],\r\n              [$$.width, $$.height]\r\n          ]);\r\n          return this;\r\n      };\r\n      $$.zoom.update = function () {\r\n          return this.updateExtent().updateDomain();\r\n      };\r\n      return $$.zoom.updateExtent();\r\n  };\r\n  ChartInternal.prototype.zoomTransform = function (range) {\r\n      var $$ = this, s = [$$.x(range[0]), $$.x(range[1])];\r\n      return $$.d3.zoomIdentity.scale($$.width / (s[1] - s[0])).translate(-s[0], 0);\r\n  };\r\n  ChartInternal.prototype.initDragZoom = function () {\r\n      var $$ = this;\r\n      var d3 = $$.d3;\r\n      var config = $$.config;\r\n      var context = ($$.context = $$.svg);\r\n      var brushXPos = $$.margin.left + 20.5;\r\n      var brushYPos = $$.margin.top + 0.5;\r\n      if (!(config.zoom_type === 'drag' && config.zoom_enabled)) {\r\n          return;\r\n      }\r\n      var getZoomedDomain = function (selection) {\r\n          return selection && selection.map(function (x) { return $$.x.invert(x); });\r\n      };\r\n      var brush = ($$.dragZoomBrush = d3\r\n          .brushX()\r\n          .on('start', function () {\r\n          $$.api.unzoom();\r\n          $$.svg.select('.' + CLASS.dragZoom).classed('disabled', false);\r\n          config.zoom_onzoomstart.call($$.api, d3.event.sourceEvent);\r\n      })\r\n          .on('brush', function () {\r\n          config.zoom_onzoom.call($$.api, getZoomedDomain(d3.event.selection));\r\n      })\r\n          .on('end', function () {\r\n          if (d3.event.selection == null) {\r\n              return;\r\n          }\r\n          var zoomedDomain = getZoomedDomain(d3.event.selection);\r\n          if (!config.zoom_disableDefaultBehavior) {\r\n              $$.api.zoom(zoomedDomain);\r\n          }\r\n          $$.svg.select('.' + CLASS.dragZoom).classed('disabled', true);\r\n          config.zoom_onzoomend.call($$.api, zoomedDomain);\r\n      }));\r\n      context\r\n          .append('g')\r\n          .classed(CLASS.dragZoom, true)\r\n          .attr('clip-path', $$.clipPath)\r\n          .attr('transform', 'translate(' + brushXPos + ',' + brushYPos + ')')\r\n          .call(brush);\r\n  };\r\n  ChartInternal.prototype.getZoomDomain = function () {\r\n      var $$ = this, config = $$.config, d3 = $$.d3, min = d3.min([$$.orgXDomain[0], config.zoom_x_min]), max = d3.max([$$.orgXDomain[1], config.zoom_x_max]);\r\n      return [min, max];\r\n  };\r\n  ChartInternal.prototype.redrawForZoom = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, zoom = $$.zoom, x = $$.x;\r\n      if (!config.zoom_enabled) {\r\n          return;\r\n      }\r\n      if ($$.filterTargetsToShow($$.data.targets).length === 0) {\r\n          return;\r\n      }\r\n      zoom.update();\r\n      if (config.zoom_disableDefaultBehavior) {\r\n          return;\r\n      }\r\n      if ($$.isCategorized() && x.orgDomain()[0] === $$.orgXDomain[0]) {\r\n          x.domain([$$.orgXDomain[0] - 1e-10, x.orgDomain()[1]]);\r\n      }\r\n      $$.redraw({\r\n          withTransition: false,\r\n          withY: config.zoom_rescale,\r\n          withSubchart: false,\r\n          withEventRect: false,\r\n          withDimension: false\r\n      });\r\n      if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'mousemove') {\r\n          $$.cancelClick = true;\r\n      }\r\n  };\n\n  return c3;\n\n})));\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}