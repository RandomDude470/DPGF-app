{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../post/post.component\";\nfunction SousLotComponent_app_post_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-post\", 4);\n    i0.ɵɵlistener(\"notify\", function SousLotComponent_app_post_21_Template_app_post_notify_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.OnNotify($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const post_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"Post\", post_r1);\n  }\n}\nexport class SousLotComponent {\n  constructor() {\n    this.SousLot = {\n      id: '',\n      posts: [{\n        id: '123',\n        designation: 'whateveer',\n        unit: 'm',\n        total: '200',\n        qte: '10',\n        pu: '20',\n        tva: ''\n      }, {\n        id: '124',\n        designation: 'whateveer',\n        unit: 'm',\n        total: '20',\n        qte: '1',\n        pu: '20',\n        tva: ''\n      }],\n      total: ''\n    };\n    this.notify = new EventEmitter();\n  }\n  calcSum() {\n    let total = 0;\n    this.SousLot.posts.forEach(post => {\n      let subtotal = Number(post.total);\n      total += isNaN(subtotal) ? 0 : subtotal;\n    });\n    return total;\n  }\n  checkForIdAndReplace(replacement) {\n    let i = 0;\n    let flag = 0;\n    this.SousLot.posts.forEach(post => {\n      if (post.id == replacement.id) {\n        this.SousLot.posts[i] = replacement;\n        flag = 1;\n      }\n      i++;\n    });\n    return flag;\n  }\n  ngOnInit() {}\n  OnNotify(data) {\n    if (this.checkForIdAndReplace(data) == 0) {\n      data.id = String(new Date().getTime());\n      this.SousLot.posts.push(data);\n    }\n    this.SousLot.total = String(this.calcSum());\n    console.log(\"after save souslot\");\n    console.log(this.SousLot.posts);\n  }\n  OnClick() {\n    this.SousLot.posts.push({\n      id: String(new Date().getTime()),\n      designation: '',\n      unit: '',\n      total: '0',\n      qte: '',\n      pu: '',\n      tva: ''\n    });\n  }\n}\nSousLotComponent.ɵfac = function SousLotComponent_Factory(t) {\n  return new (t || SousLotComponent)();\n};\nSousLotComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SousLotComponent,\n  selectors: [[\"app-sous-lot\"]],\n  inputs: {\n    SousLot: \"SousLot\"\n  },\n  outputs: {\n    notify: \"notify\"\n  },\n  decls: 25,\n  vars: 2,\n  consts: [[1, \"container\"], [1, \"header\"], [\"style\", \"display: contents;\", 3, \"Post\", \"notify\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"newrow\", \"colspan\", \"6\", 3, \"click\"], [2, \"display\", \"contents\", 3, \"Post\", \"notify\"]],\n  template: function SousLotComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"span\");\n      i0.ɵɵtext(3, \"SousLot n 99\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"span\");\n      i0.ɵɵtext(5);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"table\")(7, \"thead\")(8, \"th\");\n      i0.ɵɵtext(9, \"Designation\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"th\");\n      i0.ɵɵtext(11, \"qte\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"th\");\n      i0.ɵɵtext(13, \"unit\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"th\");\n      i0.ɵɵtext(15, \"tva\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"th\");\n      i0.ɵɵtext(17, \"prix unitaire\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"th\");\n      i0.ɵɵtext(19, \"Total\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(20, \"tbody\");\n      i0.ɵɵtemplate(21, SousLotComponent_app_post_21_Template, 1, 1, \"app-post\", 2);\n      i0.ɵɵelementStart(22, \"tr\")(23, \"td\", 3);\n      i0.ɵɵlistener(\"click\", function SousLotComponent_Template_td_click_23_listener() {\n        return ctx.OnClick();\n      });\n      i0.ɵɵtext(24, \"+ Nouveau poste\");\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\"Total : \", ctx.SousLot.total, \"\");\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"ngForOf\", ctx.SousLot.posts);\n    }\n  },\n  dependencies: [i1.NgForOf, i2.PostComponent],\n  styles: [\"table[_ngcontent-%COMP%] {\\n  width: 100%;\\n  box-sizing: border-box;\\n}\\n\\nthead[_ngcontent-%COMP%] {\\n  background-color: rgb(103, 0, 194);\\n  color: white;\\n  height: 2rem;\\n}\\n\\n#newrow[_ngcontent-%COMP%] {\\n  color: rgb(103, 0, 194);\\n  background-color: white;\\n  border: rgb(103, 0, 194) solid 1px;\\n  padding-block: 0.2rem;\\n  border-radius: 10px;\\n  margin-top: 5rem;\\n  text-align: center;\\n  transition: background-color 0.3s;\\n  cursor: pointer;\\n}\\n#newrow[_ngcontent-%COMP%]:hover {\\n  color: white;\\n  background-color: rgb(103, 0, 194);\\n}\\n\\nth[_ngcontent-%COMP%] {\\n  padding-inline: 0.3rem;\\n  text-transform: capitalize;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZHBnZi9zb3VzLWxvdC9zb3VzLWxvdC5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy9hc3NldHMvX0dsb2JhbFZhcnMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQTtFQUNJLFdBQUE7RUFDQSxzQkFBQTtBQUZKOztBQUtBO0VBQ0ksa0NDVGE7RURVYixZQ1RlO0VEVWYsWUFBQTtBQUZKOztBQUtBO0VBQ0ksdUJDZmE7RURnQmIsdUJDZmU7RURnQmYsa0NBQUE7RUFDQSxxQkFBQTtFQUNBLG1CQUFBO0VBQ0EsZ0JBQUE7RUFDQSxrQkFBQTtFQUNBLGlDQUFBO0VBQ0EsZUFBQTtBQUZKO0FBR0k7RUFDSSxZQ3hCVztFRHlCWCxrQ0MxQlM7QUR5QmpCOztBQUlBO0VBQ0ksc0JBQUE7RUFDQSwwQkFBQTtBQURKIiwic291cmNlc0NvbnRlbnQiOlsiQHVzZSAnL3NyYy9hc3NldHMvR2xvYmFsVmFycycgYXMgdmFycztcclxuQHVzZSAnL3NyYy9hc3NldHMvbWl4aW5zJyBhcyBtaXg7XHJcblxyXG50YWJsZXtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgIFxyXG59XHJcbnRoZWFke1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFycy4kY29sb3ItcHJpbWFyeTtcclxuICAgIGNvbG9yOiB2YXJzLiRjb2xvci1zZWNvbmRhcnk7XHJcbiAgICBoZWlnaHQ6IDJyZW07XHJcbn1cclxuXHJcbiNuZXdyb3d7XHJcbiAgICBjb2xvcjogdmFycy4kY29sb3ItcHJpbWFyeTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcnMuJGNvbG9yLXNlY29uZGFyeTtcclxuICAgIGJvcmRlcjogdmFycy4kY29sb3ItcHJpbWFyeSBzb2xpZCAxcHg7XHJcbiAgICBwYWRkaW5nLWJsb2NrOiAuMnJlbTtcclxuICAgIGJvcmRlci1yYWRpdXMgOiAxMHB4O1xyXG4gICAgbWFyZ2luLXRvcDogNXJlbTtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIHRyYW5zaXRpb24gOiBiYWNrZ3JvdW5kLWNvbG9yIC4zcztcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICY6aG92ZXJ7XHJcbiAgICAgICAgY29sb3I6IHZhcnMuJGNvbG9yLXNlY29uZGFyeTtcclxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXJzLiRjb2xvci1wcmltYXJ5O1xyXG4gICAgfVxyXG59XHJcbnRoe1xyXG4gICAgcGFkZGluZy1pbmxpbmU6LjNyZW0gO1xyXG4gICAgdGV4dC10cmFuc2Zvcm0gOiBjYXBpdGFsaXplO1xyXG59IiwiJGNvbG9yLXByaW1hcnkgOiByZ2IoMTAzLCAwLCAxOTQpO1xyXG4kY29sb3Itc2Vjb25kYXJ5IDogd2hpdGU7XHJcbiRjb2xvci1iYWNrZ3JvdW5kIDogI2Y1ZjdmYiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["EventEmitter","i0","ɵɵelementStart","ɵɵlistener","SousLotComponent_app_post_21_Template_app_post_notify_0_listener","$event","ɵɵrestoreView","_r3","ctx_r2","ɵɵnextContext","ɵɵresetView","OnNotify","ɵɵelementEnd","ɵɵproperty","post_r1","SousLotComponent","constructor","SousLot","id","posts","designation","unit","total","qte","pu","tva","notify","calcSum","forEach","post","subtotal","Number","isNaN","checkForIdAndReplace","replacement","i","flag","ngOnInit","data","String","Date","getTime","push","console","log","OnClick","selectors","inputs","outputs","decls","vars","consts","template","SousLotComponent_Template","rf","ctx","ɵɵtext","ɵɵtemplate","SousLotComponent_app_post_21_Template","SousLotComponent_Template_td_click_23_listener","ɵɵadvance","ɵɵtextInterpolate1"],"sources":["C:\\Users\\Yassir\\Desktop\\web\\Angular-test\\aglo-clone\\src\\app\\dpgf\\sous-lot\\sous-lot.component.ts","C:\\Users\\Yassir\\Desktop\\web\\Angular-test\\aglo-clone\\src\\app\\dpgf\\sous-lot\\sous-lot.component.html"],"sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\n\ntype post   ={\n  id: string;\n  designation: string;\n  unit: string;\n  total: string;\n  qte: string;\n  pu: string;\n  tva: string;\n}\n\n@Component({\n  selector: 'app-sous-lot',\n  templateUrl: './sous-lot.component.html',\n  styleUrls: ['./sous-lot.component.scss']\n})\nexport class SousLotComponent implements OnInit {\n  @Input() SousLot = {\n    id : '',\n    posts : [\n      {\n        id : '123', \n        designation : 'whateveer',\n        unit : 'm',\n        total : '200',\n        qte : '10',\n        pu : '20',\n        tva : ''\n      },\n      {\n        id : '124', \n        designation : 'whateveer',\n        unit : 'm',\n        total : '20',\n        qte : '1',\n        pu : '20',\n        tva : ''\n      }\n    ],\n    total : ''\n  }\n  @Output() notify = new EventEmitter()\n\n \n  calcSum(){\n    let total = 0\n    this.SousLot.posts.forEach((post)=>{\n      let subtotal = Number(post.total)\n      total += ( isNaN(subtotal)? 0 : subtotal)\n    })\n    return total\n  }\n\n  checkForIdAndReplace( replacement : post) : 1 | 0 {\n    let i = 0 \n    let flag : 1 | 0 = 0\n    this.SousLot.posts.forEach((post)=>{\n      if (post.id == replacement.id){\n        this.SousLot.posts[i] = replacement\n        flag =1\n      }\n      i++\n    })\n    return flag\n  } \n  ngOnInit(){\n    \n  }\n  OnNotify(data : post){\n    if (this.checkForIdAndReplace(data) == 0) {\n      data.id = String(new Date().getTime())\n      this.SousLot.posts.push(data)\n    }\n    this.SousLot.total = String( this.calcSum())\n    console.log(\"after save souslot\");\n    console.log(this.SousLot.posts);\n    \n    \n    \n  }\n  OnClick(){\n    this.SousLot.posts.push({\n        id : String(new Date().getTime()), \n        designation : '',\n        unit : '',\n        total : '0',\n        qte : '',\n        pu : '',\n        tva : ''\n    })\n  }\n}\n","<div class=\"container\">\n    <div class=\"header\">\n        <span>SousLot n 99</span><span>Total : {{SousLot.total}}</span>\n    </div>\n    <table>\n        <thead>\n            <th>Designation</th>\n            <th>qte</th>\n            <th>unit</th>\n            <th>tva</th>\n            <th>prix unitaire</th>\n            <th>Total</th>\n    \n        </thead>\n        <tbody>\n          \n            <app-post *ngFor=\"let post of SousLot.posts\"  [Post]=\"post\" (notify)=\"OnNotify($event)\" style=\"display: contents;\"></app-post>\n            <tr>\n    \n                <td id=\"newrow\" colspan=\"6\" (click)=\"OnClick()\">+ Nouveau poste</td>\n            </tr>\n        </tbody>\n    </table>\n</div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}