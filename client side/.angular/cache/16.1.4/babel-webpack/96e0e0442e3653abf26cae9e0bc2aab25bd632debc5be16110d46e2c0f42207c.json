{"ast":null,"code":"import { Router } from '@angular/router';\nimport { CookieService } from 'ngx-cookie-service';\nimport { inject } from \"@angular/core\";\nimport { AuthService } from '../Services/auth.service';\nexport const loginGuard = (route, state) => {\n  const cookie = inject(CookieService);\n  const auth = inject(AuthService);\n  const router = inject(Router);\n  let token = localStorage.getItem(\"TOKEN\");\n  console.log(`cookie from auth guard  : ${token}`);\n};","map":{"version":3,"names":["Router","CookieService","inject","AuthService","loginGuard","route","state","cookie","auth","router","token","localStorage","getItem","console","log"],"sources":["C:\\Users\\Yassir\\Desktop\\web\\Angular-test\\aglo-clone\\src\\app\\auth\\login.guard.ts"],"sourcesContent":["import { CanActivateFn, Router } from '@angular/router';\r\nimport { CookieService } from 'ngx-cookie-service';\r\nimport {inject} from \"@angular/core\"\r\nimport { AuthService } from '../Services/auth.service';\r\nimport { tap } from 'rxjs';\r\n\r\nexport const loginGuard: CanActivateFn = (route, state) => {\r\n  const cookie = inject(CookieService)\r\n  const auth = inject(AuthService)\r\n  const router = inject(Router)\r\n\r\n<<<<<<< HEAD\r\n  /// Use LOcalStorage instead of cookies\r\n  //use observables \r\n  // lazy loading\r\n  //  each module has its own routing\r\n  let token = localStorage.getItem(\"TOKEN\") as string\r\n  console.log(`cookie from auth guard  : ${token}`);\r\n=======\r\n  let token = localStorage.getItem(\"TOKEN\") as string\r\n  console.log(`Token from auth guard  : ${token}`);\r\n  let Observable = auth.Validate({\"token\" : token})\r\n  return Observable.pipe(\r\n    tap((res)=>{\r\n      console.log('boolean : '+res);\r\n      \r\n      if (res) {\r\n        return true\r\n      } else {\r\n        router.navigate([\"/auth/login\"])\r\n        return false\r\n      }\r\n    })\r\n  )\r\n>>>>>>> newbranch\r\n  \r\n\r\n\r\n    \r\n  \r\n};\r\n"],"mappings":"AAAA,SAAwBA,MAAM,QAAQ,iBAAiB;AACvD,SAASC,aAAa,QAAQ,oBAAoB;AAClD,SAAQC,MAAM,QAAO,eAAe;AACpC,SAASC,WAAW,QAAQ,0BAA0B;AAGtD,OAAO,MAAMC,UAAU,GAAkBA,CAACC,KAAK,EAAEC,KAAK,KAAI;EACxD,MAAMC,MAAM,GAAGL,MAAM,CAACD,aAAa,CAAC;EACpC,MAAMO,IAAI,GAAGN,MAAM,CAACC,WAAW,CAAC;EAChC,MAAMM,MAAM,GAAGP,MAAM,CAACF,MAAM,CAAC;EAO7B,IAAIU,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAW;EACnDC,OAAO,CAACC,GAAG,CAAC,6BAA6BJ,KAAK,EAAE,CAAC;AAuBnD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}