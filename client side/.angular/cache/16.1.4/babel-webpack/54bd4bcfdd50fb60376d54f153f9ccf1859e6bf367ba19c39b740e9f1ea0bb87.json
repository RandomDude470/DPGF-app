{"ast":null,"code":"import { Router } from '@angular/router';\nimport { CookieService } from 'ngx-cookie-service';\nimport { inject } from \"@angular/core\";\nimport { AuthService } from '../Services/auth.service';\nexport const loginGuard = (route, state) => {\n  const cookie = inject(CookieService);\n  const auth = inject(AuthService);\n  const router = inject(Router);\n  /// Use LOcalStorage instead of cookies\n  //use observables \n  // lazy loading\n  //  each module has its own routing\n  let token = localStorage.getItem(\"TOKEN\");\n  console.log(`cookie from auth guard  : ${token}`);\n  return auth.Validate({\n    \"token\": token\n  }).then(res => {\n    if (res == true) {\n      return true;\n    } else {\n      router.navigate([\"/auth/login\"]);\n      return false;\n    }\n  });\n};","map":{"version":3,"names":["Router","CookieService","inject","AuthService","loginGuard","route","state","cookie","auth","router","token","localStorage","getItem","console","log","Validate","then","res","navigate"],"sources":["C:\\Users\\Yassir\\Desktop\\web\\Angular-test\\aglo-clone\\src\\app\\auth\\login.guard.ts"],"sourcesContent":["import { CanActivateFn, Router } from '@angular/router';\nimport { CookieService } from 'ngx-cookie-service';\nimport {inject} from \"@angular/core\"\nimport { AuthService } from '../Services/auth.service';\n\nexport const loginGuard: CanActivateFn = (route, state) => {\n  const cookie = inject(CookieService)\n  const auth = inject(AuthService)\n  const router = inject(Router)\n\n  /// Use LOcalStorage instead of cookies\n  //use observables \n  // lazy loading\n  //  each module has its own routing\n  let token = localStorage.getItem(\"TOKEN\") as string\n  console.log(`cookie from auth guard  : ${token}`);\n  \n  return auth.Validate({\"token\" : token}).then((res)=>{\n    if (res == true) {\n      return true\n    }else{\n      router.navigate([\"/auth/login\"])\n      return false\n    }\n  });\n    \n  \n};\n"],"mappings":"AAAA,SAAwBA,MAAM,QAAQ,iBAAiB;AACvD,SAASC,aAAa,QAAQ,oBAAoB;AAClD,SAAQC,MAAM,QAAO,eAAe;AACpC,SAASC,WAAW,QAAQ,0BAA0B;AAEtD,OAAO,MAAMC,UAAU,GAAkBA,CAACC,KAAK,EAAEC,KAAK,KAAI;EACxD,MAAMC,MAAM,GAAGL,MAAM,CAACD,aAAa,CAAC;EACpC,MAAMO,IAAI,GAAGN,MAAM,CAACC,WAAW,CAAC;EAChC,MAAMM,MAAM,GAAGP,MAAM,CAACF,MAAM,CAAC;EAE7B;EACA;EACA;EACA;EACA,IAAIU,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAW;EACnDC,OAAO,CAACC,GAAG,CAAC,6BAA6BJ,KAAK,EAAE,CAAC;EAEjD,OAAOF,IAAI,CAACO,QAAQ,CAAC;IAAC,OAAO,EAAGL;EAAK,CAAC,CAAC,CAACM,IAAI,CAAEC,GAAG,IAAG;IAClD,IAAIA,GAAG,IAAI,IAAI,EAAE;MACf,OAAO,IAAI;KACZ,MAAI;MACHR,MAAM,CAACS,QAAQ,CAAC,CAAC,aAAa,CAAC,CAAC;MAChC,OAAO,KAAK;;EAEhB,CAAC,CAAC;AAGJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}