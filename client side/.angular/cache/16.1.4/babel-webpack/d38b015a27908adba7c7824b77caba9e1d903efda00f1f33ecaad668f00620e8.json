{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../sous-lot/sous-lot.component\";\nfunction LotComponent_div_9_app_sous_lot_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-sous-lot\", 11);\n    i0.ɵɵlistener(\"notify\", function LotComponent_div_9_app_sous_lot_1_Template_app_sous_lot_notify_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.OnNotify($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const souslot_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"SousLot\", souslot_r1);\n  }\n}\nfunction LotComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtemplate(1, LotComponent_div_9_app_sous_lot_1_Template, 1, 1, \"app-sous-lot\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.Lot.sousLots.length != 0);\n  }\n}\nexport class LotComponent {\n  constructor() {\n    this.Total = 0;\n    this.Lot = {\n      _id: '3423434',\n      total: '0',\n      name: 'Lot 9',\n      sousLots: [{\n        id: 'sl11',\n        name: 'sous lot 12',\n        posts: [{\n          id: '123',\n          designation: 'whateveer',\n          unit: 'm',\n          total: '200',\n          qte: '10',\n          pu: '20',\n          tva: ''\n        }, {\n          id: '124',\n          designation: 'whateveer',\n          unit: 'm',\n          total: '20',\n          qte: '1',\n          pu: '20',\n          tva: ''\n        }],\n        total: '220'\n      }, {\n        id: 'sl12',\n        name: 'sous lot 13',\n        posts: [{\n          id: '123',\n          designation: 'whateveer',\n          unit: 'm',\n          total: '200',\n          qte: '10',\n          pu: '20',\n          tva: ''\n        }, {\n          id: '124',\n          designation: 'whateveer',\n          unit: 'm',\n          total: '20',\n          qte: '1',\n          pu: '20',\n          tva: ''\n        }],\n        total: '220'\n      }]\n    };\n    this.notify = new EventEmitter();\n    this.exit = new EventEmitter();\n    this.name = new FormControl('');\n  }\n  ///// logic functions\n  CalcSum() {\n    this.Total = 0;\n    this.Lot.sousLots.forEach(sl => {\n      let total = Number(sl.total);\n      if (!isNaN(total)) {\n        this.Total += total;\n        this.Lot.total = String(this.Total);\n      }\n    });\n  }\n  FindSousLotByIdAndReplace(replacement) {\n    let index = 0;\n    let flag = 0;\n    this.Lot.sousLots.forEach(sl => {\n      if (sl.id == replacement.id) {\n        this.Lot.sousLots[index] = replacement;\n        flag = 1;\n      }\n      index++;\n    });\n    return flag;\n  }\n  //////// Lifecycle Hooks\n  ngOnInit() {\n    this.CalcSum();\n    this.name.setValue(this.Lot.name);\n  }\n  ///// event handlers\n  OnNotify(event) {\n    console.log('Lot comp : ---------------');\n    console.log(event);\n    if (this.FindSousLotByIdAndReplace(event) == 0) {\n      this.Lot.sousLots.push(event);\n    }\n    console.log(' Lot: ++++++++++++++++++');\n    console.log(this.Lot);\n    this.CalcSum();\n    this.notify.emit(this.Lot);\n  }\n  AddSousLot() {\n    this.Lot.sousLots.push({\n      id: String(new Date().getTime()),\n      name: 'Nouveau Sous-Lot',\n      posts: [],\n      total: ''\n    });\n  }\n  UpdateName() {\n    this.Lot.name = this.name.value;\n    this.notify.emit(this.Lot);\n  }\n}\nLotComponent.ɵfac = function LotComponent_Factory(t) {\n  return new (t || LotComponent)();\n};\nLotComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LotComponent,\n  selectors: [[\"app-lot\"]],\n  inputs: {\n    Lot: \"Lot\"\n  },\n  outputs: {\n    notify: \"notify\",\n    exit: \"exit\"\n  },\n  decls: 13,\n  vars: 4,\n  consts: [[1, \"test\"], [1, \"container\"], [3, \"click\"], [1, \"header\"], [\"spellcheck\", \"false\", 1, \"name\", 3, \"formControl\", \"value\", \"change\"], [\"type\", \"button\", 3, \"click\"], [1, \"main\"], [\"class\", \"souslot\", 4, \"ngFor\", \"ngForOf\"], [1, \"add\"], [1, \"souslot\"], [3, \"SousLot\", \"notify\", 4, \"ngIf\"], [3, \"SousLot\", \"notify\"]],\n  template: function LotComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"a\", 2);\n      i0.ɵɵlistener(\"click\", function LotComponent_Template_a_click_2_listener() {\n        return ctx.exit.emit();\n      });\n      i0.ɵɵtext(3, \"<- Go Back\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"input\", 4);\n      i0.ɵɵlistener(\"change\", function LotComponent_Template_input_change_5_listener() {\n        return ctx.UpdateName();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function LotComponent_Template_button_click_6_listener() {\n        return ctx.AddSousLot();\n      });\n      i0.ɵɵtext(7, \"+ Add Section\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"div\", 6);\n      i0.ɵɵtemplate(9, LotComponent_div_9_Template, 2, 1, \"div\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 8)(11, \"span\");\n      i0.ɵɵtext(12);\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.Lot.name);\n      i0.ɵɵproperty(\"formControl\", ctx.name);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.Lot.sousLots);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"total : \", ctx.Total, \"\\u20AC\");\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlDirective, i3.SousLotComponent],\n  styles: [\".test[_ngcontent-%COMP%] {\\n  height: 100%;\\n}\\n.test[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%;\\n  gap: 2%;\\n}\\n.test[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  text-decoration-line: underline;\\n  cursor: pointer;\\n}\\n.test[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active {\\n  color: rgb(103, 0, 194);\\n}\\n.test[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%] {\\n  height: 89%;\\n  overflow-y: auto;\\n  box-sizing: border-box;\\n  padding-inline: 1rem;\\n}\\n.test[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%] {\\n  padding-block: 1%;\\n  padding-inline: 1rem;\\n  border-radius: 5px;\\n  font-size: 2rem;\\n  font-weight: 500;\\n  background: rgb(228, 214, 250);\\n  color: rgb(94, 70, 132);\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n.test[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  text-transform: capitalize;\\n  transition: background-color 0.3s;\\n  border-radius: 8px;\\n  padding: 0.3rem;\\n  font: inherit;\\n  background: inherit;\\n  border: inherit;\\n  outline: none;\\n  color: inherit;\\n}\\n.test[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover {\\n  background: #f3edfd;\\n}\\n.test[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  color: rgb(103, 0, 194);\\n  background-color: white;\\n  padding-inline: 1rem;\\n  padding-block: 0.3rem;\\n  border: none;\\n  border-radius: 20px;\\n  font-size: 1rem;\\n  font-weight: 500;\\n  box-shadow: 1px white;\\n  margin-top: 4rem;\\n  border: solid 1px rgb(103, 0, 194);\\n  cursor: pointer;\\n  transition: background-color 0.3s;\\n  margin: 0;\\n  border-radius: 5px;\\n}\\n.test[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\n  background-color: rgb(103, 0, 194);\\n  color: white;\\n  border: solid 1px white;\\n}\\n.test[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active {\\n  background-color: #3e0076;\\n}\\n\\n.add[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  border-top: rgb(103, 0, 194) solid 1px;\\n  box-sizing: border-box;\\n  padding-top: 1rem;\\n  font-size: 1.5rem;\\n  color: gray;\\n  text-transform: capitalize;\\n  font-weight: 500;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZHBnZi9sb3QvbG90LmNvbXBvbmVudC5zY3NzIiwid2VicGFjazovLy4vc3JjL2Fzc2V0cy9fR2xvYmFsVmFycy5zY3NzIiwid2VicGFjazovLy4vc3JjL2Fzc2V0cy9fbWl4aW5zLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7RUFDRSxZQUFBO0FBREY7QUFFRTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLFlBQUE7RUFDQSxPQUFBO0FBQUo7QUFDSTtFQUNFLCtCQUFBO0VBQ0EsZUFBQTtBQUNOO0FBQU07RUFDRSx1QkNiUztBRGVqQjtBQUNJO0VBQ0UsV0FBQTtFQUNBLGdCQUFBO0VBQ0Esc0JBQUE7RUFDQSxvQkFBQTtBQUNOO0FBQ0k7RUFDRSxpQkFBQTtFQUNBLG9CQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSw4QkFBQTtFQUNBLHVCQUFBO0VBQ0EsYUFBQTtFQUNBLDhCQUFBO0VBQ0EsbUJBQUE7QUFDTjtBQUFNO0VBQ0UsMEJBQUE7RUFDQSxpQ0FBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLGVBQUE7RUFDQSxhQUFBO0VBQ0EsY0FBQTtBQUVSO0FBRFE7RUFDRSxtQkFBQTtBQUdWO0FBQU07RUVwQkYsdUJEM0JhO0VDNEJiLHVCQUFBO0VBQ0Esb0JGbUI4RDtFRWxCOUQscUJGa0JvRTtFRWpCcEUsWUFBQTtFQUNBLG1CQUFBO0VBQ0EsZUZld0Q7RUVkeEQsZ0JBQUE7RUFDQSxxQkFBQTtFQUNBLGdCQUFBO0VBQ0Esa0NBQUE7RUFDQSxlQUFBO0VBQ0EsaUNBQUE7RUZVSSxTQUFBO0VBQ0Esa0JBQUE7QUFjUjtBRXhCSTtFQUNJLGtDRHpDUztFQzBDVCxZQUFBO0VBQ0EsdUJBQUE7QUYwQlI7QUFsQlE7RUFDRSx5QkFBQTtBQW9CVjs7QUFkQTtFQUNFLGFBQUE7RUFDQSx1QkFBQTtFQUNBLHNDQUFBO0VBQ0Esc0JBQUE7RUFDQSxpQkFBQTtFQUNBLGlCQUFBO0VBQ0EsV0FBQTtFQUNBLDBCQUFBO0VBQ0EsZ0JBQUE7QUFpQkYiLCJzb3VyY2VzQ29udGVudCI6WyJAdXNlIFwiL3NyYy9hc3NldHMvbWl4aW5zXCIgYXMgbTtcclxuQGltcG9ydCBcIi4uLy4uLy4uL2Fzc2V0cy9fR2xvYmFsVmFycy5zY3NzXCI7XHJcbi50ZXN0IHtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgLmNvbnRhaW5lciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIGhlaWdodDogMTAwJTtcclxuICAgIGdhcDogMiU7XHJcbiAgICBhIHtcclxuICAgICAgdGV4dC1kZWNvcmF0aW9uLWxpbmU6IHVuZGVybGluZTtcclxuICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgICAmOmFjdGl2ZSB7XHJcbiAgICAgICAgY29sb3I6ICRjb2xvci1wcmltYXJ5O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAubWFpbiB7XHJcbiAgICAgIGhlaWdodDogODklO1xyXG4gICAgICBvdmVyZmxvdy15OiBhdXRvO1xyXG4gICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgICBwYWRkaW5nLWlubGluZTogMXJlbTtcclxuICAgIH1cclxuICAgIC5oZWFkZXIge1xyXG4gICAgICBwYWRkaW5nLWJsb2NrOiAxJTtcclxuICAgICAgcGFkZGluZy1pbmxpbmU6IDFyZW07XHJcbiAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgZm9udC1zaXplOiAycmVtO1xyXG4gICAgICBmb250LXdlaWdodDogNTAwO1xyXG4gICAgICBiYWNrZ3JvdW5kOiByZ2IoMjI4LCAyMTQsIDI1MCk7XHJcbiAgICAgIGNvbG9yOiByZ2IoOTQgNzAgMTMyKTtcclxuICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICBpbnB1dCB7XHJcbiAgICAgICAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7XHJcbiAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzO1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICAgICAgICBwYWRkaW5nOiAwLjNyZW07XHJcbiAgICAgICAgZm9udDogaW5oZXJpdDtcclxuICAgICAgICBiYWNrZ3JvdW5kOiBpbmhlcml0O1xyXG4gICAgICAgIGJvcmRlcjogaW5oZXJpdDtcclxuICAgICAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgICAgIGNvbG9yOiBpbmhlcml0O1xyXG4gICAgICAgICY6aG92ZXIge1xyXG4gICAgICAgICAgYmFja2dyb3VuZDogbGlnaHRlbihyZ2IoMjI4LCAyMTQsIDI1MCksIDUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBidXR0b24ge1xyXG4gICAgICAgIEBpbmNsdWRlIG0uYnV0dG9uKCRjb2xvci1zZWNvbmRhcnksICRjb2xvci1wcmltYXJ5LCAxcmVtLCAxcmVtLCAwLjNyZW0pO1xyXG4gICAgICAgIG1hcmdpbjogMDtcclxuICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgJjphY3RpdmUge1xyXG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogZGFya2VuKCRjb2xvci1wcmltYXJ5LCAkYW1vdW50OiAxNSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbi5hZGQge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgYm9yZGVyLXRvcDogJGNvbG9yLXByaW1hcnkgc29saWQgMXB4O1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgcGFkZGluZy10b3A6IDFyZW07XHJcbiAgZm9udC1zaXplOiAxLjVyZW07XHJcbiAgY29sb3I6IGdyYXk7XHJcbiAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxufVxyXG4iLCIkY29sb3ItcHJpbWFyeSA6IHJnYigxMDMsIDAsIDE5NCk7XHJcbiRjb2xvci1zZWNvbmRhcnkgOiB3aGl0ZTtcclxuJGNvbG9yLWJhY2tncm91bmQgOiAjZjVmN2ZiIiwiQHVzZSAnLi9HbG9iYWxWYXJzJyBhcyB2YXJzO1xyXG5cclxuQG1peGluIGZsZXgtaG9yIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG59XHJcbkBtaXhpbiBmbGV4LXZlcntcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG59XHJcbkBtaXhpbiBmbGV4LXZlci1jZW57XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufVxyXG5AbWl4aW4gZmxleC1ob3ItY2Vue1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuQG1peGluIG1hcmdpbi1hdXRvLWNlbnRlciB7XHJcbiAgICBkaXNwbGF5IDogYmxvY2s7XHJcbiAgICBtYXJnaW4taW5saW5lIDogYXV0bztcclxufVxyXG5AbWl4aW4gYnV0dG9uKCRwciAsICRzZWMsJGZvbnQtc2l6ZSAsICRwYWRkaW5nLWlubGluZSwgJHBhZGRpbmctYmxvY2spIHtcclxuICAgIGNvbG9yIDogJHNlYztcclxuICAgIGJhY2tncm91bmQtY29sb3I6IGxpZ2h0ZW4oJGNvbG9yOiAkcHIgLCAkYW1vdW50OiAxMyk7XHJcbiAgICBwYWRkaW5nLWlubGluZTogJHBhZGRpbmctaW5saW5lO1xyXG4gICAgcGFkZGluZy1ibG9jazogJHBhZGRpbmctYmxvY2s7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBib3JkZXItcmFkaXVzIDogMjBweDtcclxuICAgIGZvbnQtc2l6ZSA6ICRmb250LXNpemUgO1xyXG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICAgIGJveC1zaGFkb3c6IDFweCAkcHI7XHJcbiAgICBtYXJnaW4tdG9wOiA0cmVtO1xyXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggJHNlYztcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgLjNzO1xyXG4gICAgJjpob3ZlcntcclxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkc2VjO1xyXG4gICAgICAgIGNvbG9yOiBsaWdodGVuKCRjb2xvcjogJHByICwgJGFtb3VudDogMTMpO1xyXG4gICAgICAgIGJvcmRlcjogc29saWQgMXB4IGxpZ2h0ZW4oJGNvbG9yOiAkcHIsICRhbW91bnQ6IDIwKTtcclxuXHJcbiAgICB9XHJcbn1cclxuQG1peGluIHJvdW5kLWJveCB7XHJcbiAgICBib3JkZXI6IHNvbGlkIDFweCBsaWdodGVuKCRjb2xvcjogdmFycy4kY29sb3ItcHJpbWFyeSwgJGFtb3VudDogMjApO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMzBweDtcclxuICAgIHBhZGRpbmctaW5saW5lOiAxcmVtIDtcclxuICAgIHBhZGRpbmctYmxvY2s6MnJlbSA7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["EventEmitter","FormControl","i0","ɵɵelementStart","ɵɵlistener","LotComponent_div_9_app_sous_lot_1_Template_app_sous_lot_notify_0_listener","$event","ɵɵrestoreView","_r4","ctx_r3","ɵɵnextContext","ɵɵresetView","OnNotify","ɵɵelementEnd","ɵɵproperty","souslot_r1","ɵɵtemplate","LotComponent_div_9_app_sous_lot_1_Template","ɵɵadvance","ctx_r0","Lot","sousLots","length","LotComponent","constructor","Total","_id","total","name","id","posts","designation","unit","qte","pu","tva","notify","exit","CalcSum","forEach","sl","Number","isNaN","String","FindSousLotByIdAndReplace","replacement","index","flag","ngOnInit","setValue","event","console","log","push","emit","AddSousLot","Date","getTime","UpdateName","value","selectors","inputs","outputs","decls","vars","consts","template","LotComponent_Template","rf","ctx","LotComponent_Template_a_click_2_listener","ɵɵtext","LotComponent_Template_input_change_5_listener","LotComponent_Template_button_click_6_listener","LotComponent_div_9_Template","ɵɵpropertyInterpolate","ɵɵtextInterpolate1"],"sources":["C:\\Users\\Yassir\\Desktop\\web\\Angular-test\\aglo-clone\\src\\app\\dpgf\\lot\\lot.component.ts","C:\\Users\\Yassir\\Desktop\\web\\Angular-test\\aglo-clone\\src\\app\\dpgf\\lot\\lot.component.html"],"sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { SousLot } from '../sous-lot/sous-lot.component';\nimport { FormControl } from '@angular/forms';\n\nexport type Lot = {\n  _id: string;\n  total: string;\n  name: string;\n  sousLots: Array<SousLot>;\n};\n\n@Component({\n  selector: 'app-lot',\n  templateUrl: './lot.component.html',\n  styleUrls: ['./lot.component.scss'],\n})\nexport class LotComponent implements OnInit {\n  Total: number = 0;\n\n  @Input() Lot: Lot = {\n    _id: '3423434',\n    total: '0',\n    name: 'Lot 9',\n    sousLots: [\n      {\n        id: 'sl11',\n        name: 'sous lot 12',\n        posts: [\n          {\n            id: '123',\n            designation: 'whateveer',\n            unit: 'm',\n            total: '200',\n            qte: '10',\n            pu: '20',\n            tva: '',\n          },\n          {\n            id: '124',\n            designation: 'whateveer',\n            unit: 'm',\n            total: '20',\n            qte: '1',\n            pu: '20',\n            tva: '',\n          },\n        ],\n        total: '220',\n      },\n      {\n        id: 'sl12',\n        name: 'sous lot 13',\n        posts: [\n          {\n            id: '123',\n            designation: 'whateveer',\n            unit: 'm',\n            total: '200',\n            qte: '10',\n            pu: '20',\n            tva: '',\n          },\n          {\n            id: '124',\n            designation: 'whateveer',\n            unit: 'm',\n            total: '20',\n            qte: '1',\n            pu: '20',\n            tva: '',\n          },\n        ],\n        total: '220',\n      },\n    ],\n  };\n  @Output() notify = new EventEmitter();\n\n  @Output() exit = new EventEmitter();\n  name = new FormControl('');\n\n  ///// logic functions\n  CalcSum() {\n    this.Total = 0;\n    this.Lot.sousLots.forEach((sl) => {\n      let total = Number(sl.total);\n      if (!isNaN(total)) {\n        this.Total += total;\n        this.Lot.total = String(this.Total);\n      }\n    });\n  }\n\n  FindSousLotByIdAndReplace(replacement: SousLot) {\n    let index = 0;\n    let flag = 0;\n    this.Lot.sousLots.forEach((sl) => {\n      if (sl.id == replacement.id) {\n        this.Lot.sousLots[index] = replacement;\n        flag = 1;\n      }\n      index++;\n    });\n    return flag;\n  }\n  //////// Lifecycle Hooks\n\n  ngOnInit() {\n    this.CalcSum();\n    this.name.setValue(this.Lot.name);\n  }\n\n  ///// event handlers\n  OnNotify(event: SousLot) {\n    console.log('Lot comp : ---------------');\n\n    console.log(event);\n    if (this.FindSousLotByIdAndReplace(event) == 0) {\n      this.Lot.sousLots.push(event);\n    }\n    console.log(' Lot: ++++++++++++++++++');\n    console.log(this.Lot);\n    this.CalcSum();\n    this.notify.emit(this.Lot);\n  }\n  AddSousLot() {\n    this.Lot.sousLots.push({\n      id: String(new Date().getTime()),\n      name: 'Nouveau Sous-Lot',\n      posts: [],\n      total: '',\n    });\n  }\n  UpdateName() {\n    this.Lot.name = this.name.value as string;\n    this.notify.emit(this.Lot);\n  }\n}\n","<div class=\"test\">\n        <div class=\"container\">\n            <a (click)=\"exit.emit()\">&lt;- Go Back</a>\n            <div class=\"header\">\n                <input class=\"name\" (change)=\"UpdateName()\" spellcheck=\"false\" [formControl]=\"name\" value=\"{{Lot.name}}\">\n                <button type=\"button\" (click)=\"AddSousLot()\">+ Add Section</button>\n                \n            </div>\n            <div class=\"main\">\n                <div class=\"souslot\" *ngFor=\"let souslot of Lot.sousLots\" >\n                    <app-sous-lot  *ngIf=\"Lot.sousLots.length != 0\"  [SousLot]=\"souslot\" (notify)=\"OnNotify($event)\"></app-sous-lot>\n                </div>\n            </div>\n            <div class=\"add\">\n                <span>total : {{Total}}€</span>\n            </div>\n        </div>\n</div>\n"],"mappings":"AAAA,SAAoBA,YAAY,QAA+B,eAAe;AAE9E,SAASC,WAAW,QAAQ,gBAAgB;;;;;;;;ICQxBC,EAAA,CAAAC,cAAA,uBAAiG;IAA5BD,EAAA,CAAAE,UAAA,oBAAAC,0EAAAC,MAAA;MAAAJ,EAAA,CAAAK,aAAA,CAAAC,GAAA;MAAA,MAAAC,MAAA,GAAAP,EAAA,CAAAQ,aAAA;MAAA,OAAUR,EAAA,CAAAS,WAAA,CAAAF,MAAA,CAAAG,QAAA,CAAAN,MAAA,CAAgB;IAAA,EAAC;IAACJ,EAAA,CAAAW,YAAA,EAAe;;;;IAA/DX,EAAA,CAAAY,UAAA,YAAAC,UAAA,CAAmB;;;;;IADxEb,EAAA,CAAAC,cAAA,aAA2D;IACvDD,EAAA,CAAAc,UAAA,IAAAC,0CAAA,2BAAgH;IACpHf,EAAA,CAAAW,YAAA,EAAM;;;;IADcX,EAAA,CAAAgB,SAAA,GAA8B;IAA9BhB,EAAA,CAAAY,UAAA,SAAAK,MAAA,CAAAC,GAAA,CAAAC,QAAA,CAAAC,MAAA,MAA8B;;;ADMlE,OAAM,MAAOC,YAAY;EALzBC,YAAA;IAME,KAAAC,KAAK,GAAW,CAAC;IAER,KAAAL,GAAG,GAAQ;MAClBM,GAAG,EAAE,SAAS;MACdC,KAAK,EAAE,GAAG;MACVC,IAAI,EAAE,OAAO;MACbP,QAAQ,EAAE,CACR;QACEQ,EAAE,EAAE,MAAM;QACVD,IAAI,EAAE,aAAa;QACnBE,KAAK,EAAE,CACL;UACED,EAAE,EAAE,KAAK;UACTE,WAAW,EAAE,WAAW;UACxBC,IAAI,EAAE,GAAG;UACTL,KAAK,EAAE,KAAK;UACZM,GAAG,EAAE,IAAI;UACTC,EAAE,EAAE,IAAI;UACRC,GAAG,EAAE;SACN,EACD;UACEN,EAAE,EAAE,KAAK;UACTE,WAAW,EAAE,WAAW;UACxBC,IAAI,EAAE,GAAG;UACTL,KAAK,EAAE,IAAI;UACXM,GAAG,EAAE,GAAG;UACRC,EAAE,EAAE,IAAI;UACRC,GAAG,EAAE;SACN,CACF;QACDR,KAAK,EAAE;OACR,EACD;QACEE,EAAE,EAAE,MAAM;QACVD,IAAI,EAAE,aAAa;QACnBE,KAAK,EAAE,CACL;UACED,EAAE,EAAE,KAAK;UACTE,WAAW,EAAE,WAAW;UACxBC,IAAI,EAAE,GAAG;UACTL,KAAK,EAAE,KAAK;UACZM,GAAG,EAAE,IAAI;UACTC,EAAE,EAAE,IAAI;UACRC,GAAG,EAAE;SACN,EACD;UACEN,EAAE,EAAE,KAAK;UACTE,WAAW,EAAE,WAAW;UACxBC,IAAI,EAAE,GAAG;UACTL,KAAK,EAAE,IAAI;UACXM,GAAG,EAAE,GAAG;UACRC,EAAE,EAAE,IAAI;UACRC,GAAG,EAAE;SACN,CACF;QACDR,KAAK,EAAE;OACR;KAEJ;IACS,KAAAS,MAAM,GAAG,IAAIpC,YAAY,EAAE;IAE3B,KAAAqC,IAAI,GAAG,IAAIrC,YAAY,EAAE;IACnC,KAAA4B,IAAI,GAAG,IAAI3B,WAAW,CAAC,EAAE,CAAC;;EAE1B;EACAqC,OAAOA,CAAA;IACL,IAAI,CAACb,KAAK,GAAG,CAAC;IACd,IAAI,CAACL,GAAG,CAACC,QAAQ,CAACkB,OAAO,CAAEC,EAAE,IAAI;MAC/B,IAAIb,KAAK,GAAGc,MAAM,CAACD,EAAE,CAACb,KAAK,CAAC;MAC5B,IAAI,CAACe,KAAK,CAACf,KAAK,CAAC,EAAE;QACjB,IAAI,CAACF,KAAK,IAAIE,KAAK;QACnB,IAAI,CAACP,GAAG,CAACO,KAAK,GAAGgB,MAAM,CAAC,IAAI,CAAClB,KAAK,CAAC;;IAEvC,CAAC,CAAC;EACJ;EAEAmB,yBAAyBA,CAACC,WAAoB;IAC5C,IAAIC,KAAK,GAAG,CAAC;IACb,IAAIC,IAAI,GAAG,CAAC;IACZ,IAAI,CAAC3B,GAAG,CAACC,QAAQ,CAACkB,OAAO,CAAEC,EAAE,IAAI;MAC/B,IAAIA,EAAE,CAACX,EAAE,IAAIgB,WAAW,CAAChB,EAAE,EAAE;QAC3B,IAAI,CAACT,GAAG,CAACC,QAAQ,CAACyB,KAAK,CAAC,GAAGD,WAAW;QACtCE,IAAI,GAAG,CAAC;;MAEVD,KAAK,EAAE;IACT,CAAC,CAAC;IACF,OAAOC,IAAI;EACb;EACA;EAEAC,QAAQA,CAAA;IACN,IAAI,CAACV,OAAO,EAAE;IACd,IAAI,CAACV,IAAI,CAACqB,QAAQ,CAAC,IAAI,CAAC7B,GAAG,CAACQ,IAAI,CAAC;EACnC;EAEA;EACAhB,QAAQA,CAACsC,KAAc;IACrBC,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;IAEzCD,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IAClB,IAAI,IAAI,CAACN,yBAAyB,CAACM,KAAK,CAAC,IAAI,CAAC,EAAE;MAC9C,IAAI,CAAC9B,GAAG,CAACC,QAAQ,CAACgC,IAAI,CAACH,KAAK,CAAC;;IAE/BC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;IACvCD,OAAO,CAACC,GAAG,CAAC,IAAI,CAAChC,GAAG,CAAC;IACrB,IAAI,CAACkB,OAAO,EAAE;IACd,IAAI,CAACF,MAAM,CAACkB,IAAI,CAAC,IAAI,CAAClC,GAAG,CAAC;EAC5B;EACAmC,UAAUA,CAAA;IACR,IAAI,CAACnC,GAAG,CAACC,QAAQ,CAACgC,IAAI,CAAC;MACrBxB,EAAE,EAAEc,MAAM,CAAC,IAAIa,IAAI,EAAE,CAACC,OAAO,EAAE,CAAC;MAChC7B,IAAI,EAAE,kBAAkB;MACxBE,KAAK,EAAE,EAAE;MACTH,KAAK,EAAE;KACR,CAAC;EACJ;EACA+B,UAAUA,CAAA;IACR,IAAI,CAACtC,GAAG,CAACQ,IAAI,GAAG,IAAI,CAACA,IAAI,CAAC+B,KAAe;IACzC,IAAI,CAACvB,MAAM,CAACkB,IAAI,CAAC,IAAI,CAAClC,GAAG,CAAC;EAC5B;;AAxHWG,YAAY,C;mBAAZA,YAAY;AAAA;AAAZA,YAAY,C;QAAZA,YAAY;EAAAqC,SAAA;EAAAC,MAAA;IAAAzC,GAAA;EAAA;EAAA0C,OAAA;IAAA1B,MAAA;IAAAC,IAAA;EAAA;EAAA0B,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,sBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MChBzBlE,EAAA,CAAAC,cAAA,aAAkB;MAEHD,EAAA,CAAAE,UAAA,mBAAAkE,yCAAA;QAAA,OAASD,GAAA,CAAAhC,IAAA,CAAAiB,IAAA,EAAW;MAAA,EAAC;MAACpD,EAAA,CAAAqE,MAAA,iBAAa;MAAArE,EAAA,CAAAW,YAAA,EAAI;MAC1CX,EAAA,CAAAC,cAAA,aAAoB;MACID,EAAA,CAAAE,UAAA,oBAAAoE,8CAAA;QAAA,OAAUH,GAAA,CAAAX,UAAA,EAAY;MAAA,EAAC;MAA3CxD,EAAA,CAAAW,YAAA,EAAyG;MACzGX,EAAA,CAAAC,cAAA,gBAA6C;MAAvBD,EAAA,CAAAE,UAAA,mBAAAqE,8CAAA;QAAA,OAASJ,GAAA,CAAAd,UAAA,EAAY;MAAA,EAAC;MAACrD,EAAA,CAAAqE,MAAA,oBAAa;MAAArE,EAAA,CAAAW,YAAA,EAAS;MAGvEX,EAAA,CAAAC,cAAA,aAAkB;MACdD,EAAA,CAAAc,UAAA,IAAA0D,2BAAA,iBAEM;MACVxE,EAAA,CAAAW,YAAA,EAAM;MACNX,EAAA,CAAAC,cAAA,cAAiB;MACPD,EAAA,CAAAqE,MAAA,IAAkB;MAAArE,EAAA,CAAAW,YAAA,EAAO;;;MAVqDX,EAAA,CAAAgB,SAAA,GAAoB;MAApBhB,EAAA,CAAAyE,qBAAA,UAAAN,GAAA,CAAAjD,GAAA,CAAAQ,IAAA,CAAoB;MAAzC1B,EAAA,CAAAY,UAAA,gBAAAuD,GAAA,CAAAzC,IAAA,CAAoB;MAK1C1B,EAAA,CAAAgB,SAAA,GAAe;MAAfhB,EAAA,CAAAY,UAAA,YAAAuD,GAAA,CAAAjD,GAAA,CAAAC,QAAA,CAAe;MAKlDnB,EAAA,CAAAgB,SAAA,GAAkB;MAAlBhB,EAAA,CAAA0E,kBAAA,aAAAP,GAAA,CAAA5C,KAAA,WAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}